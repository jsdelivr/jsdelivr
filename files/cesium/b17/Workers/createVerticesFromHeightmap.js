/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2013 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define("Core/freezeObject",[],function(){var e=Object.freeze;return e===void 0&&(e=function(e){return e}),e}),define("Core/defaultValue",["./freezeObject"],function(e){var t=function(e,t){return e!==void 0?e:t};return t.EMPTY_OBJECT=e({}),t}),define("Core/DeveloperError",[],function(){var e=function(e){this.name="DeveloperError",this.message=e,this.error=Error()};return e.prototype.toString=function(){var e=this.name+": "+this.message;return this.error!==void 0&&(e+=this.error.stack!==void 0?"\n"+(""+this.error.stack):"\n"+(""+this.error)),e},e}),define("Core/Cartesian3",["./defaultValue","./DeveloperError","./freezeObject"],function(e,t,r){var i=function(t,r,i){this.x=e(t,0),this.y=e(r,0),this.z=e(i,0)};i.fromSpherical=function(r,n){if(r===void 0)throw new t("spherical is required");n===void 0&&(n=new i);var o=r.clock,a=r.cone,u=e(r.magnitude,1),s=u*Math.sin(a);return n.x=s*Math.cos(o),n.y=s*Math.sin(o),n.z=u*Math.cos(a),n},i.fromArray=function(r,n,o){if(r===void 0)throw new t("values is required.");if(n+3>r.length)throw new t("offset + 3 is greater than the length of the array.");return n=e(n,0),o===void 0&&(o=new i),o.x=r[n+0],o.y=r[n+1],o.z=r[n+2],o},i.fromElements=function(e,t,r,n){return n===void 0?new i(e,t,r):(n.x=e,n.y=t,n.z=r,n)},i.clone=function(e,r){if(e===void 0)throw new t("cartesian is required");return r===void 0?new i(e.x,e.y,e.z):(r.x=e.x,r.y=e.y,r.z=e.z,r)},i.fromCartesian4=i.clone,i.getMaximumComponent=function(e){if(e===void 0)throw new t("cartesian is required");return Math.max(e.x,e.y,e.z)},i.getMinimumComponent=function(e){if(e===void 0)throw new t("cartesian is required");return Math.min(e.x,e.y,e.z)},i.magnitudeSquared=function(e){if(e===void 0)throw new t("cartesian is required");return e.x*e.x+e.y*e.y+e.z*e.z},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var n=new i;i.distance=function(e,r){if(e===void 0||r===void 0)throw new t("left and right are required.");return i.subtract(e,r,n),i.magnitude(n)},i.normalize=function(e,r){if(e===void 0)throw new t("cartesian is required");var n=i.magnitude(e);return r===void 0?new i(e.x/n,e.y/n,e.z/n):(r.x=e.x/n,r.y=e.y/n,r.z=e.z/n,r)},i.dot=function(e,r){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return e.x*r.x+e.y*r.y+e.z*r.z},i.multiplyComponents=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return n===void 0?new i(e.x*r.x,e.y*r.y,e.z*r.z):(n.x=e.x*r.x,n.y=e.y*r.y,n.z=e.z*r.z,n)},i.add=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return n===void 0?new i(e.x+r.x,e.y+r.y,e.z+r.z):(n.x=e.x+r.x,n.y=e.y+r.y,n.z=e.z+r.z,n)},i.subtract=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return n===void 0?new i(e.x-r.x,e.y-r.y,e.z-r.z):(n.x=e.x-r.x,n.y=e.y-r.y,n.z=e.z-r.z,n)},i.multiplyByScalar=function(e,r,n){if(e===void 0)throw new t("cartesian is required");if("number"!=typeof r)throw new t("scalar is required and must be a number.");return n===void 0?new i(e.x*r,e.y*r,e.z*r):(n.x=e.x*r,n.y=e.y*r,n.z=e.z*r,n)},i.divideByScalar=function(e,r,n){if(e===void 0)throw new t("cartesian is required");if("number"!=typeof r)throw new t("scalar is required and must be a number.");return n===void 0?new i(e.x/r,e.y/r,e.z/r):(n.x=e.x/r,n.y=e.y/r,n.z=e.z/r,n)},i.negate=function(e,r){if(e===void 0)throw new t("cartesian is required");return r===void 0?new i(-e.x,-e.y,-e.z):(r.x=-e.x,r.y=-e.y,r.z=-e.z,r)},i.abs=function(e,r){if(e===void 0)throw new t("cartesian is required");return r===void 0?new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z)):(r.x=Math.abs(e.x),r.y=Math.abs(e.y),r.z=Math.abs(e.z),r)};var o=new i;i.lerp=function(e,r,n,a){if(e===void 0)throw new t("start is required.");if(r===void 0)throw new t("end is required.");if("number"!=typeof n)throw new t("t is required and must be a number.");return i.multiplyByScalar(r,n,o),a=i.multiplyByScalar(e,1-n,a),i.add(o,a,a)};var a=new i,u=new i;i.angleBetween=function(e,r){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");i.normalize(e,a),i.normalize(r,u);var n=i.dot(a,u),o=i.cross(a,u,a).magnitude();return Math.atan2(o,n)};var s=new i;return i.mostOrthogonalAxis=function(e,r){if(e===void 0)throw new t("cartesian is required.");var n=i.normalize(e,s);return i.abs(n,n),r=n.y>=n.x?n.z>=n.x?i.clone(i.UNIT_X,r):i.clone(i.UNIT_Z,r):n.z>=n.y?i.clone(i.UNIT_Y,r):i.clone(i.UNIT_Z,r)},i.equals=function(e,t){return e===t||e!==void 0&&t!==void 0&&e.x===t.x&&e.y===t.y&&e.z===t.z},i.equalsEpsilon=function(e,r,i){if("number"!=typeof i)throw new t("epsilon is required and must be a number.");return e===r||e!==void 0&&r!==void 0&&i>=Math.abs(e.x-r.x)&&i>=Math.abs(e.y-r.y)&&i>=Math.abs(e.z-r.z)},i.cross=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");var o=e.x,a=e.y,u=e.z,s=r.x,d=r.y,h=r.z,c=a*h-u*d,f=u*s-o*h,w=o*d-a*s;return n===void 0?new i(c,f,w):(n.x=c,n.y=f,n.z=w,n)},i.ZERO=r(new i(0,0,0)),i.UNIT_X=r(new i(1,0,0)),i.UNIT_Y=r(new i(0,1,0)),i.UNIT_Z=r(new i(0,0,1)),i.prototype.getMaximumComponent=function(){return i.getMaximumComponent(this)},i.prototype.getMinimumComponent=function(){return i.getMinimumComponent(this)},i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.magnitudeSquared=function(){return i.magnitudeSquared(this)},i.prototype.magnitude=function(){return i.magnitude(this)},i.prototype.normalize=function(e){return i.normalize(this,e)},i.prototype.dot=function(e){return i.dot(this,e)},i.prototype.multiplyComponents=function(e,t){return i.multiplyComponents(this,e,t)},i.prototype.add=function(e,t){return i.add(this,e,t)},i.prototype.subtract=function(e,t){return i.subtract(this,e,t)},i.prototype.multiplyByScalar=function(e,t){return i.multiplyByScalar(this,e,t)},i.prototype.divideByScalar=function(e,t){return i.divideByScalar(this,e,t)},i.prototype.negate=function(e){return i.negate(this,e)},i.prototype.abs=function(e){return i.abs(this,e)},i.prototype.lerp=function(e,t,r){return i.lerp(this,e,t,r)},i.prototype.angleBetween=function(e){return i.angleBetween(this,e)},i.prototype.mostOrthogonalAxis=function(e){return i.mostOrthogonalAxis(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},i.prototype.cross=function(e,t){return i.cross(this,e,t)},i}),define("Core/Cartesian4",["./defaultValue","./DeveloperError","./freezeObject"],function(e,t,r){var i=function(t,r,i,n){this.x=e(t,0),this.y=e(r,0),this.z=e(i,0),this.w=e(n,0)};i.fromArray=function(r,n,o){if(r===void 0)throw new t("values is required.");if(n+4>r.length)throw new t("offset + 4 is greater than the length of the array.");return n=e(n,0),o===void 0&&(o=new i),o.x=r[n+0],o.y=r[n+1],o.z=r[n+2],o.w=r[n+3],o},i.fromElements=function(e,t,r,n,o){return o===void 0?new i(e,t,r,n):(o.x=e,o.y=t,o.z=r,o.w=n,o)},i.clone=function(e,r){if(e===void 0)throw new t("cartesian is required");return r===void 0?new i(e.x,e.y,e.z,e.w):(r.x=e.x,r.y=e.y,r.z=e.z,r.w=e.w,r)},i.getMaximumComponent=function(e){if(e===void 0)throw new t("cartesian is required");return Math.max(e.x,e.y,e.z,e.w)},i.getMinimumComponent=function(e){if(e===void 0)throw new t("cartesian is required");return Math.min(e.x,e.y,e.z,e.w)},i.magnitudeSquared=function(e){if(e===void 0)throw new t("cartesian is required");return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},i.magnitude=function(e){return Math.sqrt(i.magnitudeSquared(e))};var n=new i;i.distance=function(e,r){if(e===void 0||r===void 0)throw new t("left and right are required.");return i.subtract(e,r,n),i.magnitude(n)},i.normalize=function(e,r){if(e===void 0)throw new t("cartesian is required");var n=i.magnitude(e);return r===void 0?new i(e.x/n,e.y/n,e.z/n,e.w/n):(r.x=e.x/n,r.y=e.y/n,r.z=e.z/n,r.w=e.w/n,r)},i.dot=function(e,r){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return e.x*r.x+e.y*r.y+e.z*r.z+e.w*r.w},i.multiplyComponents=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return n===void 0?new i(e.x*r.x,e.y*r.y,e.z*r.z,e.w*r.w):(n.x=e.x*r.x,n.y=e.y*r.y,n.z=e.z*r.z,n.w=e.w*r.w,n)},i.add=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return n===void 0?new i(e.x+r.x,e.y+r.y,e.z+r.z,e.w+r.w):(n.x=e.x+r.x,n.y=e.y+r.y,n.z=e.z+r.z,n.w=e.w+r.w,n)},i.subtract=function(e,r,n){if(e===void 0)throw new t("left is required");if(r===void 0)throw new t("right is required");return n===void 0?new i(e.x-r.x,e.y-r.y,e.z-r.z,e.w-r.w):(n.x=e.x-r.x,n.y=e.y-r.y,n.z=e.z-r.z,n.w=e.w-r.w,n)},i.multiplyByScalar=function(e,r,n){if(e===void 0)throw new t("cartesian is required");if("number"!=typeof r)throw new t("scalar is required and must be a number.");return n===void 0?new i(e.x*r,e.y*r,e.z*r,e.w*r):(n.x=e.x*r,n.y=e.y*r,n.z=e.z*r,n.w=e.w*r,n)},i.divideByScalar=function(e,r,n){if(e===void 0)throw new t("cartesian is required");if("number"!=typeof r)throw new t("scalar is required and must be a number.");return n===void 0?new i(e.x/r,e.y/r,e.z/r,e.w/r):(n.x=e.x/r,n.y=e.y/r,n.z=e.z/r,n.w=e.w/r,n)},i.negate=function(e,r){if(e===void 0)throw new t("cartesian is required");return r===void 0?new i(-e.x,-e.y,-e.z,-e.w):(r.x=-e.x,r.y=-e.y,r.z=-e.z,r.w=-e.w,r)},i.abs=function(e,r){if(e===void 0)throw new t("cartesian is required");return r===void 0?new i(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z),Math.abs(e.w)):(r.x=Math.abs(e.x),r.y=Math.abs(e.y),r.z=Math.abs(e.z),r.w=Math.abs(e.w),r)};var o=new i;i.lerp=function(e,r,n,a){if(e===void 0)throw new t("start is required.");if(r===void 0)throw new t("end is required.");if("number"!=typeof n)throw new t("t is required and must be a number.");return i.multiplyByScalar(r,n,o),a=i.multiplyByScalar(e,1-n,a),i.add(o,a,a)};var a=new i;return i.mostOrthogonalAxis=function(e,r){if(e===void 0)throw new t("cartesian is required.");var n=i.normalize(e,a);return i.abs(n,n),r=n.y>=n.x?n.z>=n.x?n.w>=n.x?i.clone(i.UNIT_X,r):i.clone(i.UNIT_W,r):n.w>=n.z?i.clone(i.UNIT_Z,r):i.clone(i.UNIT_W,r):n.z>=n.y?n.w>=n.y?i.clone(i.UNIT_Y,r):i.clone(i.UNIT_W,r):n.w>=n.z?i.clone(i.UNIT_Z,r):i.clone(i.UNIT_W,r)},i.equals=function(e,t){return e===t||e!==void 0&&t!==void 0&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},i.equalsEpsilon=function(e,r,i){if("number"!=typeof i)throw new t("epsilon is required and must be a number.");return e===r||e!==void 0&&r!==void 0&&i>=Math.abs(e.x-r.x)&&i>=Math.abs(e.y-r.y)&&i>=Math.abs(e.z-r.z)&&i>=Math.abs(e.w-r.w)},i.ZERO=r(new i(0,0,0,0)),i.UNIT_X=r(new i(1,0,0,0)),i.UNIT_Y=r(new i(0,1,0,0)),i.UNIT_Z=r(new i(0,0,1,0)),i.UNIT_W=r(new i(0,0,0,1)),i.prototype.getMaximumComponent=function(){return i.getMaximumComponent(this)},i.prototype.getMinimumComponent=function(){return i.getMinimumComponent(this)},i.prototype.clone=function(e){return i.clone(this,e)},i.prototype.magnitudeSquared=function(){return i.magnitudeSquared(this)},i.prototype.magnitude=function(){return i.magnitude(this)},i.prototype.normalize=function(e){return i.normalize(this,e)},i.prototype.dot=function(e){return i.dot(this,e)},i.prototype.multiplyComponents=function(e,t){return i.multiplyComponents(this,e,t)},i.prototype.add=function(e,t){return i.add(this,e,t)},i.prototype.subtract=function(e,t){return i.subtract(this,e,t)},i.prototype.multiplyByScalar=function(e,t){return i.multiplyByScalar(this,e,t)},i.prototype.divideByScalar=function(e,t){return i.divideByScalar(this,e,t)},i.prototype.negate=function(e){return i.negate(this,e)},i.prototype.abs=function(e){return i.abs(this,e)},i.prototype.lerp=function(e,t,r){return i.lerp(this,e,t,r)},i.prototype.mostOrthogonalAxis=function(e){return i.mostOrthogonalAxis(this,e)},i.prototype.equals=function(e){return i.equals(this,e)},i.prototype.equalsEpsilon=function(e,t){return i.equalsEpsilon(this,e,t)},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},i}),define("Core/Math",["./defaultValue","./DeveloperError"],function(e,t){var r={};r.EPSILON1=.1,r.EPSILON2=.01,r.EPSILON3=.001,r.EPSILON4=1e-4,r.EPSILON5=1e-5,r.EPSILON6=1e-6,r.EPSILON7=1e-7,r.EPSILON8=1e-8,r.EPSILON9=1e-9,r.EPSILON10=1e-10,r.EPSILON11=1e-11,r.EPSILON12=1e-12,r.EPSILON13=1e-13,r.EPSILON14=1e-14,r.EPSILON15=1e-15,r.EPSILON16=1e-16,r.EPSILON17=1e-17,r.EPSILON18=1e-18,r.EPSILON19=1e-19,r.EPSILON20=1e-20,r.GRAVITATIONALPARAMETER=3986004418e5,r.SOLAR_RADIUS=6995e5,r.sign=function(e){return e>0?1:0>e?-1:0},r.sinh=function(e){var t=Math.pow(Math.E,e),r=Math.pow(Math.E,-1*e);return.5*(t-r)},r.cosh=function(e){var t=Math.pow(Math.E,e),r=Math.pow(Math.E,-1*e);return.5*(t+r)},r.lerp=function(e,t,r){return(1-r)*e+r*t},r.PI=Math.PI,r.ONE_OVER_PI=1/Math.PI,r.PI_OVER_TWO=.5*Math.PI,r.PI_OVER_THREE=Math.PI/3,r.PI_OVER_FOUR=Math.PI/4,r.PI_OVER_SIX=Math.PI/6,r.THREE_PI_OVER_TWO=.5*3*Math.PI,r.TWO_PI=2*Math.PI,r.ONE_OVER_TWO_PI=1/(2*Math.PI),r.RADIANS_PER_DEGREE=Math.PI/180,r.DEGREES_PER_RADIAN=180/Math.PI,r.RADIANS_PER_ARCSECOND=r.RADIANS_PER_DEGREE/3600,r.toRadians=function(e){return e*r.RADIANS_PER_DEGREE},r.toDegrees=function(e){return e*r.DEGREES_PER_RADIAN},r.convertLongitudeRange=function(e){var t=r.TWO_PI,i=e-Math.floor(e/t)*t;return-Math.PI>i?i+t:i>=Math.PI?i-t:i},r.negativePiToPi=function(e){for(var t=r.EPSILON10,i=r.PI,n=r.TWO_PI;-(i+t)>e;)e+=n;if(-i>e)return-i;for(;e>i+t;)e-=n;return e>i?i:e},r.zeroToTwoPi=function(e){var t=e%r.TWO_PI;return 0>t?(t+r.TWO_PI)%r.TWO_PI:t},r.equalsEpsilon=function(t,r,i){return i=e(i,0),i>=Math.abs(t-r)};var i=[1];return r.factorial=function(e){if("number"!=typeof e||0>e)throw new t("A number greater than or equal to 0 is required.");var r=i.length;if(e>=r)for(var n=i[r-1],o=r;e>=o;o++)i.push(n*o);return i[e]},r.incrementWrap=function(r,i,n){if(n=e(n,0),n>=i)throw new t("Maximum value must be greater than minimum value.");return++r,r>i&&(r=n),r},r.isPowerOfTwo=function(r){if("number"!=typeof r||0>r)throw new t("A number greater than or equal to 0 is required.");var i=e(r,0);return 0!==i&&0===(i&i-1)},r.clamp=function(e,t,r){return t>e?t:e>r?r:e},r}),define("Core/Cartographic",["./defaultValue","./DeveloperError","./freezeObject","./Math"],function(e,t,r,i){var n=function(t,r,i){this.longitude=e(t,0),this.latitude=e(r,0),this.height=e(i,0)};return n.fromDegrees=function(t,r,o,a){return t=i.toRadians(e(t,0)),r=i.toRadians(e(r,0)),o=e(o,0),a===void 0?new n(t,r,o):(a.longitude=t,a.latitude=r,a.height=o,a)},n.clone=function(e,r){if(e===void 0)throw new t("cartographic is required");return r===void 0?new n(e.longitude,e.latitude,e.height):(r.longitude=e.longitude,r.latitude=e.latitude,r.height=e.height,r)},n.equals=function(e,t){return e===t||e!==void 0&&t!==void 0&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},n.equalsEpsilon=function(e,r,i){if("number"!=typeof i)throw new t("epsilon is required and must be a number.");return e===r||e!==void 0&&r!==void 0&&i>=Math.abs(e.longitude-r.longitude)&&i>=Math.abs(e.latitude-r.latitude)&&i>=Math.abs(e.height-r.height)},n.toString=function(e){if(e===void 0)throw new t("cartographic is required");return"("+e.longitude+", "+e.latitude+", "+e.height+")"},n.ZERO=r(new n(0,0,0)),n.prototype.clone=function(e){return n.clone(this,e)},n.prototype.equals=function(e){return n.equals(this,e)},n.prototype.equalsEpsilon=function(e,t){return n.equalsEpsilon(this,e,t)},n.prototype.toString=function(){return n.toString(this)},n}),define("Core/Ellipsoid",["./freezeObject","./defaultValue","./DeveloperError","./Math","./Cartesian3","./Cartographic"],function(e,t,r,i,n,o){var a=function(e,o,a){if(e=t(e,0),o=t(o,0),a=t(a,0),0>e||0>o||0>a)throw new r("All radii components must be greater than or equal to zero.");this._radii=new n(e,o,a),this._radiiSquared=new n(e*e,o*o,a*a),this._radiiToTheFourth=new n(e*e*e*e,o*o*o*o,a*a*a*a),this._oneOverRadii=new n(0===e?0:1/e,0===o?0:1/o,0===a?0:1/a),this._oneOverRadiiSquared=new n(0===e?0:1/(e*e),0===o?0:1/(o*o),0===a?0:1/(a*a)),this._minimumRadius=Math.min(e,o,a),this._maximumRadius=Math.max(e,o,a),this._centerToleranceSquared=i.EPSILON1};a.clone=function(e,t){var r=e._radii;return t===void 0?new a(r.x,r.y,r.z):(n.clone(r,t._radii),n.clone(e._radiiSquared,t._radiiSquared),n.clone(e._radiiToTheFourth,t._radiiToTheFourth),n.clone(e._oneOverRadii,t._oneOverRadii),n.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t)},a.fromCartesian3=function(e){return e===void 0?new a:new a(e.x,e.y,e.z)},a.WGS84=e(new a(6378137,6378137,6356752.314245179)),a.UNIT_SPHERE=e(new a(1,1,1)),a.prototype.getRadii=function(){return this._radii},a.prototype.getRadiiSquared=function(){return this._radiiSquared},a.prototype.getRadiiToTheFourth=function(){return this._radiiToTheFourth},a.prototype.getOneOverRadii=function(){return this._oneOverRadii},a.prototype.getOneOverRadiiSquared=function(){return this._oneOverRadiiSquared},a.prototype.getMinimumRadius=function(){return this._minimumRadius},a.prototype.getMaximumRadius=function(){return this._maximumRadius},a.prototype.geocentricSurfaceNormal=n.normalize,a.prototype.geodeticSurfaceNormalCartographic=function(e,t){if(e===void 0)throw new r("cartographic is required.");var i=e.longitude,o=e.latitude,a=Math.cos(o),u=a*Math.cos(i),s=a*Math.sin(i),d=Math.sin(o);return t===void 0&&(t=new n),t.x=u,t.y=s,t.z=d,n.normalize(t,t)},a.prototype.geodeticSurfaceNormal=function(e,t){return t=n.multiplyComponents(e,this._oneOverRadiiSquared,t),n.normalize(t,t)};var u=new n,s=new n;a.prototype.cartographicToCartesian=function(e,t){var r=u,i=s;this.geodeticSurfaceNormalCartographic(e,r),n.multiplyComponents(this._radiiSquared,r,i);var o=Math.sqrt(n.dot(r,i));return n.divideByScalar(i,o,i),n.multiplyByScalar(r,e.height,r),n.add(i,r,t)},a.prototype.cartographicArrayToCartesianArray=function(e,t){if(e===void 0)throw new r("cartographics is required.");var i=e.length;t===void 0?t=Array(i):t.length=i;for(var n=0;i>n;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var d=new n,h=new n,c=new n;a.prototype.cartesianToCartographic=function(e,t){var r=this.scaleToGeodeticSurface(e,h);if(r===void 0)return void 0;var a=this.geodeticSurfaceNormal(r,d),u=n.subtract(e,r,c),s=Math.atan2(a.y,a.x),f=Math.asin(a.z),w=i.sign(n.dot(u,e))*n.magnitude(u);return t===void 0?new o(s,f,w):(t.longitude=s,t.latitude=f,t.height=w,t)},a.prototype.cartesianArrayToCartographicArray=function(e,t){if(e===void 0)throw new r("cartesians is required.");var i=e.length;t===void 0?t=Array(i):t.length=i;for(var n=0;i>n;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t};var f,w=new n;return a.prototype.scaleToGeodeticSurface=function(e,t){if(e===void 0)throw new r("cartesian is required.");var o=e.x,a=e.y,u=e.z,s=this._oneOverRadii,d=s.x,h=s.y,c=s.z,l=o*o*d*d,p=a*a*h*h,v=u*u*c*c,m=l+p+v,y=Math.sqrt(1/m),g=n.multiplyByScalar(e,y,f);if(this._centerToleranceSquared>m)return isFinite(y)?n.clone(g,t):void 0;var q=this._oneOverRadiiSquared,x=q.x,z=q.y,b=q.z,M=w;M.x=2*g.x*x,M.y=2*g.y*z,M.z=2*g.z*b;var S,E,O,R,C,_,T,P,I,N,U,A=(1-y)*n.magnitude(e)/(.5*n.magnitude(M)),L=0;do{A-=L,O=1/(1+A*x),R=1/(1+A*z),C=1/(1+A*b),_=O*O,T=R*R,P=C*C,I=_*O,N=T*R,U=P*C,S=l*_+p*T+v*P-1,E=l*I*x+p*N*z+v*U*b;var W=-2*E;L=S/W}while(Math.abs(S)>i.EPSILON12);return t===void 0?new n(o*O,a*R,u*C):(t.x=o*O,t.y=a*R,t.z=u*C,t)},a.prototype.scaleToGeocentricSurface=function(e,t){if(e===void 0)throw new r("cartesian is required.");var i=e.x,o=e.y,a=e.z,u=this._oneOverRadiiSquared,s=1/Math.sqrt(i*i*u.x+o*o*u.y+a*a*u.z);return n.multiplyByScalar(e,s,t)},a.prototype.transformPositionToScaledSpace=function(e,t){return n.multiplyComponents(e,this._oneOverRadii,t)},a.prototype.equals=function(e){return this===e||e!==void 0&&n.equals(this._radii,e._radii)},a.prototype.toString=function(){return""+this._radii},a}),define("Core/GeographicProjection",["./defaultValue","./Cartesian3","./Cartographic","./Ellipsoid"],function(e,t,r,i){var n=function(t){this._ellipsoid=e(t,i.WGS84),this._semimajorAxis=this._ellipsoid.getMaximumRadius(),this._oneOverSemimajorAxis=1/this._semimajorAxis};return n.prototype.getEllipsoid=function(){return this._ellipsoid},n.prototype.project=function(e,r){var i=this._semimajorAxis,n=e.longitude*i,o=e.latitude*i,a=e.height;return r===void 0?new t(n,o,a):(r.x=n,r.y=o,r.z=a,r)},n.prototype.unproject=function(e,t){var i=this._oneOverSemimajorAxis,n=e.x*i,o=e.y*i,a=e.z;return t===void 0?new r(n,o,a):(t.longitude=n,t.latitude=o,t.height=a,t)},n}),define("Core/Enumeration",[],function(){var e=function(e,t,r){if(this.value=e,this.name=t,r!==void 0)for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i])};return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.name},e}),define("Core/Intersect",["./Enumeration"],function(e){var t={OUTSIDE:new e(-1,"OUTSIDE"),INTERSECTING:new e(0,"INTERSECTING"),INSIDE:new e(1,"INSIDE")};return t}),define("Core/Interval",["./defaultValue"],function(e){var t=function(t,r){this.start=e(t,0),this.stop=e(r,0)};return t}),define("Core/Matrix3",["./Cartesian3","./defaultValue","./DeveloperError","./freezeObject"],function(e,t,r,i){var n=function(e,r,i,n,o,a,u,s,d){this[0]=t(e,0),this[1]=t(n,0),this[2]=t(u,0),this[3]=t(r,0),this[4]=t(o,0),this[5]=t(s,0),this[6]=t(i,0),this[7]=t(a,0),this[8]=t(d,0)};return n.clone=function(e,t){if(e===void 0)throw new r("values is required");return t===void 0?new n(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t)},n.fromColumnMajorArray=n.clone,n.fromRowMajorArray=function(e,t){if(e===void 0)throw new r("values is required.");return t===void 0?new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t)},n.fromQuaternion=function(e,t){if(e===void 0)throw new r("quaternion is required");var i=e.x*e.x,o=e.x*e.y,a=e.x*e.z,u=e.x*e.w,s=e.y*e.y,d=e.y*e.z,h=e.y*e.w,c=e.z*e.z,f=e.z*e.w,w=e.w*e.w,l=i-s-c+w,p=2*(o+f),v=2*(a-h),m=2*(o-f),y=-i+s-c+w,g=2*(d+u),q=2*(a+h),x=2*(d-u),z=-i-s+c+w;return t===void 0?new n(l,p,v,m,y,g,q,x,z):(t[0]=l,t[1]=m,t[2]=q,t[3]=p,t[4]=y,t[5]=x,t[6]=v,t[7]=g,t[8]=z,t)},n.fromScale=function(e,t){if(e===void 0)throw new r("scale is required.");return t===void 0?new n(e.x,0,0,0,e.y,0,0,0,e.z):(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t)},n.fromUniformScale=function(e,t){if("number"!=typeof e)throw new r("scale is required.");return t===void 0?new n(e,0,0,0,e,0,0,0,e):(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t)},n.fromRotationX=function(e,t){if(e===void 0)throw new r("angle is required.");var i=Math.cos(e),o=Math.sin(e);return t===void 0?new n(1,0,0,0,i,-o,0,o,i):(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=i,t[5]=o,t[6]=0,t[7]=-o,t[8]=i,t)},n.fromRotationY=function(e,t){if(e===void 0)throw new r("angle is required.");var i=Math.cos(e),o=Math.sin(e);return t===void 0?new n(i,0,o,0,1,0,-o,0,i):(t[0]=i,t[1]=0,t[2]=-o,t[3]=0,t[4]=1,t[5]=0,t[6]=o,t[7]=0,t[8]=i,t)},n.fromRotationZ=function(e,t){if(e===void 0)throw new r("angle is required.");var i=Math.cos(e),o=Math.sin(e);return t===void 0?new n(i,-o,0,o,i,0,0,0,1):(t[0]=i,t[1]=o,t[2]=0,t[3]=-o,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t)},n.toArray=function(e,t){if(e===void 0)throw new r("matrix is required");return t===void 0?[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t)},n.getElementIndex=function(e,t){if("number"!=typeof t||0>t||t>2)throw new r("row is required and must be 0, 1, or 2.");if("number"!=typeof e||0>e||e>2)throw new r("column is required and must be 0, 1, or 2.");return 3*e+t},n.getColumn=function(t,i,n){if(t===void 0)throw new r("matrix is required.");if("number"!=typeof i||0>i||i>2)throw new r("index is required and must be 0, 1, or 2.");var o=3*i,a=t[o],u=t[o+1],s=t[o+2];return n===void 0?new e(a,u,s):(n.x=a,n.y=u,n.z=s,n)},n.setColumn=function(e,t,i,o){if(e===void 0)throw new r("matrix is required");if(i===void 0)throw new r("cartesian is required");if("number"!=typeof t||0>t||t>2)throw new r("index is required and must be 0, 1, or 2.");o=n.clone(e,o);var a=3*t;return o[a]=i.x,o[a+1]=i.y,o[a+2]=i.z,o},n.getRow=function(t,i,n){if(t===void 0)throw new r("matrix is required.");if("number"!=typeof i||0>i||i>2)throw new r("index is required and must be 0, 1, or 2.");var o=t[i],a=t[i+3],u=t[i+6];return n===void 0?new e(o,a,u):(n.x=o,n.y=a,n.z=u,n)},n.setRow=function(e,t,i,o){if(e===void 0)throw new r("matrix is required");if(i===void 0)throw new r("cartesian is required");if("number"!=typeof t||0>t||t>2)throw new r("index is required and must be 0, 1, or 2.");return o=n.clone(e,o),o[t]=i.x,o[t+3]=i.y,o[t+6]=i.z,o},n.multiply=function(e,t,i){if(e===void 0)throw new r("left is required");if(t===void 0)throw new r("right is required");var o=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],u=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],s=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],d=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],h=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],f=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],w=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return i===void 0?new n(o,s,c,a,d,f,u,h,w):(i[0]=o,i[1]=a,i[2]=u,i[3]=s,i[4]=d,i[5]=h,i[6]=c,i[7]=f,i[8]=w,i)},n.multiplyByVector=function(t,i,n){if(t===void 0)throw new r("matrix is required");if(i===void 0)throw new r("cartesian is required");var o=i.x,a=i.y,u=i.z,s=t[0]*o+t[3]*a+t[6]*u,d=t[1]*o+t[4]*a+t[7]*u,h=t[2]*o+t[5]*a+t[8]*u;return n===void 0?new e(s,d,h):(n.x=s,n.y=d,n.z=h,n)},n.multiplyByScalar=function(e,t,i){if(e===void 0)throw new r("matrix is required");if("number"!=typeof t)throw new r("scalar is required and must be a number");return i===void 0?new n(e[0]*t,e[3]*t,e[6]*t,e[1]*t,e[4]*t,e[7]*t,e[2]*t,e[5]*t,e[8]*t):(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t,i[3]=e[3]*t,i[4]=e[4]*t,i[5]=e[5]*t,i[6]=e[6]*t,i[7]=e[7]*t,i[8]=e[8]*t,i)},n.negate=function(e,t){if(e===void 0)throw new r("matrix is required");return t===void 0?new n(-e[0],-e[3],-e[6],-e[1],-e[4],-e[7],-e[2],-e[5],-e[8]):(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t)},n.transpose=function(e,t){if(e===void 0)throw new r("matrix is required");var i=e[0],o=e[3],a=e[6],u=e[1],s=e[4],d=e[7],h=e[2],c=e[5],f=e[8];return t===void 0?new n(i,u,h,o,s,c,a,d,f):(t[0]=i,t[1]=o,t[2]=a,t[3]=u,t[4]=s,t[5]=d,t[6]=h,t[7]=c,t[8]=f,t)},n.equals=function(e,t){return e===t||e!==void 0&&t!==void 0&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},n.equalsEpsilon=function(e,t,i){if("number"!=typeof i)throw new r("epsilon is required and must be a number");return e===t||e!==void 0&&t!==void 0&&i>=Math.abs(e[0]-t[0])&&i>=Math.abs(e[1]-t[1])&&i>=Math.abs(e[2]-t[2])&&i>=Math.abs(e[3]-t[3])&&i>=Math.abs(e[4]-t[4])&&i>=Math.abs(e[5]-t[5])&&i>=Math.abs(e[6]-t[6])&&i>=Math.abs(e[7]-t[7])&&i>=Math.abs(e[8]-t[8])},n.IDENTITY=i(new n(1,0,0,0,1,0,0,0,1)),n.COLUMN0ROW0=0,n.COLUMN0ROW1=1,n.COLUMN0ROW2=2,n.COLUMN1ROW0=3,n.COLUMN1ROW1=4,n.COLUMN1ROW2=5,n.COLUMN2ROW0=6,n.COLUMN2ROW1=7,n.COLUMN2ROW2=8,n.prototype.clone=function(e){return n.clone(this,e)},n.prototype.toArray=function(e){return n.toArray(this,e)},n.prototype.getColumn=function(e,t){return n.getColumn(this,e,t)},n.prototype.setColumn=function(e,t,r){return n.setColumn(this,e,t,r)},n.prototype.getRow=function(e,t){return n.getRow(this,e,t)},n.prototype.setRow=function(e,t,r){return n.setRow(this,e,t,r)},n.prototype.multiply=function(e,t){return n.multiply(this,e,t)},n.prototype.multiplyByVector=function(e,t){return n.multiplyByVector(this,e,t)},n.prototype.multiplyByScalar=function(e,t){return n.multiplyByScalar(this,e,t)},n.prototype.negate=function(e){return n.negate(this,e)},n.prototype.transpose=function(e){return n.transpose(this,e)},n.prototype.equals=function(e){return n.equals(this,e)},n.prototype.equalsEpsilon=function(e,t){return n.equalsEpsilon(this,e,t)},n.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n"+"("+this[1]+", "+this[4]+", "+this[7]+")\n"+"("+this[2]+", "+this[5]+", "+this[8]+")"},n}),define("Core/RuntimeError",[],function(){var e=function(e){this.name="RuntimeError",this.message=e,this.error=Error()};return e.prototype.toString=function(){var e=this.name+": "+this.message;return this.error!==void 0&&(e+=this.error.stack!==void 0?"\n"+(""+this.error.stack):"\n"+(""+this.error)),e},e}),define("Core/Matrix4",["./Cartesian3","./Cartesian4","./defaultValue","./DeveloperError","./freezeObject","./Math","./Matrix3","./RuntimeError"],function(e,t,r,i,n,o,a,u){var s=function(e,t,i,n,o,a,u,s,d,h,c,f,w,l,p,v){this[0]=r(e,0),this[1]=r(o,0),this[2]=r(d,0),this[3]=r(w,0),this[4]=r(t,0),this[5]=r(a,0),this[6]=r(h,0),this[7]=r(l,0),this[8]=r(i,0),this[9]=r(u,0),this[10]=r(c,0),this[11]=r(p,0),this[12]=r(n,0),this[13]=r(s,0),this[14]=r(f,0),this[15]=r(v,0)};s.clone=function(e,t){if(e===void 0)throw new i("values is required");return t===void 0?new s(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t)},s.fromColumnMajorArray=s.clone,s.fromRowMajorArray=function(e,t){if(e===void 0)throw new i("values is required.");return t===void 0?new s(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t)},s.fromRotationTranslation=function(e,t,r){if(e===void 0)throw new i("rotation is required.");if(t===void 0)throw new i("translation is required.");return r===void 0?new s(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1):(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r)},s.fromTranslation=function(e,t){return s.fromRotationTranslation(a.IDENTITY,e,t)},s.fromScale=function(e,t){if(e===void 0)throw new i("scale is required.");return t===void 0?new s(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1):(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},s.fromUniformScale=function(e,t){if("number"!=typeof e)throw new i("scale is required.");return t===void 0?new s(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1):(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)};var d=new e,h=new e,c=new e;s.fromCamera=function(t,r){if(t===void 0)throw new i("camera is required.");var n=t.eye,o=t.target,a=t.up;if(n===void 0)throw new i("camera.eye is required.");if(o===void 0)throw new i("camera.target is required.");if(a===void 0)throw new i("camera.up is required.");e.subtract(o,n,d).normalize(d),e.cross(d,a,h).normalize(h),e.cross(h,d,c).normalize(c);var u=h.x,f=h.y,w=h.z,l=d.x,p=d.y,v=d.z,m=c.x,y=c.y,g=c.z,q=n.x,x=n.y,z=n.z,b=u*-q+f*-x+w*-z,M=m*-q+y*-x+g*-z,S=l*q+p*x+v*z;return r===void 0?new s(u,f,w,b,m,y,g,M,-l,-p,-v,S,0,0,0,1):(r[0]=u,r[1]=m,r[2]=-l,r[3]=0,r[4]=f,r[5]=y,r[6]=-p,r[7]=0,r[8]=w,r[9]=g,r[10]=-v,r[11]=0,r[12]=b,r[13]=M,r[14]=S,r[15]=1,r)},s.computePerspectiveFieldOfView=function(e,t,r,n,o){if(0>=e||e>Math.PI)throw new i("fovY must be in [0, PI).");if(0>=t)throw new i("aspectRatio must be greater than zero.");if(0>=r)throw new i("near must be greater than zero.");if(0>=n)throw new i("far must be greater than zero.");
var a=Math.tan(.5*e),u=1/a,d=u/t,h=(n+r)/(r-n),c=2*n*r/(r-n);return o===void 0?new s(d,0,0,0,0,u,0,0,0,0,h,c,0,0,-1,0):(o[0]=d,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=h,o[11]=-1,o[12]=0,o[13]=0,o[14]=c,o[15]=0,o)},s.computeOrthographicOffCenter=function(e,t,r,n,o,a,u){if(e===void 0)throw new i("left is required.");if(t===void 0)throw new i("right is required.");if(r===void 0)throw new i("bottom is required.");if(n===void 0)throw new i("top is required.");if(o===void 0)throw new i("near is required.");if(a===void 0)throw new i("far is required.");var d=1/(t-e),h=1/(n-r),c=1/(a-o),f=-(t+e)*d,w=-(n+r)*h,l=-(a+o)*c;return d*=2,h*=2,c*=-2,u===void 0?new s(d,0,0,f,0,h,0,w,0,0,c,l,0,0,0,1):(u[0]=d,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=h,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=c,u[11]=0,u[12]=f,u[13]=w,u[14]=l,u[15]=1,u)},s.computePerspectiveOffCenter=function(e,t,r,n,o,a,u){if(e===void 0)throw new i("left is required.");if(t===void 0)throw new i("right is required.");if(r===void 0)throw new i("bottom is required.");if(n===void 0)throw new i("top is required.");if(o===void 0)throw new i("near is required.");if(a===void 0)throw new i("far is required.");var d=2*o/(t-e),h=2*o/(n-r),c=(t+e)/(t-e),f=(n+r)/(n-r),w=-(a+o)/(a-o),l=-1,p=-2*a*o/(a-o);return u===void 0?new s(d,0,c,0,0,h,f,0,0,0,w,p,0,0,l,0):(u[0]=d,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=h,u[6]=0,u[7]=0,u[8]=c,u[9]=f,u[10]=w,u[11]=l,u[12]=0,u[13]=0,u[14]=p,u[15]=0,u)},s.computeInfinitePerspectiveOffCenter=function(e,t,r,n,o,a){if(e===void 0)throw new i("left is required.");if(t===void 0)throw new i("right is required.");if(r===void 0)throw new i("bottom is required.");if(n===void 0)throw new i("top is required.");if(o===void 0)throw new i("near is required.");var u=2*o/(t-e),d=2*o/(n-r),h=(t+e)/(t-e),c=(n+r)/(n-r),f=-1,w=-1,l=-2*o;return a===void 0?new s(u,0,h,0,0,d,c,0,0,0,f,l,0,0,w,0):(a[0]=u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=0,a[7]=0,a[8]=h,a[9]=c,a[10]=f,a[11]=w,a[12]=0,a[13]=0,a[14]=l,a[15]=0,a)},s.computeViewportTransformation=function(e,t,i,n){e=r(e,r.EMPTY_OBJECT);var o=r(e.x,0),a=r(e.y,0),u=r(e.width,0),d=r(e.height,0);t=r(t,0),i=r(i,1);var h=.5*u,c=.5*d,f=.5*(i-t),w=h,l=c,p=f,v=o+h,m=a+c,y=t+f,g=1;return n===void 0?new s(w,0,0,v,0,l,0,m,0,0,p,y,0,0,0,g):(n[0]=w,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=p,n[11]=0,n[12]=v,n[13]=m,n[14]=y,n[15]=g,n)},s.toArray=function(e,t){if(e===void 0)throw new i("matrix is required");return t===void 0?[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t)},s.getElementIndex=function(e,t){if("number"!=typeof t||0>t||t>3)throw new i("row is required and must be 0, 1, 2, or 3.");if("number"!=typeof e||0>e||e>3)throw new i("column is required and must be 0, 1, 2, or 3.");return 4*e+t},s.getColumn=function(e,r,n){if(e===void 0)throw new i("matrix is required.");if("number"!=typeof r||0>r||r>3)throw new i("index is required and must be 0, 1, 2, or 3.");var o=4*r,a=e[o],u=e[o+1],s=e[o+2],d=e[o+3];return n===void 0?new t(a,u,s,d):(n.x=a,n.y=u,n.z=s,n.w=d,n)},s.setColumn=function(e,t,r,n){if(e===void 0)throw new i("matrix is required");if(r===void 0)throw new i("cartesian is required");if("number"!=typeof t||0>t||t>3)throw new i("index is required and must be 0, 1, 2, or 3.");n=s.clone(e,n);var o=4*t;return n[o]=r.x,n[o+1]=r.y,n[o+2]=r.z,n[o+3]=r.w,n},s.getRow=function(e,r,n){if(e===void 0)throw new i("matrix is required.");if("number"!=typeof r||0>r||r>3)throw new i("index is required and must be 0, 1, 2, or 3.");var o=e[r],a=e[r+4],u=e[r+8],s=e[r+12];return n===void 0?new t(o,a,u,s):(n.x=o,n.y=a,n.z=u,n.w=s,n)},s.setRow=function(e,t,r,n){if(e===void 0)throw new i("matrix is required");if(r===void 0)throw new i("cartesian is required");if("number"!=typeof t||0>t||t>3)throw new i("index is required and must be 0, 1, 2, or 3.");return n=s.clone(e,n),n[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n},s.multiply=function(e,t,r){if(e===void 0)throw new i("left is required");if(t===void 0)throw new i("right is required");var n=e[0],o=e[1],a=e[2],u=e[3],d=e[4],h=e[5],c=e[6],f=e[7],w=e[8],l=e[9],p=e[10],v=e[11],m=e[12],y=e[13],g=e[14],q=e[15],x=t[0],z=t[1],b=t[2],M=t[3],S=t[4],E=t[5],O=t[6],R=t[7],C=t[8],_=t[9],T=t[10],P=t[11],I=t[12],N=t[13],U=t[14],A=t[15],L=n*x+d*z+w*b+m*M,W=o*x+h*z+l*b+y*M,B=a*x+c*z+p*b+g*M,V=u*x+f*z+v*b+q*M,D=n*S+d*E+w*O+m*R,H=o*S+h*E+l*O+y*R,j=a*S+c*E+p*O+g*R,F=u*S+f*E+v*O+q*R,G=n*C+d*_+w*T+m*P,k=o*C+h*_+l*T+y*P,Z=a*C+c*_+p*T+g*P,X=u*C+f*_+v*T+q*P,Y=n*I+d*N+w*U+m*A,J=o*I+h*N+l*U+y*A,Q=a*I+c*N+p*U+g*A,K=u*I+f*N+v*U+q*A;return r===void 0?new s(L,D,G,Y,W,H,k,J,B,j,Z,Q,V,F,X,K):(r[0]=L,r[1]=W,r[2]=B,r[3]=V,r[4]=D,r[5]=H,r[6]=j,r[7]=F,r[8]=G,r[9]=k,r[10]=Z,r[11]=X,r[12]=Y,r[13]=J,r[14]=Q,r[15]=K,r)},s.multiplyByTranslation=function(e,t,r){if(e===void 0)throw new i("matrix is required");if(t===void 0)throw new i("translation is required");var n=t.x,o=t.y,a=t.z,u=n*e[0]+o*e[4]+a*e[8]+e[12],d=n*e[1]+o*e[5]+a*e[9]+e[13],h=n*e[2]+o*e[6]+a*e[10]+e[14];return r===void 0?new s(e[0],e[4],e[8],u,e[1],e[5],e[9],d,e[2],e[6],e[10],h,e[3],e[7],e[11],e[15]):(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=u,r[13]=d,r[14]=h,r[15]=e[15],r)},s.multiplyByUniformScale=function(e,t,r){if(e===void 0)throw new i("matrix is required");if("number"!=typeof t)throw new i("scale is required");return 1===t?s.clone(e,r):r===void 0?new s(t*e[0],t*e[4],t*e[8],e[12],t*e[1],t*e[5],t*e[9],e[13],t*e[2],t*e[6],t*e[10],e[14],0,0,0,1):(r[0]=t*e[0],r[1]=t*e[1],r[2]=t*e[2],r[3]=0,r[4]=t*e[4],r[5]=t*e[5],r[6]=t*e[6],r[7]=0,r[8]=t*e[8],r[9]=t*e[9],r[10]=t*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},s.multiplyByVector=function(e,r,n){if(e===void 0)throw new i("matrix is required");if(r===void 0)throw new i("cartesian is required");var o=r.x,a=r.y,u=r.z,s=r.w,d=e[0]*o+e[4]*a+e[8]*u+e[12]*s,h=e[1]*o+e[5]*a+e[9]*u+e[13]*s,c=e[2]*o+e[6]*a+e[10]*u+e[14]*s,f=e[3]*o+e[7]*a+e[11]*u+e[15]*s;return n===void 0?new t(d,h,c,f):(n.x=d,n.y=h,n.z=c,n.w=f,n)};var f=new t(0,0,0,1);return s.multiplyByPoint=function(e,t,r){if(t===void 0)throw new i("cartesian is required");return f.x=t.x,f.y=t.y,f.z=t.z,s.multiplyByVector(e,f,r)},s.multiplyByScalar=function(e,t,r){if(e===void 0)throw new i("matrix is required");if("number"!=typeof t)throw new i("scalar is required and must be a number");return r===void 0?new s(e[0]*t,e[4]*t,e[8]*t,e[12]*t,e[1]*t,e[5]*t,e[9]*t,e[13]*t,e[2]*t,e[6]*t,e[10]*t,e[14]*t,e[3]*t,e[7]*t,e[11]*t,e[15]*t):(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r)},s.negate=function(e,t){if(e===void 0)throw new i("matrix is required");return t===void 0?new s(-e[0],-e[4],-e[8],-e[12],-e[1],-e[5],-e[9],-e[13],-e[2],-e[6],-e[10],-e[14],-e[3],-e[7],-e[11],-e[15]):(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t)},s.transpose=function(e,t){if(e===void 0)throw new i("matrix is required");if(t===void 0)return new s(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);var r=e[1],n=e[2],o=e[3],a=e[6],u=e[7],d=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[10]=e[10],t[11]=e[14],t[12]=o,t[13]=u,t[14]=d,t[15]=e[15],t},s.equals=function(e,t){return e===t||e!==void 0&&t!==void 0&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},s.equalsEpsilon=function(e,t,r){if("number"!=typeof r)throw new i("epsilon is required and must be a number");return e===t||e!==void 0&&t!==void 0&&r>=Math.abs(e[0]-t[0])&&r>=Math.abs(e[1]-t[1])&&r>=Math.abs(e[2]-t[2])&&r>=Math.abs(e[3]-t[3])&&r>=Math.abs(e[4]-t[4])&&r>=Math.abs(e[5]-t[5])&&r>=Math.abs(e[6]-t[6])&&r>=Math.abs(e[7]-t[7])&&r>=Math.abs(e[8]-t[8])&&r>=Math.abs(e[9]-t[9])&&r>=Math.abs(e[10]-t[10])&&r>=Math.abs(e[11]-t[11])&&r>=Math.abs(e[12]-t[12])&&r>=Math.abs(e[13]-t[13])&&r>=Math.abs(e[14]-t[14])&&r>=Math.abs(e[15]-t[15])},s.getTranslation=function(t,r){if(t===void 0)throw new i("matrix is required");return r===void 0?new e(t[12],t[13],t[14]):(r.x=t[12],r.y=t[13],r.z=t[14],r)},s.getRotation=function(e,t){if(e===void 0)throw new i("matrix is required");return t===void 0?new a(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]):(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)},s.inverse=function(e,t){if(e===void 0)throw new i("matrix is required");var r=e[0],n=e[4],a=e[8],d=e[12],h=e[1],c=e[5],f=e[9],w=e[13],l=e[2],p=e[6],v=e[10],m=e[14],y=e[3],g=e[7],q=e[11],x=e[15],z=v*x,b=m*q,M=p*x,S=m*g,E=p*q,O=v*g,R=l*x,C=m*y,_=l*q,T=v*y,P=l*g,I=p*y,N=z*c+S*f+E*w-(b*c+M*f+O*w),U=b*h+R*f+T*w-(z*h+C*f+_*w),A=M*h+C*c+P*w-(S*h+R*c+I*w),L=O*h+_*c+I*f-(E*h+T*c+P*f),W=b*n+M*a+O*d-(z*n+S*a+E*d),B=z*r+C*a+_*d-(b*r+R*a+T*d),V=S*r+R*n+I*d-(M*r+C*n+P*d),D=E*r+T*n+P*a-(O*r+_*n+I*a);z=a*w,b=d*f,M=n*w,S=d*c,E=n*f,O=a*c,R=r*w,C=d*h,_=r*f,T=a*h,P=r*c,I=n*h;var H=z*g+S*q+E*x-(b*g+M*q+O*x),j=b*y+R*q+T*x-(z*y+C*q+_*x),F=M*y+C*g+P*x-(S*y+R*g+I*x),G=O*y+_*g+I*q-(E*y+T*g+P*q),k=M*v+O*m+b*p-(E*m+z*p+S*v),Z=_*m+z*l+C*v-(R*v+T*m+b*l),X=R*p+I*m+S*l-(P*m+M*l+C*p),Y=P*v+E*l+T*p-(_*p+I*v+O*l),J=r*N+n*U+a*A+d*L;if(o.EPSILON20>Math.abs(J))throw new u("matrix is not invertible because its determinate is zero.");return J=1/J,t===void 0?new s(N*J,W*J,H*J,k*J,U*J,B*J,j*J,Z*J,A*J,V*J,F*J,X*J,L*J,D*J,G*J,Y*J):(t[0]=N*J,t[1]=U*J,t[2]=A*J,t[3]=L*J,t[4]=W*J,t[5]=B*J,t[6]=V*J,t[7]=D*J,t[8]=H*J,t[9]=j*J,t[10]=F*J,t[11]=G*J,t[12]=k*J,t[13]=Z*J,t[14]=X*J,t[15]=Y*J,t)},s.inverseTransformation=function(e,t){if(e===void 0)throw new i("matrix is required");var r=e[0],n=e[1],o=e[2],a=e[4],u=e[5],d=e[6],h=e[8],c=e[9],f=e[10],w=e[12],l=e[13],p=e[14],v=-r*w-n*l-o*p,m=-a*w-u*l-d*p,y=-h*w-c*l-f*p;return t===void 0?new s(r,n,o,v,a,u,d,m,h,c,f,y,0,0,0,1):(t[0]=r,t[1]=a,t[2]=h,t[3]=0,t[4]=n,t[5]=u,t[6]=c,t[7]=0,t[8]=o,t[9]=d,t[10]=f,t[11]=0,t[12]=v,t[13]=m,t[14]=y,t[15]=1,t)},s.IDENTITY=n(new s(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),s.COLUMN0ROW0=0,s.COLUMN0ROW1=1,s.COLUMN0ROW2=2,s.COLUMN0ROW3=3,s.COLUMN1ROW0=4,s.COLUMN1ROW1=5,s.COLUMN1ROW2=6,s.COLUMN1ROW3=7,s.COLUMN2ROW0=8,s.COLUMN2ROW1=9,s.COLUMN2ROW2=10,s.COLUMN2ROW3=11,s.COLUMN3ROW0=12,s.COLUMN3ROW1=13,s.COLUMN3ROW2=14,s.COLUMN3ROW3=15,s.prototype.clone=function(e){return s.clone(this,e)},s.prototype.toArray=function(e){return s.toArray(this,e)},s.prototype.getColumn=function(e,t){return s.getColumn(this,e,t)},s.prototype.setColumn=function(e,t,r){return s.setColumn(this,e,t,r)},s.prototype.getRow=function(e,t){return s.getRow(this,e,t)},s.prototype.setRow=function(e,t,r){return s.setRow(this,e,t,r)},s.prototype.multiply=function(e,t){return s.multiply(this,e,t)},s.prototype.multiplyByTranslation=function(e,t){return s.multiplyByTranslation(this,e,t)},s.prototype.multiplyByUniformScale=function(e,t){return s.multiplyByUniformScale(this,e,t)},s.prototype.multiplyByVector=function(e,t){return s.multiplyByVector(this,e,t)},s.prototype.multiplyByPoint=function(e,t){return s.multiplyByPoint(this,e,t)},s.prototype.multiplyByScalar=function(e,t){return s.multiplyByScalar(this,e,t)},s.prototype.negate=function(e){return s.negate(this,e)},s.prototype.transpose=function(e){return s.transpose(this,e)},s.prototype.equals=function(e){return s.equals(this,e)},s.prototype.equalsEpsilon=function(e,t){return s.equalsEpsilon(this,e,t)},s.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n"+"("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n"+"("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n"+"("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"},s.prototype.getTranslation=function(e){return s.getTranslation(this,e)},s.prototype.getRotation=function(e){return s.getRotation(this,e)},s.prototype.inverse=function(e){return s.inverse(this,e)},s.prototype.inverseTransformation=function(e){return s.inverseTransformation(this,e)},s}),define("Core/BoundingSphere",["./defaultValue","./DeveloperError","./Cartesian3","./Cartesian4","./Cartographic","./Ellipsoid","./GeographicProjection","./Intersect","./Interval","./Matrix4"],function(e,t,r,i,n,o,a,u,s,d){var h=function(t,i){this.center=r.clone(e(t,r.ZERO)),this.radius=e(i,0)},c=new r,f=new r,w=new r,l=new r,p=new r,v=new r,m=new r,y=new r,g=new r,q=new r,x=new r,z=new r;h.fromPoints=function(e,t){if(t===void 0&&(t=new h),e===void 0||0===e.length)return t.center=r.ZERO.clone(t.center),t.radius=0,t;for(var i=r.clone(e[0],m),n=r.clone(i,c),o=r.clone(i,f),a=r.clone(i,w),u=r.clone(i,l),s=r.clone(i,p),d=r.clone(i,v),b=e.length,M=1;b>M;M++){r.clone(e[M],i);var S=i.x,E=i.y,O=i.z;n.x>S&&r.clone(i,n),S>u.x&&r.clone(i,u),o.y>E&&r.clone(i,o),E>s.y&&r.clone(i,s),a.z>O&&r.clone(i,a),O>d.z&&r.clone(i,d)}var R=r.magnitudeSquared(r.subtract(u,n,y)),C=r.magnitudeSquared(r.subtract(s,o,y)),_=r.magnitudeSquared(r.subtract(d,a,y)),T=n,P=u,I=R;C>I&&(I=C,T=o,P=s),_>I&&(I=_,T=a,P=d);var N=g;N.x=.5*(T.x+P.x),N.y=.5*(T.y+P.y),N.z=.5*(T.z+P.z);var U=r.magnitudeSquared(r.subtract(P,N,y)),A=Math.sqrt(U),L=q;L.x=n.x,L.y=o.y,L.z=a.z;var W=x;W.x=u.x,W.y=s.y,W.z=d.z;var B=r.multiplyByScalar(r.add(L,W,y),.5,z),V=0;for(M=0;b>M;M++){r.clone(e[M],i);var D=r.magnitude(r.subtract(i,B,y));D>V&&(V=D);var H=r.magnitudeSquared(r.subtract(i,N,y));if(H>U){var j=Math.sqrt(H);A=.5*(A+j),U=A*A;var F=j-A;N.x=(A*N.x+F*i.x)/j,N.y=(A*N.y+F*i.y)/j,N.z=(A*N.z+F*i.z)/j}}return V>A?(r.clone(N,t.center),t.radius=A):(r.clone(B,t.center),t.radius=V),t};var b=new a,M=new r,S=new r,E=new n,O=new n;h.fromExtent2D=function(e,t,r){return h.fromExtentWithHeights2D(e,t,0,0,r)},h.fromExtentWithHeights2D=function(t,i,n,o,a){if(a===void 0&&(a=new h),t===void 0)return a.center=r.ZERO.clone(a.center),a.radius=0,a;i=e(i,b),t.getSouthwest(E),E.height=n,t.getNortheast(O),O.height=o;var u=i.project(E,M),s=i.project(O,S),d=s.x-u.x,c=s.y-u.y,f=s.z-u.z;a.radius=.5*Math.sqrt(d*d+c*c+f*f);var w=a.center;return w.x=u.x+.5*d,w.y=u.y+.5*c,w.z=u.z+.5*f,a};var R=[];h.fromExtent3D=function(t,r,i){r=e(r,o.WGS84);var n;return t!==void 0&&(n=t.subsample(r,R)),h.fromPoints(n,i)},h.fromVertices=function(e,i,n,o){if(o===void 0&&(o=new h),e===void 0||0===e.length)return o.center=r.ZERO.clone(o.center),o.radius=0,o;if(i===void 0&&(i=r.ZERO),n===void 0&&(n=3),3>n)throw new t("stride must be 3 or greater.");var a=m;a.x=e[0]+i.x,a.y=e[1]+i.y,a.z=e[2]+i.z;for(var u=r.clone(a,c),s=r.clone(a,f),d=r.clone(a,w),b=r.clone(a,l),M=r.clone(a,p),S=r.clone(a,v),E=e.length,O=0;E>O;O+=n){var R=e[O]+i.x,C=e[O+1]+i.y,_=e[O+2]+i.z;a.x=R,a.y=C,a.z=_,u.x>R&&r.clone(a,u),R>b.x&&r.clone(a,b),s.y>C&&r.clone(a,s),C>M.y&&r.clone(a,M),d.z>_&&r.clone(a,d),_>S.z&&r.clone(a,S)}var T=r.magnitudeSquared(r.subtract(b,u,y)),P=r.magnitudeSquared(r.subtract(M,s,y)),I=r.magnitudeSquared(r.subtract(S,d,y)),N=u,U=b,A=T;P>A&&(A=P,N=s,U=M),I>A&&(A=I,N=d,U=S);var L=g;L.x=.5*(N.x+U.x),L.y=.5*(N.y+U.y),L.z=.5*(N.z+U.z);var W=r.magnitudeSquared(r.subtract(U,L,y)),B=Math.sqrt(W),V=q;V.x=u.x,V.y=s.y,V.z=d.z;var D=x;D.x=b.x,D.y=M.y,D.z=S.z;var H=r.multiplyByScalar(r.add(V,D,y),.5,z),j=0;for(O=0;E>O;O+=n){a.x=e[O]+i.x,a.y=e[O+1]+i.y,a.z=e[O+2]+i.z;var F=r.magnitude(r.subtract(a,H,y));F>j&&(j=F);var G=r.magnitudeSquared(r.subtract(a,L,y));if(G>W){var k=Math.sqrt(G);B=.5*(B+k),W=B*B;var Z=k-B;L.x=(B*L.x+Z*a.x)/k,L.y=(B*L.y+Z*a.y)/k,L.z=(B*L.z+Z*a.z)/k}}return j>B?(r.clone(L,o.center),o.radius=B):(r.clone(H,o.center),o.radius=j),o},h.fromCornerPoints=function(e,i,n){if(e===void 0||i===void 0)throw new t("corner and oppositeCorner are required.");n===void 0&&(n=new h);var o=n.center;return r.add(e,i,o),r.multiplyByScalar(o,.5,o),n.radius=r.distance(o,i),n},h.clone=function(e,i){if(e===void 0)throw new t("sphere is required");return i===void 0?new h(e.center,e.radius):(i.center=r.clone(e.center,i.center),i.radius=e.radius,i)};var C=new r,_=new r;h.union=function(e,i,n){if(e===void 0)throw new t("left is required.");if(i===void 0)throw new t("right is required.");n===void 0&&(n=new h);var o=e.center,a=i.center;r.add(o,a,_);var u=r.multiplyByScalar(_,.5,_),s=r.subtract(o,u,C).magnitude()+e.radius,d=r.subtract(a,u,C).magnitude()+i.radius;return n.radius=Math.max(s,d),r.clone(u,n.center),n};var T=new r;h.expand=function(e,i,n){if(e===void 0)throw new t("sphere is required.");if(i===void 0)throw new t("point is required.");n=h.clone(e,n);var o=r.subtract(i,n.center,T).magnitude();return o>n.radius&&(n.radius=o),n},h.intersect=function(e,i){if(e===void 0)throw new t("sphere is required.");if(i===void 0)throw new t("plane is required.");var n=e.center,o=e.radius,a=r.dot(i,n)+i.w;return-o>a?u.OUTSIDE:o>a?u.INTERSECTING:u.INSIDE};var P=i.UNIT_W.clone();h.transform=function(e,i,n){if(e===void 0)throw new t("sphere is required.");if(i===void 0)throw new t("transform is required.");return n===void 0&&(n=new h),d.multiplyByPoint(i,e.center,P),r.clone(P,n.center),n.radius=e.radius,n};var I=new r;return h.getPlaneDistances=function(e,i,n,o){if(e===void 0)throw new t("sphere is required.");if(i===void 0)throw new t("position is required.");if(n===void 0)throw new t("direction is required.");o===void 0&&(o=new s);var a=r.subtract(e.center,i,I),u=r.multiplyByScalar(n,n.dot(a),I),d=u.magnitude();return o.start=d-e.radius,o.stop=d+e.radius,o},h.equals=function(e,t){return e===t||e!==void 0&&t!==void 0&&r.equals(e.center,t.center)&&e.radius===t.radius},h.prototype.clone=function(e){return h.clone(this,e)},h.prototype.union=function(e,t){return h.union(this,e,t)},h.prototype.expand=function(e,t){return h.expand(this,e,t)},h.prototype.intersect=function(e){return h.intersect(this,e)},h.prototype.transform=function(e,t){return h.transform(this,e,t)},h.prototype.getPlaneDistances=function(e,t,r){return h.getPlaneDistances(this,e,t,r)},h.prototype.equals=function(e){return h.equals(this,e)},h}),define("Core/EllipsoidalOccluder",["./defaultValue","./DeveloperError","./Cartesian3","./BoundingSphere"],function(e,t,r,i){function n(e,t,r){var i=e.transformPositionToScaledSpace(t,c),n=i.magnitudeSquared(),o=Math.sqrt(n),a=i.divideByScalar(o,f);n=Math.max(1,n),o=Math.max(1,o);var u=a.dot(r),s=a.cross(r).magnitude(),d=1/o,h=Math.sqrt(n-1)*d;return 1/(u*d-s*h)}function o(e,t,r){return 0>=t||t===1/0||t!==t?void 0:e.multiplyByScalar(t,r)}function a(e,t){return e.transformPositionToScaledSpace(t,w),w.normalize(w)}var u=function(e,i){if(e===void 0)throw new t("ellipsoid is required.");this._ellipsoid=e,this._cameraPosition=new r,this._cameraPositionInScaledSpace=new r,this._distanceToLimbInScaledSpaceSquared=0,i!==void 0&&this.setCameraPosition(i)};u.prototype.getEllipsoid=function(){return this._ellipsoid},u.prototype.setCameraPosition=function(e){var t=this._ellipsoid,i=t.transformPositionToScaledSpace(e,this._cameraPositionInScaledSpace),n=r.magnitudeSquared(i)-1;r.clone(e,this._cameraPosition),this._cameraPositionInScaledSpace=i,this._distanceToLimbInScaledSpaceSquared=n},u.prototype.getCameraPosition=function(){return this._cameraPosition};var s=new r;u.prototype.isPointVisible=function(e){var t=this._ellipsoid,r=t.transformPositionToScaledSpace(e,s);return this.isScaledSpacePointVisible(r)},u.prototype.isScaledSpacePointVisible=function(e){var t=this._cameraPositionInScaledSpace,i=this._distanceToLimbInScaledSpaceSquared,n=r.subtract(e,t,s),o=-n.dot(t),a=o>i&&o*o/n.magnitudeSquared()>i;return!a},u.prototype.computeHorizonCullingPoint=function(e,r,i){if(e===void 0)throw new t("directionToPoint is required");if(r===void 0)throw new t("positions is required");for(var u=this._ellipsoid,s=a(u,e),d=0,h=0,c=r.length;c>h;++h){var f=r[h],w=n(u,f,s);d=Math.max(d,w)}return o(s,d,i)};var d=new r;u.prototype.computeHorizonCullingPointFromVertices=function(i,u,s,h,c){if(i===void 0)throw new t("directionToPoint is required");if(u===void 0)throw new t("vertices is required");if(s===void 0)throw new t("stride is required");h=e(h,r.ZERO);for(var f=this._ellipsoid,w=a(f,i),l=0,p=0,v=u.length;v>p;p+=s){d.x=u[p]+h.x,d.y=u[p+1]+h.y,d.z=u[p+2]+h.z;var m=n(f,d,w);l=Math.max(l,m)}return o(w,l,c)};var h=[];u.prototype.computeHorizonCullingPointFromExtent=function(e,r,n){if(e===void 0)throw new t("extent is required.");var o=e.subsample(r,h),a=i.fromPoints(o);return.1*r.getMinimumRadius()>a.center.magnitude()?void 0:this.computeHorizonCullingPoint(a.center,o,n)};var c=new r,f=new r,w=new r;return u}),define("Core/Extent",["./freezeObject","./defaultValue","./Ellipsoid","./Cartographic","./DeveloperError","./Math"],function(e,t,r,i,n,o){var a=function(e,r,i,n){this.west=t(e,0),this.south=t(r,0),this.east=t(i,0),this.north=t(n,0)};a.fromCartographicArray=function(e,t){if(e===void 0)throw new n("cartographics is required.");for(var r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,u=-Number.MAX_VALUE,s=0,d=e.length;d>s;s++){var h=e[s];r=Math.min(r,h.longitude),i=Math.max(i,h.longitude),o=Math.min(o,h.latitude),u=Math.max(u,h.latitude)}return t===void 0?new a(r,o,i,u):(t.west=r,t.south=o,t.east=i,t.north=u,t)},a.clone=function(e,t){return t===void 0?new a(e.west,e.south,e.east,e.north):(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t)},a.prototype.clone=function(e){return a.clone(this,e)},a.prototype.equals=function(e){return e!==void 0&&this.west===e.west&&this.south===e.south&&this.east===e.east&&this.north===e.north},a.prototype.equalsEpsilon=function(e,t){if("number"!=typeof t)throw new n("epsilon is required and must be a number.");return e!==void 0&&t>=Math.abs(this.west-e.west)&&t>=Math.abs(this.south-e.south)&&t>=Math.abs(this.east-e.east)&&t>=Math.abs(this.north-e.north)},a.prototype.validate=function(){var e=this.north;if("number"!=typeof e)throw new n("north is required to be a number.");if(-o.PI_OVER_TWO>e||e>o.PI_OVER_TWO)throw new n("north must be in the interval [-Pi/2, Pi/2].");var t=this.south;if("number"!=typeof t)throw new n("south is required to be a number.");if(-o.PI_OVER_TWO>t||t>o.PI_OVER_TWO)throw new n("south must be in the interval [-Pi/2, Pi/2].");var r=this.west;if("number"!=typeof r)throw new n("west is required to be a number.");if(-Math.PI>r||r>Math.PI)throw new n("west must be in the interval [-Pi, Pi].");var i=this.east;if("number"!=typeof i)throw new n("east is required to be a number.");if(-Math.PI>i||i>Math.PI)throw new n("east must be in the interval [-Pi, Pi].")},a.prototype.getSouthwest=function(e){return e===void 0?new i(this.west,this.south):(e.longitude=this.west,e.latitude=this.south,e.height=0,e)},a.prototype.getNorthwest=function(e){return e===void 0?new i(this.west,this.north):(e.longitude=this.west,e.latitude=this.north,e.height=0,e)},a.prototype.getNortheast=function(e){return e===void 0?new i(this.east,this.north):(e.longitude=this.east,e.latitude=this.north,e.height=0,e)},a.prototype.getSoutheast=function(e){return e===void 0?new i(this.east,this.south):(e.longitude=this.east,e.latitude=this.south,e.height=0,e)},a.prototype.getCenter=function(e){return e===void 0?new i(.5*(this.west+this.east),.5*(this.south+this.north)):(e.longitude=.5*(this.west+this.east),e.latitude=.5*(this.south+this.north),e.height=0,e)},a.prototype.intersectWith=function(e,t){if(e===void 0)throw new n("otherExtent is required.");var r=Math.max(this.west,e.west),i=Math.max(this.south,e.south),o=Math.min(this.east,e.east),u=Math.min(this.north,e.north);return t===void 0?new a(r,i,o,u):(t.west=r,t.south=i,t.east=o,t.north=u,t)},a.prototype.contains=function(e){if(e===void 0)throw new n("cartographic is required.");return e.longitude>=this.west&&this.east>=e.longitude&&e.latitude>=this.south&&this.north>=e.latitude},a.prototype.isEmpty=function(){return this.west>=this.east||this.south>=this.north};var u=new i;return a.prototype.subsample=function(e,i){e=t(e,r.WGS84),i===void 0&&(i=[]);var n=0,a=this.north,s=this.south,d=this.east,h=this.west,c=u;c.longitude=h,c.latitude=a,i[n]=e.cartographicToCartesian(c,i[n]),n++,c.longitude=d,i[n]=e.cartographicToCartesian(c,i[n]),n++,c.latitude=s,i[n]=e.cartographicToCartesian(c,i[n]),n++,c.longitude=h,i[n]=e.cartographicToCartesian(c,i[n]),n++,c.latitude=0>a?a:s>0?s:0;for(var f=1;8>f;++f){var w=-Math.PI+f*o.PI_OVER_TWO;w>h&&d>w&&(c.longitude=w,i[n]=e.cartographicToCartesian(c,i[n]),n++)}return 0===c.latitude&&(c.longitude=h,i[n]=e.cartographicToCartesian(c,i[n]),n++,c.longitude=d,i[n]=e.cartographicToCartesian(c,i[n]),n++),i.length=n,i},a.MAX_VALUE=e(new a(-Math.PI,-o.PI_OVER_TWO,Math.PI,o.PI_OVER_TWO)),a}),define("Core/HeightmapTessellator",["./defaultValue","./freezeObject","./DeveloperError","./Cartesian3","./Ellipsoid","./Math"],function(e,t,r,i,n,o){var a={};return a.DEFAULT_STRUCTURE=t({heightScale:1,heightOffset:0,elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1}),a.computeVertices=function(t){if(t===void 0||t.heightmap===void 0)throw new r("description.heightmap is required.");if(t.width===void 0||t.height===void 0)throw new r("description.width and description.height are required.");if(t.vertices===void 0)throw new r("description.vertices is required.");if(t.nativeExtent===void 0)throw new r("description.nativeExtent is required.");if(t.skirtHeight===void 0)throw new r("description.skirtHeight is required.");var u,s,d,h,c=Math.cos,f=Math.sin,w=Math.sqrt,l=Math.atan,p=Math.exp,v=o.PI_OVER_TWO,m=o.toRadians,y=t.vertices,g=t.heightmap,q=t.width,x=t.height,z=t.skirtHeight,b=e(t.isGeographic,!0),M=e(t.ellipsoid,n.WGS84),S=1/M.getMaximumRadius(),E=t.nativeExtent,O=t.extent;O===void 0?b?(u=m(E.west),s=m(E.south),d=m(E.east),h=m(E.north)):(u=E.west*S,s=v-2*l(p(-E.south*S)),d=E.east*S,h=v-2*l(p(-E.north*S))):(u=O.west,s=O.south,d=O.east,h=O.north);var R=e(t.relativeToCenter,i.ZERO),C=e(t.structure,a.DEFAULT_STRUCTURE),_=e(C.heightScale,a.DEFAULT_STRUCTURE.heightScale),T=e(C.heightOffset,a.DEFAULT_STRUCTURE.heightOffset),P=e(C.elementsPerHeight,a.DEFAULT_STRUCTURE.elementsPerHeight),I=e(C.stride,a.DEFAULT_STRUCTURE.stride),N=e(C.elementMultiplier,a.DEFAULT_STRUCTURE.elementMultiplier),U=e(C.isBigEndian,a.DEFAULT_STRUCTURE.isBigEndian),A=(E.east-E.west)/(q-1),L=(E.north-E.south)/(x-1),W=M.getRadiiSquared(),B=W.x,V=W.y,D=W.z,H=0,j=65536,F=-65536,G=0,k=x,Z=0,X=q;z>0&&(--G,++k,--Z,++X);for(var Y=G;k>Y;++Y){var J=Y;0>J&&(J=0),J>=x&&(J=x-1);var Q=E.north-L*J;Q=b?m(Q):v-2*l(p(-Q*S));for(var K=c(Q),$=f(Q),et=D*$,tt=(Q-s)/(h-s),rt=Z;X>rt;++rt){var it=rt;0>it&&(it=0),it>=q&&(it=q-1);var nt=E.west+A*it;b?nt=m(nt):nt*=S;var ot,at=J*q*I+it*I;if(1===P)ot=g[at];else{ot=0;var ut;if(U)for(ut=0;P>ut;++ut)ot=ot*N+g[at+ut];else for(ut=P-1;ut>=0;--ut)ot=ot*N+g[at+ut]}ot=ot*_+T,F=Math.max(F,ot),j=Math.min(j,ot),(rt!==it||Y!==J)&&(ot-=z);var st=K*c(nt),dt=K*f(nt),ht=B*st,ct=V*dt,ft=w(ht*st+ct*dt+et*$),wt=1/ft,lt=ht*wt,pt=ct*wt,vt=et*wt;y[H++]=lt+st*ot-R.x,y[H++]=pt+dt*ot-R.y,y[H++]=vt+$*ot-R.z,y[H++]=ot;var mt=(nt-u)/(d-u);y[H++]=mt,y[H++]=tt}}return{maximumHeight:F,minimumHeight:j}},a}),define("Workers/createTaskProcessorWorker",[],function(){var e=function(e){var t,r=[],i={id:void 0,result:void 0};return function(n){var o=n.data;i.id=o.id,r.length=0,i.result=e(o.parameters,r),t===void 0&&(t=self.webkitPostMessage!==void 0?self.webkitPostMessage:self.postMessage),t(i,r)}};return e}),define("Workers/createVerticesFromHeightmap",["../Core/BoundingSphere","../Core/Ellipsoid","../Core/EllipsoidalOccluder","../Core/Extent","../Core/HeightmapTessellator","./createTaskProcessorWorker"],function(e,t,r,i,n,o){function a(o,a){var u=6,s=o.width,d=o.height;o.skirtHeight>0&&(s+=2,d+=2);var h=new Float32Array(s*d*u);a.push(h.buffer),o.ellipsoid=t.clone(o.ellipsoid),o.extent=i.clone(o.extent),o.vertices=h;var c=n.computeVertices(o),f=e.fromVertices(h,o.relativeToCenter,u),w=o.ellipsoid,l=new r(w),p=l.computeHorizonCullingPointFromVertices(o.relativeToCenter,h,u,o.relativeToCenter);return{vertices:h.buffer,numberOfAttributes:u,minimumHeight:c.minimumHeight,maximumHeight:c.maximumHeight,gridWidth:s,gridHeight:d,boundingSphere3D:f,occludeePointInScaledSpace:p}}return o(a)});