/*!
*  filename: ej.pivotchart.min.js
*  version : 15.1.0.41
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./../common/ej.draggable.min","./../common/ej.scroller.min","./ej.dialog.min","./ej.waitingpopup.min","./../datavisualization/ej.chart.min","./ej.pivot.common.min"],n):n()})(function(){(function(n,t,i){t.widget("ejPivotChart","ej.PivotChart",{_rootCSS:"e-pivotchart",element:null,model:null,_requiresID:!0,validTags:["div","span"],defaults:n.extend(t.datavisualization.Chart.prototype.defaults,{url:"",analysisMode:"pivot",operationalMode:"clientmode",cssClass:"",currentReport:"",customObject:{},enableRTL:!1,isResponsive:!1,enable3D:!1,enableContextMenu:!1,rotation:0,serviceMethodSettings:{initialize:"InitializeChart",drillDown:"DrillChart",exportPivotChart:"Export",paging:"paging"},dataSource:{data:null,isFormattedValues:!1,columns:[],cube:"",catalog:"",rows:[],values:[],filters:[]},locale:null,drillSuccess:null,load:null,beforeServiceInvoke:null,afterServiceInvoke:null,renderComplete:null,renderFailure:null,renderSuccess:null,beforeExport:null,beforePivotEnginePopulate:null}),dataTypes:{dataSource:{data:"data",columns:"array",rows:"array",values:"array",filters:"array"},marker:"data",crossHair:"data",size:"data",serviceMethodSettings:{initialize:"enum",drillDown:"enum",exportPivotChart:"enum",paging:"enum"},zooming:"data",customObject:"data"},observables:["title.text","commonSeriesOptions.type","locale"],titleText:t.util.valueFunction("title.text"),seriesType:t.util.valueFunction("commonSeriesOptions.type"),locale:t.util.valueFunction("locale"),getOlapReport:function(){return this._olapReport},setOlapReport:function(n){this._olapReport=n},getJSONRecords:function(){return this._JSONRecords},setJSONRecords:function(t){this._JSONRecords=n.parseJSON(t)},getPivotEngine:function(){return this._pivotEngine},setPivotEngine:function(n){this._pivotEngine=n},_init:function(){this._initPrivateProperties();this._load()},_destroy:function(){this._pivotEngine=null;this.element.empty().removeClass("e-pivotchart"+this.model.cssClass);this._waitingPopup!=i&&this._waitingPopup._destroy()},_initPrivateProperties:function(){this._id=this.element.attr("id");this._olapReport="";this._JSONRecords=null;this._currentAction="initialize";this._selectedItem="";this._selectedIndex=-1;this._selectedTagInfo=null;this._tagCollection=[];this._selectedTags=[];this._labelCurrentTags=[];this._startDrilldown=!1;this._drillAction="";this._initZooming=!1;this._dimensionIndex=-1;this._selectedMenuItem="";this._pivotEngine=null;this._curFocus=null;this._selectedSeriesInfo=[];this._waitingPopup=null},_load:function(){var u,r,f;if(this.model.locale=this.model.locale||"en-US",u={action:"initialize",element:this.element,customObject:this.model.customObject},this._trigger("load",u),this.element.addClass(this.model.cssClass),n(this.element).parents(".e-pivotclient").length>0?(r=n(this.element).parents(".e-pivotclient").data("ejPivotClient"),n("#"+r._id+"_maxView")[0]?n("#"+r._id+"_maxView").ejWaitingPopup({showOnInit:!0}):t.isNullOrUndefined(this._waitingPopup)||this._waitingPopup.show()):(this.element.ejWaitingPopup({showOnInit:!0}),this._waitingPopup=this.element.data("ejWaitingPopup"),this._waitingPopup.show()),this.model.zooming!=""&&(this._initZooming=!0),this.model.dataSource.data==null&&this.model.url!=""||this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode){if(this.model.operationalMode=t.PivotChart.OperationalMode.ServerMode,this.model.url==""){this.renderChartFromJSON("");return}this.model.beforeServiceInvoke!=null&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode&&this._trigger("beforeServiceInvoke",{action:this._currentAction,element:this.element,customObject:this.model.customObject});f=JSON.stringify(this.model.customObject);this.model.customObject!=""&&this.model.customObject!=null&&this.model.customObject!=i?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.initialize,JSON.stringify({action:"initialize",currentReport:this.model.currentReport,customObject:f}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.initialize,JSON.stringify({action:"initialize"}),this.renderControlSuccess)}else this.model.operationalMode=t.PivotChart.OperationalMode.ClientMode,this.model.analysisMode=this.model.dataSource.cube!=""?t.PivotChart.AnalysisMode.Olap:t.PivotChart.AnalysisMode.Pivot,this.refreshControl()},refreshControl:function(){var i,r,n;if(this.model.analysisMode==t.Pivot.AnalysisMode.Pivot)if(i=t.PivotAnalysis.pivotEnginePopulate(this.model),this._pivotEngine=i.pivotEngine,i.pivotEngine.length>0)if(t.isNullOrUndefined(this._labelCurrentTags.expandedMembers))this._generateData(this._pivotEngine);else{for(r=this._cloneEngine(this._pivotEngine),n=0;n<this._labelCurrentTags.expandedMembers.length;n++)this._cropData(r,this._labelCurrentTags.expandedMembers[n],0,!0);this._generateData(r)}else t.isNullOrUndefined(this._waitingPopup)||this._waitingPopup.hide();else t.olap.base.getJSONData({action:"initialLoad"},this.model.dataSource,this)},_setFirst:!0,_setModel:function(t){var r=this.element.find("#"+this._id+"Container").data("ejChart"),i,u;for(i in t)switch(i){case"olapReport":this.setOlapReport(t[i]);break;case"jsonData":this.setJSONRecords(t[i]);break;case"refreshPivotChart":this.element.renderChartFromJSON(t[i]);break;case"customObject":this.model.customObject=t[i];break;case"height":this.model.size.height=t[i];break;case"width":this.model.size.width=t[i];break;case"commonSeriesOptions":if(r)for(r.model.commonSeriesOptions=t[i],r.model.type=r.model.commonSeriesOptions.type=this.seriesType(),u=0;u<r.model.series.length;u++)r.model.series[u].type=r.model.type;break;case"title":r&&(r.model.title.text=this.titleText());break;case"animation":this.model.animation=t[i];break;case"crossHair":this.model.crossHair=t[i];break;case"marker":this.model.marker=t[i];break;case"zooming":this.model.zooming=t[i];break;case"legend":this.model.legend=t[i];break;case"primaryXAxis":this.model.primaryXAxis=t[i];break;case"primaryYAxis":this.model.primaryYAxis=t[i];break;case"locale":this.locale();break;default:n.extend(!0,this.model,{},t[i])}r&&this.renderControlSuccess({JsonRecords:JSON.stringify(this.getJSONRecords()),OlapReport:this.getOlapReport()})},_keyDownPress:function(n){var u,r,i;n.which!==13||t.isNullOrUndefined(this._curFocus)||this._curFocus.click();(n.which===39||n.which===37||n.which===38||n.which===40)&&this.element.find(".e-dialog").length>0&&(n.preventDefault(),u=this.element.find(".e-dialog"),u.tabindex=-1,u.focus(),r=u.find("li"),n.which===39||n.which===40?(t.isNullOrUndefined(this._curFocus)?this._curFocus=r.eq(0):(this._curFocus.removeClass("hoverCell"),i=this._curFocus.next(),this._curFocus=i.length>0?i:r.eq(0)),this._curFocus.addClass("hoverCell")):(n.which===37||n.which===38)&&(t.isNullOrUndefined(this._curFocus)?this._curFocus=r.last():(this._curFocus.removeClass("hoverCell"),i=this._curFocus.prev(),this._curFocus=i.length>0?i:r.last()),this._curFocus.addClass("hoverCell")))},_wireEvents:function(){if(this._on(n(document),"keydown",this._keyDownPress),!this.model.enableContextMenu||this.element.parents(".e-pivotclient").length>0||this._on(this.element,"contextmenu","#PivotChartContainer",t.proxy(function(){var r=t.buildTag("ul#contextMenu","<li class='chartTypes'><a>Chart Types<\/a><ul><li class='line'><a>Line<\/a><\/li><li class='spline'><a>Spline<\/a><\/li><li class='column'><a>Column<\/a><\/li><li class='area'><a>Area<\/a><\/li><li class='splinearea'><a>Spline Area<\/a><\/li><li class='stepline'><a>Step Line<\/a><\/li><li class='steparea'><a>Step Area<\/a><\/li><li class='pie'><a>Pie<\/a><\/li><li class='bar'><a>Bar<\/a><\/li><li class='stackingarea'><a>Stacking Area<\/a><\/li><li class='stackingcolumn'><a>Stacking Column<\/a><\/li><li class='stackingbar'><a>Stacking Bar<\/a><\/li><li class='funnel'><a>Funnel<\/a><\/li><li class='pyramid'><a>Pyramid<\/a><\/li><li class='doughnut'><a>DoughNut<\/a><\/li><li class='scatter'><a>Scatter<\/a><\/li><li class='bubble'><a>Bubble<\/a><\/li><\/ul><\/li>"+t.buildTag("li.toolTip",t.buildTag("a",this._getLocalizedLabels("Tooltip"))[0].outerHTML)[0].outerHTML+"<li class='chart3DTypes'><a>3D Charts<\/a><ul><li class='column'><a>3D Column<\/a><\/li><li class='pie'><a>3D Pie<\/a><\/li><li class='bar'><a>3D Bar<\/a><\/li><li class='stackingbar'><a>3D Stacking Bar<\/a><\/li><li class='stackingcolumn'><a>3D Stacking Column<\/a><\/li><li class='disable3D'><a>Disable 3D Charts<\/a><\/li><\/ul><\/li><li class='exportTypes'><a>Exporting<\/a><ul><li class='excel'><a>Excel<\/a><\/li><li class='word'><a>Word<\/a><\/li><li class='pdf'><a>PDF<\/a><\/li><li class='png'><a>PNG<\/a><\/li><li class='emf'><a>EMF<\/a><\/li><li class='gif'><a>GIF<\/a><\/li><li class='jpg'><a>JPG<\/a><\/li><li class='bmf'><a>BMF<\/a><\/li><\/ul><\/li>")[0].outerHTML,i;n("#"+this._id).append(r);i=this.element.find("#PivotChartContainer");this.element.find("#contextMenu").ejMenu({width:"150px",menuType:t.MenuType.ContextMenu,contextMenuTarget:i,enableRTL:this.model.enableRTL,click:t.proxy(this._contextMenuClick,this)});this.model.enable3D?n("#contextMenu").find(".chart3DTypes ."+this.model.commonSeriesOptions.type).addClass("enabled"):n("#contextMenu").find(".chartTypes ."+this.model.commonSeriesOptions.type).addClass("enabled");this.model.commonSeriesOptions.tooltip.visible&&n("#contextMenu").find(".toolTip").addClass("enabled")})),this._on(this.element,"click",".menuList",function(r){var l,o,nt,c,d,s,a,v,f,b,e,g,y,w,u,k,p,h;if(this._curFocus=null,r.target.innerHTML==this._getLocalizedLabels("Exit"))this.element.find("#"+this._id+"ExpandMenu, .expandMenu, .e-dialog").remove();else if(r.target.innerHTML.indexOf(this._getLocalizedLabels("Expand"))>-1)if(this._drillAction="drilldown",n(this.element).parents(".e-pivotclient").length>0?(c=n(this.element).parents(".e-pivotclient").data("ejPivotClient"),n("#"+c._id+"_maxView")[0]?n("#"+c._id+"_maxView").ejWaitingPopup({showOnInit:!0}):t.isNullOrUndefined(this._waitingPopup)||this._waitingPopup.show()):t.isNullOrUndefined(this._waitingPopup)||this._waitingPopup.show(),this.model.operationalMode==t.PivotChart.OperationalMode.ClientMode)if(o=this.model.enableRTL?r.target.innerHTML.split(" - ")[0]:r.target.innerHTML.split(" - ")[1],this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot){for(t.isNullOrUndefined(this._labelCurrentTags.expandedMembers)&&(this._labelCurrentTags.expandedMembers=[]),this._labelCurrentTags.expandedMembers.push(o),d=this._cloneEngine(this._pivotEngine),u=0;u<this._labelCurrentTags.expandedMembers.length;u++)this._cropData(d,this._labelCurrentTags.expandedMembers[u],0,!0);this._generateData(d);this._trigger("drillSuccess",{chartObj:this,drillAction:"drilldown",drilledMember:this._labelCurrentTags.expandedMembers.join(">#>"),event:r})}else{this._labelCurrentTags.collapsedMembers=n.grep(this._labelCurrentTags.collapsedMembers,function(n){return n!=o});var s=n(this.getJSONRecords().seriesTags).filter(function(n,t){return t.split("::")[2]==o})[0],g=t.olap._mdxParser._splitCellInfo(s),e=[];for(u=0;u<this.model.dataSource.rows.length;u++){if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers))for(f=0;f<this._labelCurrentTags.expandedMembers.length;f++)if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[f]))for(a=0;a<this._labelCurrentTags.expandedMembers[f].length;a++)this._labelCurrentTags.expandedMembers[f][a].indexOf(this.model.dataSource.rows[u].fieldName)>=0&&e.push(this._labelCurrentTags.expandedMembers[f][a]);for(f=0;f<this._selectedSeriesInfo.length;f++)this._selectedSeriesInfo[f].indexOf(this.model.dataSource.rows[u].fieldName)>=0&&e.push(this._selectedSeriesInfo[f].replace(/&/g,"&amp;"))}for(u=0;u<this._selectedSeriesInfo.length;u++)this._selectedSeriesInfo[u]=this._selectedSeriesInfo[u].replace(/&/g,"&amp;");for(v=e,s=s.replace(/&/g,"&amp;"),b=n.inArray(s,this._selectedSeriesInfo),e=[],u=0;u<=b;u++)e.push(this._selectedSeriesInfo[u]);for(this._selectedSeriesInfo=e,b=n.inArray(s,v),e=[],u=0;u<=b;u++)e.push(v[u]);for(v=e,l=-1,u=0;u<this.model.dataSource.rows.length;u++)if(this.model.dataSource.rows[u].fieldName==g.hierarchyUniqueName){l=u;break}for(t.isNullOrUndefined(this._labelCurrentTags.expandedMembers)&&(this._labelCurrentTags.expandedMembers=[]),t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[l])&&(this._labelCurrentTags.expandedMembers[l]=[]),this._labelCurrentTags.expandedMembers[l].push(s),u=l+1;u<this._labelCurrentTags.expandedMembers.length;u++)this._labelCurrentTags.expandedMembers[u]=[];y=this.element.parents(".e-pivotclient").length>0?this.element.parents(".e-pivotclient").data("ejPivotClient"):this;t.olap._mdxParser.updateDrilledReport({uniqueName:s,seriesInfo:this._selectedSeriesInfo,uniqueNameArray:v},"rowheader",y)}else k=JSON.stringify(this.model.customObject),this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot?(o=this.model.enableRTL?r.target.innerHTML.split(" - ")[0]:r.target.innerHTML.split(" - ")[1],this._selectedItem=o,t.isNullOrUndefined(this._labelCurrentTags.expandedMembers)&&(this._labelCurrentTags.expandedMembers=[]),this._labelCurrentTags.expandedMembers.push(o),this.model.customObject!=""&&this.model.customObject!=null&&this.model.customObject!=i?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:JSON.stringify(this._labelCurrentTags.expandedMembers),customObject:k,currentReport:JSON.parse(this.getOlapReport()).Report}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:JSON.stringify(this._labelCurrentTags.expandedMembers),currentReport:JSON.parse(this.getOlapReport()).Report}),this.renderControlSuccess)):(h=this,this._isDrilled||(this._isDrilled=!0,jQuery.each(r.target.parentElement.children,function(n,t){t.innerHTML==r.target.innerHTML&&(h._dimensionIndex=n)})),p=this.getOlapReport(),this._drillAction="drilldown",this._selectedItem=this.model.enableRTL?n.trim(r.target.innerHTML.replace(" - "+this._getLocalizedLabels("Expand"),"")):n.trim(r.target.innerHTML.replace(this._getLocalizedLabels("Expand")+" - ","")),jQuery.each(this._labelCurrentTags,function(n,t){if(t.name==h._selectedItem)return h._tagCollection=[],h._tagCollection=h._selectedTags.slice(),h._selectedTagInfo=t.tag,h._selectedMenuItem=t.name,!1}),this._startDrilldown=!0,this.model.beforeServiceInvoke!=null&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode&&this._trigger("beforeServiceInvoke",{action:this._drillAction,element:this.element,customObject:this.model.customObject}),this.model.customObject!=""&&this.model.customObject!=null&&this.model.customObject!=i?typeof oclientProxy!="undefined"?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:this._selectedTagInfo,olapReport:p,clientReports:oclientProxy.reports,customObject:k}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:this._selectedTagInfo,olapReport:p,customObject:k}),this.renderControlSuccess):!typeof oclientProxy!="undefined"?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:this._selectedTagInfo,olapReport:p}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:this._selectedTagInfo,olapReport:p,clientReports:oclientProxy.reports}),this.renderControlSuccess));else if(this._drillAction="drillup",n(this.element).parents(".e-pivotclient").length>0?(c=n(this.element).parents(".e-pivotclient").data("ejPivotClient"),n("#"+c._id+"_maxView")[0]?n("#"+c._id+"_maxView").ejWaitingPopup({showOnInit:!0}):t.isNullOrUndefined(this._waitingPopup)||this._waitingPopup.show()):t.isNullOrUndefined(this._waitingPopup)||this._waitingPopup.show(),this.model.operationalMode==t.PivotChart.OperationalMode.ClientMode)if(o=this.model.enableRTL?r.target.innerHTML.split(" - ")[0]:r.target.innerHTML.split(" - ")[1],this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot){for(w=!1,e=[],jQuery.map(this._labelCurrentTags.expandedMembers,function(n){n==o&&(w=!0);w||e.push(n)}),this._labelCurrentTags.expandedMembers=e,nt=this._labelCurrentTags.expandedMembers.length==0?o:this._labelCurrentTags.expandedMembers.join(">#>")+">#>"+o,this._labelCurrentTags.expandedMembers.length==0&&n(this.element).parents(".e-pivotclient").length>0&&(c=n(this.element).parents(".e-pivotclient").data("ejPivotClient"),c._drillParams.length>0&&(c._drillParams=n.grep(c._drillParams,function(n){return n.indexOf(o)<0}),c._getDrilledMember())),d=this._cloneEngine(this._pivotEngine),u=0;u<this._labelCurrentTags.expandedMembers.length;u++)this._cropData(d,this._labelCurrentTags.expandedMembers[u],0,!0);this._generateData(d);this._trigger("drillSuccess",{chartObj:this,drillAction:"drillup",drilledMember:nt,event:r})}else{for(s=null,e=[],u=0;u<this.model.dataSource.rows.length;u++){if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers))for(f=0;f<this._labelCurrentTags.expandedMembers.length;f++)if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[f]))for(a=0;a<this._labelCurrentTags.expandedMembers[f].length;a++)this._labelCurrentTags.expandedMembers[f][a].indexOf(this.model.dataSource.rows[u].fieldName)>=0&&e.push(this._labelCurrentTags.expandedMembers[f][a]);for(f=0;f<this._selectedSeriesInfo.length;f++)this._selectedSeriesInfo[f].indexOf(this.model.dataSource.rows[u].fieldName)>=0&&e.push(this._selectedSeriesInfo[f].replace(/&/g,"&amp;"))}for(u=0;u<this._selectedSeriesInfo.length;u++)this._selectedSeriesInfo[u]=this._selectedSeriesInfo[u].replace(/&/g,"&amp;");for(v=e,u=0;u<this._labelCurrentTags.expandedMembers.length;u++)if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[u]))for(f=0;f<this._labelCurrentTags.expandedMembers[u].length;f++)this._labelCurrentTags.expandedMembers[u][f].split("::")[2]==o&&(s=this._labelCurrentTags.expandedMembers[u][f],e=[],jQuery.map(this._labelCurrentTags.expandedMembers[u],function(n){n.split("::")[2]==o&&(w=!0);w||e.push(n)}),this._labelCurrentTags.expandedMembers[u]=e);for(b=n.inArray(s,this._selectedSeriesInfo),e=[],u=0;u<=b;u++)e.push(this._selectedSeriesInfo[u]);for(this._selectedSeriesInfo=e,b=n.inArray(s,v),e=[],u=0;u<=b;u++)e.push(v[u]);for(v=e,g=t.olap._mdxParser._splitCellInfo(s),u=0;u<this.model.dataSource.rows.length;u++)if(this.model.dataSource.rows[u].fieldName==g.hierarchyUniqueName){l=u;break}for(u=l+1;u<this._labelCurrentTags.expandedMembers.length;u++)this._labelCurrentTags.expandedMembers[u]=[];if(y=this,this.element.parents(".e-pivotclient").length>0){for(y=this.element.parents(".e-pivotclient").data("ejPivotClient"),y._drillParams=n.grep(y._drillParams,function(n){return n!=s}),w=!1,u=0;u<this._labelCurrentTags.expandedMembers.length;u++)if(this._labelCurrentTags.expandedMembers[u].length>0){w=!0;break}y._drillParams.length>0&&!w&&this._labelCurrentTags.expandedMembers[l].push(y._drillParams[l].split(">#>")[y._drillParams[l].split(">#>").length-1])}t.olap._mdxParser.updateDrilledReport({uniqueName:s,seriesInfo:this._selectedSeriesInfo,uniqueNameArray:v,action:"collapse"},"rowheader",y)}else if(k=JSON.stringify(this.model.customObject),this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot){var o=this.model.enableRTL?r.target.innerHTML.split(" - ")[0]:r.target.innerHTML.split(" - ")[1],w=!1,e=[];jQuery.map(this._labelCurrentTags.expandedMembers,function(n){n==o&&(w=!0);w||e.push(n)});this._selectedItem=o;this._labelCurrentTags.expandedMembers=e;this.model.customObject!=""&&this.model.customObject!=null&&this.model.customObject!=i?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:JSON.stringify(this._labelCurrentTags.expandedMembers),customObject:k,currentReport:JSON.parse(this.getOlapReport()).Report}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drilldown",drilledSeries:JSON.stringify(this._labelCurrentTags.expandedMembers),currentReport:JSON.parse(this.getOlapReport()).Report}),this.renderControlSuccess)}else p=this.getOlapReport(),this._drillAction="drillup",this._selectedItem=this.model.enableRTL?n.trim(r.target.innerHTML.replace(" - "+this._getLocalizedLabels("Collapse"),"")):n.trim(r.target.innerHTML.replace(this._getLocalizedLabels("Collapse")+" - ","")),this._tagCollection=[],this._tagCollection=this._selectedTags.slice(),h=this,jQuery.each(this._tagCollection,function(n,t){if(t.name==h._selectedItem)return h._selectedIndex=n,h._selectedTagInfo=t.tag,h._tagCollection.splice(n,h._tagCollection.length),!1}),this._tagCollection.length==0&&(this._isDrilled=!1),this._startDrilldown=!0,this.model.beforeServiceInvoke!=null&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode&&this._trigger("beforeServiceInvoke",{action:this._drillAction,element:this.element,customObject:this.model.customObject}),this.model.customObject!=""&&this.model.customObject!=null&&this.model.customObject!=i?typeof oclientProxy!="undefined"?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drilledSeries:this._selectedTagInfo,olapReport:p,clientReports:reports,customObject:k}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drilledSeries:this._selectedTagInfo,olapReport:p,customObject:k}),this.renderControlSuccess):!typeof oclientProxy!="undefined"?this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drilledSeries:this._selectedTagInfo,olapReport:p}),this.renderControlSuccess):this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.drillDown,JSON.stringify({action:"drillup",drilledSeries:this._selectedTagInfo,olapReport:p,clientReports:reports}),this.renderControlSuccess)}),typeof oclientProxy=="undefined")n(window).on("resize",n.proxy(this._reSizeHandler,this));this.element.parents(".e-pivotclient").length>0&&oclientProxy.model.enableToolBar&&!oclientProxy.model.displaySettings.enableFullScreen&&(this._on(this.element,"click",".toolTipImg",function(n){var t=this;t._contextMenuClick(n);t.model.commonSeriesOptions.tooltip.visible?t.element.find(".toolTipImg").addClass("enabled"):t.element.find(".toolTipImg").removeClass("enabled");typeof oclientProxy!="undefined"&&(oclientProxy._unWireEvents(),oclientProxy._wireEvents())}),this._on(this.element,"click",".chart3DImg",function(t){var i=this;i._createDialog(t);n(".chart3DTypesIcon").click(function(n){i._contextMenuClick(n);typeof oclientProxy!="undefined"&&(oclientProxy._unWireEvents(),oclientProxy._wireEvents())})}),this._on(this.element,"click",".exportImg",function(t){var i=this;i._createDialog(t);n(".exportTypesIcon").click(function(n){i._contextMenuClick(n)})}))},_unWireEvents:function(){this._off(n(document),"keydown",this._keyDownPress);n(document.body).off("click");this._off(this.element,"click",".menuList");n(window).off("resize",n.proxy(this._reSizeHandler,this));this._off(this.element,"contextmenu");this._off(this.element,"click",".chartTypesImg");this._off(this.element,"click",".toolTipImg");this._off(this.element,"click",".chart3DImg");this._off(this.element,"click",".exportImg")},_createDialog:function(i){var f=this,r,u;n(i.target).hasClass("exportImg")?(r=t.buildTag("div.exportTypesDialog",t.buildTag("table",t.buildTag("tbody",t.buildTag("tr",t.buildTag("td",t.buildTag("div.excel exportTypesIcon").attr({title:this._getLocalizedLabels("Excel"),"aria-label":this._getLocalizedLabels("Excel"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.word exportTypesIcon").attr({title:this._getLocalizedLabels("Word"),"aria-label":this._getLocalizedLabels("Word"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.pdf exportTypesIcon").attr({title:this._getLocalizedLabels("Pdf"),"aria-label":this._getLocalizedLabels("Pdf"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.png exportTypesIcon").attr({title:this._getLocalizedLabels("PNG"),"aria-label":this._getLocalizedLabels("PNG"),tabindex:0})[0].outerHTML)[0].outerHTML)[0].outerHTML+t.buildTag("tr",t.buildTag("td",t.buildTag("div.emf exportTypesIcon").attr({title:this._getLocalizedLabels("EMF"),"aria-label":this._getLocalizedLabels("EMF"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.gif exportTypesIcon").attr({title:this._getLocalizedLabels("GIF"),"aria-label":this._getLocalizedLabels("GIF"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.jpg exportTypesIcon").attr({title:this._getLocalizedLabels("JPG"),"aria-label":this._getLocalizedLabels("JPG"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.bmp exportTypesIcon").attr({title:this._getLocalizedLabels("BMF"),"aria-label":this._getLocalizedLabels("BMF"),tabindex:0})[0].outerHTML)[0].outerHTML)[0].outerHTML)[0].outerHTML)[0].outerHTML),this.element.find("div.exportTypesDialog").length==0&&(n(r).appendTo(this.element),n(r).css("left",i.target.offsetLeft+20+"px").css("top",i.target.offsetTop+15+"px"),this.model.enableRTL&&n(r).addClass("e-rtl"))):n(i.target).hasClass("chart3DImg")&&(u=t.buildTag("div.chart3DTypesDialog",t.buildTag("table",t.buildTag("tbody",t.buildTag("tr",t.buildTag("td",t.buildTag("div.column3D chart3DTypesIcon").attr({title:this._getLocalizedLabels("ColumnTD"),"aria-label":this._getLocalizedLabels("ColumnTD"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.pie3D chart3DTypesIcon").attr({title:this._getLocalizedLabels("PieTD"),"aria-label":this._getLocalizedLabels("PieTD"),tabindex:0})[0].outerHTML)[0].outerHTML)[0].outerHTML+t.buildTag("tr",t.buildTag("td",t.buildTag("div.bar3D chart3DTypesIcon").attr({title:this._getLocalizedLabels("BarTD"),"aria-label":this._getLocalizedLabels("BarTD"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.stackingbar3D chart3DTypesIcon").attr({title:this._getLocalizedLabels("StackingBarTD"),"aria-label":this._getLocalizedLabels("StackingBarTD"),tabindex:0})[0].outerHTML)[0].outerHTML)[0].outerHTML+t.buildTag("tr",t.buildTag("td",t.buildTag("div.stackingcolumn3D chart3DTypesIcon").attr({title:this._getLocalizedLabels("StackingColumnTD"),"aria-label":this._getLocalizedLabels("StackingColumnTD"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("td",t.buildTag("div.disable3D chart3DTypesIcon")[0].outerHTML)[0].outerHTML)[0].outerHTML)[0].outerHTML)[0].outerHTML),this.element.find("div.chart3DTypesDialog").length==0&&(n(u).appendTo(this.element),n(u).css("left",i.target.offsetLeft+20+"px").css("top",i.target.offsetTop+15+"px"),f.model.enable3D&&n("."+this.model.type).addClass("enabled"),this.model.enableRTL&&n(u).addClass("e-rtl")))},_contextMenuClick:function(i){chrtObj=n("#PivotChart").data("ejPivotChart");var r=n(this.element).parents(".e-pivotclient").length>0?n(i.target).attr("class").split(" ")[0]:n(i.element).attr("class").split(" ")[0];if(n(i.element).parents().hasClass("chartTypes"))chrtObj.model.enable3D=!1,chrtObj.model.type=chrtObj.model.commonSeriesOptions.type=r,chrtObj.model.type=="funnel"&&(chrtObj.model.commonSeriesOptions.marker={dataLabel:{visible:!0,shape:"none",font:{color:"white",size:"12px",fontWeight:"lighter"}}}),(chrtObj.model.type=="pie"||chrtObj.model.type=="doughnut")&&(chrtObj.model.commonSeriesOptions.explode=!0),chrtObj.renderControlSuccess({JsonRecords:JSON.stringify(chrtObj.getJSONRecords()),OlapReport:chrtObj.getOlapReport()});else if(n(i.element).parents().hasClass("toolTip")||n(i.target).hasClass("toolTipImg"))chrtObj.model.commonSeriesOptions.tooltip.visible=!chrtObj.model.commonSeriesOptions.tooltip.visible,chrtObj.renderChartFromJSON(oclientProxy._pivotChart.getJSONRecords());else if(n(i.element).parents().hasClass("chart3DTypes")||n(i.target).hasClass("chart3DTypesIcon"))chrtObj.model.enable3D=!0,r!="disable3D"&&(r=r.split("3")[0]),r=="disable3D"&&(chrtObj.model.enable3D=!1,r=chrtObj.model.commonSeriesOptions.type),chrtObj.model.type=chrtObj.model.commonSeriesOptions.type=r,r=="pie"&&(chrtObj.model.rotation=24),chrtObj.renderControlSuccess({JsonRecords:JSON.stringify(chrtObj.getJSONRecords()),OlapReport:chrtObj.getOlapReport()});else{n(this.element).parents(".e-pivotclient").length>0&&typeof oclientProxy!="undefined"&&(this.model.beforeExport=oclientProxy.model.beforeExport);switch(r){case"excel":case"word":case"pdf":chrtObj.exportPivotChart(r,"Sample");break;case"png":chrtObj.exportPivotChart(r,"Sample",t.PivotChart.ExportOptions.PNG);break;case"emf":chrtObj.exportPivotChart(r,"Sample",t.PivotChart.ExportOptions.EMF);break;case"gif":chrtObj.exportPivotChart(r,"Sample",t.PivotChart.ExportOptions.GIF);break;case"jpg":chrtObj.exportPivotChart(r,"Sample",t.PivotChart.ExportOptions.JPG);break;case"bmp":chrtObj.exportPivotChart(r,"Sample",t.PivotChart.ExportOptions.BMP)}}},generateJSON:function(n,i){var r,u;if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers)&&this._labelCurrentTags.expandedMembers.length>0)for(r=0;r<this._labelCurrentTags.expandedMembers.length;r++)if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[r])&&this._labelCurrentTags.expandedMembers[r].length>0)for(r>0&&!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[r-1])&&this._labelCurrentTags.expandedMembers[r-1].length>0&&this._cropData(i,this._selectedSeriesInfo[r-1].split("::")[2],r-1,!1),u=0;u<this._labelCurrentTags.expandedMembers[r].length;u++)this._cropData(i,this._labelCurrentTags.expandedMembers[r][u].split("::")[2],r,!0);this._generateData(i)},_generateData:function(i){var f={seriesNames:[],chartLables:[],labelTags:[],seriesTags:[],points_Y:[],measureNames:""},s=i.length,e,h,c,l,a,o,u,y,r;if(s>0&&i[0].length>0){var b=i[0].length,v=[],k=[];for(e=this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot?t.isNullOrUndefined(this._labelCurrentTags.expandedMembers)?this.model.dataSource.rows.length:this.model.dataSource.rows.length-this._labelCurrentTags.expandedMembers.length:this.model.dataSource.rows.length+(this.model.dataSource.values[0].axis=="rows"&&this.model.dataSource.values[0].measures.length>0?1:0),h=this.model.dataSource.columns.length,h+=this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot?this.model.dataSource.values.length>0?1:0:this.model.dataSource.values[0].axis=="columns"&&this.model.dataSource.values[0].measures.length>0?1:0,c="",r=e;r<s;r++){for(l="",a=!1,u=0;u<h;u++)if(!t.isNullOrUndefined(i[r][u])){if(i[r][u].CSS.indexOf("summary")>=0){a=!0;v.push(r);break}i[r][u].Info.indexOf("Measure")>=0&&c.indexOf(i[r][u].Value)<0&&(c+=c==""?i[r][u].Value:" ~ "+i[r][u].Value);l+=(l==""?"":i[r][u].Value==""?"":" - ")+i[r][u].Value}a||l==""||f.seriesNames.push(l)}for(r=h;r<b;r++)if(this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot)e>1?i[0][r].CSS=="summary rstot"&&i[0][r].Value!="Grand Total"&&f.chartLables.push(i[0][r].Value.replace(" Total","")):i[0][r].CSS=="rowheader"&&f.chartLables.push(i[0][r].Value);else if(t.isNullOrUndefined(this._labelCurrentTags.collapsedMembers)&&(this._labelCurrentTags.collapsedMembers=[]),e>1){var p="",a=!1,w="";for(u=0;u<e;u++)if(i[u][r].CSS=="rowheader")p+=p==""?i[u][r].Value:" ~ "+i[u][r].Value,i[u][r].Info.indexOf("[Measures]")==-1&&(w+=w==""?i[u][r].Info:" ~ "+i[u][r].Info),n.inArray(i[u][r].Value,this._labelCurrentTags.collapsedMembers)<0&&i[u][r].State==2&&this._labelCurrentTags.collapsedMembers.push(i[u][r].Value),n.inArray(i[u][r].Info,f.seriesTags)<0&&i[u][r].Info.indexOf("[Measures]")==-1&&f.seriesTags.push(i[u][r].Info);else{a=!0;k.push(r);break}a||(f.chartLables.push(p),f.labelTags.push(w))}else i[0][r].CSS=="rowheader"&&(f.chartLables.push(i[0][r].Value),f.labelTags.push(i[0][r].Info),f.seriesTags.push(i[0][r].Info)),i[0][r].State==2&&this._labelCurrentTags.collapsedMembers.push(i[0][r].Value);for(r=h;r<b;r++)if(o=[],e>1){if(this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot){if(i[0][r].CSS=="summary rstot"&&i[0][r].Value!="Grand Total"){for(u=e;u<s;u++)n.inArray(u,v)<0&&o.push(i[u][r].Value);f.points_Y.push(o)}}else if(n.inArray(r,k)<0){for(u=e;u<s;u++)n.inArray(u,v)<0&&o.push(i[u][r].Value==""?0:t.parseFloat(i[u][r].Value,this.locale()));f.points_Y.push(o)}}else if(i[0][r].CSS=="rowheader"){for(u=i[0][0].ColSpan;u<s;u++)n.inArray(u,v)<0&&o.push(this.model.analysisMode==t.PivotChart.AnalysisMode.Olap?i[u][r].Value==""?0:t.parseFloat(i[u][r].Value,this.locale()):i[u][r].Value);f.points_Y.push(o)}}if(this.model.analysisMode==t.PivotChart.AnalysisMode.Olap)f.measureNames=c;else for(y=n(this.model.dataSource.values).map(function(n,t){return t.fieldCaption}),r=0;r<y.length;r++)f.measureNames+=f.measureNames==""?y[r]:"~"+y[r];this.renderControlSuccess({JsonRecords:JSON.stringify(f),OlapReport:JSON.stringify(this.model.dataSource)});f={}},_cloneEngine:function(t){for(var r=n.extend([],t),i=0;i<t.length;i++)r[i]=n.extend([],t[i]);return r},_cropData:function(n,t,i,r){for(var u=this.model.dataSource.columns.length+1,f;u<n[i].length;)if(n[i][u].Value!=t)for(f=0;f<n.length;f++)n[f].splice(u,1);else u+=n[i][u].RowSpan;r&&n.splice(i,1)},refreshPagedPivotChart:function(n,t){typeof ochartWaitingPopup!="undefined"&&ochartWaitingPopup!=null&&ochartWaitingPopup.show();n=n.indexOf("categ")!=-1?"categorical":"series";var i;try{i=JSON.parse(this.getOlapReport())}catch(r){i=this.getOlapReport()}this.doAjaxPost("POST",this.model.url+"/"+this.model.serviceMethodSettings.paging,JSON.stringify({action:"paging",pagingInfo:n+":"+t,currentReport:i,customObject:JSON.stringify(this.model.customObject)}),this.renderControlSuccess)},_updatePageSettings:function(t,i){var r=n.map(t,function(n){if(n.Key=="PageSettings")return n}),u=n.map(t,function(n){if(n.Key=="HeaderCounts")return n});r.length>0&&i._pagerObj!=null&&(i._pagerObj.element.css("opacity","1"),i._pagerObj.element.find(".pagerTextBox").removeAttr("disabled"),i._pagerObj._unwireEvents(),i._pagerObj._wireEvents(),i._pagerObj.initPagerProperties(JSON.parse(u[0].Value),JSON.parse(r[0].Value)))},renderControlSuccess:function(r){var s,e,o,h,c,f,u;typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null&&(n("#"+oclientProxy._id+"_maxView")[0]?n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!0}):oclientWaitingPopup.show());try{if(r[0]!=i?(this.setJSONRecords(r[0].Value),this.setOlapReport(r[1].Value),t.isNullOrUndefined(r[2])||r[2].Key!="AnalysisMode"||r[2].Value!="Olap"||(this.model.analysisMode=t.PivotChart.AnalysisMode.Olap),typeof oclientProxy!="undefined"&&(oclientProxy.currentReport=r[1].Value,r[2]!=null&&r[2]!=i&&r[2].Key=="ClientReports"&&(oclientProxy.reports=r[2].Value),this._updatePageSettings(r,oclientProxy)),r[2]!=null&&r[2]!=i&&!r[2].Key=="ClientReports"&&r[2].Key!="AnalysisMode"&&(this.model.customObject=r[2].Value),n(".e-pivotpager")[0]!=null&&n(".e-pivotpager")[0]!=i&&this._pagerObj!=null&&r[2]!=null&&r.d[2]!=i&&this._pagerObj.initPagerProperties(JSON.parse(r.d[3].Value),JSON.parse(r.d[2].Value))):r.d!=i?(this.setJSONRecords(r.d[0].Value),this.setOlapReport(r.d[1].Value),r.d[2].Key=="AnalysisMode"&&r.d[2].Value=="Olap"&&(this.model.analysisMode=t.PivotChart.AnalysisMode.Olap),typeof oclientProxy!="undefined"&&(oclientProxy.currentReport=r.d[1].Value,r.d[2]!=null&&r.d[2]!=i&&r.d[2].Key=="ClientReports"&&(oclientProxy.reports=r.d[2].Value),this._updatePageSettings(r.d,oclientProxy)),r.d[2]==null||r.d[2]==i||r.d[2].Key=="ClientReports"||(this.model.customObject=r.d[2].Value),this._pagerObj!=null&&n(".e-pivotpager")[0]!=null&&n(".e-pivotpager")[0]!=i&&(r.d[2]!=null&&r.d[2]!=i&&r.d[2].Key=="PageSettings"&&this._pagerObj.initPagerProperties(JSON.parse(r.d[3].Value),JSON.parse(r.d[2].Value)),r.d[3]!=null&&r.d[3]!=i&&r.d[3].Key=="PageSettings"&&this._pagerObj.initPagerProperties(JSON.parse(r.d[4].Value),JSON.parse(r.d[3].Value)))):(this.setJSONRecords(r.JsonRecords),this.setOlapReport(r.OlapReport),r.AnalysisMode=="Olap"&&(this.model.analysisMode=t.PivotChart.AnalysisMode.Olap),r.customObject!=null&&r.customObject!=null&&(this.model.customObject=r.customObject),typeof oclientProxy!="undefined"&&(typeof oclientProxy.currentReport!="undefined"&&(oclientProxy.currentReport=r.OlapReport),typeof oclientProxy.reports!="undefined"&&r.reports!=i&&r.reports!="undefined"&&(oclientProxy.reports=r.reports))),this.model.afterServiceInvoke!=null&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode&&(s=this._drillAction!=""?{action:this._drillAction,element:this.element,customObject:this.model.customObject}:{action:this._currentAction,element:this.element,customObject:this.model.customObject},this._trigger("afterServiceInvoke",s)),n("#"+this._id+"Container").ejChart("destroy"),e=t.buildTag("div#"+this._id+"Container","",{height:typeof oclientProxy!="undefined"?oclientProxy._chartHeight:this.element.height(),width:typeof oclientProxy!="undefined"?oclientProxy.model.enableSplitter?oclientProxy.element.find(".controlPanelTD").width():oclientProxy._toggleExpand?oclientProxy.element.find(".controlPanelTD").width()-15:n("#"+oclientProxy._id+"_maxView").length>0&&oclientProxy._pivotChart?n("#"+oclientProxy._pivotChart._id+"Container").width():oclientProxy._chartWidth:this.element.width()})[0].outerHTML,n(this.element).parents(".e-pivotclient").length>0&&oclientProxy.model.enableToolBar&&!oclientProxy.model.displaySettings.enableFullScreen?(o=n("<div id="+this._id+"toolBar style='width:"+oclientProxy._chartWidth+";height:"+oclientProxy._chartHeight+";overflow:auto;margin-top:35px;margin-left:5px'><\/div>"),n(o).html(e),this.element.html(o)):this.element.html(e),this.model.legend.toggleSeriesVisibility=this.model.commonSeriesOptions.type==t.PivotChart.ChartTypes.Funnel||this.model.commonSeriesOptions.type==t.PivotChart.ChartTypes.Pyramid?!1:!0,this.renderChartFromJSON(this.getJSONRecords()),n(this.element).parents(".e-pivotclient").length>0&&oclientProxy.model.enableToolBar&&!oclientProxy.model.displaySettings.enableFullScreen&&(n("#"+this._id).prepend("<div class='chartToolBar' style='height:40px;width:"+oclientProxy.element.find(".chartContainer").width()+"px'><\/div>"),h=t.buildTag("ul",t.buildTag("li.chartTypesImg e-icon","",{}).attr("aria-label",this._getLocalizedLabels("ChartTypes")).attr({title:this._getLocalizedLabels("ChartTypes"),tabindex:0})[0].outerHTML+t.buildTag("li.chart3DImg e-icon","",{}).attr("aria-label",this._getLocalizedLabels("TDCharts")).attr({title:this._getLocalizedLabels("TDCharts"),tabindex:0})[0].outerHTML+t.buildTag("li.exportImg e-icon","",{}).attr("aria-label",this._getLocalizedLabels("Exporting")).attr({title:this._getLocalizedLabels("Exporting"),tabindex:0})[0].outerHTML)[0].outerHTML+t.buildTag("ul",t.buildTag("li.toolTipImg e-icon","",{}).attr("aria-label",this._getLocalizedLabels("Tooltip")).attr({title:this._getLocalizedLabels("Tooltip"),tabindex:0})[0].outerHTML)[0].outerHTML,n(".chartToolBar").append(n(h)),n(".chartToolBar").ejToolbar({enableRTL:this.model.enableRTL,enableSeparator:!0,height:"35px"}),this.model.commonSeriesOptions.tooltip.visible&&this.element.find(".toolTipImg").addClass("enabled"),this.model.enable3D&&this.element.find(".chart3DImg").addClass("enabled"),oclientProxy._unWireEvents(),oclientProxy._wireEvents()),this._unWireEvents(),this._wireEvents(),this._drillAction!=""){if(this.model.currentReport=this.getOlapReport(),this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot)if(this.model.operationalMode==t.PivotChart.OperationalMode.ClientMode){if(f=this.getJSONRecords(),this.model.dataSource.rows.length-this._labelCurrentTags.expandedMembers.length>1)for(this._labelCurrentTags.collapsedMembers=[],u=0;u<f.chartLables.length;u++)this._labelCurrentTags.collapsedMembers.push(f.chartLables[u])}else if(f=this.getJSONRecords(),c=JSON.parse(JSON.parse(this.getOlapReport()).rows),this._labelCurrentTags.collapsedMembers=[],c.length-this._labelCurrentTags.expandedMembers.length>1)for(u=0;u<f.chartLables.length;u++)this._labelCurrentTags.collapsedMembers.push(f.chartLables[u]);this._trigger("drillSuccess",this.element)}else if(this.model.analysisMode==t.PivotChart.AnalysisMode.Pivot)if(this.model.operationalMode==t.PivotChart.OperationalMode.ClientMode){if(f=this.getJSONRecords(),this._labelCurrentTags={collapsedMembers:[]},this.model.dataSource.rows.length>1)for(u=0;u<f.chartLables.length;u++)this._labelCurrentTags.collapsedMembers.push(f.chartLables[u])}else if(f=this.getJSONRecords(),this.model.currentReport=JSON.parse(this.getOlapReport()),this._labelCurrentTags={collapsedMembers:[]},n(this.element).parents(".e-pivotclient").length>0?this.model.currentReport.PivotRows.length>1:JSON.parse(this.model.currentReport.rows).length>1)for(u=0;u<f.chartLables.length;u++)this._labelCurrentTags.collapsedMembers.push(f.chartLables[u]);typeof oclientProxy!="undefined"&&oclientProxy._waitingPopup!=null?(n("#"+oclientProxy._id+"_maxView")[0]?(n("#"+oclientProxy._id+"_maxView").ejWaitingPopup({showOnInit:!1}),oclientProxy._waitingPopup.hide()):t.isNullOrUndefined(oclientProxy._pivotGrid)||(oclientProxy&&oclientProxy._pivotGrid._drillAction&&!oclientProxy._pivotGrid._startDrilldown||oclientProxy._pivotChart._drillAction&&!oclientProxy._pivotChart._startDrilldown?oclientProxy._waitingPopup.hide():!oclientProxy||oclientProxy._pivotGrid._drillAction!=""||oclientProxy._pivotChart._drillAction!=""||oclientProxy._pivotGrid._startDrilldown||oclientProxy._pivotChart._startDrilldown||oclientProxy._pivotGrid._JSONRecords==null&&oclientProxy._pivotChart._JSONRecords!=null?!oclientProxy._pivotChart._startDrilldown||oclientProxy._pivotGrid._startDrilldown||n("#"+oclientProxy._id+"_maxView")[0]?oclientProxy._pivotChart._startDrilldown||oclientProxy._pivotGrid._startDrilldown||oclientProxy._pivotChart._drillAction!=""||oclientProxy._pivotGrid._drillAction!=""||oclientProxy._pivotGrid._JSONRecords==null&&oclientProxy._pivotChart._JSONRecords!=null||oclientProxy._waitingPopup.hide():oclientProxy._waitingPopup.show():oclientProxy._waitingPopup.hide()),oclientProxy.model.displaySettings.mode=="chartonly"&&oclientProxy._waitingPopup.hide()):this._waitingPopup.hide();typeof oclientProxy!="undefined"&&(oclientProxy._pivotChart._startDrilldown=!1)}catch(l){}t.isNullOrUndefined(r.Exception)||t.Pivot._createErrorDialog(r,"Exception",this);this._trigger("renderSuccess",this)},renderChartFromJSON:function(r){var s,v,a,c,y,f;if(this.setJSONRecords(JSON.stringify(r)),s=[],r==null||r=="")r==""&&(v=t.buildTag("div#"+this._id+"Container")[0].outerHTML,this.element.html(v)),s=[];else if(r!=null&&r.chartLables.length>0&&r.points_Y.length>0){this.model.enableRTL&&(r.chartLables=n.map(r.chartLables,function(n){return n.split("~~").reverse().join("~~")}),r.seriesNames=n.map(r.seriesNames,function(n){return n.split("~").reverse().join("~")}));var l=[],k=r.chartLables,h=[],o=pCnt=0,u,e=0;if(e=r.measureInfo!=""?parseInt(r.measureInfo):0,f=this,jQuery.each(r.chartLables,function(n){var c=[],h,s,o;if(e>1&&r.addInfo.action!="DrillChart"||e>1&&r.addInfo.levelHash=="1"){for(h=(n+1)*e-e,s=0;s<e;s++)if(r.points_Y[h+s]!=i&&r.chartLables[n]==r.points_Y[h+s][0].Item1)for(o=0;o<r.points_Y[n].length;o++)u={xValues:r.chartLables[n],yValues:r.points_Y[h+s][o].Item2.indexOf(",")>-1?t.globalize.parseFloat(t.globalize.format(r.points_Y[h+s][o].Item2,"c",f.model.locale),f.model.locale):r.points_Y[h+s][o].Item2==""?0:t.globalize.parseFloat(r.points_Y[h+s][o].Item2),text:r.points_Y[h+s][o].Item2==""?0:r.points_Y[h+s][o].Item2},u.yValues=t.isNullOrUndefined(u.yValues)?u.yValues:jQuery.isNumeric(u.yValues)?u.yValues:t.globalize.parseFloat(r.points_Y[h+s][o].Item2.toString().replace(/[^\d.,-]/g,"")),c.push(u)}else for(o=0;o<r.points_Y[n].length;o++)f.model.analysisMode==t.PivotChart.AnalysisMode.Olap&&f.model.operationalMode==t.PivotChart.OperationalMode.ServerMode?(u=f.seriesType()=="bubble"?{xValues:r.chartLables[n],yValues:r.points_Y[n][o].Item2==""?0:r.points_Y[n][o].Item2,size:r.points_Y[n][o].Item2==""?0:r.points_Y[n][o].Item2}:{xValues:r.chartLables[n],yValues:r.points_Y[n][o].Item2.indexOf(",")>-1?t.globalize.parseFloat(t.globalize.format(r.points_Y[n][o].Item2,"c",f.model.locale),f.model.locale):r.points_Y[n][o].Item2==""?0:t.globalize.parseFloat(r.points_Y[n][o].Item2),text:r.points_Y[n][o].Item2==""?0:r.points_Y[n][o].Item2},u.yValues=t.isNullOrUndefined(u.yValues)?u.yValues:jQuery.isNumeric(u.yValues)?u.yValues:t.globalize.parseFloat(r.points_Y[n][o].Item2.toString().replace(/[^\d.,-]/g,""))):(u=f.seriesType()=="bubble"?{xValues:r.chartLables[n],yValues:r.points_Y[n][o]==""?0:r.points_Y[n][o],size:r.points_Y[n][o]==""?0:r.points_Y[n][o]}:{xValues:r.chartLables[n],yValues:r.points_Y[n][o]==""?0:r.points_Y[n][o]},u.yValues=t.isNullOrUndefined(u.yValues)?u.yValues:jQuery.isNumeric(u.yValues)?u.yValues:t.globalize.parseFloat(r.points_Y[n][o].toString().replace(/[^\d.,-]/g,""))),c.push(u);l.push(c)}),e>1&&r.addInfo.action!="DrillChart"||e>1&&r.addInfo.levelHash=="1")for(a=0;a<e*r.seriesNames.length;a++)h.push([]);else jQuery.each(r.seriesNames,function(){h.push([])});if(jQuery.each(r.chartLables,function(n){for(var t=0;t<l[n].length;t++)h[t].push(l[n][t])}),e>1&&r.addInfo.action!="DrillChart"||e>1&&r.addInfo.levelHash=="1")for(c=0;c<e*r.seriesNames.length;c++)s[pCnt]={dataSource:h[c],xName:"xValues",yName:"yValues",name:r.seriesNames[o]},o++,pCnt++,o==r.seriesNames.length&&(o=0);else this.seriesType()=="bubble"?(jQuery.each(r.seriesNames,function(n){s[o]={dataSource:h[n],xName:"xValues",yName:"yValues",size:"size",name:r.seriesNames[o]};o++}),this.model.commonSeriesOptions.marker.dataLabel&&(this.model.commonSeriesOptions.marker.dataLabel.visible=!1)):(jQuery.each(r.seriesNames,function(n){s[o]={dataSource:h[n],xName:"xValues",yName:"yValues",name:r.seriesNames[o],marker:{dataLabel:{textMappingName:"text"}}};o++}),this.model.commonSeriesOptions.marker.dataLabel&&(this.model.commonSeriesOptions.marker.dataLabel.visible=!1));if(r.chartLables.length>10&&this.model.zooming==""?this.model.zooming={enable:!0,type:"x,y",enableMouseWheel:!0}:r.chartLables.length<10&&this._initZooming==""&&(this.model.zooming=this._initZooming),jQuery.inArray(this.seriesType(),["line","spline","area","splinearea","stepline","steparea","stackingarea","scatter"])>-1&&!this.model.commonSeriesOptions.marker.visible?this.model.commonSeriesOptions.marker={shape:t.PivotChart.SymbolShapes.Circle,size:{height:12,width:12},visible:!0,connectorLine:{height:30,type:"line"},dataLabel:{visible:!1},border:{width:3,color:"white"}}:this.seriesType()=="pie"||this.seriesType()=="doughnut"?(this.model.commonSeriesOptions.marker.visible=!1,this.model.commonSeriesOptions.marker.dataLabel&&(this.model.commonSeriesOptions.marker.dataLabel.visible=!1)):this.seriesType()=="pyramid"||this.seriesType()=="funnel"?this.model.commonSeriesOptions.marker={dataLabel:{visible:!0}}:jQuery.inArray(this.seriesType(),["column","stackingcolumn","bar","stackingbar"])>-1&&this.model.commonSeriesOptions.marker&&(this.model.commonSeriesOptions.marker.dataLabel&&(this.model.commonSeriesOptions.marker.dataLabel.visible=!1),this.model.commonSeriesOptions.marker.visible=!1),this.model.crosshair.visible?this.model.commonSeriesOptions.tooltip.format="#point.x# : #point.y#":this.model.enableRTL?this.model.commonSeriesOptions.tooltip={visible:!0,template:"e-toolTip"}:this.model.commonSeriesOptions.tooltip.format=this._getLocalizedLabels("Measure")+" : "+r.measureNames+" <br/>"+this._getLocalizedLabels("Column")+" : #series.name# <br/>"+this._getLocalizedLabels("Row")+" : #point.x# <br/>"+this._getLocalizedLabels("Value")+" : #point.y#",this.model.analysisMode==t.PivotChart.AnalysisMode.Olap&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode&&(this.model.primaryYAxis.labelFormat=(this.model.primaryYAxis.labelFormat!=null||this.model.primaryYAxis.labelFormat!="")&&this.model.primaryYAxis.labelFormat?this.model.primaryYAxis.labelFormat:r.labelFormat.indexOf("#")>-1&&r.measureNames.indexOf("~")<0?r.labelFormat=="#,#"?"Number":"{value}"+r.labelFormat.split("##")[r.labelFormat.split("##").length-1]:r.labelFormat.toLowerCase().indexOf("percent")>-1&&r.measureNames.indexOf("~")<0?"{value}%":r.labelFormat.toLowerCase().indexOf("currency")>-1&&r.measureNames.indexOf("~")<0?"Currency":""),this.model.zooming.enableScrollbar){t.isNullOrUndefined(this.model.size.width)&&(this.model.size.width="800px");t.isNullOrUndefined(this.model.size.height)&&(this.model.size.height="400px");var p=this.model.size.width.indexOf("%")>-1?this.element.width()*this.model.size.width.split("%")[0]/100:this.model.size.width.split("px")[0],w=this.model.size.height.indexOf("%")>-1?this.element.height()*this.model.size.height.split("%")[0]/100:this.model.size.height.split("px")[0],b=this.seriesType()=="bar"||this.seriesType()=="stackingbar"?w/100*6:p/100*3;this.model.primaryXAxis.zoomFactor=b/(r.chartLables.length*r.seriesNames.length)}else this.model.primaryXAxis.zoomFactor=1}n("#"+this._id+"Container").ejChart({border:this.model.border,backGroundImageUrl:this.model.backGroundImageUrl,palette:this.model.palette,chartArea:this.model.chartArea,primaryXAxis:this.model.primaryXAxis,primaryYAxis:this.model.primaryYAxis,secondaryX:this.model.secondaryX,secondaryY:this.model.secondaryY,striplineDefault:this.model.striplineDefault,title:{text:this.titleText(),textAlignment:this.model.title.textAlignment,font:{color:this.model.title.color,fontFamily:this.model.title.fontFamily,fontWeight:this.model.title.fontWeight,opacity:this.model.title.opacity,size:this.model.title.size,fontStyle:this.model.title.fontStyle}},lineCap:this.model.lineCap,lineJoin:this.model.lineJoin,legendAlignment:this.model.legendAlignment,legendPosition:this.model.legendPosition,legend:this.model.legend,animation:this.model.animation,crosshair:this.model.crosshair,commonSeriesOptions:{doughnutCoefficient:this.model.commonSeriesOptions.doughnutCoefficient,explodeOffset:this.model.commonSeriesOptions.explodeOffset,pyramidMode:this.model.commonSeriesOptions.pyramidMode,gapRatio:this.model.commonSeriesOptions.gapRatio,pieCoefficient:this.model.commonSeriesOptions.pieCoefficient,doughnutSize:this.model.commonSeriesOptions.doughnutSize,startAngle:this.model.commonSeriesOptions.startAngle,xAxisName:this.model.commonSeriesOptions.xAxisName,yAxisName:this.model.commonSeriesOptions.yAxisName,explodeAll:this.model.commonSeriesOptions.explodeAll,explodeIndex:this.model.commonSeriesOptions.explodeIndex,tooltipOptions:this.model.commonSeriesOptions.tooltipOptions,marker:this.model.commonSeriesOptions.marker||this.model.marker,font:this.model.commonSeriesOptions.font,type:this.seriesType(),enableAnimation:this.model.commonSeriesOptions.enableAnimation,style:this.model.commonSeriesOptions.style,explode:this.model.commonSeriesOptions.explode,labelPosition:this.model.commonSeriesOptions.labelPosition,tooltip:this.model.commonSeriesOptions.tooltip,zOrder:this.model.commonSeriesOptions.zOrder,drawType:this.model.commonSeriesOptions.drawType,isStacking:this.model.commonSeriesOptions.isStacking,enableSmartLabels:this.model.commonSeriesOptions.enableSmartLabels},seriesStyle:this.model.seriesStyle,pointStyle:this.model.pointStyle,textStyle:this.model.textStyle,initSeriesRender:this.model.initSeriesRender,theme:this.model.theme,canResize:this.model.isResponsive,rotation:this.model.rotation,enable3D:this.model.enable3D,zooming:this.model.zooming,margin:this.model.margin,elementSpacing:this.model.elementSpacing,seriesColors:this.model.seriesColors,seriesBorderColors:this.model.seriesBorderColors,pointColors:this.model.pointColors,pointBorderColors:this.model.pointBorderColors,series:s,size:this.model.size,load:this.model.load,axesRangeCalculate:this.model.axesRangeCalculate,axesTitleRendering:this.model.axesTitleRendering,chartAreaBoundsCalculate:this.model.chartAreaBoundsCalculate,legendItemRendering:this.model.legendItemRendering,lengendBoundsCalculate:this.model.lengendBoundsCalculate,preRender:this.model.preRender,seriesRendering:this.model.seriesRendering,symbolRendering:this.model.symbolRendering,titleRendering:this.model.titleRendering,axesLabelsInitialize:this.model.axesLabelsInitialize,pointRegionMouseMove:this.model.pointRegionMouseMove,legendItemClick:this.model.legendItemClick,legendItemMouseMove:this.model.legendItemMouseMove,displayTextRendering:this.model.displayTextRendering,toolTipInitialize:this.model.toolTipInitialize,trackAxisToolTip:this.model.trackAxisToolTip,trackToolTip:this.model.trackToolTip,animationComplete:this.model.animationComplete,destroy:this.model.destroy,create:this.model.create,axesLabelRendering:t.proxy(this._labelRenders,this),pointRegionClick:typeof oclientProxy!="undefined"?oclientProxy.model.enableDeferUpdate?null:t.proxy(this._seriesClick,this):t.proxy(this._seriesClick,this)});this.model.enableRTL&&r!=null&&(y=t.buildTag("div#e-toolTip.e-toolTip",t.buildTag("div.toolTipInfo",t.buildTag("div",r.measureNames+" : "+this._getLocalizedLabels("Measure")+" <br/>")[0].outerHTML+t.buildTag("div","#series.name#: "+this._getLocalizedLabels("Row")+" <br/>")[0].outerHTML+t.buildTag("div","#point.x# : "+this._getLocalizedLabels("Column")+" <br/>")[0].outerHTML+t.buildTag("div","#point.y# : "+this._getLocalizedLabels("Value"))[0].outerHTML).addClass("e-rtl")[0].outerHTML,{display:"none",width:"auto","min-width":"200px","font-size":"12px",padding:"2px 5px","background-color":"rgb(255, 255, 255)",border:"1px solid rgb(0, 0, 0)"})[0].outerHTML,n("#"+this._id).append(y));n("#"+this._id+"progressContainer").hide();this.model.analysisMode==t.PivotChart.AnalysisMode.Olap&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode&&r!=null&&r!=""&&(this._labelCurrentTags.splice(0,this._labelCurrentTags.length),f=this,jQuery.each(r.labelTags,function(n,t){var r={},i=t.split("::");r={name:i[2],state:i[i.length-1],tag:t};f._labelCurrentTags.push(r)}),jQuery.each(this._labelCurrentTags,function(n,t){if(t.name==f._selectedItem&&f._drillAction=="drillup")return f._selectedTagInfo=f._labelCurrentTags[n].tag,!1}));this._waitingPopup!=null&&this._waitingPopup.hide();n(this.element).parents(".e-pivotclient").length>0&&oclientProxy.model.enableToolBar&&!oclientProxy.model.displaySettings.enableFullScreen&&this.model.commonSeriesOptions.tooltip.visible&&this.element.find(".toolTipImg").addClass("enabled");typeof oclientProxy!="undefined"&&!t.isNullOrUndefined(oclientProxy)&&oclientProxy.model.isResponsive&&n("#"+this._id+"Container").width("100%")},_labelRenders:function(n){if(this._trigger("axesLabelRendering",n),n.data.axis.orientation.toLowerCase()=="horizontal"&&n.data.label.Text!=i||(this.seriesType()=="bar"||this.seriesType()=="stackingbar")&&n.data.axis.orientation.toLowerCase()=="vertical"&&n.data.label.Text!=i){var t=this.model.enableRTL?n.data.label.Text.toString().split("~~").reverse():n.data.label.Text.toString().split("~~");n.data.label.Text=this._tagCollection.length==0?t[t.length-1]:this._drillAction=="drilldown"&&t.indexOf(this._selectedItem)+1<t.length?t[t.indexOf(this._selectedItem)+1]:this._drillAction=="drilldown"&&t.indexOf(this._selectedItem)+1>=t.length?t[t.indexOf(this._selectedItem)]:t.length==1?t[0]:this._drillAction=="drillup"?t[this._selectedIndex]:t[t.length-1]}},_reSizeHandler:function(){var n=this.element.find("#"+this._id+"Container").height(this.element.height()).width(this.element.width()).data("ejChart");n.redraw()},_getLocalizedLabels:function(n){return t.PivotChart.Locale[this.locale()][n]===i?t.PivotChart.Locale["en-US"][n]:t.PivotChart.Locale[this.locale()][n]},_onPreventPanelClose:function(i){n("body").find("#preventDiv").remove();!n(".e-pivotgrid").data("ejWaitingPopup")||!t.isNullOrUndefined(i)&&(n(i.target).hasClass("pivotTree")||n(i.target).hasClass("pivotTreeContext")||n(i.target).hasClass("pivotTreeContextMenu"))||n(".e-pivotgrid").data("ejWaitingPopup").hide()},_seriesClick:function(r){var h,e,y,v,w,s,b,c,u,k;this.element.find("#"+this._id+"ExpandMenu, .expandMenu, .e-dialog").remove();var o,f=[],p=this.element.position(),l=this,a=this;if(this.model.analysisMode==t.PivotChart.AnalysisMode.Olap&&this.model.operationalMode==t.PivotChart.OperationalMode.ServerMode)this._selectedTags=[],r.data.region!=null&&r.data.region!=i?(y=this.model.enableRTL?n.map(r.model.primaryXAxis.labels,function(n){return n.split("~~").reverse().join("~~")}):r.model.primaryXAxis.labels,o=y[r.data.region.Region.PointIndex],e=r.data.region.Region.PointIndex):r.data.point.x!=null&&r.data.point.x!=i&&r.data.point.x!=""&&(y=this.model.enableRTL?n.map(r.data.series.xAxis.labels,function(n){return n.split("~~").reverse().join("~~")}):r.data.series.xAxis.labels,o=y[r.data.point.X],e=r.data.point.X),n(n("#"+this._id+"Container_vml_XAxisLabels_0")[0]).children()[e]!=i?h=n(n("#"+this._id+"Container_vml_XAxisLabels_0")[0]).children()[e].innerHTML:n("#"+this._id+"Container_svg_XAxisLabels_0").children()[e]?h=n("#"+this._id+"Container_svg_XAxisLabels_0").children()[e].textContent:this.seriesType()=="bar"||this.seriesType()=="stackingbar"?n(n("#"+this._id+"Container_vml_YAxisLabels_0")[0]).children()[e]!=i?h=n(n("#"+this._id+"Container_vml_YAxisLabels_0")[0]).children()[e].innerHTML:n("#"+this._id+"Container_svg_YAxisLabels_0").children()[e]?h=n("#"+this._id+"Container_svg_YAxisLabels_0").children()[e].textContent:(v=r.model.primaryXAxis.labels[e].split("~~"),h=v[v.length-1]):(v=r.model.primaryXAxis.labels[e].split("~~"),h=v[v.length-1]),h&&(n("#"+this._id).find("#"+this._id+"ExpandMenu, .expandMenu, .e-dialog").remove(),w=o.split("~~"),jQuery.each(w,function(t,i){jQuery.each(a._labelCurrentTags,function(t,r){if(n.trim(i)==r.name)return a._selectedTags.push(r),!1})}),jQuery.each(this._selectedTags,function(i,r){r.state>1&&(l.model.enableRTL?f.push(n(t.buildTag("li.menuList",r.name+" - "+a._getLocalizedLabels("Expand"))[0]).attr("role","presentation")[0].outerHTML):f.push(n(t.buildTag("li.menuList",a._getLocalizedLabels("Expand")+" - "+r.name)[0]).attr("role","presentation")[0].outerHTML))}),jQuery.each(this._selectedTags,function(i,r){for(var u=0;u<o.split("~~").length-1;u++)o.split("~~")[u]==r.name&&r.state==1&&(l.model.enableRTL?f.push(n(t.buildTag("li.menuList",r.name+" - "+a._getLocalizedLabels("Collapse"))[0]).attr("role","presentation")[0].outerHTML):f.push(n(t.buildTag("li.menuList",a._getLocalizedLabels("Collapse")+" - "+o.split("~~")[u])[0]).attr("role","presentation")[0].outerHTML))}));else{if(o=r.data.region!=null&&r.data.region!=i?r.model.primaryXAxis.labels[r.data.region.Region.PointIndex]:r.data.series.xAxis.labels[r.data.point.X],!t.isNullOrUndefined(this._labelCurrentTags.collapsedMembers))if(this.model.analysisMode==t.PivotChart.AnalysisMode.Olap)for(s=o.split(" ~ "),this.model.dataSource.values[0].axis==t.olap.AxisName.Row&&(b=n.map(this.model.dataSource.values[0].measures,function(n){return n.fieldName}),n.inArray(s[s.length-1],b)>=0&&s.splice(s.length-1,1)),this._selectedSeriesInfo=[],u=0;u<s.length;u++)n(this.getJSONRecords().seriesTags).filter(function(n,t){return t.split("::")[2]==s[u]}).length>0&&this._selectedSeriesInfo.push(n(this.getJSONRecords().seriesTags).filter(function(n,t){return t.split("::")[2]==s[u]})[0]),n.inArray(s[u],this._labelCurrentTags.collapsedMembers)>=0&&(l.model.enableRTL?f.push(n(t.buildTag("li.menuList",s[u]+" - "+this._getLocalizedLabels("Expand"))[0]).attr("role","presentation")[0].outerHTML):f.push(n(t.buildTag("li.menuList",this._getLocalizedLabels("Expand")+" - "+s[u])[0]).attr("role","presentation")[0].outerHTML));else n.inArray(o,this._labelCurrentTags.collapsedMembers)>=0&&(l.model.enableRTL?f.push(n(t.buildTag("li.menuList",o+" - "+this._getLocalizedLabels("Expand"))[0]).attr("role","presentation")[0].outerHTML):f.push(n(t.buildTag("li.menuList",this._getLocalizedLabels("Expand")+" - "+o)[0]).attr("role","presentation")[0].outerHTML));if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers))if(this.model.analysisMode==t.PivotChart.AnalysisMode.Olap){for(c=0;c<this._labelCurrentTags.expandedMembers.length;c++)if(!t.isNullOrUndefined(this._labelCurrentTags.expandedMembers[c]))for(u=0;u<this._labelCurrentTags.expandedMembers[c].length;u++)l.model.enableRTL?f.push(n(t.buildTag("li.menuList",this._labelCurrentTags.expandedMembers[c][u].split("::")[2]+" - "+this._getLocalizedLabels("Collapse"))[0]).attr("role","presentation")[0].outerHTML):f.push(n(t.buildTag("li.menuList",this._getLocalizedLabels("Collapse")+" - "+this._labelCurrentTags.expandedMembers[c][u].split("::")[2])[0]).attr("role","presentation")[0].outerHTML)}else for(u=0;u<this._labelCurrentTags.expandedMembers.length;u++)l.model.enableRTL?f.push(n(t.buildTag("li.menuList",this._labelCurrentTags.expandedMembers[u]+" - "+this._getLocalizedLabels("Collapse"))[0]).attr("role","presentation")[0].outerHTML):f.push(n(t.buildTag("li.menuList",this._getLocalizedLabels("Collapse")+" - "+this._labelCurrentTags.expandedMembers[u])[0]).attr("role","presentation")[0].outerHTML)}f.length>0&&(f.push(n(t.buildTag("li.menuList",this._getLocalizedLabels("Exit"))[0]).attr("role","presentation")[0].outerHTML),k=n(t.buildTag("div#"+this._id+"ExpandMenu.expandMenu",f)[0]).attr("role","presentation")[0].outerHTML,n(k).ejDialog({width:"auto",target:"#"+this._id,enableResize:!1,enableRTL:this.model.enableRTL}),n("#"+this._id+"ExpandMenu_wrapper").appendTo(this.element).css({left:r.data.location.x+8+p.left,top:r.data.location.y+8+p.top,"min-height":navigator.userAgent.toLowerCase().indexOf("webkit")>0?"initial":"auto"}),n("#"+this._id+"ExpandMenu").css({"min-height":navigator.userAgent.toLowerCase().indexOf("webkit")>0?"initial":"auto"}));this.element.find(".e-titlebar, .e-header").remove();this._trigger("pointRegionClick",r)},exportPivotChart:function(i,r,u){var e,c,l,s,h,f,a,v,o;t.browserInfo().name=="msie"&&t.browserInfo().version<=8||((t.isNullOrUndefined(r)||r=="")&&(r="Sample"),e=n("#"+this._id+"Container").data("ejChart"),c=e.model.primaryXAxis.zoomFactor,e.model.primaryXAxis.zoomFactor=1,e.model.enableCanvasRendering=!0,e.redraw(),l=e["export"](),s=l.toDataURL("image/png"),e.model.primaryXAxis.zoomFactor=c,e.model.enableCanvasRendering=!1,e.redraw(),h=n(this.element).css("background-color")!=""?n(this.element).css("background-color"):"rgb(255, 255, 255)",f={url:"",fileName:"PivotChart",exportMode:t.PivotChart.ExportMode.ClientMode,title:"",description:"",exportType:i,controlName:this},this._trigger("beforeExport",f),f.exportMode==t.PivotChart.ExportMode.ClientMode?(o={args:JSON.stringify({fileName:t.isNullOrUndefined(r)?t.isNullOrUndefined(f.fileName)?"PivotChart":f.fileName:r,chartdata:s.split(",")[1],bgColor:h,exportFormat:u,title:f.title,description:f.description})},t.raiseWebFormsServerEvents&&(i=="excelExport"||i=="pdfExport"||i=="wordExport"||i=="imageExport")&&f.exportMode==t.PivotChart.ExportMode.ClientMode&&n.trim(f.url)==""?(a={model:this.model,originalEventType:i},v=o,t.raiseWebFormsServerEvents(i,a,v),setTimeout(function(){t.isOnWebForms=!0},1e3)):this.doPostBack(n.trim(f.url)!=""?f.url:i,o)):(o={args:JSON.stringify({exportOption:i,chartdata:s.split(",")[1],bgColor:h,title:f.title,description:f.description})},this.doPostBack(n.trim(f.url)!=""?f.url:this.model.url+"/"+this.model.serviceMethodSettings.exportPivotChart,o)))},doAjaxPost:function(r,u,f,e,o,s){var h,c,l,a=!0;f.XMLA==i?(h="application/json; charset=utf-8",c="json",l=n.proxy(e,this)):(h="text/xml",c="xml",f=f.XMLA,l=n.proxy(e,t.olap.base,s),a=t.browserInfo().name=="msie"&&t.browserInfo().version<=9?!1:!0);n.ajax({type:r,url:u,data:f,async:a,contentType:h,dataType:c,success:l,complete:t.proxy(function(){var n={action:!t.isNullOrUndefined(s)&&!t.isNullOrUndefined(s.action)?s.action:JSON.parse(f).action,customObject:this.model.customObject,element:this.element};this._trigger("renderComplete",n)},this),error:t.proxy(function(n){typeof this._waitingPopup!="undefined"&&this._waitingPopup!=null&&this._waitingPopup.hide();typeof oclientWaitingPopup!="undefined"&&oclientWaitingPopup!=null&&oclientWaitingPopup.hide();var t={action:this._currentAction,customObject:this.model.customObject,element:this.element,Message:n};this._trigger("renderFailure",t);this.renderChartFromJSON("")},this)})},doPostBack:function(t,i){var r=n("<form>").attr({action:t,method:"POST",name:"export"}),f=function(t,i){var u=n('<input type="hidden" title="params">').attr({id:t,name:t,value:i}).appendTo(r)};for(var u in i)f(u,i[u]);r.appendTo(document.body).submit().remove()}});t.PivotChart.Locale={};t.PivotChart.Locale["en-US"]={Measure:"Measure",Row:"Row",Column:"Column",Value:"Value",Expand:"Expand",Collapse:"Collapse",Exit:"Exit",ChartTypes:"Chart Types",TDCharts:"3D Charts",Tooltip:"Tooltip",Exporting:"Exporting",Line:"Line",Spline:"Spline",Column:"Column",Area:"Area",SplineArea:"Spline Area",StepLine:"Step Line",StepArea:"Step Area",Pie:"Pie",Bar:"Bar",StackingArea:"Stacking Area",StackingColumn:"Stacking Column",StackingBar:"Stacking Bar",Pyramid:"Pyramid",Funnel:"Funnel",Doughnut:"Doughnut",Scatter:"Scatter",Bubble:"Bubble",TreeMap:"TreeMap",ColumnTD:"Column 3D",PieTD:"Pie 3D",BarTD:"Bar 3D",StackingBarTD:"StackingBar 3D",StackingColumnTD:"StackingColumn 3D",Excel:"Excel",Word:"Word",Pdf:"PDF",PNG:"PNG",EMF:"EMF",GIF:"GIF",JPG:"JPG",BMF:"BMF"};t.PivotChart.ChartTypes={Line:"line",Spline:"spline",Column:"column",Area:"area",SplineArea:"splinearea",StepLine:"stepline",StepArea:"steparea",Pie:"pie",Bar:"bar",StackingArea:"stackingarea",StackingColumn:"stackingcolumn",StackingBar:"stackingbar",Pyramid:"pyramid",Funnel:"funnel",Doughnut:"doughnut",Scatter:"scatter",Bubble:"bubble",WaterFall:"waterfall"};t.PivotChart.ExportOptions={Excel:"excel",Word:"word",PDF:"pdf",CSV:"csv",PNG:"png",JPG:"jpg",EMF:"emf",GIF:"gif",BMP:"bmp"};t.PivotChart.SymbolShapes={None:"none",LeftArrow:"leftarrow",RightArrow:"rightarrow",Circle:"circle",Cross:"cross",HorizLine:"horizline",VertLine:"vertline",Diamond:"diamond",Rectangle:"rectangle",Triangle:"triangle",InvertedTriangle:"invertedtriangle",Hexagon:"hexagon",Pentagon:"pentagon",Star:"star",Ellipse:"ellipse",Wedge:"wedge",Trapezoid:"trapezoid",UpArrow:"uparrow",DownArrow:"downarrow",Image:"image"};t.PivotChart.AnalysisMode={Olap:"olap",Pivot:"pivot"};t.PivotChart.OperationalMode={ClientMode:"clientmode",ServerMode:"servermode"};t.PivotChart.ExportMode={ClientMode:"clientmode",ServerMode:"servermode"}})(jQuery,Syncfusion)});
