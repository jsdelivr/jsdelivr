/*!
*  filename: ej.pivotpager.min.js
*  version : 14.2.0.26
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./../common/ej.core.min"],n):n()})(function(){(function(n,t,i){t.widget("ejPivotPager","ej.PivotPager",{_rootCSS:"e-pivotpager",element:null,model:null,_getModel:function(){return this.model},_setModel:function(n){this.model=n},defaults:{targetControlID:"",categoricalCurrentPage:1,seriesCurrentPage:1,seriesPageCount:0,categoricalPageCount:0,locale:"en-US",mode:"both"},_init:function(){n("#"+this.model.targetControlID).hasClass("e-pivotgrid")&&(this.targetControlName="PivotGrid",this.targetControl=n("#"+this.model.targetControlID).data("ejPivotGrid"),this.targetControl._pagerObj=this);this._load();this._unwireEvents();this._wireEvents()},_destroy:function(){this.element.empty().removeClass("e-pivotpager")},_wireEvents:function(){this._on(this.element,"keydown",".pagerTextBox",this._pagerTextBoxClick);this._on(this.element,"click",".moveNext",this._moveNextPage);this._on(this.element,"click",".moveLast",this._moveLastPage);this._on(this.element,"click",".moveFirst",this._moveFirstPage);this._on(this.element,"blur",".pagerTextBox",this._restorePageNo);this._on(this.element,"click",".movePrevious",this._movePreviousPage)},_unwireEvents:function(){this._off(this.element,"click",".moveNext",this._moveNextPage);this._off(this.element,"blur",".pagerTextBox",this._restorePageNo);this._off(this.element,"click",".moveLast",this._moveLastPage);this._off(this.element,"click",".moveFirst",this._moveFirstPage);this._off(this.element,"click",".movePrevious",this._movePreviousPage);this._off(this.element,"keydown",".pagerTextBox",this._pagerTextBoxClick)},_getLocalizedLabels:function(n){return t.PivotPager.Locale[this.model.locale][n]===i?t.PivotPager.Locale["en-US"][n]:t.PivotPager.Locale[this.model.locale][n]},_load:function(){var i,r,u,f;n(this.element).addClass("pivotPager").attr("targetControlID",this.model.targetControlID);i="";this.targetControl.model.enableRTL&&this.element.addClass("e-rtl");this.model.mode!="series"&&(r=t.buildTag("td.categPagerTd",""),n(r).html(t.buildTag("div.pagerDiv",t.buildTag("span.moveFirst e-icon").attr("role","button").attr("aria-label","move first")[0].outerHTML+t.buildTag("span.movePrevious e-icon").attr("role","button").attr("aria-label","move previous")[0].outerHTML+t.buildTag("span.pagerLabel",this._getLocalizedLabels("CategoricalPage"))[0].outerHTML+t.buildTag("input#"+this._id+"_CategCurrentPage.pagerTextBox")[0].outerHTML+t.buildTag("span.categPageCount")[0].outerHTML+t.buildTag("span.moveNext e-icon").attr("role","button").attr("aria-label","move next")[0].outerHTML+t.buildTag("span.moveLast e-icon").attr("role","button").attr("aria-label","move last")[0].outerHTML)),i=r[0].outerHTML);this.model.mode!="categorical"&&(u=t.buildTag("td.seriesPagerTd",""),n(u).html(t.buildTag("div.pagerDiv",t.buildTag("span.moveFirst e-icon").attr("role","button").attr("aria-label","move first")[0].outerHTML+t.buildTag("span.movePrevious e-icon").attr("role","button").attr("aria-label","move previous")[0].outerHTML+t.buildTag("span.pagerLabel",this._getLocalizedLabels("SeriesPage"))[0].outerHTML+t.buildTag("input#"+this._id+"_SeriesCurrentPage.pagerTextBox")[0].outerHTML+t.buildTag("span.seriesPageCount")[0].outerHTML+t.buildTag("span.moveNext e-icon").attr("role","button").attr("aria-label","move next")[0].outerHTML+t.buildTag("span.moveLast e-icon").attr("role","button").attr("aria-label","move last")[0].outerHTML)),i+=u[0].outerHTML);f=t.buildTag("table",t.buildTag("tbody",t.buildTag("tr",i)))[0];n(this.element).html(f)},initPagerProperties:function(n,t){this.model.categoricalPageCount=Math.ceil(n.Column/t.CategorialPageSize);this.model.seriesPageCount=Math.ceil(n.Row/t.SeriesPageSize);this.model.categoricalCurrentPage=t.CategorialCurrentPage;this.model.seriesCurrentPage=t.SeriesCurrentPage;this._initPagerControl()},_initPagerControl:function(){this.model.mode!="series"&&(n(this.element.find(".categPageCount")[0]).html("/ "+this.model.categoricalPageCount),n("#"+this._id+"_CategCurrentPage")[0].value=this.model.categoricalCurrentPage,this._setNavigators(this.model.categoricalCurrentPage,this.model.categoricalPageCount,this.element.find(".categPagerTd")[0]));this.model.mode!="categorical"&&(n(this.element.find(".seriesPageCount")[0]).html("/ "+this.model.seriesPageCount),n("#"+this._id+"_SeriesCurrentPage")[0].value=this.model.seriesCurrentPage,this._setNavigators(this.model.seriesCurrentPage,this.model.seriesPageCount,this.element.find(".seriesPagerTd")[0]))},_moveNextPage:function(t){if(!n(t.target).hasClass("disabled")){var i=n(n(t.target).parents("td")[0]).find(".pagerTextBox")[0];n(n(n(t.target).parents("td")[0]).find(".movePrevious")[0]).removeClass("disabled");n(n(n(t.target).parents("td")[0]).find(".moveFirst")[0]).removeClass("disabled");i.value=parseInt(i.value)+1;i.id.indexOf("Categ")!=-1?(this.model.categoricalCurrentPage=i.value,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("categorical",i.value),i.value==this.model.categoricalPageCount&&(n(t.target).addClass("disabled"),n(n(n(t.target).parents("td")[0]).find(".moveLast")[0]).addClass("disabled"))):i.id.indexOf("Series")!=-1&&(this.model.seriesCurrentPage=i.value,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("series",i.value),i.value==this.model.seriesPageCount&&(n(t.target).addClass("disabled"),n(n(n(t.target).parents("td")[0]).find(".moveLast")[0]).addClass("disabled")))}},_movePreviousPage:function(t){if(!n(t.target).hasClass("disabled")){var i=n(n(t.target).parents("td")[0]).find(".pagerTextBox")[0];n(n(n(t.target).parents("td")[0]).find(".moveNext")[0]).removeClass("disabled");n(n(n(t.target).parents("td")[0]).find(".moveLast")[0]).removeClass("disabled");i.value=parseInt(i.value)-1;i.id.indexOf("Categ")!=-1?(this.model.categoricalCurrentPage=i.value,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("categorical",i.value),i.value=="1"&&(n(t.target).addClass("disabled"),n(n(n(t.target).parents("td")[0]).find(".moveFirst")[0]).addClass("disabled"))):i.id.indexOf("Series")!=-1&&(this.model.seriesCurrentPage=i.value,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("series",i.value),i.value=="1"&&(n(t.target).addClass("disabled"),n(n(n(t.target).parents("td")[0]).find(".moveFirst")[0]).addClass("disabled")))}},_moveLastPage:function(t){if(!n(t.target).hasClass("disabled")){var i=n(n(t.target).parents("td")[0]).find(".pagerTextBox")[0];n(n(n(t.target).parents("td")[0]).find(".movePrevious")[0]).removeClass("disabled");n(n(n(t.target).parents("td")[0]).find(".moveFirst")[0]).removeClass("disabled");n(t.target).addClass("disabled");n(n(n(t.target).parents("td")[0]).find(".moveNext")[0]).addClass("disabled");i.id.indexOf("Categ")!=-1?(this.model.categoricalCurrentPage=i.value=this.model.categoricalPageCount,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("categorical",i.value)):i.id.indexOf("Series")!=-1&&(this.model.seriesCurrentPage=i.value=this.model.seriesPageCount,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("series",i.value))}},_moveFirstPage:function(t){if(!n(t.target).hasClass("disabled")){var i=n(n(t.target).parents("td")[0]).find(".pagerTextBox")[0];n(n(n(t.target).parents("td")[0]).find(".moveNext")[0]).removeClass("disabled");n(n(n(t.target).parents("td")[0]).find(".moveLast")[0]).removeClass("disabled");n(t.target).addClass("disabled");n(n(n(t.target).parents("td")[0]).find(".movePrevious")[0]).addClass("disabled");i.id.indexOf("Categ")!=-1?(this.model.categoricalCurrentPage=i.value=1,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("categorical",i.value)):i.id.indexOf("Series")!=-1&&(this.model.seriesCurrentPage=i.value=1,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid("series",i.value))}},_createErrorDialog:function(n){var i=t.buildTag("div.errorDialog#errorDialog",t.buildTag("div.errorImg")[0].outerHTML+t.buildTag("div.errorContent",n)[0].outerHTML+t.buildTag("div",t.buildTag("button#errOKBtn.errOKBtn",this._getLocalizedLabels("OK"))[0].outerHTML)[0].outerHTML).attr("title",this._getLocalizedLabels("Error"))[0].outerHTML;this.targetControl.element.append(i);me=this.targetControl;this.targetControl.element.find(".errorDialog").ejDialog({width:400,target:"#"+this.model.targetControlID,enableResize:!1,enableRTL:this.targetControl.model.enableRTL,close:this.targetControl._onPreventPanelClose});this.targetControl.element.find(".errOKBtn").ejButton({type:t.ButtonType.Button}).bind(t.eventType.click,function(n){n.preventDefault();me.element.find(".e-dialog, .errorDialog").remove();me._onPreventPanelClose()});this.element.find(".e-dialog .e-close").attr("title",this._getLocalizedLabels("Close"))},_pagerTextBoxClick:function(t){if(t.which==13){t.preventDefault();var i=n(t.target).parents("td")[0],r=i.className.indexOf("categ")!=-1?this.model.categoricalPageCount:this.model.seriesPageCount;parseInt(t.target.value)>r||parseInt(t.target.value)<1||t.target.value==""?(this._restorePageNo(t),this._createErrorDialog(this._getLocalizedLabels("PageCountErrorMsg"))):(i.className.indexOf("categ")!=-1&&this.model.categoricalCurrentPage!=parseInt(t.target.value)?(this.model.categoricalCurrentPage=t.target.value,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid(i.className,t.target.value)):i.className.indexOf("series")!=-1&&this.model.seriesCurrentPage!=parseInt(t.target.value)&&(this.model.seriesCurrentPage=t.target.value,this.targetControlName=="PivotGrid"&&this.targetControl.refreshPagedPivotGrid(i.className,t.target.value)),this._setNavigators(t.target.value,r,i),t.target.blur())}else{if(n.inArray(t.keyCode,[46,8,9,27,13,190])!==-1||t.keyCode==65&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39)return;(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}},_restorePageNo:function(n){n.target.value=n.target.id.indexOf("Categ")!=-1?this.model.categoricalCurrentPage:this.model.seriesCurrentPage},_setNavigators:function(t,i,r){t==i&&(n(n(r).find(".moveNext")[0]).addClass("disabled"),n(n(r).find(".moveLast")[0]).addClass("disabled"));t=="1"&&(n(n(r).find(".movePrevious")[0]).addClass("disabled"),n(n(r).find(".moveFirst")[0]).addClass("disabled"));t>1&&(n(n(r).find(".movePrevious")[0]).removeClass("disabled"),n(n(r).find(".moveFirst")[0]).removeClass("disabled"));t<i&&(n(n(r).find(".moveNext")[0]).removeClass("disabled"),n(n(r).find(".moveLast")[0]).removeClass("disabled"))}});t.PivotPager.Locale={};t.PivotPager.Locale["en-US"]={SeriesPage:"Series Page",CategoricalPage:"Categorical Page",Error:"Error",OK:"OK",Close:"Close",PageCountErrorMsg:"Enter valid page number"};t.PivotPager.Mode={Both:"both",Categorical:"categorical",Series:"series"}})(jQuery,Syncfusion)});
