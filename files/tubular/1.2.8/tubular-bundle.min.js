!function(a,b){"use strict";a.module("tubular",["tubular.directives","tubular.services","tubular.models","LocalStorageModule"]).config(["localStorageServiceProvider","$httpProvider",function(a,b){a.setPrefix("tubular"),b.interceptors.push("tubularAuthInterceptor")}]).filter("errormessage",function(){return function(b){return a.isDefined(b)&&a.isDefined(b.data)&&b.data&&a.isDefined(b.data.ExceptionMessage)?b.data.ExceptionMessage:b.statusText||"Connection Error"}}).filter("numberorcurrency",["numberFilter","currencyFilter",function(a,b){return function(c,d,e,f){return f=f||2,"C"===d?b(c,e||"$",f):"I"===d?parseInt(c):a(c,f)}}]).filter("moment",["dateFilter",function(a){return function(c,d){return b.isMoment(c)?c.format(d||"M/DD/YYYY"):a(c)}}])}(angular,moment),function(a){"use strict";a.module("tubular.directives",["tubular.services","tubular.models"]).directive("tbGridTable",[function(){return{require:"^tbGrid",templateUrl:"tbGridTable.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:!0,controller:["$scope",function(a){a.$component=a.$parent.$parent.$ctrl,a.tubularDirective="tubular-grid-table"}]}}]).directive("tbColumnDefinitions",[function(){return{require:"^tbGridTable",templateUrl:"tbColumnDefinitions.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:!0,controller:["$scope",function(a){a.$component=a.$parent.$parent.$component,a.tubularDirective="tubular-column-definitions"}],compile:function(){return{post:function(a){a.$component.hasColumnsDefinitions=!0}}}}}]).directive("tbColumn",[function(){return{require:"^tbColumnDefinitions",template:'<th ng-transclude ng-class="{sortable: column.Sortable}" ng-show="column.Visible"></th>',restrict:"E",replace:!0,transclude:!0,scope:{visible:"=",label:"@",name:"@",sortable:"=?",sortOrder:"=?",isKey:"=?",searchable:"=?",columnType:"@?",aggregate:"@?",sortDirection:"@?"},controller:["$scope",function(b){b.column={Label:""},b.$component=b.$parent.$parent.$component,b.tubularDirective="tubular-column",b.label=b.label||(b.name||"").replace(/([a-z])([A-Z])/g,"$1 $2"),b.sortColumn=function(a){b.$component.sortColumn(b.column.Name,a)},b.$watch("visible",function(c){a.isDefined(c)&&(b.column.Visible=c)}),b.$watch("label",function(){b.column.Label=b.label,b.$broadcast("tbColumn_LabelChanged",b.label)});var c=new function(){this.Name=b.name||null,this.Label=b.label||null,this.Sortable=b.sortable,this.SortOrder=parseInt(b.sortOrder)||-1,this.SortDirection=function(){return a.isUndefined(b.sortDirection)?"None":0===b.sortDirection.toLowerCase().indexOf("asc")?"Ascending":0===b.sortDirection.toLowerCase().indexOf("desc")?"Descending":"None"}(),this.IsKey=!!a.isDefined(b.isKey)&&b.isKey,this.Searchable=!!a.isDefined(b.searchable)&&b.searchable,this.Visible="false"!==b.visible,this.Filter=null,this.DataType=b.columnType||"string",this.Aggregate=b.aggregate||"none"};b.$component.addColumn(c),b.column=c,b.label=c.Label}]}}]).directive("tbColumnHeader",[function(){return{require:"^tbColumn",templateUrl:"tbColumnHeader.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(a){a.sortColumn=function(b){a.$parent.sortColumn(b.ctrlKey)},a.$on("tbColumn_LabelChanged",function(b,c){a.label=c})}],link:function(a,b){b.find("ng-transclude").length>0&&b.find("span")[0].remove(),a.$parent.column.Sortable||b.find("a").replaceWith(b.find("a").children())}}}]).directive("tbRowSet",[function(){return{require:"^tbGrid",templateUrl:"tbRowSet.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(a){a.$component=a.$parent.$component||a.$parent.$parent.$component,a.tubularDirective="tubular-row-set"}]}}]).directive("tbFootSet",[function(){return{require:"^tbGrid",templateUrl:"tbFootSet.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(a){a.$component=a.$parent.$component||a.$parent.$parent.$component,a.tubularDirective="tubular-foot-set"}]}}]).directive("tbRowTemplate",[function(){return{templateUrl:"tbRowTemplate.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:{model:"=rowModel",selectable:"@"},controller:["$scope",function(b){b.tubularDirective="tubular-rowset",b.fields=[],b.hasFieldsDefinitions=!1,b.selectableBool="true"===b.selectable,b.$component=b.$parent.$parent.$parent.$component,b.$watch("hasFieldsDefinitions",function(c){c!==!0||a.isUndefined(b.model)||b.bindFields()}),b.bindFields=function(){a.forEach(b.fields,function(a){a.bindScope()})},b.selectableBool&&a.isDefined(b.model)&&b.$component.selectFromSession(b.model),b.changeSelection=function(a){b.selectableBool&&b.$component.changeSelection(a)}}],compile:function(){return{post:function(a){a.hasFieldsDefinitions=!0}}}}}]).directive("tbCellTemplate",[function(){return{require:"^tbRowTemplate",templateUrl:"tbCellTemplate.tpl.html",restrict:"E",replace:!0,transclude:!0,scope:{columnName:"@?"},controller:["$scope",function(a){if(a.column={Visible:!0},a.columnName=a.columnName||null,a.$component=a.$parent.$parent.$component,a.getFormScope=function(){return null},null!=a.columnName){var b=a.$component.columns.filter(function(b){return b.Name===a.columnName});b.length>0&&(a.column=b[0])}}]}}])}(angular),function(a){a.module("tubular.directives").run(["$templateCache",function(a){"use strict";a.put("tbCheckboxField.tpl.html",'<div ng-class="{ \'checkbox\' : $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }" class=tubular-checkbox><input type=checkbox ng-model=$ctrl.value ng-disabled="$ctrl.readOnly || !$ctrl.isEditing" class=tubular-checkbox id={{$ctrl.name}} name={{$ctrl.name}}><label ng-show=$ctrl.isEditing for={{$ctrl.name}} ng-bind=$ctrl.label></label><span class="help-block error-block" ng-show=$ctrl.isEditing ng-repeat="error in $ctrl.state.$errors">{{error}}</span> <span class=help-block ng-show="$ctrl.isEditing && $ctrl.help" ng-bind=$ctrl.help></span></div>'),a.put("tbDropdownEditor.tpl.html",'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide=$ctrl.isEditing ng-bind=$ctrl.readOnlyValue></span><label ng-show=$ctrl.showLabel ng-bind=$ctrl.label></label><select ng-options="{{ $ctrl.selectOptions }}" ng-show=$ctrl.isEditing ng-model=$ctrl.value class=form-control ng-required=$ctrl.required ng-disabled=$ctrl.readOnly name={{$ctrl.name}} ng-change="onChange({value: value})"></select><span class="help-block error-block" ng-show=$ctrl.isEditing ng-repeat="error in $ctrl.state.$errors">{{error}}</span> <span class=help-block ng-show="$ctrl.isEditing && $ctrl.help" ng-bind=$ctrl.help></span></div>'),a.put("tbHiddenField.tpl.html","<input type=hidden ng-model=$ctrl.value class=form-control name={{$ctrl.name}}>"),a.put("tbNumericEditor.tpl.html","<div ng-class=\"{ 'form-group' : $ctrl.showLabel && $ctrl.isEditing, 'has-error' : !$ctrl.$valid && $ctrl.$dirty() }\"><span ng-hide=$ctrl.isEditing>{{$ctrl.value | numberorcurrency: format }}</span><label ng-show=$ctrl.showLabel ng-bind=$ctrl.label></label><div class=input-group ng-show=$ctrl.isEditing><div class=input-group-addon ng-hide=\"$ctrl.format == 'I'\"><i ng-class=\"{ 'fa': true, 'fa-calculator': $ctrl.format != 'C', 'fa-usd': $ctrl.format == 'C'}\"></i></div><input type=number placeholder={{$ctrl.placeholder}} ng-model=$ctrl.value class=form-control ng-required=$ctrl.required ng-hide=$ctrl.readOnly step=\"{{$ctrl.step || 'any'}}\" name={{$ctrl.name}}><p class=\"form-control form-control-static text-right\" ng-show=$ctrl.readOnly>{{$ctrl.value | numberorcurrency: format}}</p></div><span class=\"help-block error-block\" ng-show=$ctrl.isEditing ng-repeat=\"error in $ctrl.state.$errors\">{{error}}</span> <span class=help-block ng-show=\"$ctrl.isEditing && $ctrl.help\" ng-bind=$ctrl.help></span></div>"),a.put("tbSimpleEditor.tpl.html",'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide=$ctrl.isEditing ng-bind=$ctrl.value></span><label ng-show=$ctrl.showLabel ng-bind=$ctrl.label></label><input type={{$ctrl.editorType}} placeholder={{$ctrl.placeholder}} ng-show=$ctrl.isEditing ng-model=$ctrl.value class=form-control ng-required=$ctrl.required ng-readonly=$ctrl.readOnly name={{$ctrl.name}}> <span class="help-block error-block" ng-show=$ctrl.isEditing ng-repeat="error in $ctrl.state.$errors">{{error}}</span> <span class=help-block ng-show="$ctrl.isEditing && $ctrl.help" ng-bind=$ctrl.help></span></div>'),a.put("tbTextArea.tpl.html",'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide=$ctrl.isEditing ng-bind=$ctrl.value></span><label ng-show=$ctrl.showLabel ng-bind=$ctrl.label></label><textarea ng-show=$ctrl.isEditing placeholder={{$ctrl.placeholder}} ng-model=$ctrl.value class=form-control ng-required=$ctrl.required ng-readonly=$ctrl.readOnly name={{$ctrl.name}}></textarea><span class="help-block error-block" ng-show=$ctrl.isEditing ng-repeat="error in $ctrl.state.$errors">{{error}}</span> <span class=help-block ng-show="$ctrl.isEditing && $ctrl.help" ng-bind=$ctrl.help></span></div>'),a.put("tbRemoveButton.tpl.html","<button class=\"btn btn-danger btn-xs btn-popover\" uib-popover-template=$ctrl.templateName popover-placement=right popover-title=\"{{ $ctrl.legend || ('UI_REMOVEROW' | translate) }}\" popover-is-open=$ctrl.isOpen popover-trigger=\"'click outsideClick'\" ng-hide=$ctrl.model.$isEditing><span ng-show=$ctrl.showIcon class={{::$ctrl.icon}}></span> <span ng-show=$ctrl.showCaption>{{:: $ctrl.caption || ('CAPTION_REMOVE' | translate) }}</span></button>"),a.put("tbSaveButton.tpl.html","<div ng-show=model.$isEditing><button ng-click=save() class=\"btn btn-default {{:: saveCss || '' }}\" ng-disabled=!model.$valid()>{{:: saveCaption || ('CAPTION_SAVE' | translate) }}</button> <button ng-click=cancel() class=\"btn {{:: cancelCss || 'btn-default' }}\">{{:: cancelCaption || ('CAPTION_CANCEL' | translate) }}</button></div>"),a.put("tbTextSearch.tpl.html",'<div class=tubular-grid-search><div class="input-group input-group-sm"><span class=input-group-addon><i class="fa fa-search"></i> </span><input type=search name=tbTextSearchInput class=form-control placeholder="{{:: $ctrl.placeholder || (\'UI_SEARCH\' | translate) }}" maxlength=20 ng-model=$ctrl.$component.search.Text ng-model-options="{ debounce: 300 }"> <span id=tb-text-search-reset-panel class=input-group-btn ng-show="$ctrl.$component.search.Text.length > 0"><button id=tb-text-search-reset-button class="btn btn-default" uib-tooltip="{{\'CAPTION_CLEAR\' | translate}}" ng-click="$ctrl.$component.search.Text = \'\'"><i class="fa fa-times-circle"></i></button></span></div></div>'),a.put("tbCellTemplate.tpl.html","<td ng-transclude ng-show=column.Visible data-label={{::column.Label}}></td>"),a.put("tbColumn.tpl.html",'<th ng-transclude ng-class="{sortable: column.Sortable}" ng-show=column.Visible></th>'),a.put("tbColumnDefinitions.tpl.html","<thead><tr ng-transclude></tr></thead>"),a.put("tbColumnFilterButtons.tpl.html",'<div class=text-right><button class="btn btn-sm btn-success" ng-click=$ctrl.currentFilter.applyFilter() ng-disabled="$ctrl.currentFilter.filter.Operator == \'None\'" ng-bind="\'CAPTION_APPLY\' | translate"></button>&nbsp; <button class="btn btn-sm btn-danger" ng-click=$ctrl.currentFilter.clearFilter() ng-bind="\'CAPTION_CLEAR\' | translate"></button></div>'),a.put("tbColumnHeader.tpl.html","<span><a title=\"Click to sort. Press Ctrl to sort by multiple columns\" class=column-header href ng-click=sortColumn($event)><span class=column-header-default>{{ $parent.column.Label }}</span><ng-transclude></ng-transclude></a><i class=\"fa sort-icon\" ng-class=\"{'fa-long-arrow-up': $parent.column.SortDirection == 'Ascending', 'fa-long-arrow-down': $parent.column.SortDirection == 'Descending'}\">&nbsp;</i></span>"),a.put("tbFootSet.tpl.html","<tfoot ng-transclude></tfoot>"),a.put("tbGrid.tpl.html",'<div><div class=tubular-overlay ng-show="$ctrl.showLoading && $ctrl.currentRequest != null"><div><div class="fa fa-refresh fa-2x fa-spin"></div></div></div><ng-transclude></ng-transclude></div>'),a.put("tbGridTable.tpl.html",'<table ng-transclude class="table tubular-grid-table"></table>'),a.put("tbRowSet.tpl.html","<tbody ng-transclude></tbody>"),a.put("tbRowTemplate.tpl.html","<tr ng-transclude ng-class=\"{'info': selectableBool && model.$selected}\" ng-click=changeSelection(model)></tr>")}])}(angular),function(a){"use strict";a.module("tubular.directives").directive("tbForm",[function(){return{template:'<form ng-transclude name="{{name}}"></form>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=?",serverUrl:"@",serverSaveUrl:"@",serverSaveMethod:"@",modelKey:"@?",dataServiceName:"@?serviceName",requireAuthentication:"=?",name:"@?formName"},controller:"tbFormController",compile:function(){return{post:function(a){a.finishDefinition()}}}}}])}(angular),function(a){"use strict";a.module("tubular.directives").controller("tbFormController",["$scope","$routeParams","tubularModel","tubularHttp","$timeout","$element","tubularEditorService",function(b,c,d,e,f,g,h){b.tubularDirective="tubular-form",b.hasFieldsDefinitions=!1,b.fields=[],b.dataService=e.getDataService(b.dataServiceName);var i=this;i.serverSaveMethod=b.serverSaveMethod||"POST",i.name=b.name||h.getUniqueTbFormName(),b.getFormScope=function(){return b[g.attr("name")]},i.requireAuthentication=!!a.isUndefined(b.requireAuthentication)||b.requireAuthentication,e.setRequireAuthentication(i.requireAuthentication),b.$watch("hasFieldsDefinitions",function(a){a===!0&&i.retrieveData()}),b.cloneModel=function(c){var e={};a.forEach(c,function(a,b){"$"!==b[0]&&(e[b]=a)}),b.model=new d(b,b,e,b.dataService),i.bindFields()},i.bindFields=function(){a.forEach(b.fields,function(a){a.bindScope()})},i.retrieveData=function(){return b.modelKey=b.modelKey||c.param,a.isDefined(b.serverUrl)?void(a.isDefined(b.modelKey)&&null!=b.modelKey&&""!==b.modelKey?b.dataService.getByKey(b.serverUrl,b.modelKey).promise.then(function(a){b.model=new d(b,b,a,b.dataService),i.bindFields()},function(a){b.$emit("tbForm_OnConnectionError",a)}):b.dataService.get(e.addTimeZoneToUrl(b.serverUrl)).promise.then(function(c){a.isDefined(b.model)&&a.isDefined(b.model.$component)?b.model=new d(b,b.model.$component,c,b.model.$component.dataService):b.model=new d(b,b,c,b.dataService),i.bindFields(),b.model.$isNew=!0},function(a){b.$emit("tbForm_OnConnectionError",a)})):(a.isUndefined(b.model)&&(b.model=new d(b,b,{},b.dataService)),void i.bindFields())},b.save=function(c,d){if(b.model.$valid())return b.currentRequest=b.model.save(c),b.currentRequest===!1?void b.$emit("tbForm_OnSavingNoChanges",b):void b.currentRequest.then(function(c){a.isDefined(b.model.$component)&&b.model.$component.autoRefresh&&b.model.$component.retrieveData(),b.$emit("tbForm_OnSuccessfulSave",c,b),d||b.clear();var e=b.getFormScope();e&&e.$setPristine()},function(a){b.$emit("tbForm_OnConnectionError",a,b)}).then(function(){b.model.$isLoading=!1,b.currentRequest=null})},b.update=b.save,b.create=function(){b.model.$isNew=!0,b.save()},b.cancel=function(){b.$emit("tbForm_OnCancel",b.model),b.clear()},b.clear=function(){a.forEach(b.fields,function(a){a.resetEditor?a.resetEditor():a.value=a.defaultValue})},b.finishDefinition=function(){var a=f(function(){b.hasFieldsDefinitions=!0,g.find("input").length&&g.find("input")[0].focus()},0);b.$emit("tbForm_OnGreetParentController",{controller:i,scope:b}),b.$on("$destroy",function(){f.cancel(a)})}}])}(angular),function(a){"use strict";a.module("tubular.directives").component("tbTextSearch",{require:{$component:"^tbGrid"},templateUrl:"tbTextSearch.tpl.html",bindings:{minChars:"@?",placeholder:"@"},controller:"tbTextSearchController"})}(angular),function(a){"use strict";a.module("tubular.directives").controller("tbTextSearchController",["$scope",function(b){function c(a){d.$component.saveSearch(),d.$component.search.Operator=a,d.$component.retrieveData()}var d=this;d.$onInit=function(){d.minChars=d.minChars||3,d.lastSearch=d.$component.search.Text},b.$watch("$ctrl.$component.search.Text",function(b,e){if(!a.isUndefined(b)&&b!==e)return d.$component.search.Text=b,d.lastSearch&&""===b?void c("None"):void(""===b||b.length<d.minChars||b===d.lastSearch||(d.lastSearch=b,c("Auto")))})}])}(angular),function(a){"use strict";a.module("tubular.directives").component("tbGrid",{templateUrl:"tbGrid.tpl.html",transclude:!0,bindings:{serverUrl:"@",serverSaveUrl:"@",serverDeleteUrl:"@",serverSaveMethod:"@",pageSize:"=?",onBeforeGetData:"=?",requestMethod:"@",dataServiceName:"@?serviceName",requireAuthentication:"@?",name:"@?gridName",editorMode:"@?",showLoading:"=?",autoRefresh:"=?",savePage:"=?",savePageSize:"=?",saveSearch:"=?"},controller:"tbGridController"})}(angular),function(a){"use strict";a.module("tubular.directives").controller("tbGridController",["$scope","localStorageService","tubularPopupService","tubularModel","tubularHttp","$routeParams",function(b,c,d,e,f,g){var h=this;h.$onInit=function(){h.tubularDirective="tubular-grid",h.name=h.name||"tbgrid",h.columns=[],h.rows=[],h.savePage=!!a.isUndefined(h.savePage)||h.savePage,h.currentPage=h.savePage?c.get(h.name+"_page")||1:1,h.savePageSize=!!a.isUndefined(h.savePageSize)||h.savePageSize,h.pageSize=h.pageSize||20,h.saveSearch=!!a.isUndefined(h.saveSearch)||h.saveSearch,h.totalPages=0,h.totalRecordCount=0,h.filteredRecordCount=0,h.requestedPage=h.currentPage,h.hasColumnsDefinitions=!1,h.requestCounter=0,h.requestMethod=h.requestMethod||"POST",h.serverSaveMethod=h.serverSaveMethod||"POST",h.requestTimeout=2e4,h.currentRequest=null,h.autoSearch=g.param||(h.saveSearch?c.get(h.name+"_search")||"":""),h.search={Text:h.autoSearch,Operator:""===h.autoSearch?"None":"Auto"},h.isEmpty=!1,h.dataService=f.getDataService(h.dataServiceName),h.tempRow=new e(b,h,{},h.dataService),h.requireAuthentication=h.requireAuthentication||!0,f.setRequireAuthentication(h.requireAuthentication),h.editorMode=h.editorMode||"none",h.canSaveState=!1,h.showLoading=!!a.isUndefined(h.showLoading)||h.showLoading,h.autoRefresh=!!a.isUndefined(h.autoRefresh)||h.autoRefresh,h.serverDeleteUrl=h.serverDeleteUrl||h.serverSaveUrl,b.$emit("tbGrid_OnGreetParentController",h)},b.$watch("$ctrl.columns",function(){h.hasColumnsDefinitions!==!1&&h.canSaveState!==!1&&c.set(h.name+"_columns",h.columns)},!0),b.$watch("$ctrl.serverUrl",function(a,b){h.hasColumnsDefinitions===!1||h.currentRequest||a===b||h.retrieveData()}),b.$watch("$ctrl.hasColumnsDefinitions",function(a){a===!0&&h.retrieveData()}),b.$watch("$ctrl.pageSize",function(){h.hasColumnsDefinitions&&h.requestCounter>0&&(h.savePageSize&&c.set(h.name+"_pageSize",h.pageSize),h.retrieveData())}),b.$watch("$ctrl.requestedPage",function(){h.hasColumnsDefinitions&&h.requestCounter>0&&h.retrieveData()}),h.saveSearch=function(){h.saveSearch&&(""===h.search.Text?c.remove(h.name+"_search"):c.set(h.name+"_search",h.search.Text))},h.addColumn=function(a){if(null!=a.Name){if(h.hasColumnsDefinitions!==!1)throw"Cannot define more columns. Column definitions have been sealed";h.columns.push(a)}},h.newRow=function(c,f,g,i){h.tempRow=new e(b,h,i||{},h.dataService),h.tempRow.$isNew=!0,h.tempRow.$isEditing=!0,h.tempRow.$component=h,a.isDefined(c)&&a.isDefined(f)&&f&&d.openDialog(c,h.tempRow,h,g)},h.deleteRow=function(a){var c=h.serverDeleteUrl.split("?"),d=c[0]+"/"+a.$key;c.length>1&&(d+="?"+c[1]);var e={serverUrl:d,requestMethod:"DELETE",timeout:h.requestTimeout,requireAuthentication:h.requireAuthentication};h.currentRequest=h.dataService.retrieveDataAsync(e),h.currentRequest.promise.then(function(c){a.$hasChanges=!1,b.$emit("tbGrid_OnRemove",c)},function(a){b.$emit("tbGrid_OnConnectionError",a)}).then(function(){h.currentRequest=null,h.retrieveData()})},h.verifyColumns=function(){var b=c.get(h.name+"_columns");return null==b||""===b?void c.set(h.name+"_columns",h.columns):void a.forEach(b,function(a){var b=h.columns.filter(function(b){return b.Name===a.Name});if(0!==b.length){var c=b[0];c.Visible=a.Visible,h.requestCounter<1&&(c.SortOrder=a.SortOrder,c.SortDirection=a.SortDirection),null!=c.Filter&&null!=c.Filter.Text||null!=a.Filter&&null!=a.Filter.Text&&"None"!==a.Filter.Operator&&(c.Filter=a.Filter)}})},h.getRequestObject=function(a){return{serverUrl:h.serverUrl,requestMethod:h.requestMethod||"POST",timeout:h.requestTimeout,requireAuthentication:h.requireAuthentication,data:{Count:h.requestCounter,Columns:h.columns,Skip:a,Take:parseInt(h.pageSize),Search:h.search,TimezoneOffset:(new Date).getTimezoneOffset()}}},h.retrieveData=function(){if(h.serverUrl&&null===h.currentRequest){h.canSaveState=!0,h.verifyColumns(),h.savePageSize&&(h.pageSize=c.get(h.name+"_pageSize")||h.pageSize),h.pageSize<10&&(h.pageSize=20);var d=Math.ceil(h.totalRecordCount/h.pageSize);h.requestedPage>d&&(h.requestedPage=d);var e=(h.requestedPage-1)*h.pageSize;e<0&&(e=0);var f=h.getRequestObject(e);a.isUndefined(h.onBeforeGetData)===!1&&h.onBeforeGetData(),b.$emit("tbGrid_OnBeforeRequest",f,h),h.currentRequest=h.dataService.retrieveDataAsync(f),h.currentRequest.promise.then(h.processPayload,function(a){h.requestedPage=h.currentPage,b.$emit("tbGrid_OnConnectionError",a)}).then(function(){h.currentRequest=null})}},h.processPayload=function(f){if(h.requestCounter+=1,a.isUndefined(f)||null==f)return void b.$emit("tbGrid_OnConnectionError",{statusText:"Data is empty",status:0});if(h.dataSource=f,!f.Payload){var g="tubularGrid("+h.$id+"): response is invalid.";return h.currentRequest.cancel(g),void b.$emit("tbGrid_OnConnectionError",g)}h.rows=f.Payload.map(function(a){var c=new e(b,h,a,h.dataService);return c.$component=h,c.editPopup=function(c,f){d.openDialog(c,new e(b,h,a,h.dataService),h,f)},c}),b.$emit("tbGrid_OnDataLoaded",h),h.aggregationFunctions=f.AggregationPayload,h.currentPage=f.CurrentPage,h.totalPages=f.TotalPages,h.totalRecordCount=f.TotalRecordCount,h.filteredRecordCount=f.FilteredRecordCount,h.isEmpty=0===h.filteredRecordCount,h.savePage&&c.set(h.name+"_page",h.currentPage)},h.sortColumn=function(c,d){var e=h.columns.filter(function(a){return a.Name===c});if(0!==e.length){var f=e[0];if(f.Sortable!==!1){var g=f.SortDirection,i="None"===g?"Ascending":"Ascending"===g?"Descending":"None";"None"===i?(f.SortOrder=-1,f.SortDirection="None"):(f.SortOrder=Number.MAX_VALUE,f.SortDirection=i),d===!1&&a.forEach(h.columns.filter(function(a){return a.Name!==c}),function(a){a.SortOrder=-1,a.SortDirection="None"});var j=h.columns.filter(function(a){return a.SortOrder>0});j.sort(function(a,b){return a.SortOrder===b.SortOrder?0:a.SortOrder>b.SortOrder}),j.forEach(function(a,b){a.SortOrder=b+1}),b.$broadcast("tbGrid_OnColumnSorted"),h.retrieveData()}}},h.selectedRows=function(){return c.get(h.name+"_rows")||[]},h.clearSelection=function(){a.forEach(h.rows,function(a){a.$selected=!1}),c.set(h.name+"_rows",[])},h.isEmptySelection=function(){return 0===h.selectedRows().length},h.selectFromSession=function(a){a.$selected=h.selectedRows().filter(function(b){return b.$key===a.$key}).length>0},h.changeSelection=function(b){if(!a.isUndefined(b)){b.$selected=!b.$selected;var d=h.selectedRows();b.$selected?d.push({$key:b.$key}):d=d.filter(function(a){return a.$key!==b.$key}),c.set(h.name+"_rows",d)}},h.getFullDataSource=function(a){var c=h.getRequestObject(0);c.data.Take=-1,c.data.Search={Text:"",Operator:"None"},h.dataService.retrieveDataAsync(c).promise.then(function(b){a(b.Payload)},function(a){b.$emit("tbGrid_OnConnectionError",a)}).then(function(){h.currentRequest=null})},h.visibleColumns=function(){return h.columns.filter(function(a){return a.Visible}).length}}])}(angular),function(a,b){"use strict";function c(){var b=a.element('<input type="date" value=":)" />');return"date"===b.attr("type")&&""===b.val()}function d(c){return function(d){if(!a.isUndefined(d)&&(a.isString(d)&&(c.value=b(d)),!a.isDefined(c.dateValue)))if(b.isMoment(c.value)){var e=c.value.toObject();c.dateValue=new Date(e.years,e.months,e.date,e.hours,e.minutes,e.seconds)}else c.dateValue=c.value}}function e(b,c,d){return b.min&&(a.isDate(b.min)||(b.min=new Date(b.min)),b.$valid=b.dateValue>=b.min,!b.$valid)?void(b.state.$errors=[c("EDITOR_MIN_DATE",d(b.min,b.format))]):void(b.max&&(a.isDate(b.max)||(b.max=new Date(b.max)),b.$valid=b.dateValue<=b.max,b.$valid||(b.state.$errors=[c("EDITOR_MAX_DATE",d(b.max,b.format))])))}b.fn.toJSON=function(){return this.isValid()?this.format():null};var f=["tubularEditorService","$scope","translateFilter","filterFilter",function(a,b,c,d){var e=this;e.validate=function(){if(e.regex&&e.value){var a=new RegExp(e.regex);if(a.test(e.value)===!1)return e.$valid=!1,void(e.state.$errors=[e.regexErrorMessage||c("EDITOR_REGEX_DOESNT_MATCH")])}if(e.match&&e.value!==e.$component.model[e.match]){var b=d(e.$component.fields,{name:e.match},!0)[0].label;return e.$valid=!1,void(e.state.$errors=[c("EDITOR_MATCH",b)])}return e.min&&e.value&&e.value.length<parseInt(e.min)?(e.$valid=!1,void(e.state.$errors=[c("EDITOR_MIN_CHARS",e.min)])):e.max&&e.value&&e.value.length>parseInt(e.max)?(e.$valid=!1,void(e.state.$errors=[c("EDITOR_MAX_CHARS",e.max)])):void 0},e.$onInit=function(){a.setupScope(b,null,e,!1)}}],g=["tubularEditorService","$scope","translateFilter",function(b,c,d){var e=this;e.validate=function(){return a.isDefined(e.min)&&null!=e.min&&a.isDefined(e.value)&&null!=e.value&&(e.$valid=e.value>=e.min,!e.$valid)?void(e.state.$errors=[d("EDITOR_MIN_NUMBER",e.min)]):void(a.isDefined(e.max)&&null!=e.max&&a.isDefined(e.value)&&null!=e.value&&(e.$valid=e.value<=e.max,e.$valid||(e.state.$errors=[d("EDITOR_MAX_NUMBER",e.max)])))},e.$onInit=function(){e.DataType="numeric",b.setupScope(c,0,e,!1)}}],h=["$scope","$element","tubularEditorService","translateFilter","dateFilter",function(c,f,g,h,i){var j=this;c.$watch(function(){return j.value},d(j)),c.$watch(function(){return j.dateValue},function(c){a.isDefined(c)&&(j.value=b(c))}),j.validate=function(){e(j,h,i)},j.$onInit=function(){j.DataType="datetime",g.setupScope(c,j.format,j),j.format=j.format||"MMM D, Y"}}],i=["$scope","$element","tubularEditorService","translateFilter","dateFilter",function(c,f,g,h,i){var j=this;c.$watch(function(){return j.value},d(j)),c.$watch(function(){return j.dateValue},function(c){a.isDefined(c)&&(j.value=b(c))}),j.validate=function(){e(j,h,i)},j.$onInit=function(){j.DataType="date",g.setupScope(c,j.format,j),j.format=j.format||"MMM D, Y"}}],j=["tubularEditorService","$scope",function(b,c){var d=this;d.$onInit=function(){b.setupScope(c,null,d),d.dataIsLoaded=!1,d.selectOptions="d for d in $ctrl.options",a.isDefined(d.optionLabel)&&(d.selectOptions="d."+d.optionLabel+" for d in $ctrl.options",a.isDefined(d.optionTrack)?d.selectOptions="d as d."+d.optionLabel+" for d in $ctrl.options track by d."+d.optionTrack:a.isDefined(d.optionKey)&&(d.selectOptions="d."+d.optionKey+" as "+d.selectOptions)),a.isUndefined(d.optionsUrl)||(c.$watch(function(){return d.optionsUrl},function(a,b){a!==b&&(d.dataIsLoaded=!1,d.loadData())}),d.isEditing?d.loadData():c.$watch(function(){return d.isEditing},function(){d.isEditing&&d.loadData()}))},c.updateReadonlyValue=function(){if(d.readOnlyValue=d.value,d.value&&a.isDefined(d.optionLabel)&&d.options)if(a.isDefined(d.optionKey)){var b=d.options.filter(function(a){return a[d.optionKey]===d.value});b.length>0&&(d.readOnlyValue=b[0][d.optionLabel])}else d.readOnlyValue=d.options[d.optionLabel]},c.$watch(function(){return d.value},function(a){c.$emit("tbForm_OnFieldChange",d.$component,d.name,a,d.options),c.updateReadonlyValue()}),d.loadData=function(){if(!d.dataIsLoaded){if(a.isUndefined(d.$component)||null==d.$component)throw"You need to define a parent Form or Grid";var b=d.$component.dataService.retrieveDataAsync({serverUrl:d.optionsUrl,requestMethod:d.optionsMethod||"GET"}),e=d.value;d.value="",b.promise.then(function(b){d.options=b,d.dataIsLoaded=!0;var c=d.options&&d.options.length>0?a.isDefined(d.optionKey)?d.options[0][d.optionKey]:d.options[0]:"";d.value=e||d.defaultValue||c;var f=d.getFormField();f&&f.$setDirty()},function(a){c.$emit("tbGrid_OnConnectionError",a)})}}}];a.module("tubular.directives").component("tbSimpleEditor",{templateUrl:"tbSimpleEditor.tpl.html",bindings:{regex:"@?",regexErrorMessage:"@?",value:"=?",isEditing:"=?",editorType:"@",showLabel:"=?",label:"@?",required:"=?",min:"=?",max:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",defaultValue:"@?",match:"@?"},controller:f}).component("tbNumericEditor",{templateUrl:"tbNumericEditor.tpl.html",bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",defaultValue:"@?",step:"=?"},controller:g}).component("tbDateTimeEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{ $ctrl.value | date: format }}</span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label>'+(c()?'<input type="datetime-local" ng-show="$ctrl.isEditing" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"/>':'<div class="input-group" ng-show="$ctrl.isEditing"><input type="text" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" is-open="$ctrl.open" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.open = !$ctrl.open"><i class="fa fa-calendar"></i></button></span></div><div uib-timepicker ng-model="$ctrl.dateValue"  show-seconds="true" show-meridian="false"></div>')+'<span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",readOnly:"=?",defaultValue:"@?",help:"@?"},controller:h}).component("tbDateEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{ $ctrl.value | moment: $ctrl.format }}</span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"></label>'+(c()?'<input type="date" ng-show="$ctrl.isEditing" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"/>':'<div class="input-group" ng-show="$ctrl.isEditing"><input type="text" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" is-open="$ctrl.open" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.open = !$ctrl.open"><i class="fa fa-calendar"></i></button></span></div>')+'<span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}</span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"></span></div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",readOnly:"=?",defaultValue:"@?",help:"@?"},controller:i}).component("tbDropdownEditor",{templateUrl:"tbDropdownEditor.tpl.html",bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",name:"@",readOnly:"=?",help:"@?",defaultValue:"@?",options:"=?",optionsUrl:"@",optionsMethod:"@?",optionLabel:"@?",optionKey:"@?",optionTrack:"@?",onChange:"&?"},controller:j}).directive("tbTypeaheadEditor",["$q","$compile",function(b,c){return{restrict:"E",replace:!0,scope:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",options:"=?",optionsUrl:"@",
optionsMethod:"@?",optionLabel:"@?",css:"@?"},link:function(a,b){var d='<div ng-class="{ \'form-group\' : showLabel && isEditing, \'has-error\' : !$valid && $dirty() }"><span ng-hide="isEditing" ng-bind="value"></span><label ng-show="showLabel" ng-bind="label"></label><div class="input-group" ng-show="isEditing"><input ng-model="value" placeholder="{{placeholder}}" title="{{tooltip}}" autocomplete="off" class="form-control {{css}}" ng-readonly="readOnly || lastSet.indexOf(value) !== -1" uib-typeahead="'+a.selectOptions+'" ng-required="required" name="{{name}}" /> <div class="input-group-addon" ng-hide="lastSet.indexOf(value) !== -1"><i class="fa fa-pencil"></i></div><span class="input-group-btn" ng-show="lastSet.indexOf(value) !== -1" tabindex="-1"><button class="btn btn-default" type="button" ng-click="value = null"><i class="fa fa-times"></i></span></div><span class="help-block error-block" ng-show="isEditing" ng-repeat="error in state.$errors">{{error}}</span><span class="help-block" ng-show="isEditing && help" ng-bind="help"></span></div>',e=c(d),f=e(a);b.append(f)},controller:["$scope","tubularEditorService",function(c,d){d.setupScope(c),c.selectOptions="d for d in getValues($viewValue)",c.lastSet=[],a.isDefined(c.optionLabel)&&(c.selectOptions="d as d."+c.optionLabel+" for d in getValues($viewValue)"),c.$watch("value",function(b){c.$emit("tbForm_OnFieldChange",c.$component,c.name,b,c.options),c.tooltip=b,a.isDefined(b)&&null!=b&&a.isDefined(c.optionLabel)&&(c.tooltip=b[c.optionLabel])}),c.getValues=function(d){if(a.isUndefined(c.optionsUrl))return b(function(a){c.lastSet=c.options,a(c.options)});if(a.isUndefined(c.$component)||null==c.$component)throw"You need to define a parent Form or Grid";var e=c.$component.dataService.retrieveDataAsync({serverUrl:c.optionsUrl+"?search="+d,requestMethod:c.optionsMethod||"GET"}).promise;return e.then(function(a){return c.lastSet=a,a}),e}}]}}]).component("tbHiddenField",{templateUrl:"tbHiddenField.tpl.html",bindings:{value:"=?",name:"@"},controller:["tubularEditorService","$scope",function(a,b){var c=this;c.$onInit=function(){a.setupScope(b,null,c,!0)}}]}).component("tbCheckboxField",{templateUrl:"tbCheckboxField.tpl.html",bindings:{value:"=?",isEditing:"=?",editorType:"@",showLabel:"=?",label:"@?",required:"=?",name:"@",readOnly:"=?",help:"@?",checkedValue:"=?",uncheckedValue:"=?"},controller:["tubularEditorService","$scope",function(b,c){var d=this;d.$onInit=function(){d.required=!1,d.checkedValue=!a.isDefined(d.checkedValue)||d.checkedValue,d.uncheckedValue=!!a.isDefined(d.uncheckedValue)&&d.uncheckedValue,b.setupScope(c,null,d,!0)}}]}).component("tbTextArea",{templateUrl:"tbTextArea.tpl.html",bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",placeholder:"@?",required:"=?",min:"=?",max:"=?",name:"@",readOnly:"=?",help:"@?"},controller:["tubularEditorService","$scope","translateFilter",function(a,b,c){var d=this;d.validate=function(){return d.min&&d.value&&d.value.length<parseInt(d.min)?(d.$valid=!1,void(d.state.$errors=[c("EDITOR_MIN_CHARS",+d.min)])):d.max&&d.value&&d.value.length>parseInt(d.max)?(d.$valid=!1,void(d.state.$errors=[c("EDITOR_MAX_CHARS",+d.max)])):void 0},d.$onInit=function(){a.setupScope(b,null,d,!1)}}]})}(angular,moment),function(a){"use strict";a.module("tubular.directives").component("tbColumnFilterButtons",{require:{$columnFilter:"^?tbColumnFilter",$columnDateTimeFilter:"^?tbColumnDateTimeFilter",$columnOptionsFilter:"^?tbColumnOptionsFilter"},templateUrl:"tbColumnFilterButtons.tpl.html",controller:["$scope",function(a){var b=this;b.$onInit=function(){b.currentFilter=b.$columnFilter||b.$columnDateTimeFilter||b.$columnOptionsFilter||a.$parent.$ctrl}}]}).component("tbColumnSelector",{require:{$component:"^tbGrid"},template:'<button class="btn btn-sm btn-default" ng-click="$ctrl.openColumnsSelector()">{{::\'CAPTION_SELECTCOLUMNS\' | translate}}</button></div>',controller:["$uibModal",function(a){var b=this;b.openColumnsSelector=function(){var c=b.$component.columns,d=a.open({template:'<div class="modal-header"><h3 class="modal-title">{{::\'CAPTION_SELECTCOLUMNS\' | translate}}</h3></div><div class="modal-body"><table class="table table-bordered table-responsive table-striped table-hover table-condensed"><thead><tr><th>Visible?</th><th>Name</th></tr></thead><tbody><tr ng-repeat="col in Model"><td><input type="checkbox" ng-model="col.Visible" ng-disabled="col.Visible && isInvalid()" /></td><td>{{col.Label}}</td></tr></tbody></table></div></div><div class="modal-footer"><button class="btn btn-warning" ng-click="closePopup()">{{::\'CAPTION_CLOSE\' | translate}}</button></div>',backdropClass:"fullHeight",animation:!1,controller:["$scope",function(a){a.Model=c,a.isInvalid=function(){return 1===a.Model.filter(function(a){return a.Visible}).length},a.closePopup=d.close}]})}}]}).component("tbColumnFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"></i></button></div>',bindings:{text:"@",argument:"@",operator:"@",title:"@",onlyContains:"=?"},controller:["$scope","tubularTemplateService",function(b,c){var d=this;d.$onInit=function(){d.onlyContains=!a.isUndefined(d.onlyContains)&&d.onlyContains,d.templateName=c.tbColumnFilterPopoverTemplateName,c.setupFilter(b,d)}}]}).component("tbColumnDateTimeFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"></i></button></div>',bindings:{text:"@",argument:"@",operator:"@",title:"@"},controller:["$scope","tubularTemplateService",function(a,b){var c=this;c.$onInit=function(){c.templateName=b.tbColumnDateTimeFilterPopoverTemplateName,b.setupFilter(a,c)}}]}).component("tbColumnOptionsFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"></i></button></div>',bindings:{argument:"@",operator:"@",optionsUrl:"@",title:"@"},controller:["$scope","tubularTemplateService",function(a,b){var c=this;c.getOptionsFromUrl=function(){if(c.dataIsLoaded)return void a.$apply();var b=c.$component.dataService.retrieveDataAsync({serverUrl:c.filter.OptionsUrl,requestMethod:"GET"});b.promise.then(function(a){c.optionsItems=a,c.dataIsLoaded=!0},function(b){a.$emit("tbGrid_OnConnectionError",b)})},c.$onInit=function(){c.dataIsLoaded=!1,c.templateName=b.tbColumnOptionsFilterPopoverTemplateName,b.setupFilter(a,c),c.getOptionsFromUrl(),c.filter.Operator="Multiple"}}]})}(angular),function(a){"use strict";a.module("tubular.directives").component("tbRemoveButton",{require:"^tbGrid",templateUrl:"tbRemoveButton.tpl.html",bindings:{model:"=",caption:"@",cancelCaption:"@",legend:"@",icon:"@"},controller:["tubularTemplateService",function(b){var c=this;c.$onInit=function(){c.showIcon=a.isDefined(c.icon),c.showCaption=!(c.showIcon&&a.isUndefined(c.caption)),c.templateName=b.tbRemoveButtonrPopoverTemplateName}}]}).directive("tbSaveButton",[function(){return{require:"^tbGrid",templateUrl:"tbSaveButton.tpl.html",restrict:"E",replace:!0,scope:{model:"=",isNew:"=?",saveCaption:"@",saveCss:"@",cancelCaption:"@",cancelCss:"@"},controller:["$scope",function(b){b.isNew=b.isNew||!1,b.save=function(){if(b.isNew&&(b.model.$isNew=!0),b.model.$valid())return b.currentRequest=b.model.save(),b.currentRequest===!1?void b.$emit("tbGrid_OnSavingNoChanges",b.model):void b.currentRequest.then(function(c){b.model.$isEditing=!1,a.isDefined(b.model.$component)&&a.isDefined(b.model.$component.autoRefresh)&&b.model.$component.autoRefresh&&b.model.$component.retrieveData(),b.$emit("tbGrid_OnSuccessfulSave",c,b.model.$component)},function(a){b.$emit("tbGrid_OnConnectionError",a)})},b.cancel=function(){b.model.revertChanges()}}]}}]).component("tbEditButton",{require:{$component:"^tbGrid"},template:'<button ng-click="$ctrl.edit()" class="btn btn-xs btn-default" ng-hide="$ctrl.model.$isEditing">{{:: $ctrl.caption || (\'CAPTION_EDIT\' | translate) }}</button>',bindings:{model:"=",caption:"@"},controller:function(){var a=this;a.edit=function(){"popup"===a.$component.editorMode?a.model.editPopup():a.model.edit()}}}).component("tbPageSizeSelector",{require:{$component:"^tbGrid"},template:'<div class="{{::$ctrl.css}}"><form class="form-inline"><div class="form-group"><label class="small">{{:: $ctrl.caption || (\'UI_PAGESIZE\' | translate) }} </label>&nbsp;<select ng-model="$ctrl.$component.pageSize" class="form-control input-sm {{::$ctrl.selectorCss}}" ng-options="item for item in options"></select></div></form></div>',bindings:{caption:"@",css:"@",selectorCss:"@",options:"=?"},controller:["$scope",function(b){b.options=a.isDefined(b.$ctrl.options)?b.$ctrl.options:[10,20,50,100]}]}).component("tbExportButton",{require:{$component:"^tbGrid"},template:'<div class="btn-group" uib-dropdown><button class="btn btn-info btn-sm {{::$ctrl.css}}" uib-dropdown-toggle><span class="fa fa-download"></span>&nbsp;{{:: $ctrl.caption || (\'UI_EXPORTCSV\' | translate)}}&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu><li><a href="javascript:void(0)" ng-click="$ctrl.downloadCsv($parent)">{{:: $ctrl.captionMenuCurrent || (\'UI_CURRENTROWS\' | translate)}}</a></li><li><a href="javascript:void(0)" ng-click="$ctrl.downloadAllCsv($parent)">{{:: $ctrl.captionMenuAll || (\'UI_ALLROWS\' | translate)}}</a></li></ul></div>',bindings:{filename:"@",css:"@",caption:"@",captionMenuCurrent:"@",captionMenuAll:"@"},controller:["tubularGridExportService",function(a){var b=this;b.downloadCsv=function(){a.exportGridToCsv(b.filename,b.$component)},b.downloadAllCsv=function(){a.exportAllGridToCsv(b.filename,b.$component)}}]}).component("tbPrintButton",{require:{$component:"^tbGrid"},template:'<button class="btn btn-default btn-sm" ng-click="$ctrl.printGrid()"><span class="fa fa-print"></span>&nbsp;{{:: $ctrl.caption || (\'CAPTION_PRINT\' | translate)}}</button>',bindings:{title:"@",printCss:"@",caption:"@"},controller:["$window",function(b){var c=this;c.printGrid=function(){c.$component.getFullDataSource(function(d){var e='<table class="table table-bordered table-striped"><thead><tr>'+c.$component.columns.filter(function(a){return a.Visible}).map(function(a){return"<th>"+(a.Label||a.Name)+"</th>"}).join(" ")+"</tr></thead><tbody>"+d.map(function(b){return a.isObject(b)&&(b=Object.keys(b).map(function(a){return b[a]})),"<tr>"+b.map(function(b,d){return a.isDefined(c.$component.columns[d])&&!c.$component.columns[d].Visible?"":"<td>"+b+"</td>"}).join(" ")+"</tr>"}).join("  ")+"</tbody></table>",f=b.open("about:blank","Print","menubar=0,location=0,height=500,width=800");f.document.write('<link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/latest/css/bootstrap.min.css" />'),""!==c.printCss&&f.document.write('<link rel="stylesheet" href="'+c.printCss+'" />'),f.document.write('<body onload="window.print();">'),f.document.write("<h1>"+c.title+"</h1>"),f.document.write(e),f.document.write("</body>"),f.document.close()})}}]})}(angular),function(a){"use strict";a.module("tubular.directives").component("tbGridPager",{require:{$component:"^tbGrid"},template:'<div class="tubular-pager"><ul uib-pagination ng-disabled="$ctrl.$component.isEmpty" direction-links="true" first-text="&#xf049;" previous-text="&#xf04a;" next-text="&#xf04e;" last-text="&#xf050;"boundary-links="true" total-items="$ctrl.$component.filteredRecordCount" items-per-page="$ctrl.$component.pageSize" max-size="5" ng-model="$ctrl.$component.currentPage" ng-change="$ctrl.pagerPageChanged()"></ul><div>',scope:!0,terminal:!1,controller:["$scope",function(a){var b=this;a.$watch("$ctrl.$component.currentPage",function(){b.$component.currentPage!==b.$component.requestedPage&&(b.$component.requestedPage=b.$component.currentPage)}),b.pagerPageChanged=function(){b.$component.requestedPage=b.$component.currentPage}}]}).component("tbGridPagerInfo",{require:{$component:"^tbGrid"},template:'<div class="pager-info small" ng-hide="$ctrl.$component.isEmpty">{{\'UI_SHOWINGRECORDS\' | translate: $ctrl.currentInitial:$ctrl.currentTop:$ctrl.$component.filteredRecordCount}} <span ng-show="$ctrl.filtered">{{\'UI_FILTEREDRECORDS\' | translate: $ctrl.$component.totalRecordCount}}</span></div>',bindings:{cssClass:"@?"},controller:["$scope",function(a){var b=this;b.fixCurrentTop=function(){b.currentTop=b.$component.pageSize*b.$component.currentPage,b.currentInitial=(b.$component.currentPage-1)*b.$component.pageSize+1,b.currentTop>b.$component.filteredRecordCount&&(b.currentTop=b.$component.filteredRecordCount),b.currentTop<0&&(b.currentTop=0),(b.currentInitial<0||0===b.$component.totalRecordCount)&&(b.currentInitial=0),b.$component.pageSize>b.$component.filteredRecordCount&&(b.currentInitial=1,b.currentTop=b.$component.filteredRecordCount)},a.$watch("$ctrl.$component.filteredRecordCount",function(){b.filtered=b.$component.totalRecordCount!==b.$component.filteredRecordCount,b.fixCurrentTop()}),a.$watch("$ctrl.$component.currentPage",b.fixCurrentTop),a.$watch("$ctrl.$component.pageSize",b.fixCurrentTop),b.$onInit=b.fixCurrentTop}]})}(angular),function(a,b){"use strict";a.module("tubular.models",[]).factory("tubularModel",function(){return function(c,d,e,f){var g={$key:"",$addField:function(a,b,d){this[a]=b,this.$original=this.$original||{},this.$original[a]=d?void 0:b,d&&(this.$hasChanges=!0),this.$state=this.$state||{},c.$watch(function(){return g[a]},function(b,c){b!==c&&(g.$hasChanges=g[a]!==g.$original[a])})}};return a.isArray(e)===!1&&a.forEach(Object.keys(e),function(a){g.$addField(a,e[a])}),a.isDefined(d.columns)&&a.forEach(d.columns,function(c,d){var f=a.isDefined(e[d])?e[d]:e[c.Name];a.isUndefined(f)&&0===e[d]&&(f=0),g.$addField(c.Name,f),"date"!==c.DataType&&"datetime"!==c.DataType&&"datetimeutc"!==c.DataType||(null===g[c.Name]||""===g[c.Name]?g[c.Name]="":g[c.Name]="datetimeutc"===c.DataType?b.utc(g[c.Name]):b(g[c.Name])),c.IsKey&&(g.$key+=g[c.Name]+",")}),g.$key.length>1&&(g.$key=g.$key.substring(0,g.$key.length-1)),g.$hasChanges=g.$isEditing=!1,g.$selected=!1,g.$isNew=!1,g.$valid=function(){var b=!0;return a.forEach(g.$state,function(c){a.isUndefined(c)||c.$valid()||(b=!1)}),b},g.save=function(b){if(a.isUndefined(f)||null==f)throw"Define DataService to your model.";if(a.isUndefined(d.serverSaveUrl)||null==d.serverSaveUrl)throw"Define a Save URL.";return!!(b||g.$isNew||g.$hasChanges)&&(g.$isLoading=!0,f.saveDataAsync(g,{serverUrl:d.serverSaveUrl,requestMethod:g.$isNew?d.serverSaveMethod||"POST":"PUT"}).promise)},g.edit=function(){g.$isEditing&&g.$hasChanges&&g.save(),g.$isEditing=!g.$isEditing},g.delete=function(){d.deleteRow(g)},g.resetOriginal=function(){a.forEach(g.$original,function(a){g.$original[a]=g[a]})},g.revertChanges=function(){a.forEach(Object.keys(g),function(b){"$"===b[0]||a.isUndefined(g.$original[b])||(g[b]=g.$original[b])}),g.$hasChanges=g.$isEditing=!1},g}})}(angular,moment),function(a,b){"use strict";function c(a){return a.columns.map(function(a){return a.Label})}function d(a){return a.columns.map(function(a){return a.Visible})}function e(c,d,e,f){var g=function(b){a.isObject(b)&&(b=Object.keys(b).map(function(a){return b[a]}));for(var c="",d=0;d<b.length;d++)if(f[d]){var e=null==b[d]?"":b[d].toString();a.isDate(b[d])&&(e=b[d].toLocaleString());var g=e.replace(/"/g,'""');g.search(/("|,|\n)/g)>=0&&(g='"'+g+'"'),d>0&&(c+=","),c+=g}return c+"\n"},h="";d.length>0&&(h+=g(d));for(var i=0;i<e.length;i++)h+=g(e[i]);var j=new Blob(["\ufeff"+h],{type:"text/csv;charset=utf-8;"});b(j,c)}a.module("tubular.services",["ui.bootstrap","LocalStorageModule"]).factory("tubularGridExportService",function(){return{exportAllGridToCsv:function(a,b){var f=c(b),g=d(b);b.getFullDataSource(function(b){e(a,f,b,g)})},exportGridToCsv:function(a,b){var f=c(b),g=d(b);b.currentRequest={},e(a,f,b.dataSource.Payload,g),b.currentRequest=null}}})}(angular,saveAs),function(a){"use strict";a.module("tubular.services").service("tubularEditorService",["translateFilter",function(b){var c=this;c.getUniqueTbFormName=function(){return c.tbFormCounter=c.tbFormCounter||(c.tbFormCounter=-1),c.tbFormCounter++,"tbForm"+c.tbFormCounter},c.setupScope=function(c,d,e,f){e=e||c,e.isEditing=!!a.isUndefined(e.isEditing)||e.isEditing,e.showLabel=e.showLabel||!1,e.label=e.label||(e.name||"").replace(/([a-z])([A-Z])/g,"$1 $2"),e.required=e.required||!1,e.readOnly=e.readOnly||!1,e.format=e.format||d,e.$valid=!0,e.state={$valid:function(){return e.checkValid(),0===this.$errors.length},$dirty:e.$dirty,$errors:[]},e.getFormField=function(){for(var a=c.$parent;null!=a;){if("tubular-form"===a.tubularDirective){var b=a.getFormScope();return null==b?null:b[c.Name]}a=a.$parent}return null},e.$dirty=function(){var a=e.getFormField();return null==a||a.$dirty},e.checkValid=function(){return e.$valid=!0,e.state.$errors=[],a.isUndefined(e.value)&&e.required||a.isDate(e.value)&&isNaN(e.value.getTime())&&e.required?(e.$valid=!1,e.state.$errors=[b("EDITOR_REQUIRED")],void(a.isDefined(c.$parent.Model)&&(c.$parent.Model.$state[c.Name]=e.state))):void(a.isUndefined(e.validate)||e.validate())},c.$watch(function(){return e.value},function(b,d){a.isUndefined(d)&&a.isUndefined(b)||(e.$valid=!0,a.isDefined(c.$parent.Model)&&(a.isDefined(c.$parent.Model[e.name])?(c.$parent.Model[e.name]=b,c.$parent.Model.$state=c.$parent.Model.$state||[],c.$parent.Model.$state[c.Name]=e.state):a.isDefined(c.$parent.Model.$addField)&&c.$parent.Model.$addField(e.name,b,!0)),e.checkValid())});for(var g=c.$parent;null!=g;){if("tubular-form"===g.tubularDirective||"tubular-rowset"===g.tubularDirective){if(null===e.name)return;if(g.hasFieldsDefinitions!==!1)throw"Cannot define more fields. Field definitions have been sealed";e.$component="tubular-form"===g.tubularDirective?g:g.$component,c.Name=e.name,e.bindScope=function(){if(c.$parent.Model=g.model,a.equals(e.value,g.model[c.Name])===!1){if(a.isDefined(g.model[c.Name]))if("date"===e.DataType&&null!=g.model[c.Name]&&a.isString(g.model[c.Name])){var b=new Date(Date.parse(g.model[c.Name])).toString().match(/([-\+][0-9]+)\s/)[1];b=b.substr(0,b.length-2)+":"+b.substr(b.length-2,2),e.value=new Date(Date.parse(g.model[c.Name].replace("Z","")+b))}else e.value=g.model[c.Name];g.$watch(function(){return e.value},function(a){a!==g.model[c.Name]&&(g.model[c.Name]=a)})}if(c.$watch(function(){return g.model[c.Name]},function(a){a!==e.value&&(e.value=a)},!0),null==e.value&&e.defaultValue&&null!=e.defaultValue&&("date"===e.DataType&&a.isString(e.defaultValue)&&(e.defaultValue=new Date(e.defaultValue)),"numeric"===e.DataType&&a.isString(e.defaultValue)&&(e.defaultValue=parseFloat(e.defaultValue)),e.value=e.defaultValue),g.model.$state=g.model.$state||{},g.model.$state[c.Name]={$valid:function(){return e.checkValid(),0===e.state.$errors.length},$dirty:e.$dirty,$errors:e.state.$errors},a.equals(e.state,g.model.$state[c.Name])===!1&&(e.state=g.model.$state[c.Name]),f){var d=e.getFormField();d&&d.$setDirty()}},g.fields.push(e);break}g=g.$parent}}}])}(angular),function(a){"use strict";a.module("tubular.services").service("tubularHttp",["$http","$timeout","$q","localStorageService","translateFilter","$log","$document",function(b,c,d,e,f,g,h){function i(){var b=e.get("auth_data");a.isDefined(b)&&null!=b&&(q.userData=b,m())}function j(a){var b=new Date;return a=new Date(a),a-b<=0}function k(){e.remove("auth_data")}function l(){k(),e.set("auth_data",q.userData)}function m(){b.defaults.headers.common.Authorization="Bearer "+q.userData.bearerToken}function n(){var b=e.get("auth_data");if(a.isUndefined(b))throw"No authentication data exists";if(j(b.expirationDate))throw"Authentication token has already expired";q.userData=b,m()}function o(){q.userData.isAuthenticated=!1,q.userData.username="",q.userData.bearerToken="",q.userData.expirationDate=null,q.userData.refreshToken=null}function p(a){return function(b){g.error(b),a.resolve(b)}}var q=this;q.userData={isAuthenticated:!1,username:"",bearerToken:"",expirationDate:null},q.isBearerTokenExpired=function(){return j(q.userData.expirationDate)},q.useRefreshTokens=!1,q.requireAuthentication=!0,q.refreshTokenUrl=q.tokenUrl="/api/token",q.apiBaseUrl="/api",q.setRequireAuthentication=function(a){q.requireAuthentication=a},q.setTokenUrl=function(a){q.tokenUrl=a},q.setRefreshTokenUrl=function(a){q.refreshTokenUrl=a},q.setApiBaseUrl=function(a){q.apiBaseUrl=a},q.isAuthenticated=function(){if(!q.userData.isAuthenticated||j(q.userData.expirationDate))try{n()}catch(a){return!1}return!0},q.setAccessTokenAsExpired=function(){q.userData.expirationDate=new Date((new Date).getTime()-1e4),l()},q.removeAuthentication=function(){k(),o(),b.defaults.headers.common.Authorization=null},q.authenticate=function(c,d,e,g){this.removeAuthentication(),b({method:"POST",url:q.tokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+encodeURIComponent(c)+"&password="+encodeURIComponent(d)}).then(function(a){q.handleSuccessCallback(e,a.data,c)},function(b){if(a.isFunction(g)){var c=f("UI_HTTPERROR");b&&b.data&&b.data.error_description&&(c=b.data.error_description),g(c)}})},q.handleSuccessCallback=function(b,c,d){q.userData.isAuthenticated=!0,q.userData.username=c.userName||d||q.userData.username,q.userData.bearerToken=c.access_token,q.userData.expirationDate=new Date,q.userData.expirationDate=new Date(q.userData.expirationDate.getTime()+1e3*c.expires_in),q.userData.role=c.role,q.userData.refreshToken=c.refresh_token,m(),l(),a.isFunction(b)&&b(c)},q.addTimeZoneToUrl=function(a){return a+(a.indexOf("?")===-1?"?":"&")+"timezoneOffset="+(new Date).getTimezoneOffset()},q.saveDataAsync=function(b,c){var d=b.$component;b.$component=null;var e=a.copy(b);b.$component=d;var f=a.copy(b.$original);delete e.$isEditing,delete e.$hasChanges,delete e.$selected,delete e.$original,delete e.$state,delete e.$valid,delete e.$component,delete e.$isLoading,delete e.$isNew,b.$isNew?(c.serverUrl=q.addTimeZoneToUrl(c.serverUrl),c.data=e):c.data={Old:f,New:e,TimezoneOffset:(new Date).getTimezoneOffset()};var g=q.retrieveDataAsync(c);return g.promise.then(function(a){return b.$hasChanges=!1,b.resetOriginal(),a}),g},q.getExpirationDate=function(){var a=new Date;return new Date(a.getTime()+3e5)},q.retrieveDataAsync=function(e){var f=d.defer(),g=p(f);if(a.isUndefined(e.requireAuthentication)&&(e.requireAuthentication=q.requireAuthentication),a.isString(e.requireAuthentication)&&(e.requireAuthentication="true"===e.requireAuthentication),!q.useRefreshTokens&&e.requireAuthentication&&q.isAuthenticated()===!1)return{promise:d(function(a){a(null)}),cancel:g};e.timeout=e.timeout||17e3;var i=c(function(){g("Timed out")},e.timeout),j=b({url:e.serverUrl,method:e.requestMethod,data:e.data,timeout:f.promise}).then(function(a){return c.cancel(i),a.data},function(a){return 401===a.status&&(q.removeAuthentication(),h.location=h.location),d.reject(a)});return{promise:j,cancel:g}},q.get=function(a,c){if(!q.useRefreshTokens&&q.requireAuthentication&&!q.isAuthenticated()){var e=d.defer();return{promise:d(function(a){a(null)}),cancel:p(e)}}return{promise:b.get(a,c).then(function(a){return a.data})}},q.getBinary=function(a){return q.get(a,{responseType:"arraybuffer"})},q.delete=function(a){if(!q.useRefreshTokens&&q.requireAuthentication&&!q.isAuthenticated()){var b=d.defer();return{promise:d(function(a){a(null)}),cancel:p(b)}}return q.retrieveDataAsync({serverUrl:a,requestMethod:"DELETE"})},q.post=function(a,b){if(!q.useRefreshTokens&&q.requireAuthentication&&!q.isAuthenticated()){var c=d.defer();return{promise:d(function(a){a(null)}),cancel:p(c)}}return q.retrieveDataAsync({serverUrl:a,requestMethod:"POST",data:b})},q.postBinary=function(a,c){var e=d.defer(),f=p(e);if(!q.useRefreshTokens&&q.requireAuthentication&&!q.isAuthenticated())return{promise:d(function(a){a(null)}),cancel:f};var g=b({url:a,method:"POST",headers:{"Content-Type":void 0},transformRequest:function(a){return a},data:c});return{promise:g,cancel:f}},q.put=function(a,b){if(!q.useRefreshTokens&&q.requireAuthentication&&!q.isAuthenticated()){var c=d.defer();return{promise:d(function(a){a(null)}),cancel:q.getCancel(c)}}return q.retrieveDataAsync({serverUrl:a,requestMethod:"PUT",data:b})},q.getByKey=function(a,b){var c=q.addTimeZoneToUrl(a).split("?"),d=c[0]+b;return c.length>1&&(d+="?"+c[1]),q.get(d)},q.instances=[],q.registerService=function(a,b){q.instances[a]=b},q.getDataService=function(b){if(a.isUndefined(b)||null==b||"tubularHttp"===b)return q;var c=q.instances[b];return null==c?q:c},i()}])}(angular),function(a){"use strict";a.module("tubular.services").factory("tubularPopupService",["$uibModal","$rootScope","tubularTemplateService",function(b,c,d){return{onSuccessForm:function(a){var b=c.$on("tbForm_OnSuccessfulSave",a);c.$on("$destroy",b)},onConnectionError:function(a){var b=c.$on("tbForm_OnConnectionError",a);c.$on("$destroy",b)},openDialog:function(e,f,g,h){a.isUndefined(e)&&(e=d.generatePopup(f));var i=b.open({templateUrl:e,backdropClass:"fullHeight",animation:!1,size:h,controller:["$scope",function(b){b.Model=f,b.savePopup=function(d,e){if(d=d||b.Model,!e&&!d.$isNew&&!d.$hasChanges)return b.closePopup(),null;var f=d.save(e);return a.isUndefined(f)||f===!1?null:(f.then(function(a){return b.$emit("tbForm_OnSuccessfulSave",a),c.$broadcast("tbForm_OnSuccessfulSave",a),b.Model.$isLoading=!1,g.autoRefresh&&g.retrieveData(),i.close(),a},function(a){return b.$emit("tbForm_OnConnectionError",a),c.$broadcast("tbForm_OnConnectionError",a),b.Model.$isLoading=!1,a}),f)},b.closePopup=function(){a.isDefined(b.Model.revertChanges)&&b.Model.revertChanges(),i.close()}}]});return i}}}])}(angular),function(a){"use strict";a.module("tubular.services").service("tubularTemplateService",["$templateCache","translateFilter",function(b,c){var d=this;if(d.canUseHtml5Date=function(){var b=a.element('<input type="date" value=":)" />');return"date"===b.attr("type")&&""===b.val()},d.enums={dataTypes:["numeric","date","boolean","string"],editorTypes:["tbSimpleEditor","tbNumericEditor","tbDateTimeEditor","tbDateEditor","tbDropdownEditor","tbTypeaheadEditor","tbHiddenField","tbCheckboxField","tbTextArea"],httpMethods:["POST","PUT","GET","DELETE"],gridModes:["Read-Only","Inline","Popup","Page"],formLayouts:["Simple","Two-columns","Three-columns"],sortDirections:["Ascending","Descending"]},d.defaults={gridOptions:{Pager:!0,FreeTextSearch:!0,PageSizeSelector:!0,PagerInfo:!0,ExportCsv:!0,Mode:"Read-Only",RequireAuthentication:!1,ServiceName:"",RequestMethod:"GET",GridName:"grid"},formOptions:{CancelButton:!0,SaveUrl:"",SaveMethod:"POST",Layout:"Simple",ModelKey:"",RequireAuthentication:!1,ServiceName:"",dataUrl:""},fieldsSettings:{tbSimpleEditor:{ShowLabel:!0,Placeholder:!0,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!0},tbNumericEditor:{ShowLabel:!0,Placeholder:!0,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDateTimeEditor:{ShowLabel:!0,Placeholder:!1,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDateEditor:{ShowLabel:!0,Placeholder:!1,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDropdownEditor:{ShowLabel:!0,Placeholder:!1,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbTypeaheadEditor:{ShowLabel:!0,Placeholder:!0,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbHiddenField:{ShowLabel:!1,Placeholder:!1,Format:!1,Help:!1,Required:!1,ReadOnly:!1,EditorType:!1},tbCheckboxField:{ShowLabel:!1,Placeholder:!1,Format:!1,Help:!0,Required:!1,ReadOnly:!0,EditorType:!1},tbTextArea:{ShowLabel:!0,Placeholder:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1}}},d.tbColumnFilterPopoverTemplateName="tbColumnFilterPopoverTemplate.html",d.tbColumnDateTimeFilterPopoverTemplateName="tbColumnDateTimeFilterPopoverTemplate.html",d.tbColumnOptionsFilterPopoverTemplateName="tbColumnOptionsFilterPopoverTemplate.html",d.tbRemoveButtonrPopoverTemplateName="tbRemoveButtonrPopoverTemplate.html",b.get(d.tbColumnFilterPopoverTemplateName)||(d.tbColumnFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control" ng-options="key as value for (key , value) in $ctrl.filterOperators" ng-model="$ctrl.filter.Operator" ng-hide="$ctrl.dataType == \'boolean\' || $ctrl.onlyContains"></select>&nbsp;<input class="form-control" type="search" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" ng-hide="$ctrl.dataType == \'boolean\'"placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" /><div class="text-center" ng-show="$ctrl.dataType == \'boolean\'"><button type="button" class="btn btn-default btn-md" ng-disabled="$ctrl.filter.Text === true" ng-click="$ctrl.filter.Text = true; $ctrl.filter.Operator = \'Equals\';"><i class="fa fa-check"></i></button>&nbsp;<button type="button" class="btn btn-default btn-md" ng-disabled="$ctrl.filter.Text === false" ng-click="$ctrl.filter.Text = false; $ctrl.filter.Operator = \'Equals\';"><i class="fa fa-times"></i></button></div><input type="search" class="form-control" ng-model="$ctrl.filter.Argument[0]" ng-keypress="$ctrl.checkEvent($event)" ng-show="$ctrl.filter.Operator == \'Between\'" /><hr /><tb-column-filter-buttons></tb-column-filter-buttons></form></div>',b.put(d.tbColumnFilterPopoverTemplateName,d.tbColumnFilterPopoverTemplate)),!b.get(d.tbColumnDateTimeFilterPopoverTemplateName)){var e='<input class="form-control" type="date" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" /><input type="date" class="form-control" ng-model="$ctrl.filter.Argument[0]" ng-keypress="$ctrl.checkEvent($event)" ng-show="$ctrl.filter.Operator == \'Between\'" />',f='<div class="input-group"><input type="text" class="form-control" uib-datepicker-popup="MM/dd/yyyy" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" is-open="$ctrl.dateOpen" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.dateOpen = !$ctrl.dateOpen;"><i class="fa fa-calendar"></i></button></span></div>';d.tbColumnDateTimeFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control" ng-options="key as value for (key , value) in $ctrl.filterOperators" ng-model="$ctrl.filter.Operator" ng-hide="$ctrl.dataType == \'boolean\'"></select>&nbsp;'+(d.canUseHtml5Date()?e:f)+"<hr /><tb-column-filter-buttons></tb-column-filter-buttons></form></div>",b.put(d.tbColumnDateTimeFilterPopoverTemplateName,d.tbColumnDateTimeFilterPopoverTemplate)}b.get(d.tbColumnOptionsFilterPopoverTemplateName)||(d.tbColumnOptionsFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control checkbox-list" ng-options="item.Key as item.Label for item in $ctrl.optionsItems" ng-model="$ctrl.filter.Argument" multiple ng-disabled="$ctrl.dataIsLoaded == false"></select>&nbsp;<hr /><tb-column-filter-buttons></tb-column-filter-buttons></form></div>',b.put(d.tbColumnOptionsFilterPopoverTemplateName,d.tbColumnOptionsFilterPopoverTemplate)),b.get(d.tbRemoveButtonrPopoverTemplateName)||(d.tbRemoveButtonrPopoverTemplate='<div class="tubular-remove-popover"><button ng-click="$ctrl.model.delete()" class="btn btn-danger btn-xs">{{:: $ctrl.caption || (\'CAPTION_REMOVE\' | translate) }}</button>&nbsp;<button ng-click="$ctrl.isOpen = false;" class="btn btn-default btn-xs">{{:: $ctrl.cancelCaption || (\'CAPTION_CANCEL\' | translate) }}</button></div>',
b.put(d.tbRemoveButtonrPopoverTemplateName,d.tbRemoveButtonrPopoverTemplate)),d.generateCells=function(a,b){return a.map(function(a){var c=a.EditorType.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()});return'\r\n\t\t<tb-cell-template column-name="'+a.Name+'">\r\n\t\t\t'+("Inline"===b?"<"+c+' is-editing="row.$isEditing" value="row.'+a.Name+'"></'+c+">":a.Template)+"\r\n\t\t</tb-cell-template>"}).join("")},d.generateGrid=function(a,b){var c="",e="";return b.Pager&&(c+='\r\n\t<tb-grid-pager class="col-md-6"></tb-grid-pager>',e+='\r\n\t<tb-grid-pager class="col-md-6"></tb-grid-pager>'),b.ExportCsv&&(c+='\r\n\t<div class="col-md-3">\r\n\t\t<div class="btn-group">\r\n\t\t<tb-print-button title="Tubular"></tb-print-button>\r\n\t\t<tb-export-button filename="tubular.csv" css="btn-sm"></tb-export-button>\r\n\t\t</div>\r\n\t</div>'),b.FreeTextSearch&&(c+='\r\n\t<tb-text-search class="col-md-3" css="input-sm"></tb-text-search>'),b.PageSizeSelector&&(e+='\r\n\t<tb-page-size-selector class="col-md-3" selectorcss="input-sm"></tb-page-size-selector>'),b.PagerInfo&&(e+='\r\n\t<tb-grid-pager-info class="col-md-3"></tb-grid-pager-info>'),'<div class="container">\r\n<tb-grid server-url="'+b.dataUrl+'" request-method="'+b.RequestMethod+'" class="row" page-size="10" require-authentication="'+b.RequireAuthentication+'" '+(""!==b.ServiceName?' service-name="'+b.ServiceName+'"':"")+("Read-Only"!==b.Mode?' editor-mode="'+b.Mode.toLowerCase()+'"':"")+">"+(""===c?"":'\r\n\t<div class="row">'+c+"\r\n\t</div>")+'\r\n\t<div class="row">\r\n\t<div class="col-md-12">\r\n\t<div class="panel panel-default panel-rounded">\r\n\t<tb-grid-table class="table-bordered">\r\n\t<tb-column-definitions>'+("Read-Only"!==b.Mode?'\r\n\t\t<tb-column label="Actions"><tb-column-header>{{label}}</tb-column-header></tb-column>':"")+a.map(function(a){return'\r\n\t\t<tb-column name="'+a.Name+'" label="'+a.Label+'" column-type="'+a.DataType+'" sortable="'+a.Sortable+'" \r\n\t\t\tis-key="'+a.IsKey+'" searchable="'+a.Searchable+'" '+(a.Sortable?'\r\n\t\t\tsort-direction="'+a.SortDirection+'" sort-order="'+a.SortOrder+'" ':" ")+'visible="'+a.Visible+'">'+(a.Filter?"\r\n\t\t\t<tb-column-filter></tb-column-filter>":"")+"\r\n\t\t\t<tb-column-header>{{label}}</tb-column-header>\r\n\t\t</tb-column>"}).join("")+'\r\n\t</tb-column-definitions>\r\n\t<tb-row-set>\r\n\t<tb-row-template ng-repeat="row in $component.rows" row-model="row">'+("Read-Only"!==b.Mode?"\r\n\t\t<tb-cell-template>"+("Inline"===b.Mode?'\r\n\t\t\t<tb-save-button model="row"></tb-save-button>':"")+'\r\n\t\t\t<tb-edit-button model="row"></tb-edit-button>\r\n\t\t</tb-cell-template>':"")+d.generateCells(a,b.Mode)+"\r\n\t</tb-row-template>\r\n\t</tb-row-set>\r\n\t</tb-grid-table>\r\n\t</div>\r\n\t</div>\r\n\t</div>"+(""===e?"":'\r\n\t<div class="row">'+e+"\r\n\t</div>")+"\r\n</tb-grid>\r\n</div>"},d.getEditorTypeByDateType=function(a){switch(a){case"date":return"tbDateTimeEditor";case"numeric":return"tbNumericEditor";case"boolean":return"tbCheckboxField";default:return"tbSimpleEditor"}},d.createColumns=function(b){var c=a.isArray(b)&&b.length>0?b[0]:b,e=[];a.forEach(Object.keys(c),function(b){var d=c[b];if("$"!==b[0]&&!a.isFunction(d)&&null!=d)if(a.isNumber(d)||parseFloat(d).toString()===d)e.push({Name:b,DataType:"numeric",Template:"{{row."+b+" | number}}"});else if(a.isDate(d)||!isNaN(new Date(d).getTime()))e.push({Name:b,DataType:"date",Template:"{{row."+b+" | moment }}"});else if("true"===d.toLowerCase()||"false"===d.toLowerCase())e.push({Name:b,DataType:"boolean",Template:"{{row."+b+' ? "TRUE" : "FALSE" }}'});else{var f={Name:b,DataType:"string",Template:"{{row."+b+"}}"};/e(-|)mail/gi.test(f.Name)&&(f.Template='<a href="mailto:'+f.Template+'">'+f.Template+"</a>"),e.push(f)}});var f=!1;return a.forEach(e,function(a){a.Label=a.Name.replace(/([a-z])([A-Z])/g,"$1 $2"),a.EditorType=d.getEditorTypeByDateType(a.DataType),a.Searchable="string"===a.DataType,a.Filter=!0,a.Visible=!0,a.Sortable=!0,a.IsKey=!1,a.SortOrder=0,a.SortDirection="",a.ShowLabel=!0,a.Placeholder="",a.Format="",a.Help="",a.Required=!0,a.ReadOnly=!1,f||(a.IsKey=!0,a.SortOrder=1,a.SortDirection="Ascending",f=!0)}),e},d.generatePopupTemplate=function(a,b){var c=d.createColumns(a);return'<tb-form model="Model"><div class="modal-header"><h3 class="modal-title">'+(b||"Edit Row")+'</h3></div><div class="modal-body">'+d.generateFieldsArray(c).join("")+'</div><div class="modal-footer"><button class="btn btn-primary" ng-click="savePopup()" ng-disabled="!Model.$valid()">Save</button><button class="btn btn-danger" ng-click="closePopup()" formnovalidate>Cancel</button></div></tb-form>'},d.generatePopup=function(a,c){var e="temp"+(new Date).getTime()+".html",f=d.generatePopupTemplate(a,c);return b.put(e,f),e},d.generateForm=function(a,b){var c,e="Simple"===b.Layout?"":b.Layout.toLowerCase(),f=d.generateFieldsArray(a);return c=""===e?f.join(""):'\r\n\t<div class="row">'+("two-columns"===e?'\r\n\t<div class="col-md-6">'+f.filter(function(a,b){return b%2===0}).join("")+'\r\n\t</div>\r\n\t<div class="col-md-6">'+f.filter(function(a,b){return b%2===1}).join("")+"</div>":'\r\n\t<div class="col-md-4">'+f.filter(function(a,b){return b%3===0}).join("")+'\r\n\t</div>\r\n\t<div class="col-md-4">'+f.filter(function(a,b){return b%3===1}).join("")+'\r\n\t</div>\r\n\t<div class="col-md-4">'+f.filter(function(a,b){return b%3===2}).join("")+"\r\n\t</div>")+"\r\n\t</div>",'<tb-form server-save-method="'+b.SaveMethod+'" model-key="'+b.ModelKey+'" require-authentication="'+b.RequireAuthentication+'" server-url="'+b.dataUrl+'" server-save-url="'+b.SaveUrl+'"'+(""!==b.ServiceName?' service-name="'+b.ServiceName+'"':"")+">\r\n\t"+c+'\r\n\t<div>\r\n\t\t<button class="btn btn-primary" ng-click="$parent.save()" ng-disabled="!$parent.model.$valid()">Save</button>'+(b.CancelButton?'\r\n\t\t<button class="btn btn-danger" ng-click="$parent.cancel()" formnovalidate>Cancel</button>':"")+"\r\n\t</div>\r\n</tb-form>"},d.generateFieldsArray=function(a){return a.map(function(a){var b=a.EditorType.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),c=d.defaults.fieldsSettings[a.EditorType];return"\r\n\t<"+b+' name="'+a.Name+'"'+(c.EditorType?'\r\n\t\teditor-type="'+a.DataType+'" ':"")+(c.ShowLabel?'\r\n\t\tlabel="'+a.Label+'" show-label="'+a.ShowLabel+'"':"")+(c.Placeholder?'\r\n\t\tplaceholder="'+a.Placeholder+'"':"")+(c.Required?'\r\n\t\trequired="'+a.Required+'"':"")+(c.ReadOnly?'\r\n\t\tread-only="'+a.ReadOnly+'"':"")+(c.Format?'\r\n\t\tformat="'+a.Format+'"':"")+(c.Help?'\r\n\t\thelp="'+a.Help+'"':"")+">\r\n\t</"+b+">"})},d.setupFilter=function(b,d){var e={None:c("OP_NONE"),Equals:c("OP_EQUALS"),NotEquals:c("OP_NOTEQUALS"),Between:c("OP_BETWEEN"),Gte:">=",Gt:">",Lte:"<=",Lt:"<"},f={string:{None:c("OP_NONE"),Equals:c("OP_EQUALS"),NotEquals:c("OP_NOTEQUALS"),Contains:c("OP_CONTAINS"),NotContains:c("OP_NOTCONTAINS"),StartsWith:c("OP_STARTSWITH"),NotStartsWith:c("OP_NOTSTARTSWITH"),EndsWith:c("OP_ENDSWITH"),NotEndsWith:c("OP_NOTENDSWITH")},numeric:{None:c("OP_NONE"),Equals:c("OP_EQUALS"),Between:c("OP_BETWEEN"),Gte:">=",Gt:">",Lte:"<=",Lt:"<"},date:e,datetime:e,datetimeutc:e,boolean:{None:c("OP_NONE"),Equals:c("OP_EQUALS"),NotEquals:c("OP_NOTEQUALS")}};d.filter={Text:d.text||null,Argument:d.argument?[d.argument]:null,Operator:d.operator||"Contains",OptionsUrl:d.optionsUrl||null,HasFilter:!(null==d.text),Name:b.$parent.$parent.column.Name},d.filterTitle=d.title||c("CAPTION_FILTER"),b.$watch(function(){var a=d.$component.columns.filter(function(a){return a.Name===d.filter.Name});return 0!==a.length?a[0]:null},function(a){a&&d.filter.HasFilter!==a.Filter.HasFilter&&(d.filter.HasFilter=a.Filter.HasFilter,d.filter.Text=a.Filter.Text,d.retrieveData())},!0),d.retrieveData=function(){var a=d.$component.columns.filter(function(a){return a.Name===d.filter.Name});0!==a.length&&(a[0].Filter=d.filter),d.$component.retrieveData(),d.close()},d.clearFilter=function(){"Multiple"!==d.filter.Operator&&(d.filter.Operator="None"),a.isDefined(d.onlyContains)&&d.onlyContains&&(d.filter.Operator="Contains"),d.filter.Text="",d.filter.Argument=[],d.filter.HasFilter=!1,d.retrieveData()},d.applyFilter=function(){d.filter.HasFilter=!0,d.retrieveData()},d.close=function(){d.isOpen=!1},d.checkEvent=function(a){13===a.which&&(d.applyFilter(),a.preventDefault())};var g=d.$component.columns.filter(function(a){return a.Name===d.filter.Name});b.$watch("$ctrl.filter.Operator",function(a){"None"===a&&(d.filter.Text="")}),0!==g.length&&(b.$watch("$ctrl.filter",function(a){g[0].Filter.Text!==a.Text&&(a.Text=g[0].Filter.Text,g[0].Filter.Operator!==a.Operator&&(a.Operator=g[0].Filter.Operator)),d.filter.HasFilter=g[0].Filter.HasFilter}),g[0].Filter=d.filter,d.dataType=g[0].DataType,d.filterOperators=f[d.dataType],"date"!==d.dataType&&"datetime"!==d.dataType&&"datetimeutc"!==d.dataType||(d.filter.Argument=[new Date],"Contains"===d.filter.Operator&&(d.filter.Operator="Equals")),"numeric"!==d.dataType&&"boolean"!==d.dataType||(d.filter.Argument=[1],"Contains"===d.filter.Operator&&(d.filter.Operator="Equals")))}}])}(angular),function(a){"use strict";a.module("tubular.services").service("tubularTranslate",[function(){var a=this;a.currentLanguage="en",a.defaultLanguage="en",a.translationTable={en:{EDITOR_REGEX_DOESNT_MATCH:"The field doesn't match the regular expression.",EDITOR_REQUIRED:"The field is required.",EDITOR_MIN_CHARS:"The field needs to be minimum {0} chars.",EDITOR_MAX_CHARS:"The field needs to be maximum {0} chars.",EDITOR_MIN_NUMBER:"The minimum number is {0}.",EDITOR_MAX_NUMBER:"The maximum number is {0}.",EDITOR_MIN_DATE:"The minimum date is {0}.",EDITOR_MAX_DATE:"The maximum date is {0}.",EDITOR_MATCH:"The field needs to match the {0} field.",CAPTION_APPLY:"Apply",CAPTION_CLEAR:"Clear",CAPTION_CLOSE:"Close",CAPTION_SELECTCOLUMNS:"Select Columns",CAPTION_FILTER:"Filter",CAPTION_VALUE:"Value",CAPTION_REMOVE:"Remove",CAPTION_CANCEL:"Cancel",CAPTION_EDIT:"Edit",CAPTION_SAVE:"Save",CAPTION_PRINT:"Print",CAPTION_LOAD:"Load",CAPTION_ADD:"Add",UI_SEARCH:"search . . .",UI_PAGESIZE:"Page size:",UI_EXPORTCSV:"Export CSV",UI_CURRENTROWS:"Current rows",UI_ALLROWS:"All rows",UI_REMOVEROW:"Do you want to delete this row?",UI_SHOWINGRECORDS:"Showing {0} to {1} of {2} records",UI_FILTEREDRECORDS:"(Filtered from {0} total records)",UI_HTTPERROR:"Unable to contact server; please, try again later.",UI_GENERATEREPORT:"Generate Report",UI_TWOCOLS:"Two columns",UI_ONECOL:"One column",UI_MAXIMIZE:"Maximize",UI_RESTORE:"Restore",UI_MOVEUP:"Move Up",UI_MOVEDOWN:"Move Down",UI_MOVELEFT:"Move Left",UI_MOVERIGHT:"Move Right",UI_COLLAPSE:"Collapse",UI_EXPAND:"Expand",OP_NONE:"None",OP_EQUALS:"Equals",OP_NOTEQUALS:"Not Equals",OP_CONTAINS:"Contains",OP_NOTCONTAINS:"Not Contains",OP_STARTSWITH:"Starts With",OP_NOTSTARTSWITH:"Not Starts With",OP_ENDSWITH:"Ends With",OP_NOTENDSWITH:"Not Ends With",OP_BETWEEN:"Between"},es:{EDITOR_REGEX_DOESNT_MATCH:"El campo no es vlido contra la expresin regular.",EDITOR_REQUIRED:"El campo es requerido.",EDITOR_MIN_CHARS:"El campo requiere mnimo {0} caracteres.",EDITOR_MAX_CHARS:"El campo requiere mximo {0} caracteres.",EDITOR_MIN_NUMBER:"El nmero mnimo es {0}.",EDITOR_MAX_NUMBER:"El nmero maximo es {0}.",EDITOR_MIN_DATE:"La fecha mnima es {0}.",EDITOR_MAX_DATE:"La fecha mxima es {0}.",EDITOR_MATCH:"El campo debe de conincidir con el campo {0}.",CAPTION_APPLY:"Aplicar",CAPTION_CLEAR:"Limpiar",CAPTION_CLOSE:"Cerrar",CAPTION_SELECTCOLUMNS:"Seleccionar columnas",CAPTION_FILTER:"Filtro",CAPTION_VALUE:"Valor",CAPTION_REMOVE:"Remover",CAPTION_CANCEL:"Cancelar",CAPTION_EDIT:"Editar",CAPTION_SAVE:"Guardar",CAPTION_PRINT:"Imprimir",CAPTION_LOAD:"Cargar",CAPTION_ADD:"Agregar",UI_SEARCH:"buscar . . .",UI_PAGESIZE:"# Registros:",UI_EXPORTCSV:"Exportar CSV",UI_CURRENTROWS:"Esta pgina",UI_ALLROWS:"Todo",UI_REMOVEROW:"Desea eliminar el registro?",UI_SHOWINGRECORDS:"Mostrando registros {0} al {1} de {2}",UI_FILTEREDRECORDS:"(De un total de {0} registros)",UI_HTTPERROR:"No se logro contactar el servidor, intente ms tarde.",UI_GENERATEREPORT:"Generar Reporte",UI_TWOCOLS:"Dos columnas",UI_ONECOL:"Una columna",UI_MAXIMIZE:"Maximizar",UI_RESTORE:"Restaurar",UI_MOVEUP:"Mover Arriba",UI_MOVEDOWN:"Mover Abajo",UI_MOVELEFT:"Mover Izquierda",UI_MOVERIGHT:"Mover Derecha",UI_COLLAPSE:"Colapsar",UI_EXPAND:"Expandir",OP_NONE:"Ninguno",OP_EQUALS:"Igual",OP_NOTEQUALS:"No Igual",OP_CONTAINS:"Contiene",OP_NOTCONTAINS:"No Contiene",OP_STARTSWITH:"Comienza Con",OP_NOTSTARTSWITH:"No Comienza Con",OP_ENDSWITH:"Termina Con",OP_NOTENDSWITH:"No Termina Con",OP_BETWEEN:"Entre"}},a.setLanguage=function(b){return a.currentLanguage=b,a},a.addTranslation=function(b,c,d){var e=a.translationTable[b]||a.translationTable[a.currentLanguage]||a.translationTable[a.defaultLanguage];return e[c]=d,a},a.translate=function(b){var c=a.translationTable[a.currentLanguage]||a.translationTable[a.defaultLanguage];return c[b]||b}}]).filter("translate",["tubularTranslate",function(b){return function(c,d,e,f,g){if(a.isDefined(c)){var h=b.translate(c);return h=h.replace("{0}",d||""),h=h.replace("{1}",e||""),h=h.replace("{2}",f||""),h=h.replace("{3}",g||"")}return c}}])}(angular),function(a){"use strict";a.module("tubular.services").factory("tubularAuthInterceptor",["$q","$injector",function(a,b){var c=null,d="tubularHttp";return{request:function(c){var e=b.get(d),f=e.apiBaseUrl;return c.headers=c.headers||{},c.url.substring(0,f.length)===f&&e.tokenUrl!==c.url&&e.useRefreshTokens&&e.requireAuthentication&&e.userData.refreshToken&&e.isBearerTokenExpired()?a.reject({error:"expired token",status:401,config:c}):c},requestError:function(b){return a.reject(b)},response:function(a){return a},responseError:function(e){var f=a.defer();switch(e.status){case 401:var g=b.get(d),h=g.apiBaseUrl;return e.config.url.substring(0,h.length)===h&&g.tokenUrl!==e.config.url&&g.useRefreshTokens&&g.requireAuthentication&&g.userData.refreshToken?(c||(c=b.get("$http")({method:"POST",url:g.refreshTokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=refresh_token&refresh_token="+g.userData.refreshToken})),c.then(function(a){c=null,g.handleSuccessCallback(null,a.data),g.requireAuthentication&&g.isAuthenticated()?(e.config.headers.Authorization="Bearer "+g.userData.bearerToken,b.get("$http")(e.config).then(function(a){f.resolve(a)},function(){f.reject(a)})):f.reject(e)},function(a){c=null,f.reject(a),g.removeAuthentication(),b.get("$state").go("/Login")})):f.reject(e),f.promise}return f.reject(e),f.promise}}}])}(angular);