(function(n,t){"use strict";n.module("tubular",["tubular.directives","tubular.services","tubular.models","LocalStorageModule"]).config(["localStorageServiceProvider","$httpProvider",function(n,t){n.setPrefix("tubular");t.interceptors.push("tubularAuthInterceptor")}]).filter("errormessage",function(){return function(t){return n.isDefined(t)&&n.isDefined(t.data)&&t.data&&n.isDefined(t.data.ExceptionMessage)?t.data.ExceptionMessage:t.statusText||"Connection Error"}}).filter("numberorcurrency",["numberFilter","currencyFilter",function(n,t){return function(i,r,u,f){return(f=f||2,r==="C")?t(i,u||"$",f):r==="I"?parseInt(i):n(i,f)}}]).filter("moment",["dateFilter",function(n){return function(i,r){return t.isMoment(i)?i.format(r||"M/DD/YYYY"):n(i)}}])})(angular,moment),function(n){"use strict";n.module("tubular.directives",["tubular.services","tubular.models"]).directive("tbGridTable",[function(){return{require:"^tbGrid",template:'<table ng-transclude class="table tubular-grid-table"><\/table>',restrict:"E",replace:!0,transclude:!0,scope:!0,controller:["$scope",function(n){n.$component=n.$parent.$parent.$ctrl;n.tubularDirective="tubular-grid-table"}]}}]).directive("tbColumnDefinitions",[function(){return{require:"^tbGridTable",template:"<thead><tr ng-transclude><\/tr><\/thead>",restrict:"E",replace:!0,transclude:!0,scope:!0,controller:["$scope",function(n){n.$component=n.$parent.$parent.$component;n.tubularDirective="tubular-column-definitions"}],compile:function(){return{post:function(n){n.$component.hasColumnsDefinitions=!0}}}}}]).directive("tbColumn",[function(){return{require:"^tbColumnDefinitions",template:'<th ng-transclude ng-class="{sortable: column.Sortable}" ng-show="column.Visible"><\/th>',restrict:"E",replace:!0,transclude:!0,scope:{visible:"=",label:"@",name:"@",sortable:"=?",sortOrder:"=?",isKey:"=?",searchable:"=?",columnType:"@?",isGrouping:"=?",aggregate:"@?",metaAggregate:"@?",sortDirection:"@?"},controller:["$scope",function(t){t.column={Label:""};t.$component=t.$parent.$parent.$component;t.tubularDirective="tubular-column";t.label=n.isDefined(t.label)?t.label:(t.name||"").replace(/([a-z])([A-Z])/g,"$1 $2");t.sortColumn=function(n){t.$component.sortColumn(t.column.Name,n)};t.$watch("visible",function(i){n.isDefined(i)&&(t.column.Visible=i)});t.$watch("label",function(){t.column.Label=t.label;t.$broadcast("tbColumn_LabelChanged",t.label)});var i=new function(){this.Name=t.name||null;this.Label=t.label||null;this.Sortable=t.sortable;this.SortOrder=parseInt(t.sortOrder)||-1;this.SortDirection=function(){return n.isUndefined(t.sortDirection)?"None":t.sortDirection.toLowerCase().indexOf("asc")===0?"Ascending":t.sortDirection.toLowerCase().indexOf("desc")===0?"Descending":"None"}();this.IsKey=n.isDefined(t.isKey)?t.isKey:!1;this.Searchable=n.isDefined(t.searchable)?t.searchable:!1;this.Visible=t.visible==="false"?!1:!0;this.Filter=null;this.DataType=t.columnType||"string";this.IsGrouping=t.isGrouping==="true";this.Aggregate=t.aggregate||"none";this.MetaAggregate=t.metaAggregate||"none"};t.$component.addColumn(i);t.column=i;t.label=i.Label}]}}]).directive("tbColumnHeader",[function(){return{require:"^tbColumn",template:'<span><a title="Click to sort. Press Ctrl to sort by multiple columns" class="column-header" href ng-click="sortColumn($event)"><span class="column-header-default">{{ $parent.column.Label }}<\/span><ng-transclude><\/ng-transclude><\/a> <i class="fa sort-icon" ng-class="{\'fa-long-arrow-up\': $parent.column.SortDirection == \'Ascending\', \'fa-long-arrow-down\': $parent.column.SortDirection == \'Descending\'}">&nbsp;<\/i><\/span>',restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(n){n.sortColumn=function(t){n.$parent.sortColumn(t.ctrlKey)};n.$on("tbColumn_LabelChanged",function(t,i){n.label=i})}],link:function(n,t){t.find("ng-transclude").length>0&&t.find("span")[0].remove();n.$parent.column.Sortable||t.find("a").replaceWith(t.find("a").children())}}}]).directive("tbRowSet",[function(){return{require:"^tbGrid",template:"<tbody ng-transclude><\/tbody>",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(n){n.$component=n.$parent.$component||n.$parent.$parent.$component;n.tubularDirective="tubular-row-set"}]}}]).directive("tbFootSet",[function(){return{require:"^tbGrid",template:"<tfoot ng-transclude><\/tfoot>",restrict:"E",replace:!0,transclude:!0,scope:!1,controller:["$scope",function(n){n.$component=n.$parent.$component||n.$parent.$parent.$component;n.tubularDirective="tubular-foot-set"}]}}]).directive("tbRowTemplate",[function(){return{template:'<tr ng-transclude ng-class="{\'info\': selectableBool && model.$selected}" ng-click="changeSelection(model)"><\/tr>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=rowModel",selectable:"@"},controller:["$scope",function(t){t.tubularDirective="tubular-rowset";t.fields=[];t.hasFieldsDefinitions=!1;t.selectableBool=t.selectable==="true";t.$component=t.$parent.$parent.$parent.$component;t.$watch("hasFieldsDefinitions",function(i){i!==!0||n.isUndefined(t.model)||t.bindFields()});t.bindFields=function(){n.forEach(t.fields,function(n){n.bindScope()})};t.selectableBool&&n.isDefined(t.model)&&t.$component.selectFromSession(t.model);t.changeSelection=function(n){t.selectableBool&&t.$component.changeSelection(n)}}],compile:function(){return{post:function(n){n.hasFieldsDefinitions=!0}}}}}]).directive("tbCellTemplate",[function(){return{require:"^tbRowTemplate",template:'<td ng-transclude ng-show="column.Visible" data-label="{{::column.Label}}"><\/td>',restrict:"E",replace:!0,transclude:!0,scope:{columnName:"@?"},controller:["$scope",function(n){if(n.column={Visible:!0},n.columnName=n.columnName||null,n.$component=n.$parent.$parent.$component,n.getFormScope=function(){return null},n.columnName!=null){var t=n.$component.columns.filter(function(t){return t.Name===n.columnName});t.length>0&&(n.column=t[0])}}]}}])}(angular),function(n){"use strict";n.module("tubular.directives").directive("tbForm",[function(){return{template:'<form ng-transclude name="{{name}}"><\/form>',restrict:"E",replace:!0,transclude:!0,scope:{model:"=?",serverUrl:"@",serverSaveUrl:"@",serverSaveMethod:"@",modelKey:"@?",dataServiceName:"@?serviceName",requireAuthentication:"=?",name:"@?formName"},controller:"tbFormController",compile:function(){return{post:function(n){n.finishDefinition()}}}}}])}(angular),function(n){"use strict";n.module("tubular.directives").controller("tbFormController",["$scope","$routeParams","tubularModel","tubularHttp","$timeout","$element","tubularEditorService",function(t,i,r,u,f,e,o){t.tubularDirective="tubular-form";t.hasFieldsDefinitions=!1;t.fields=[];t.dataService=u.getDataService(t.dataServiceName);var s=this;s.serverSaveMethod=t.serverSaveMethod||"POST";s.name=t.name||o.getUniqueTbFormName();t.getFormScope=function(){return t[e.attr("name")]};s.requireAuthentication=n.isUndefined(t.requireAuthentication)?!0:t.requireAuthentication;u.setRequireAuthentication(s.requireAuthentication);t.$watch("hasFieldsDefinitions",function(n){n===!0&&s.retrieveData()});t.cloneModel=function(i){var u={};n.forEach(i,function(n,t){t[0]!=="$"&&(u[t]=n)});t.model=new r(t,t,u,t.dataService);s.bindFields()};s.bindFields=function(){n.forEach(t.fields,function(n){n.bindScope()})};s.retrieveData=function(){if(t.modelKey=t.modelKey||i.param,n.isDefined(t.serverUrl)){n.isDefined(t.modelKey)&&t.modelKey!=null&&t.modelKey!==""?t.dataService.getByKey(t.serverUrl,t.modelKey).promise.then(function(n){t.model=new r(t,t,n,t.dataService);s.bindFields()},function(n){t.$emit("tbForm_OnConnectionError",n)}):t.dataService.get(u.addTimeZoneToUrl(t.serverUrl)).promise.then(function(i){var u=t,f=t.dataService;n.isDefined(t.model)&&n.isDefined(t.model.$component)&&(u=t.model.$component,f=t.model.$component.dataService);t.model=new r(u,u,i,f);s.bindFields();t.model.$isNew=!0},function(n){t.$emit("tbForm_OnConnectionError",n)});return}n.isUndefined(t.model)&&(t.model=new r(t,t,{},t.dataService));s.bindFields()};t.save=function(i){if(t.model.$valid()){if(t.currentRequest=t.model.save(i),t.currentRequest===!1){t.$emit("tbForm_OnSavingNoChanges",t);return}t.currentRequest.then(function(i){n.isDefined(t.model.$component)&&n.isDefined(t.model.$component.autoRefresh)&&t.model.$component.autoRefresh&&t.model.$component.retrieveData();t.$emit("tbForm_OnSuccessfulSave",i,t);t.clear();var r=t.getFormScope();r&&r.$setPristine()},function(n){t.$emit("tbForm_OnConnectionError",n,t)}).then(function(){t.model.$isLoading=!1;t.currentRequest=null})}};t.update=t.save;t.create=function(){t.model.$isNew=!0;t.save()};t.cancel=function(){t.$emit("tbForm_OnCancel",t.model);t.clear()};t.clear=function(){n.forEach(t.fields,function(n){n.resetEditor?n.resetEditor():n.value=n.defaultValue})};t.finishDefinition=function(){var n=f(function(){t.hasFieldsDefinitions=!0;e.find("input").length&&e.find("input")[0].focus()},0);t.$emit("tbForm_OnGreetParentController",{controller:s,scope:t});t.$on("$destroy",function(){f.cancel(n)})}}])}(angular),function(n){"use strict";n.module("tubular.directives").component("tbGrid",{template:'<div><div class="tubular-overlay" ng-show="$ctrl.showLoading && $ctrl.currentRequest != null"><div><div class="fa fa-refresh fa-2x fa-spin"><\/div><\/div><\/div><ng-transclude><\/ng-transclude><\/div>',transclude:!0,bindings:{serverUrl:"@",serverSaveUrl:"@",serverDeleteUrl:"@",serverSaveMethod:"@",pageSize:"=?",onBeforeGetData:"=?",requestMethod:"@",dataServiceName:"@?serviceName",requireAuthentication:"@?",name:"@?gridName",editorMode:"@?",showLoading:"=?",autoRefresh:"=?",savePage:"=?",savePageSize:"=?",saveSearch:"=?"},controller:["$scope","localStorageService","tubularPopupService","tubularModel","tubularHttp","$routeParams",function(t,i,r,u,f,e){var o=this;o.$onInit=function(){o.tubularDirective="tubular-grid";o.name=o.name||"tbgrid";o.columns=[];o.rows=[];o.savePage=n.isUndefined(o.savePage)?!0:o.savePage;o.currentPage=o.savePage?i.get(o.name+"_page")||1:1;o.savePageSize=n.isUndefined(o.savePageSize)?!0:o.savePageSize;o.pageSize=n.isUndefined(o.pageSize)?20:o.pageSize;o.saveSearch=n.isUndefined(o.saveSearch)?!0:o.saveSearch;o.totalPages=0;o.totalRecordCount=0;o.filteredRecordCount=0;o.requestedPage=o.currentPage;o.hasColumnsDefinitions=!1;o.requestCounter=0;o.requestMethod=o.requestMethod||"POST";o.serverSaveMethod=o.serverSaveMethod||"POST";o.requestTimeout=2e4;o.currentRequest=null;o.autoSearch=e.param||(o.saveSearch?i.get(o.name+"_search")||"":"");o.search={Text:o.autoSearch,Operator:o.autoSearch===""?"None":"Auto"};o.isEmpty=!1;o.tempRow=new u(t,o,{},o.dataService);o.dataService=f.getDataService(o.dataServiceName);o.requireAuthentication=o.requireAuthentication||!0;f.setRequireAuthentication(o.requireAuthentication);o.editorMode=o.editorMode||"none";o.canSaveState=!1;o.groupBy="";o.showLoading=n.isUndefined(o.showLoading)?!0:o.showLoading;o.autoRefresh=n.isUndefined(o.autoRefresh)?!0:o.autoRefresh;o.serverDeleteUrl=o.serverDeleteUrl||o.serverSaveUrl;t.$emit("tbGrid_OnGreetParentController",o)};t.$watch("$ctrl.columns",function(){o.hasColumnsDefinitions!==!1&&o.canSaveState!==!1&&i.set(o.name+"_columns",o.columns)},!0);t.$watch("$ctrl.serverUrl",function(n,t){o.hasColumnsDefinitions===!1||o.currentRequest||n===t||o.retrieveData()},!0);t.$watch("$ctrl.hasColumnsDefinitions",function(t){if(t===!0){var i=!1;n.forEach(o.columns,function(n){if(n.IsGrouping){if(i)throw"Only one column is allowed to grouping";i=!0;n.Visible=!1;n.Sortable=!0;n.SortOrder=1;o.groupBy=n.Name}});n.forEach(o.columns,function(n){o.groupBy!==n.Name&&n.Sortable&&n.SortOrder>0&&n.SortOrder++});o.retrieveData()}});t.$watch("$ctrl.pageSize",function(){o.hasColumnsDefinitions&&o.requestCounter>0&&(o.savePageSize&&i.set(o.name+"_pageSize",o.pageSize),o.retrieveData())});t.$watch("$ctrl.requestedPage",function(){o.hasColumnsDefinitions&&o.requestCounter>0&&o.retrieveData()});o.saveSearch=function(){o.saveSearch&&(o.search.Text===""?i.remove(o.name+"_search"):i.set(o.name+"_search",o.search.Text))};o.addColumn=function(n){if(n.Name!=null){if(o.hasColumnsDefinitions!==!1)throw"Cannot define more columns. Column definitions have been sealed";o.columns.push(n)}};o.newRow=function(i,f,e,s){o.tempRow=new u(t,o,s||{},o.dataService);o.tempRow.$isNew=!0;o.tempRow.$isEditing=!0;o.tempRow.$component=o;n.isDefined(i)&&n.isDefined(f)&&f&&r.openDialog(i,o.tempRow,o,e)};o.deleteRow=function(n){var i=o.serverDeleteUrl.split("?"),r=i[0]+"/"+n.$key,u;i.length>1&&(r+="?"+i[1]);u={serverUrl:r,requestMethod:"DELETE",timeout:o.requestTimeout,requireAuthentication:o.requireAuthentication};o.currentRequest=o.dataService.retrieveDataAsync(u);o.currentRequest.promise.then(function(i){n.$hasChanges=!1;t.$emit("tbGrid_OnRemove",i)},function(n){t.$emit("tbGrid_OnConnectionError",n)}).then(function(){o.currentRequest=null;o.retrieveData()})};o.verifyColumns=function(){var t=i.get(o.name+"_columns");if(t==null||t===""){i.set(o.name+"_columns",o.columns);return}n.forEach(t,function(n){var i=o.columns.filter(function(t){return t.Name===n.Name}),t;i.length!==0&&(t=i[0],t.Visible=n.Visible,o.requestCounter<1&&(t.SortOrder=n.SortOrder,t.SortDirection=n.SortDirection),t.Filter==null||t.Filter.Text==null)&&n.Filter!=null&&n.Filter.Text!=null&&n.Filter.Operator!=="None"&&(t.Filter=n.Filter)})};o.retrieveData=function(){var f,e;o.serverUrl&&(o.canSaveState=!0,o.verifyColumns(),o.savePageSize&&(o.pageSize=i.get(o.name+"_pageSize")||o.pageSize),o.pageSize<10&&(o.pageSize=20),f=(o.requestedPage-1)*o.pageSize,f<0&&(f=0),e={serverUrl:o.serverUrl,requestMethod:o.requestMethod||"POST",timeout:o.requestTimeout,requireAuthentication:o.requireAuthentication,data:{Count:o.requestCounter,Columns:o.columns,Skip:f,Take:parseInt(o.pageSize),Search:o.search,TimezoneOffset:(new Date).getTimezoneOffset()}},o.currentRequest===null)&&(n.isUndefined(o.onBeforeGetData)===!1&&o.onBeforeGetData(),t.$emit("tbGrid_OnBeforeRequest",e,o),o.currentRequest=o.dataService.retrieveDataAsync(e),o.currentRequest.promise.then(function(f){if(o.requestCounter+=1,n.isUndefined(f)||f==null){t.$emit("tbGrid_OnConnectionError",{statusText:"Data is empty",status:0});return}if(o.dataSource=f,!f.Payload){var e="tubularGrid("+o.$id+"): response is invalid.";o.currentRequest.cancel(e);t.$emit("tbGrid_OnConnectionError",e);return}o.rows=f.Payload.map(function(n){var i=new u(t,o,n,o.dataService);return i.$component=o,i.editPopup=function(i,f){r.openDialog(i,new u(t,o,n,o.dataService),o,f)},i});t.$emit("tbGrid_OnDataLoaded",o);o.aggregationFunctions=f.AggregationPayload;o.currentPage=f.CurrentPage;o.totalPages=f.TotalPages;o.totalRecordCount=f.TotalRecordCount;o.filteredRecordCount=f.FilteredRecordCount;o.isEmpty=o.filteredRecordCount===0;o.savePage&&i.set(o.name+"_page",o.currentPage)},function(n){o.requestedPage=o.currentPage;t.$emit("tbGrid_OnConnectionError",n)}).then(function(){o.currentRequest=null}))};o.sortColumn=function(i,r){var h=o.columns.filter(function(n){return n.Name===i}),u,f,e,s;h.length!==0&&(u=h[0],u.Sortable!==!1)&&(f=u.SortDirection,e=f==="None"?"Ascending":f==="Ascending"?"Descending":"None",e==="None"?(u.SortOrder=-1,u.SortDirection="None"):(u.SortOrder=Number.MAX_VALUE,u.SortDirection=e),r===!1&&n.forEach(o.columns.filter(function(n){return n.Name!==i}),function(n){n.SortOrder=-1;n.SortDirection="None"}),s=o.columns.filter(function(n){return n.SortOrder>0}),s.sort(function(n,t){return n.SortOrder===t.SortOrder?0:n.SortOrder>t.SortOrder}),s.forEach(function(n,t){n.SortOrder=t+1}),t.$broadcast("tbGrid_OnColumnSorted"),o.retrieveData())};o.selectedRows=function(){return i.get(o.name+"_rows")||[]};o.clearSelection=function(){n.forEach(o.rows,function(n){n.$selected=!1});i.set(o.name+"_rows",[])};o.isEmptySelection=function(){return o.selectedRows().length===0};o.selectFromSession=function(n){n.$selected=o.selectedRows().filter(function(t){return t.$key===n.$key}).length>0};o.changeSelection=function(t){if(!n.isUndefined(t)){t.$selected=!t.$selected;var r=o.selectedRows();t.$selected?r.push({$key:t.$key}):r=r.filter(function(n){return n.$key!==t.$key});i.set(o.name+"_rows",r)}};o.getFullDataSource=function(n){o.dataService.retrieveDataAsync({serverUrl:o.serverUrl,requestMethod:o.requestMethod||"POST",timeout:o.requestTimeout,requireAuthentication:o.requireAuthentication,data:{Count:o.requestCounter,Columns:o.columns,Skip:0,Take:-1,Search:{Text:"",Operator:"None"}}}).promise.then(function(t){n(t.Payload)},function(n){t.$emit("tbGrid_OnConnectionError",n)}).then(function(){o.currentRequest=null})};o.visibleColumns=function(){return o.columns.filter(function(n){return n.Visible}).length}}]})}(angular),function(n){"use strict";n.module("tubular.directives").component("tbTextSearch",{require:{$component:"^tbGrid"},template:'<div class="tubular-grid-search"><div class="input-group input-group-sm"><span class="input-group-addon"><i class="fa fa-search"><\/i><\/span><input type="search" name="tbTextSearchInput" class="form-control" placeholder="{{:: $ctrl.placeholder || (\'UI_SEARCH\' | translate) }}" maxlength="20" ng-model="$ctrl.$component.search.Text" ><span id="tb-text-search-reset-panel" class="input-group-btn" ng-show="$ctrl.$component.search.Text.length > 0"><button id="tb-text-search-reset-button" class="btn btn-default" uib-tooltip="{{\'CAPTION_CLEAR\' | translate}}" ng-click="$ctrl.$component.search.Text = \'\'"><i class="fa fa-times-circle"><\/i><\/button><\/span><div><div>',bindings:{minChars:"@?",placeholder:"@"},controller:"tbTextSearchController"})}(angular),function(n){"use strict";n.module("tubular.directives").controller("tbTextSearchController",["$scope",function(t){var i=this;i.$onInit=function(){i.minChars=i.minChars||3;i.lastSearch=i.$component.search.Text};t.$watch("$ctrl.$component.search.Text",function(t,r){if(!n.isUndefined(t)&&t!==r){if(i.$component.search.Text=t,i.lastSearch!==""&&t===""){i.$component.saveSearch();i.$component.search.Operator="None";i.$component.retrieveData();return}t===""||t.length<i.minChars||t===i.lastSearch||(i.lastSearch=t,i.$component.saveSearch(),i.$component.search.Operator="Auto",i.$component.retrieveData())}})}])}(angular),function(n,t){"use strict";function i(){var n=document.createElement("input"),t;return n.setAttribute("type","date"),t="not-a-date",n.setAttribute("value",t),n.value!==t}function r(i){return function(r){if(!n.isUndefined(r)&&(n.isString(r)&&(i.value=t(r)),!n.isDefined(i.dateValue)))if(t.isMoment(i.value)){var u=i.value.toObject();i.dateValue=new Date(u.years,u.months,u.date,u.hours,u.minutes,u.seconds)}else i.dateValue=i.value}}t.fn.toJSON=function(){return this.format()};var u=["tubularEditorService","$scope","translateFilter","filterFilter",function(t,i,r,u){var f=this;f.validate=function(){var i,e;if(t.isValid(f.regex)&&t.isValid(f.value)&&(i=new RegExp(f.regex),i.test(f.value)===!1)){f.$valid=!1;f.state.$errors=[f.regexErrorMessage||r("EDITOR_REGEX_DOESNT_MATCH")];return}if(t.isValid(f.match)&&f.value!==f.$component.model[f.match]){e=u(f.$component.fields,{name:f.match},!0)[0].label;f.$valid=!1;f.state.$errors=[r("EDITOR_MATCH",e)];return}if(n.isDefined(f.min)&&n.isDefined(f.value)&&f.value!=null&&f.value.length<parseInt(f.min)){f.$valid=!1;f.state.$errors=[r("EDITOR_MIN_CHARS",f.min)];return}if(n.isDefined(f.max)&&n.isDefined(f.value)&&f.value!=null&&f.value.length>parseInt(f.max)){f.$valid=!1;f.state.$errors=[r("EDITOR_MAX_CHARS",f.max)];return}};f.$onInit=function(){t.setupScope(i,null,f,!1)}}],f=["tubularEditorService","$scope","translateFilter",function(t,i,r){var u=this;u.validate=function(){if(n.isDefined(u.min)&&u.min!=null&&n.isDefined(u.value)&&u.value!=null&&(u.$valid=u.value>=u.min,!u.$valid)){u.state.$errors=[r("EDITOR_MIN_NUMBER",u.min)];return}n.isDefined(u.max)&&u.max!=null&&n.isDefined(u.value)&&u.value!=null&&(u.$valid=u.value<=u.max,u.$valid||(u.state.$errors=[r("EDITOR_MAX_NUMBER",u.max)]))};u.$onInit=function(){u.DataType="numeric";t.setupScope(i,0,u,!1)}}],e=["$scope","$element","tubularEditorService","translateFilter","dateFilter",function(i,u,f,e,o){var s=this;i.$watch(function(){return s.value},r(s));i.$watch(function(){return s.dateValue},function(i){n.isDefined(i)&&(s.value=t(i))});s.validate=function(){if(f.isValid(s.min)&&(n.isDate(s.min)||(s.min=new Date(s.min)),s.$valid=s.value>=s.min,!s.$valid)){s.state.$errors=[e("EDITOR_MIN_DATE",o(s.min,s.format))];return}f.isValid(s.max)&&(n.isDate(s.max)||(s.max=new Date(s.max)),s.$valid=s.value<=s.max,s.$valid||(s.state.$errors=[e("EDITOR_MAX_DATE",o(s.max,s.format))]))};s.$onInit=function(){s.DataType="date";f.setupScope(i,s.format,s);n.isUndefined(s.format)&&(s.format="MMM D, Y")}}],o=["$scope","$element","tubularEditorService","translateFilter","dateFilter",function(i,u,f,e,o){var s=this;i.$watch(function(){return s.value},r(s));i.$watch(function(){return s.dateValue},function(i){n.isDefined(i)&&(s.value=t(i))});s.validate=function(){if(n.isDefined(s.min)&&(n.isDate(s.min)||(s.min=new Date(s.min)),s.$valid=s.dateValue>=s.min,!s.$valid)){s.state.$errors=[e("EDITOR_MIN_DATE",o(s.min,s.format))];return}n.isDefined(s.max)&&(n.isDate(s.max)||(s.max=new Date(s.max)),s.$valid=s.dateValue<=s.max,s.$valid||(s.state.$errors=[e("EDITOR_MAX_DATE",o(s.max,s.format))]))};s.$onInit=function(){s.DataType="date";f.setupScope(i,s.format,s);n.isUndefined(s.format)&&(s.format="MMM D, Y")}}],s=["tubularEditorService","$scope",function(t,i){var r=this;r.$onInit=function(){t.setupScope(i,null,r);r.dataIsLoaded=!1;r.selectOptions="d for d in $ctrl.options";n.isDefined(r.optionLabel)&&(r.selectOptions="d."+r.optionLabel+" for d in $ctrl.options",n.isDefined(r.optionTrack)?r.selectOptions="d as d."+r.optionLabel+" for d in $ctrl.options track by d."+r.optionTrack:n.isDefined(r.optionKey)&&(r.selectOptions="d."+r.optionKey+" as "+r.selectOptions));n.isDefined(r.optionsUrl)&&(i.$watch("optionsUrl",function(n,t){n!==t&&(r.dataIsLoaded=!1,r.loadData())}),r.isEditing?r.loadData():i.$watch("$ctrl.isEditing",function(){r.isEditing&&r.loadData()}))};i.updateReadonlyValue=function(){(r.readOnlyValue=r.value,r.value)&&n.isDefined(r.optionLabel)&&r.options&&(r.readOnlyValue=n.isDefined(r.optionKey)?r.options.filter(function(n){return n[r.optionKey]===r.value})[0][r.optionLabel]:r.options[r.optionLabel])};i.$watch(function(){return r.value},function(n){i.$emit("tbForm_OnFieldChange",r.$component,r.name,n,r.options);i.updateReadonlyValue()});r.loadData=function(){if(!r.dataIsLoaded){if(n.isUndefined(r.$component)||r.$component==null)throw"You need to define a parent Form or Grid";var t=r.$component.dataService.retrieveDataAsync({serverUrl:r.optionsUrl,requestMethod:r.optionsMethod||"GET"}),u=r.value;r.value="";t.promise.then(function(t){var f,i;r.options=t;r.dataIsLoaded=!0;f=r.options&&r.options.length>0?n.isDefined(r.optionKey)?r.options[0][r.optionKey]:r.options[0]:"";r.value=u||r.defaultValue||f;i=r.getFormField();i&&i.$setDirty()},function(n){i.$emit("tbGrid_OnConnectionError",n)})}}}];n.module("tubular.directives").component("tbSimpleEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing" ng-bind="$ctrl.value"><\/span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"><\/label><input type="{{$ctrl.editorType}}" placeholder="{{$ctrl.placeholder}}" ng-show="$ctrl.isEditing" ng-model="$ctrl.value" class="form-control"  ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" /><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{regex:"@?",regexErrorMessage:"@?",value:"=?",isEditing:"=?",editorType:"@",showLabel:"=?",label:"@?",required:"=?",min:"=?",max:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",match:"@?"},controller:u}).component("tbNumericEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{$ctrl.value | numberorcurrency: format }}<\/span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"><\/label><div class="input-group" ng-show="$ctrl.isEditing"><div class="input-group-addon" ng-hide="$ctrl.format == \'I\'"><i ng-class="{ \'fa\': true, \'fa-calculator\': $ctrl.format != \'C\', \'fa-usd\': $ctrl.format == \'C\'}"><\/i><\/div><input type="number" placeholder="{{$ctrl.placeholder}}" ng-model="$ctrl.value" class="form-control" ng-required="$ctrl.required" ng-hide="$ctrl.readOnly" step="{{$ctrl.step || \'any\'}}"  name="{{$ctrl.name}}" /><p class="form-control form-control-static text-right" ng-show="$ctrl.readOnly">{{$ctrl.value | numberorcurrency: format}}<\/span><\/p><\/div><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",step:"=?"},controller:f}).component("tbDateTimeEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{ $ctrl.value | date: format }}<\/span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"><\/label>'+(i()?'<input type="datetime-local" ng-show="$ctrl.isEditing" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"/>':'<div class="input-group" ng-show="$ctrl.isEditing"><input type="text" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" is-open="$ctrl.open" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.open = !$ctrl.open"><i class="fa fa-calendar"><\/i><\/button><\/span><\/div><div uib-timepicker ng-model="$ctrl.dateValue"  show-seconds="true" show-meridian="false"><\/div>')+'<span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",readOnly:"=?",help:"@?"},controller:e}).component("tbDateEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing">{{ $ctrl.value | moment: $ctrl.format }}<\/span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"><\/label>'+(i()?'<input type="date" ng-show="$ctrl.isEditing" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"/>':'<div class="input-group" ng-show="$ctrl.isEditing"><input type="text" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.dateValue" class="form-control" ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}" is-open="$ctrl.open" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.open = !$ctrl.open"><i class="fa fa-calendar"><\/i><\/button><\/span><\/div>')+'<span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",format:"@?",min:"=?",max:"=?",name:"@",readOnly:"=?",help:"@?"},controller:o}).component("tbDropdownEditor",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing" ng-bind="$ctrl.readOnlyValue"><\/span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"><\/label><select ng-options="{{ $ctrl.selectOptions }}" ng-show="$ctrl.isEditing" ng-model="$ctrl.value" class="form-control" ng-required="$ctrl.required" ng-disabled="$ctrl.readOnly" name="{{$ctrl.name}}" ng-change="onChange({value: value})"><\/select><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",name:"@",readOnly:"=?",help:"@?",defaultValue:"@?",options:"=?",optionsUrl:"@",optionsMethod:"@?",optionLabel:"@?",optionKey:"@?",optionTrack:"@?",onChange:"&?"},controller:s}).directive("tbTypeaheadEditor",["$q","$compile",function(t,i){return{restrict:"E",replace:!0,scope:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",required:"=?",name:"@",placeholder:"@?",readOnly:"=?",help:"@?",options:"=?",optionsUrl:"@",optionsMethod:"@?",optionLabel:"@?",css:"@?"},link:function(n,t){var r='<div ng-class="{ \'form-group\' : showLabel && isEditing, \'has-error\' : !$valid && $dirty() }"><span ng-hide="isEditing" ng-bind="value"><\/span><label ng-show="showLabel" ng-bind="label"><\/label><div class="input-group" ng-show="isEditing"><input ng-model="value" placeholder="{{placeholder}}" title="{{tooltip}}" autocomplete="off" class="form-control {{css}}" ng-readonly="readOnly || lastSet.indexOf(value) !== -1" uib-typeahead="'+n.selectOptions+'" ng-required="required" name="{{name}}" /> <div class="input-group-addon" ng-hide="lastSet.indexOf(value) !== -1"><i class="fa fa-pencil"><\/i><\/div><span class="input-group-btn" ng-show="lastSet.indexOf(value) !== -1" tabindex="-1"><button class="btn btn-default" type="button" ng-click="value = null"><i class="fa fa-times"><\/i><\/span><\/div><span class="help-block error-block" ng-show="isEditing" ng-repeat="error in state.$errors">{{error}}<\/span><span class="help-block" ng-show="isEditing && help" ng-bind="help"><\/span><\/div>',u=i(r),f=u(n);t.append(f)},controller:["$scope","tubularEditorService",function(i,r){r.setupScope(i);i.selectOptions="d for d in getValues($viewValue)";i.lastSet=[];n.isDefined(i.optionLabel)&&(i.selectOptions="d as d."+i.optionLabel+" for d in getValues($viewValue)");i.$watch("value",function(t){i.$emit("tbForm_OnFieldChange",i.$component,i.name,t,i.options);i.tooltip=t;n.isDefined(t)&&t!=null&&n.isDefined(i.optionLabel)&&(i.tooltip=t[i.optionLabel])});i.getValues=function(r){if(n.isDefined(i.optionsUrl)){if(n.isUndefined(i.$component)||i.$component==null)throw"You need to define a parent Form or Grid";var u=i.$component.dataService.retrieveDataAsync({serverUrl:i.optionsUrl+"?search="+r,requestMethod:i.optionsMethod||"GET"}).promise;return u.then(function(n){return i.lastSet=n,n}),u}return t(function(n){i.lastSet=i.options;n(i.options)})}}]}}]).component("tbHiddenField",{template:'<input type="hidden" ng-model="$ctrl.value" class="form-control" name="{{$ctrl.name}}"  />',bindings:{value:"=?",name:"@"},controller:["tubularEditorService","$scope",function(n,t){var i=this;i.$onInit=function(){n.setupScope(t,null,i,!0)}}]}).component("tbCheckboxField",{template:'<div ng-class="{ \'checkbox\' : $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }" class="tubular-checkbox"><input type="checkbox" ng-model="$ctrl.value" ng-disabled="$ctrl.readOnly || !$ctrl.isEditing"class="tubular-checkbox" id="{{$ctrl.name}}" name="{{$ctrl.name}}" /> <label ng-show="$ctrl.isEditing" for="{{$ctrl.name}}" ng-bind="$ctrl.label"><\/label><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{value:"=?",isEditing:"=?",editorType:"@",showLabel:"=?",label:"@?",required:"=?",name:"@",readOnly:"=?",help:"@?",checkedValue:"=?",uncheckedValue:"=?"},controller:["tubularEditorService","$scope",function(t,i){var r=this;r.$onInit=function(){r.required=!1;r.checkedValue=n.isDefined(r.checkedValue)?r.checkedValue:!0;r.uncheckedValue=n.isDefined(r.uncheckedValue)?r.uncheckedValue:!1;t.setupScope(i,null,r,!0)}}]}).component("tbTextArea",{template:'<div ng-class="{ \'form-group\' : $ctrl.showLabel && $ctrl.isEditing, \'has-error\' : !$ctrl.$valid && $ctrl.$dirty() }"><span ng-hide="$ctrl.isEditing" ng-bind="$ctrl.value"><\/span><label ng-show="$ctrl.showLabel" ng-bind="$ctrl.label"><\/label><textarea ng-show="$ctrl.isEditing" placeholder="{{$ctrl.placeholder}}" ng-model="$ctrl.value" class="form-control"  ng-required="$ctrl.required" ng-readonly="$ctrl.readOnly" name="{{$ctrl.name}}"><\/textarea><span class="help-block error-block" ng-show="$ctrl.isEditing" ng-repeat="error in $ctrl.state.$errors">{{error}}<\/span><span class="help-block" ng-show="$ctrl.isEditing && $ctrl.help" ng-bind="$ctrl.help"><\/span><\/div>',bindings:{value:"=?",isEditing:"=?",showLabel:"=?",label:"@?",placeholder:"@?",required:"=?",min:"=?",max:"=?",name:"@",readOnly:"=?",help:"@?"},controller:["tubularEditorService","$scope","translateFilter",function(n,t,i){var r=this;r.validate=function(){if(n.isValid(r.min)&&n.isValid(r.value)&&r.value.length<parseInt(r.min)){r.$valid=!1;r.state.$errors=[i("EDITOR_MIN_CHARS",+r.min)];return}if(n.isValid(r.max)&&n.isValid(r.value)&&r.value.length>parseInt(r.max)){r.$valid=!1;r.state.$errors=[i("EDITOR_MAX_CHARS",+r.max)];return}};r.$onInit=function(){n.setupScope(t,null,r,!1)}}]})}(angular,moment),function(n){"use strict";n.module("tubular.directives").component("tbColumnFilterButtons",{require:{$columnFilter:"^?tbColumnFilter",$columnDateTimeFilter:"^?tbColumnDateTimeFilter",$columnOptionsFilter:"^?tbColumnOptionsFilter"},template:'<div class="text-right"><button class="btn btn-sm btn-success" ng-click="$ctrl.currentFilter.applyFilter()"ng-disabled="$ctrl.currentFilter.filter.Operator == \'None\'">{{::\'CAPTION_APPLY\' | translate}}<\/button>&nbsp;<button class="btn btn-sm btn-danger" ng-click="$ctrl.currentFilter.clearFilter()">{{::\'CAPTION_CLEAR\' | translate}}<\/button><\/div>',controller:["$scope",function(n){var t=this;t.$onInit=function(){t.currentFilter=t.$columnFilter||t.$columnDateTimeFilter||t.$columnOptionsFilter||n.$parent.$ctrl}}]}).component("tbColumnSelector",{require:{$component:"^tbGrid"},template:'<button class="btn btn-sm btn-default" ng-click="$ctrl.openColumnsSelector()">{{::\'CAPTION_SELECTCOLUMNS\' | translate}}<\/button><\/div>',controller:["$uibModal",function(n){var t=this;t.openColumnsSelector=function(){var i=t.$component.columns,r=n.open({template:'<div class="modal-header"><h3 class="modal-title">{{::\'CAPTION_SELECTCOLUMNS\' | translate}}<\/h3><\/div><div class="modal-body"><table class="table table-bordered table-responsive table-striped table-hover table-condensed"><thead><tr><th>Visible?<\/th><th>Name<\/th><\/tr><\/thead><tbody><tr ng-repeat="col in Model"><td><input type="checkbox" ng-model="col.Visible" ng-disabled="col.Visible && isInvalid()" /><\/td><td>{{col.Label}}<\/td><\/tr><\/tbody><\/table><\/div><\/div><div class="modal-footer"><button class="btn btn-warning" ng-click="closePopup()">{{::\'CAPTION_CLOSE\' | translate}}<\/button><\/div>',backdropClass:"fullHeight",animation:!1,controller:["$scope",function(n){n.Model=i;n.isInvalid=function(){return n.Model.filter(function(n){return n.Visible}).length===1};n.closePopup=r.close}]})}}]}).component("tbColumnFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"><\/i><\/button><\/div>',bindings:{text:"@",argument:"@",operator:"@",title:"@",onlyContains:"=?"},controller:["$scope","tubularTemplateService",function(t,i){var r=this;r.$onInit=function(){r.onlyContains=n.isUndefined(r.onlyContains)?!1:r.onlyContains;r.templateName=i.tbColumnFilterPopoverTemplateName;i.setupFilter(t,r)}}]}).component("tbColumnDateTimeFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"><\/i><\/button><\/div>',bindings:{text:"@",argument:"@",operator:"@",title:"@"},controller:["$scope","tubularTemplateService",function(n,t){var i=this;i.$onInit=function(){i.templateName=t.tbColumnDateTimeFilterPopoverTemplateName;t.setupFilter(n,i)}}]}).component("tbColumnOptionsFilter",{require:{$component:"^tbGrid"},template:'<div class="tubular-column-menu"><button class="btn btn-xs btn-default btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="bottom" popover-title="{{$ctrl.filterTitle}}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'" ng-class="{ \'btn-success\': $ctrl.filter.HasFilter }"><i class="fa fa-filter"><\/i><\/button><\/div>',bindings:{argument:"@",operator:"@",optionsUrl:"@",title:"@"},controller:["$scope","tubularTemplateService",function(n,t){var i=this;i.getOptionsFromUrl=function(){if(i.dataIsLoaded){n.$apply();return}var t=i.$component.dataService.retrieveDataAsync({serverUrl:i.filter.OptionsUrl,requestMethod:"GET"});t.promise.then(function(n){i.optionsItems=n;i.dataIsLoaded=!0},function(t){n.$emit("tbGrid_OnConnectionError",t)})};i.$onInit=function(){i.dataIsLoaded=!1;i.templateName=t.tbColumnOptionsFilterPopoverTemplateName;t.setupFilter(n,i);i.getOptionsFromUrl();i.filter.Operator="Multiple"}}]})}(angular),function(n){"use strict";n.module("tubular.directives").component("tbRemoveButton",{require:"^tbGrid",template:'<button class="btn btn-danger btn-xs btn-popover" uib-popover-template="$ctrl.templateName" popover-placement="right" popover-title="{{ $ctrl.legend || (\'UI_REMOVEROW\' | translate) }}" popover-is-open="$ctrl.isOpen" popover-trigger="\'click outsideClick\'"  ng-hide="$ctrl.model.$isEditing"><span ng-show="$ctrl.showIcon" class="{{::$ctrl.icon}}"><\/span><span ng-show="$ctrl.showCaption">{{:: $ctrl.caption || (\'CAPTION_REMOVE\' | translate) }}<\/span><\/button>',bindings:{model:"=",caption:"@",cancelCaption:"@",legend:"@",icon:"@"},controller:["tubularTemplateService",function(t){var i=this;i.$onInit=function(){i.showIcon=n.isDefined(i.icon);i.showCaption=!(i.showIcon&&n.isUndefined(i.caption));i.templateName=t.tbRemoveButtonrPopoverTemplateName}}]}).directive("tbSaveButton",[function(){return{require:"^tbGrid",template:'<div ng-show="model.$isEditing"><button ng-click="save()" class="btn btn-default {{:: saveCss || \'\' }}" ng-disabled="!model.$valid()">{{:: saveCaption || (\'CAPTION_SAVE\' | translate) }}<\/button><button ng-click="cancel()" class="btn {{:: cancelCss || \'btn-default\' }}">{{:: cancelCaption || (\'CAPTION_CANCEL\' | translate) }}<\/button><\/div>',restrict:"E",replace:!0,scope:{model:"=",isNew:"=?",saveCaption:"@",saveCss:"@",cancelCaption:"@",cancelCss:"@"},controller:["$scope",function(t){t.isNew=t.isNew||!1;t.save=function(){if(t.isNew&&(t.model.$isNew=!0),t.model.$valid()){if(t.currentRequest=t.model.save(),t.currentRequest===!1){t.$emit("tbGrid_OnSavingNoChanges",t.model);return}t.currentRequest.then(function(i){t.model.$isEditing=!1;n.isDefined(t.model.$component)&&n.isDefined(t.model.$component.autoRefresh)&&t.model.$component.autoRefresh&&t.model.$component.retrieveData();t.$emit("tbGrid_OnSuccessfulSave",i,t.model.$component)},function(n){t.$emit("tbGrid_OnConnectionError",n)})}};t.cancel=function(){t.model.revertChanges()}}]}}]).component("tbEditButton",{require:{$component:"^tbGrid"},template:'<button ng-click="$ctrl.edit()" class="btn btn-xs btn-default" ng-hide="$ctrl.model.$isEditing">{{:: $ctrl.caption || (\'CAPTION_EDIT\' | translate) }}<\/button>',bindings:{model:"=",caption:"@"},controller:function(){var n=this;n.edit=function(){n.$component.editorMode==="popup"?n.model.editPopup():n.model.edit()}}}).component("tbPageSizeSelector",{require:{$component:"^tbGrid"},template:'<div class="{{::$ctrl.css}}"><form class="form-inline"><div class="form-group"><label class="small">{{:: $ctrl.caption || (\'UI_PAGESIZE\' | translate) }} <\/label>&nbsp;<select ng-model="$ctrl.$component.pageSize" class="form-control input-sm {{::$ctrl.selectorCss}}" ng-options="item for item in options"><\/select><\/div><\/form><\/div>',bindings:{caption:"@",css:"@",selectorCss:"@",options:"=?"},controller:["$scope",function(t){t.options=n.isDefined(t.$ctrl.options)?t.$ctrl.options:[10,20,50,100]}]}).component("tbExportButton",{require:{$component:"^tbGrid"},template:'<div class="btn-group" uib-dropdown><button class="btn btn-info btn-sm {{::$ctrl.css}}" uib-dropdown-toggle><span class="fa fa-download"><\/span>&nbsp;{{:: $ctrl.caption || (\'UI_EXPORTCSV\' | translate)}}&nbsp;<span class="caret"><\/span><\/button><ul class="dropdown-menu" uib-dropdown-menu><li><a href="javascript:void(0)" ng-click="$ctrl.downloadCsv($parent)">{{:: $ctrl.captionMenuCurrent || (\'UI_CURRENTROWS\' | translate)}}<\/a><\/li><li><a href="javascript:void(0)" ng-click="$ctrl.downloadAllCsv($parent)">{{:: $ctrl.captionMenuAll || (\'UI_ALLROWS\' | translate)}}<\/a><\/li><\/ul><\/div>',bindings:{filename:"@",css:"@",caption:"@",captionMenuCurrent:"@",captionMenuAll:"@"},controller:["tubularGridExportService",function(n){var t=this;t.downloadCsv=function(){n.exportGridToCsv(t.filename,t.$component)};t.downloadAllCsv=function(){n.exportAllGridToCsv(t.filename,t.$component)}}]}).component("tbPrintButton",{require:{$component:"^tbGrid"},template:'<button class="btn btn-default btn-sm" ng-click="$ctrl.printGrid()"><span class="fa fa-print"><\/span>&nbsp;{{:: $ctrl.caption || (\'CAPTION_PRINT\' | translate)}}<\/button>',bindings:{title:"@",printCss:"@",caption:"@"},controller:["$window",function(t){var i=this;i.printGrid=function(){i.$component.getFullDataSource(function(r){var f='<table class="table table-bordered table-striped"><thead><tr>'+i.$component.columns.filter(function(n){return n.Visible}).map(function(n){return"<th>"+(n.Label||n.Name)+"<\/th>"}).join(" ")+"<\/tr><\/thead><tbody>"+r.map(function(t){return n.isObject(t)&&(t=Object.keys(t).map(function(n){return t[n]})),"<tr>"+t.map(function(t,r){return n.isDefined(i.$component.columns[r])&&!i.$component.columns[r].Visible?"":"<td>"+t+"<\/td>"}).join(" ")+"<\/tr>"}).join("  ")+"<\/tbody><\/table>",u=t.open("about:blank","Print","menubar=0,location=0,height=500,width=800");u.document.write('<link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/latest/css/bootstrap.min.css" />');i.printCss!==""&&u.document.write('<link rel="stylesheet" href="'+i.printCss+'" />');u.document.write('<body onload="window.print();">');u.document.write("<h1>"+i.title+"<\/h1>");u.document.write(f);u.document.write("<\/body>");u.document.close()})}}]})}(angular),function(n){"use strict";n.module("tubular.directives").component("tbGridPager",{require:{$component:"^tbGrid"},template:'<div class="tubular-pager"><ul uib-pagination ng-disabled="$ctrl.$component.isEmpty" direction-links="true" first-text="&#xf049;" previous-text="&#xf04a;" next-text="&#xf04e;" last-text="&#xf050;"boundary-links="true" total-items="$ctrl.$component.filteredRecordCount" items-per-page="$ctrl.$component.pageSize" max-size="5" ng-model="$ctrl.$component.currentPage" ng-change="$ctrl.pagerPageChanged()"><\/ul><div>',scope:!0,terminal:!1,controller:["$scope",function(n){var t=this;n.$watch("$ctrl.$component.currentPage",function(){t.$component.currentPage!==t.$component.requestedPage&&(t.$component.requestedPage=t.$component.currentPage)});t.pagerPageChanged=function(){t.$component.requestedPage=t.$component.currentPage}}]}).component("tbGridPagerInfo",{require:{$component:"^tbGrid"},template:'<div class="pager-info small" ng-hide="$ctrl.$component.isEmpty">{{\'UI_SHOWINGRECORDS\' | translate: $ctrl.currentInitial:$ctrl.currentTop:$ctrl.$component.filteredRecordCount}} <span ng-show="$ctrl.filtered">{{\'UI_FILTEREDRECORDS\' | translate: $ctrl.$component.totalRecordCount}}<\/span><\/div>',bindings:{cssClass:"@?"},controller:["$scope",function(n){var t=this;t.fixCurrentTop=function(){t.currentTop=t.$component.pageSize*t.$component.currentPage;t.currentInitial=(t.$component.currentPage-1)*t.$component.pageSize+1;t.currentTop>t.$component.filteredRecordCount&&(t.currentTop=t.$component.filteredRecordCount);t.currentTop<0&&(t.currentTop=0);(t.currentInitial<0||t.$component.totalRecordCount===0)&&(t.currentInitial=0);t.$component.pageSize>t.$component.filteredRecordCount&&(t.currentInitial=1,t.currentTop=t.$component.filteredRecordCount)};n.$watch("$ctrl.$component.filteredRecordCount",function(){t.filtered=t.$component.totalRecordCount!==t.$component.filteredRecordCount;t.fixCurrentTop()});n.$watch("$ctrl.$component.currentPage",t.fixCurrentTop);n.$watch("$ctrl.$component.pageSize",t.fixCurrentTop);t.$onInit=t.fixCurrentTop}]})}(angular),function(n,t){"use strict";n.module("tubular.models",[]).factory("tubularModel",function(){return function(i,r,u,f){var e={$key:"",$addField:function(t,r,u){this[t]=r;n.isUndefined(this.$original)&&(this.$original={});this.$original[t]=u?undefined:r;u&&(this.$hasChanges=!0);n.isUndefined(this.$state)&&(this.$state={});i.$watch(function(){return e[t]},function(n,i){n!==i&&(e.$hasChanges=e[t]!==e.$original[t])})}};return n.isArray(u)===!1&&n.forEach(Object.keys(u),function(n){e.$addField(n,u[n])}),n.isDefined(r.columns)&&n.forEach(r.columns,function(i,r){var f=n.isDefined(u[r])?u[r]:u[i.Name];n.isUndefined(f)&&u[r]===0&&(f=0);e.$addField(i.Name,f);(i.DataType==="date"||i.DataType==="datetime"||i.DataType==="datetimeutc")&&(e[i.Name]=i.DataType==="datetimeutc"?t.utc(e[i.Name]):t(e[i.Name]));i.IsKey&&(e.$key+=e[i.Name]+",")}),e.$key.length>1&&(e.$key=e.$key.substring(0,e.$key.length-1)),e.$hasChanges=e.$isEditing=!1,e.$selected=!1,e.$isNew=!1,e.$valid=function(){var t=!0;return n.forEach(e.$state,function(i){n.isUndefined(i)||i.$valid()||(t=!1)}),t},e.save=function(t){if(n.isUndefined(f)||f==null)throw"Define DataService to your model.";if(n.isUndefined(r.serverSaveUrl)||r.serverSaveUrl==null)throw"Define a Save URL.";return!t&&!e.$isNew&&!e.$hasChanges?!1:(e.$isLoading=!0,f.saveDataAsync(e,{serverUrl:r.serverSaveUrl,requestMethod:e.$isNew?r.serverSaveMethod||"POST":"PUT"}).promise)},e.edit=function(){e.$isEditing&&e.$hasChanges&&e.save();e.$isEditing=!e.$isEditing},e.delete=function(){r.deleteRow(e)},e.resetOriginal=function(){n.forEach(e.$original,function(n){e.$original[n]=e[n]})},e.revertChanges=function(){n.forEach(Object.keys(e),function(t){t[0]==="$"||n.isUndefined(e.$original[t])||(e[t]=e.$original[t])});e.$hasChanges=e.$isEditing=!1},e}})}(angular,moment),function(n,t){"use strict";function i(n){return n.columns.map(function(n){return n.Label})}function r(n){return n.columns.map(function(n){return n.Visible})}function u(i,r,u,f){var s=function(t){var u,i,e,r;for(n.isObject(t)&&(t=Object.keys(t).map(function(n){return t[n]})),u="",i=0;i<t.length;i++)f[i]&&(e=t[i]==null?"":t[i].toString(),n.isDate(t[i])&&(e=t[i].toLocaleString()),r=e.replace(/"/g,'""'),r.search(/("|,|\n)/g)>=0&&(r='"'+r+'"'),i>0&&(u+=","),u+=r);return u+"\n"},o="",e,h;for(r.length>0&&(o+=s(r)),e=0;e<u.length;e++)o+=s(u[e]);h=new Blob(["ï»¿"+o],{type:"text/csv;charset=utf-8;"});t(h,i)}n.module("tubular.services",["ui.bootstrap","LocalStorageModule"]).factory("tubularGridExportService",function(){return{exportAllGridToCsv:function(n,t){var f=i(t),e=r(t);t.getFullDataSource(function(t){u(n,f,t,e)})},exportGridToCsv:function(n,t){var f=i(t),e=r(t);t.currentRequest={};u(n,f,t.dataSource.Payload,e);t.currentRequest=null}}})}(angular,saveAs),function(n){"use strict";n.module("tubular.services").service("tubularEditorService",["translateFilter",function(t){var i=this;i.isValid=function(n){return!!n};i.getUniqueTbFormName=function(){return i.tbFormCounter=i.tbFormCounter||(i.tbFormCounter=-1),i.tbFormCounter++,"tbForm"+i.tbFormCounter};i.setupScope=function(i,r,u,f){n.isUndefined(u)&&(u=i);u.isEditing=n.isUndefined(u.isEditing)?!0:u.isEditing;u.showLabel=u.showLabel||!1;u.label=u.label||(u.name||"").replace(/([a-z])([A-Z])/g,"$1 $2");u.required=u.required||!1;u.readOnly=u.readOnly||!1;u.format=u.format||r;u.$valid=!0;u.getFormField=function(){for(var t=i.$parent,r;t!=null;){if(n.isDefined(t.tubularDirective)&&t.tubularDirective==="tubular-form")return r=t.getFormScope(),r==null?null:r[i.Name];t=t.$parent}return null};u.$dirty=function(){var n=u.getFormField();return n==null?!0:n.$dirty};u.checkValid=function(){if(u.$valid=!0,u.state.$errors=[],n.isUndefined(u.value)&&u.required||n.isDate(u.value)&&isNaN(u.value.getTime())&&u.required){u.$valid=!1;u.state.$errors=[t("EDITOR_REQUIRED")];n.isDefined(i.$parent.Model)&&(i.$parent.Model.$state[i.Name]=u.state);return}n.isUndefined(u.validate)||u.validate()};i.$watch(function(){return u.value},function(t,r){n.isUndefined(r)&&n.isUndefined(t)||(u.state={$valid:function(){return u.checkValid(),this.$errors.length===0},$dirty:u.$dirty,$errors:[]},u.$valid=!0,n.isDefined(i.$parent.Model)&&(n.isDefined(i.$parent.Model[u.name])?(i.$parent.Model[u.name]=t,n.isUndefined(i.$parent.Model.$state)&&(i.$parent.Model.$state=[]),i.$parent.Model.$state[i.Name]=u.state):n.isDefined(i.$parent.Model.$addField)&&i.$parent.Model.$addField(u.name,t,!0)),u.checkValid())});for(var e=i.$parent;e!=null;){if(n.isDefined(e.tubularDirective)&&(e.tubularDirective==="tubular-form"||e.tubularDirective==="tubular-rowset")){if(u.name===null)return;if(e.hasFieldsDefinitions!==!1)throw"Cannot define more fields. Field definitions have been sealed";u.$component=e.tubularDirective==="tubular-form"?e:e.$component;i.Name=u.name;u.bindScope=function(){var t,r;i.$parent.Model=e.model;n.equals(u.value,e.model[i.Name])===!1&&(n.isDefined(e.model[i.Name])&&(u.DataType==="date"&&e.model[i.Name]!=null&&n.isString(e.model[i.Name])?(t=new Date(Date.parse(e.model[i.Name])).toString().match(/([-\+][0-9]+)\s/)[1],t=t.substr(0,t.length-2)+":"+t.substr(t.length-2,2),u.value=new Date(Date.parse(e.model[i.Name].replace("Z","")+t))):u.value=e.model[i.Name]),e.$watch(function(){return u.value},function(n){n!==e.model[i.Name]&&(e.model[i.Name]=n)}));i.$watch(function(){return e.model[i.Name]},function(n){n!==u.value&&(u.value=n)},!0);(!u.value||u.value==null)&&u.defaultValue&&u.defaultValue!=null&&(u.DataType==="date"&&u.defaultValue!=null&&(u.defaultValue=new Date(u.defaultValue)),u.DataType==="numeric"&&u.defaultValue!=null&&(u.defaultValue=parseFloat(u.defaultValue)),u.value=u.defaultValue);n.isUndefined(e.model.$state)&&(e.model.$state={});e.model.$state[i.Name]={$valid:function(){return u.checkValid(),this.$errors.length===0},$dirty:u.$dirty,$errors:[]};n.equals(u.state,e.model.$state[i.Name])===!1&&(u.state=e.model.$state[i.Name]);f&&(r=u.getFormField(),r&&r.$setDirty())};e.fields.push(u);break}e=e.$parent}}}])}(angular),function(n){"use strict";n.module("tubular.services").factory("tubularPopupService",["$uibModal","$rootScope","tubularTemplateService",function(t,i,r){return{onSuccessForm:function(n){var t=i.$on("tbForm_OnSuccessfulSave",n);i.$on("$destroy",t)},onConnectionError:function(n){var t=i.$on("tbForm_OnConnectionError",n);i.$on("$destroy",t)},openDialog:function(u,f,e,o){n.isUndefined(u)&&(u=r.generatePopup(f));var s=t.open({templateUrl:u,backdropClass:"fullHeight",animation:!1,size:o,controller:["$scope",function(t){t.Model=f;t.savePopup=function(r,u){if(r=r||t.Model,!u&&!r.$isNew&&!r.$hasChanges)return t.closePopup(),null;var f=r.save(u);return n.isUndefined(f)||f===!1?null:(f.then(function(n){return t.$emit("tbForm_OnSuccessfulSave",n),i.$broadcast("tbForm_OnSuccessfulSave",n),t.Model.$isLoading=!1,e.autoRefresh&&e.retrieveData(),s.close(),n},function(n){return t.$emit("tbForm_OnConnectionError",n),i.$broadcast("tbForm_OnConnectionError",n),t.Model.$isLoading=!1,n}),f)};t.closePopup=function(){n.isDefined(t.Model.revertChanges)&&t.Model.revertChanges();s.close()}}]});return s}}}])}(angular),function(n){"use strict";n.module("tubular.services").service("tubularTemplateService",["$templateCache","translateFilter",function(t,i){var r=this,u,f;r.canUseHtml5Date=function(){var t="not-a-date",i=n.element('<input type="date" />');return i.attr("value",t),i.attr("value")!==t};r.enums={dataTypes:["numeric","date","boolean","string"],editorTypes:["tbSimpleEditor","tbNumericEditor","tbDateTimeEditor","tbDateEditor","tbDropdownEditor","tbTypeaheadEditor","tbHiddenField","tbCheckboxField","tbTextArea"],httpMethods:["POST","PUT","GET","DELETE"],gridModes:["Read-Only","Inline","Popup","Page"],formLayouts:["Simple","Two-columns","Three-columns"],sortDirections:["Ascending","Descending"]};r.defaults={gridOptions:{Pager:!0,FreeTextSearch:!0,PageSizeSelector:!0,PagerInfo:!0,ExportCsv:!0,Mode:"Read-Only",RequireAuthentication:!1,ServiceName:"",RequestMethod:"GET",GridName:"grid"},formOptions:{CancelButton:!0,SaveUrl:"",SaveMethod:"POST",Layout:"Simple",ModelKey:"",RequireAuthentication:!1,ServiceName:"",dataUrl:""},fieldsSettings:{tbSimpleEditor:{ShowLabel:!0,Placeholder:!0,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!0},tbNumericEditor:{ShowLabel:!0,Placeholder:!0,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDateTimeEditor:{ShowLabel:!0,Placeholder:!1,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDateEditor:{ShowLabel:!0,Placeholder:!1,Format:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbDropdownEditor:{ShowLabel:!0,Placeholder:!1,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbTypeaheadEditor:{ShowLabel:!0,Placeholder:!0,Format:!1,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1},tbHiddenField:{ShowLabel:!1,Placeholder:!1,Format:!1,Help:!1,Required:!1,ReadOnly:!1,EditorType:!1},tbCheckboxField:{ShowLabel:!1,Placeholder:!1,Format:!1,Help:!0,Required:!1,ReadOnly:!0,EditorType:!1},tbTextArea:{ShowLabel:!0,Placeholder:!0,Help:!0,Required:!0,ReadOnly:!0,EditorType:!1}}};r.tbColumnFilterPopoverTemplateName="tbColumnFilterPopoverTemplate.html";r.tbColumnDateTimeFilterPopoverTemplateName="tbColumnDateTimeFilterPopoverTemplate.html";r.tbColumnOptionsFilterPopoverTemplateName="tbColumnOptionsFilterPopoverTemplate.html";r.tbRemoveButtonrPopoverTemplateName="tbRemoveButtonrPopoverTemplate.html";t.get(r.tbColumnFilterPopoverTemplateName)||(r.tbColumnFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control" ng-options="key as value for (key , value) in $ctrl.filterOperators" ng-model="$ctrl.filter.Operator" ng-hide="$ctrl.dataType == \'boolean\' || $ctrl.onlyContains"><\/select>&nbsp;<input class="form-control" type="search" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" ng-hide="$ctrl.dataType == \'boolean\'"placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" /><div class="text-center" ng-show="$ctrl.dataType == \'boolean\'"><button type="button" class="btn btn-default btn-md" ng-disabled="$ctrl.filter.Text === true" ng-click="$ctrl.filter.Text = true; $ctrl.filter.Operator = \'Equals\';"><i class="fa fa-check"><\/i><\/button>&nbsp;<button type="button" class="btn btn-default btn-md" ng-disabled="$ctrl.filter.Text === false" ng-click="$ctrl.filter.Text = false; $ctrl.filter.Operator = \'Equals\';"><i class="fa fa-times"><\/i><\/button><\/div><input type="search" class="form-control" ng-model="$ctrl.filter.Argument[0]" ng-keypress="$ctrl.checkEvent($event)" ng-show="$ctrl.filter.Operator == \'Between\'" /><hr /><tb-column-filter-buttons><\/tb-column-filter-buttons><\/form><\/div>',t.put(r.tbColumnFilterPopoverTemplateName,r.tbColumnFilterPopoverTemplate));t.get(r.tbColumnDateTimeFilterPopoverTemplateName)||(u='<input class="form-control" type="date" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" /><input type="date" class="form-control" ng-model="$ctrl.filter.Argument[0]" ng-keypress="$ctrl.checkEvent($event)" ng-show="$ctrl.filter.Operator == \'Between\'" />',f='<div class="input-group"><input type="text" class="form-control" uib-datepicker-popup="MM/dd/yyyy" ng-model="$ctrl.filter.Text" autofocus ng-keypress="$ctrl.checkEvent($event)" placeholder="{{\'CAPTION_VALUE\' | translate}}" ng-disabled="$ctrl.filter.Operator == \'None\'" is-open="$ctrl.dateOpen" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="$ctrl.dateOpen = !$ctrl.dateOpen;"><i class="fa fa-calendar"><\/i><\/button><\/span><\/div>',r.tbColumnDateTimeFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control" ng-options="key as value for (key , value) in $ctrl.filterOperators" ng-model="$ctrl.filter.Operator" ng-hide="$ctrl.dataType == \'boolean\'"><\/select>&nbsp;'+(r.canUseHtml5Date()?u:f)+"<hr /><tb-column-filter-buttons><\/tb-column-filter-buttons><\/form><\/div>",t.put(r.tbColumnDateTimeFilterPopoverTemplateName,r.tbColumnDateTimeFilterPopoverTemplate));t.get(r.tbColumnOptionsFilterPopoverTemplateName)||(r.tbColumnOptionsFilterPopoverTemplate='<div><form class="tubular-column-filter-form" onsubmit="return false;"><select class="form-control checkbox-list" ng-options="item.Key as item.Label for item in $ctrl.optionsItems" ng-model="$ctrl.filter.Argument" multiple ng-disabled="$ctrl.dataIsLoaded == false"><\/select>&nbsp;<hr /><tb-column-filter-buttons><\/tb-column-filter-buttons><\/form><\/div>',t.put(r.tbColumnOptionsFilterPopoverTemplateName,r.tbColumnOptionsFilterPopoverTemplate));t.get(r.tbRemoveButtonrPopoverTemplateName)||(r.tbRemoveButtonrPopoverTemplate='<div class="tubular-remove-popover"><button ng-click="$ctrl.model.delete()" class="btn btn-danger btn-xs">{{:: $ctrl.caption || (\'CAPTION_REMOVE\' | translate) }}<\/button>&nbsp;<button ng-click="$ctrl.isOpen = false;" class="btn btn-default btn-xs">{{:: $ctrl.cancelCaption || (\'CAPTION_CANCEL\' | translate) }}<\/button><\/div>',t.put(r.tbRemoveButtonrPopoverTemplateName,r.tbRemoveButtonrPopoverTemplate));r.generateCells=function(n,t){return n.map(function(n){var i=n.EditorType.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()});return'\r\n\t\t<tb-cell-template column-name="'+n.Name+'">\r\n\t\t\t'+(t==="Inline"?"<"+i+' is-editing="row.$isEditing" value="row.'+n.Name+'"><\/'+i+">":n.Template)+"\r\n\t\t<\/tb-cell-template>"}).join("")};r.generateGrid=function(n,t){var i="",u="";return t.Pager&&(i+='\r\n\t<tb-grid-pager class="col-md-6"><\/tb-grid-pager>',u+='\r\n\t<tb-grid-pager class="col-md-6"><\/tb-grid-pager>'),t.ExportCsv&&(i+='\r\n\t<div class="col-md-3">\r\n\t\t<div class="btn-group">\r\n\t\t<tb-print-button title="Tubular"><\/tb-print-button>\r\n\t\t<tb-export-button filename="tubular.csv" css="btn-sm"><\/tb-export-button>\r\n\t\t<\/div>\r\n\t<\/div>'),t.FreeTextSearch&&(i+='\r\n\t<tb-text-search class="col-md-3" css="input-sm"><\/tb-text-search>'),t.PageSizeSelector&&(u+='\r\n\t<tb-page-size-selector class="col-md-3" selectorcss="input-sm"><\/tb-page-size-selector>'),t.PagerInfo&&(u+='\r\n\t<tb-grid-pager-info class="col-md-3"><\/tb-grid-pager-info>'),'<div class="container">\r\n<tb-grid server-url="'+t.dataUrl+'" request-method="'+t.RequestMethod+'" class="row" page-size="10" require-authentication="'+t.RequireAuthentication+'" '+(t.ServiceName!==""?' service-name="'+t.ServiceName+'"':"")+(t.Mode!=="Read-Only"?' editor-mode="'+t.Mode.toLowerCase()+'"':"")+">"+(i===""?"":'\r\n\t<div class="row">'+i+"\r\n\t<\/div>")+'\r\n\t<div class="row">\r\n\t<div class="col-md-12">\r\n\t<div class="panel panel-default panel-rounded">\r\n\t<tb-grid-table class="table-bordered">\r\n\t<tb-column-definitions>'+(t.Mode!=="Read-Only"?'\r\n\t\t<tb-column label="Actions"><tb-column-header>{{label}}<\/tb-column-header><\/tb-column>':"")+n.map(function(n){return'\r\n\t\t<tb-column name="'+n.Name+'" label="'+n.Label+'" column-type="'+n.DataType+'" sortable="'+n.Sortable+'" \r\n\t\t\tis-key="'+n.IsKey+'" searchable="'+n.Searchable+'" '+(n.Sortable?'\r\n\t\t\tsort-direction="'+n.SortDirection+'" sort-order="'+n.SortOrder+'" ':" ")+'visible="'+n.Visible+'">'+(n.Filter?"\r\n\t\t\t<tb-column-filter><\/tb-column-filter>":"")+"\r\n\t\t\t<tb-column-header>{{label}}<\/tb-column-header>\r\n\t\t<\/tb-column>"}).join("")+'\r\n\t<\/tb-column-definitions>\r\n\t<tb-row-set>\r\n\t<tb-row-template ng-repeat="row in $component.rows" row-model="row">'+(t.Mode!=="Read-Only"?"\r\n\t\t<tb-cell-template>"+(t.Mode==="Inline"?'\r\n\t\t\t<tb-save-button model="row"><\/tb-save-button>':"")+'\r\n\t\t\t<tb-edit-button model="row"><\/tb-edit-button>\r\n\t\t<\/tb-cell-template>':"")+r.generateCells(n,t.Mode)+"\r\n\t<\/tb-row-template>\r\n\t<\/tb-row-set>\r\n\t<\/tb-grid-table>\r\n\t<\/div>\r\n\t<\/div>\r\n\t<\/div>"+(u===""?"":'\r\n\t<div class="row">'+u+"\r\n\t<\/div>")+"\r\n<\/tb-grid>\r\n<\/div>"};r.getEditorTypeByDateType=function(n){switch(n){case"date":return"tbDateTimeEditor";case"numeric":return"tbNumericEditor";case"boolean":return"tbCheckboxField";default:return"tbSimpleEditor"}};r.createColumns=function(t){var o=n.isArray(t)&&t.length>0?t[0]:t,f=[],i,u,e,s;for(i in o)if(o.hasOwnProperty(i)){if(u=o[i],i[0]==="$"||n.isFunction(u)||u==null)continue;n.isNumber(u)||parseFloat(u).toString()===u?f.push({Name:i,DataType:"numeric",Template:"{{row."+i+" | number}}"}):toString.call(u)==="[object Date]"||isNaN(new Date(u).getTime())===!1?f.push({Name:i,DataType:"date",Template:"{{row."+i+" | date}}"}):u.toLowerCase()==="true"||u.toLowerCase()==="false"?f.push({Name:i,DataType:"boolean",Template:"{{row."+i+' ? "TRUE" : "FALSE" }}'}):(e={Name:i,DataType:"string",Template:"{{row."+i+"}}"},/e(-|)mail/ig.test(e.Name)&&(e.Template='<a href="mailto:'+e.Template+'">'+e.Template+"<\/a>"),f.push(e))}return s=!1,n.forEach(f,function(n){n.Label=n.Name.replace(/([a-z])([A-Z])/g,"$1 $2");n.EditorType=r.getEditorTypeByDateType(n.DataType);n.Searchable=n.DataType==="string";n.Filter=!0;n.Visible=!0;n.Sortable=!0;n.IsKey=!1;n.SortOrder=0;n.SortDirection="";n.ShowLabel=!0;n.Placeholder="";n.Format="";n.Help="";n.Required=!0;n.ReadOnly=!1;s||(n.IsKey=!0,n.SortOrder=1,n.SortDirection="Ascending",s=!0)}),f};r.generatePopupTemplate=function(n,t){var i=r.createColumns(n);return'<tb-form model="Model"><div class="modal-header"><h3 class="modal-title">'+(t||"Edit Row")+'<\/h3><\/div><div class="modal-body">'+r.generateFieldsArray(i).join("")+'<\/div><div class="modal-footer"><button class="btn btn-primary" ng-click="savePopup()" ng-disabled="!Model.$valid()">Save<\/button><button class="btn btn-danger" ng-click="closePopup()" formnovalidate>Cancel<\/button><\/div><\/tb-form>'};r.generatePopup=function(n,i){var u="temp"+(new Date).getTime()+".html",f=r.generatePopupTemplate(n,i);return t.put(u,f),u};r.generateForm=function(n,t){var u=t.Layout==="Simple"?"":t.Layout.toLowerCase(),i=r.generateFieldsArray(n),f;return f=u===""?i.join(""):'\r\n\t<div class="row">'+(u==="two-columns"?'\r\n\t<div class="col-md-6">'+i.filter(function(n,t){return t%2==0}).join("")+'\r\n\t<\/div>\r\n\t<div class="col-md-6">'+i.filter(function(n,t){return t%2==1}).join("")+"<\/div>":'\r\n\t<div class="col-md-4">'+i.filter(function(n,t){return t%3==0}).join("")+'\r\n\t<\/div>\r\n\t<div class="col-md-4">'+i.filter(function(n,t){return t%3==1}).join("")+'\r\n\t<\/div>\r\n\t<div class="col-md-4">'+i.filter(function(n,t){return t%3==2}).join("")+"\r\n\t<\/div>")+"\r\n\t<\/div>",'<tb-form server-save-method="'+t.SaveMethod+'" model-key="'+t.ModelKey+'" require-authentication="'+t.RequireAuthentication+'" server-url="'+t.dataUrl+'" server-save-url="'+t.SaveUrl+'"'+(t.ServiceName!==""?' service-name="'+t.ServiceName+'"':"")+">\r\n\t"+f+'\r\n\t<div>\r\n\t\t<button class="btn btn-primary" ng-click="$parent.save()" ng-disabled="!$parent.model.$valid()">Save<\/button>'+(t.CancelButton?'\r\n\t\t<button class="btn btn-danger" ng-click="$parent.cancel()" formnovalidate>Cancel<\/button>':"")+"\r\n\t<\/div>\r\n<\/tb-form>"};r.generateFieldsArray=function(n){return n.map(function(n){var i=n.EditorType.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()}),t=r.defaults.fieldsSettings[n.EditorType];return"\r\n\t<"+i+' name="'+n.Name+'"'+(t.EditorType?'\r\n\t\teditor-type="'+n.DataType+'" ':"")+(t.ShowLabel?'\r\n\t\tlabel="'+n.Label+'" show-label="'+n.ShowLabel+'"':"")+(t.Placeholder?'\r\n\t\tplaceholder="'+n.Placeholder+'"':"")+(t.Required?'\r\n\t\trequired="'+n.Required+'"':"")+(t.ReadOnly?'\r\n\t\tread-only="'+n.ReadOnly+'"':"")+(t.Format?'\r\n\t\tformat="'+n.Format+'"':"")+(t.Help?'\r\n\t\thelp="'+n.Help+'"':"")+">\r\n\t<\/"+i+">"})};r.setupFilter=function(t,r){var f={None:i("OP_NONE"),Equals:i("OP_EQUALS"),NotEquals:i("OP_NOTEQUALS"),Between:i("OP_BETWEEN"),Gte:">=",Gt:">",Lte:"<=",Lt:"<"},e={string:{None:i("OP_NONE"),Equals:i("OP_EQUALS"),NotEquals:i("OP_NOTEQUALS"),Contains:i("OP_CONTAINS"),NotContains:i("OP_NOTCONTAINS"),StartsWith:i("OP_STARTSWITH"),NotStartsWith:i("OP_NOTSTARTSWITH"),EndsWith:i("OP_ENDSWITH"),NotEndsWith:i("OP_NOTENDSWITH")},numeric:{None:i("OP_NONE"),Equals:i("OP_EQUALS"),Between:i("OP_BETWEEN"),Gte:">=",Gt:">",Lte:"<=",Lt:"<"},date:f,datetime:f,datetimeutc:f,boolean:{None:i("OP_NONE"),Equals:i("OP_EQUALS"),NotEquals:i("OP_NOTEQUALS")}},u;(r.filter={Text:r.text||null,Argument:r.argument?[r.argument]:null,Operator:r.operator||"Contains",OptionsUrl:r.optionsUrl||null,HasFilter:!(r.text==null),Name:t.$parent.$parent.column.Name},r.filterTitle=r.title||i("CAPTION_FILTER"),t.$watch(function(){var n=r.$component.columns.filter(function(n){return n.Name===r.filter.Name});return n.length!==0?n[0]:null},function(n){n&&r.filter.HasFilter!==n.Filter.HasFilter&&(r.filter.HasFilter=n.Filter.HasFilter,r.filter.Text=n.Filter.Text,r.retrieveData())},!0),r.retrieveData=function(){var n=r.$component.columns.filter(function(n){return n.Name===r.filter.Name});n.length!==0&&(n[0].Filter=r.filter);r.$component.retrieveData();r.close()},r.clearFilter=function(){r.filter.Operator!=="Multiple"&&(r.filter.Operator="None");n.isDefined(r.onlyContains)&&r.onlyContains&&(r.filter.Operator="Contains");r.filter.Text="";r.filter.Argument=[];r.filter.HasFilter=!1;r.retrieveData()},r.applyFilter=function(){r.filter.HasFilter=!0;r.retrieveData()},r.close=function(){r.isOpen=!1},r.checkEvent=function(n){n.which===13&&(r.applyFilter(),n.preventDefault())},u=r.$component.columns.filter(function(n){return n.Name===r.filter.Name}),t.$watch("$ctrl.filter.Operator",function(n){n==="None"&&(r.filter.Text="")}),u.length!==0)&&(t.$watch("$ctrl.filter",function(n){u[0].Filter.Text!==n.Text&&(n.Text=u[0].Filter.Text,u[0].Filter.Operator!==n.Operator&&(n.Operator=u[0].Filter.Operator));r.filter.HasFilter=u[0].Filter.HasFilter}),u[0].Filter=r.filter,r.dataType=u[0].DataType,r.filterOperators=e[r.dataType],(r.dataType==="date"||r.dataType==="datetime"||r.dataType==="datetimeutc")&&(r.filter.Argument=[new Date],r.filter.Operator==="Contains"&&(r.filter.Operator="Equals")),(r.dataType==="numeric"||r.dataType==="boolean")&&(r.filter.Argument=[1],r.filter.Operator==="Contains"&&(r.filter.Operator="Equals")))}}])}(angular),function(n){"use strict";n.module("tubular.services").service("tubularHttp",["$http","$timeout","$q","localStorageService","translateFilter","$log","$document",function(t,i,r,u,f,e,o){function h(n){var t=new Date;return n=new Date(n),n-t<=0}function c(){u.remove("auth_data")}function l(){c();u.set("auth_data",s.userData)}function a(){t.defaults.headers.common.Authorization="Bearer "+s.userData.bearerToken}function v(){var t=u.get("auth_data");if(n.isUndefined(t))throw"No authentication data exists";else if(h(t.expirationDate))throw"Authentication token has already expired";else s.userData=t,a()}function y(){s.userData.isAuthenticated=!1;s.userData.username="";s.userData.bearerToken="";s.userData.expirationDate=null;s.userData.refreshToken=null}var s=this;s.userData={isAuthenticated:!1,username:"",bearerToken:"",expirationDate:null};s.isBearerTokenExpired=function(){return h(s.userData.expirationDate)};s.useRefreshTokens=!1;s.requireAuthentication=!0;s.refreshTokenUrl=s.tokenUrl="/api/token";s.apiBaseUrl="/api";s.setRequireAuthentication=function(n){s.requireAuthentication=n};s.setTokenUrl=function(n){s.tokenUrl=n};s.setRefreshTokenUrl=function(n){s.refreshTokenUrl=n};s.setApiBaseUrl=function(n){s.apiBaseUrl=n};s.isAuthenticated=function(){if(!s.userData.isAuthenticated||h(s.userData.expirationDate))try{v()}catch(n){return!1}return!0};s.setAccessTokenAsExpired=function(){s.userData.expirationDate=new Date((new Date).getTime()-1e4);l()};s.removeAuthentication=function(){c();y();t.defaults.headers.common.Authorization=null};s.authenticate=function(i,r,u,e){this.removeAuthentication();t({method:"POST",url:s.tokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+encodeURIComponent(i)+"&password="+encodeURIComponent(r)}).then(function(n){s.handleSuccessCallback(u,n.data,i)},function(t){n.isFunction(e)&&e(t.data.error_description||f("UI_HTTPERROR"))})};s.handleSuccessCallback=function(t,i,r){s.userData.isAuthenticated=!0;s.userData.username=i.userName||r||s.userData.username;s.userData.bearerToken=i.access_token;s.userData.expirationDate=new Date;s.userData.expirationDate=new Date(s.userData.expirationDate.getTime()+i.expires_in*1e3);s.userData.role=i.role;s.userData.refreshToken=i.refresh_token;a();l();n.isFunction(t)&&t(i)};s.addTimeZoneToUrl=function(n){return n+(n.indexOf("?")===-1?"?":"&")+"timezoneOffset="+(new Date).getTimezoneOffset()};s.saveDataAsync=function(t,i){var e=t.$component,r,f,u;return t.$component=null,r=n.copy(t),t.$component=e,f=n.copy(t.$original),delete r.$isEditing,delete r.$hasChanges,delete r.$selected,delete r.$original,delete r.$state,delete r.$valid,delete r.$component,delete r.$isLoading,delete r.$isNew,t.$isNew?(i.serverUrl=s.addTimeZoneToUrl(i.serverUrl),i.data=r):i.data={Old:f,New:r,TimezoneOffset:(new Date).getTimezoneOffset()},u=s.retrieveDataAsync(i),u.promise.then(function(n){return t.$hasChanges=!1,t.resetOriginal(),n}),u};s.getExpirationDate=function(){var n=new Date;return new Date(n.getTime()+3e5)};s.getCancel=function(n){return function(t){e.error(t);n.resolve(t)}};s.retrieveDataAsync=function(u){var e=r.defer(),f=s.getCancel(e),h,c;return(n.isUndefined(u.requireAuthentication)&&(u.requireAuthentication=s.requireAuthentication),n.isString(u.requireAuthentication)&&(u.requireAuthentication=u.requireAuthentication==="true"),!s.useRefreshTokens&&u.requireAuthentication&&s.isAuthenticated()===!1)?{promise:r(function(n){n(null)}),cancel:f}:(u.timeout=u.timeout||17e3,h=i(function(){f("Timed out")},u.timeout),c=t({url:u.serverUrl,method:u.requestMethod,data:u.data,timeout:e.promise}).then(function(n){return i.cancel(h),n.data},function(n){return n.status===401&&(s.removeAuthentication(),o.location=o.location),r.reject(n)}),{promise:c,cancel:f})};s.get=function(n,i){if(!s.useRefreshTokens&&s.requireAuthentication&&!s.isAuthenticated()){var u=r.defer();return{promise:r(function(n){n(null)}),cancel:s.getCancel(u)}}return{promise:t.get(n,i).then(function(n){return n.data})}};s.getBinary=function(n){return s.get(n,{responseType:"arraybuffer"})};s.delete=function(n){if(!s.useRefreshTokens&&s.requireAuthentication&&!s.isAuthenticated()){var t=r.defer();return{promise:r(function(n){n(null)}),cancel:s.getCancel(t)}}return s.retrieveDataAsync({serverUrl:n,requestMethod:"DELETE"})};s.post=function(n,t){if(!s.useRefreshTokens&&s.requireAuthentication&&!s.isAuthenticated()){var i=r.defer();return{promise:r(function(n){n(null)}),cancel:s.getCancel(i)}}return s.retrieveDataAsync({serverUrl:n,requestMethod:"POST",data:t})};s.postBinary=function(n,i){var e=r.defer(),u=s.getCancel(e),f;return!s.useRefreshTokens&&s.requireAuthentication&&!s.isAuthenticated()?{promise:r(function(n){n(null)}),cancel:u}:(f=t({url:n,method:"POST",headers:{"Content-Type":undefined},transformRequest:function(n){return n},data:i}),{promise:f,cancel:u})};s.put=function(n,t){if(!s.useRefreshTokens&&s.requireAuthentication&&!s.isAuthenticated()){var i=r.defer();return{promise:r(function(n){n(null)}),cancel:s.getCancel(i)}}return s.retrieveDataAsync({serverUrl:n,requestMethod:"PUT",data:t})};s.getByKey=function(n,t){var i=s.addTimeZoneToUrl(n).split("?"),r=i[0]+t;return i.length>1&&(r+="?"+i[1]),s.get(r)};s.instances=[];s.registerService=function(n,t){s.instances[n]=t};s.getDataService=function(t){if(n.isUndefined(t)||t==null||t==="tubularHttp")return s;var i=s.instances[t];return i==null?s:i}}])}(angular),function(n){"use strict";n.module("tubular.services").factory("tubularAuthInterceptor",["$q","$injector",function(n,t){var i=null;return{request:function(i){var r=t.get("tubularHttp"),u=r.apiBaseUrl;return(i.headers=i.headers||{},i.url.substring(0,u.length)===u&&r.tokenUrl!==i.url&&r.useRefreshTokens&&r.requireAuthentication&&r.userData.refreshToken&&r.isBearerTokenExpired())?n.reject({error:"expired token",status:401,config:i}):i},requestError:function(t){return n.reject(t)},response:function(n){return n},responseError:function(r){var f=n.defer(),u,e;switch(r.status){case 401:return u=t.get("tubularHttp"),e=u.apiBaseUrl,r.config.url.substring(0,e.length)===e&&u.tokenUrl!==r.config.url&&u.useRefreshTokens&&u.requireAuthentication&&u.userData.refreshToken?(i||(i=t.get("$http")({method:"POST",url:u.refreshTokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=refresh_token&refresh_token="+u.userData.refreshToken})),i.then(function(n){i=null;u.handleSuccessCallback(null,n.data);u.requireAuthentication&&u.isAuthenticated()?(r.config.headers.Authorization="Bearer "+u.userData.bearerToken,t.get("$http")(r.config).then(function(n){f.resolve(n)},function(){f.reject(n)})):f.reject(r)},function(n){i=null;f.reject(n);u.removeAuthentication();t.get("$state").go("/Login");return})):f.reject(r),f.promise}return f.reject(r),f.promise}}}])}(angular),function(n){"use strict";n.module("tubular.services").service("tubularTranslate",[function(){var n=this;n.currentLanguage="en";n.defaultLanguage="en";n.translationTable={en:{EDITOR_REGEX_DOESNT_MATCH:"The field doesn't match the regular expression.",EDITOR_REQUIRED:"The field is required.",EDITOR_MIN_CHARS:"The field needs to be minimum {0} chars.",EDITOR_MAX_CHARS:"The field needs to be maximum {0} chars.",EDITOR_MIN_NUMBER:"The minimum number is {0}.",EDITOR_MAX_NUMBER:"The maximum number is {0}.",EDITOR_MIN_DATE:"The minimum date is {0}.",EDITOR_MAX_DATE:"The maximum date is {0}.",EDITOR_MATCH:"The field needs to match the {0} field.",CAPTION_APPLY:"Apply",CAPTION_CLEAR:"Clear",CAPTION_CLOSE:"Close",CAPTION_SELECTCOLUMNS:"Select Columns",CAPTION_FILTER:"Filter",CAPTION_VALUE:"Value",CAPTION_REMOVE:"Remove",CAPTION_CANCEL:"Cancel",CAPTION_EDIT:"Edit",CAPTION_SAVE:"Save",CAPTION_PRINT:"Print",CAPTION_LOAD:"Load",CAPTION_ADD:"Add",UI_SEARCH:"search . . .",UI_PAGESIZE:"Page size:",UI_EXPORTCSV:"Export CSV",UI_CURRENTROWS:"Current rows",UI_ALLROWS:"All rows",UI_REMOVEROW:"Do you want to delete this row?",UI_SHOWINGRECORDS:"Showing {0} to {1} of {2} records",UI_FILTEREDRECORDS:"(Filtered from {0} total records)",UI_HTTPERROR:"Unable to contact server; please, try again later.",UI_GENERATEREPORT:"Generate Report",UI_TWOCOLS:"Two columns",UI_ONECOL:"One column",UI_MAXIMIZE:"Maximize",UI_RESTORE:"Restore",UI_MOVEUP:"Move Up",UI_MOVEDOWN:"Move Down",UI_MOVELEFT:"Move Left",UI_MOVERIGHT:"Move Right",UI_COLLAPSE:"Collapse",UI_EXPAND:"Expand",OP_NONE:"None",OP_EQUALS:"Equals",OP_NOTEQUALS:"Not Equals",OP_CONTAINS:"Contains",OP_NOTCONTAINS:"Not Contains",OP_STARTSWITH:"Starts With",OP_NOTSTARTSWITH:"Not Starts With",OP_ENDSWITH:"Ends With",OP_NOTENDSWITH:"Not Ends With",OP_BETWEEN:"Between"},es:{EDITOR_REGEX_DOESNT_MATCH:"El campo no es vÃ¡lido contra la expresiÃ³n regular.",EDITOR_REQUIRED:"El campo es requerido.",EDITOR_MIN_CHARS:"El campo requiere mÃ­nimo {0} caracteres.",EDITOR_MAX_CHARS:"El campo requiere mÃ¡ximo {0} caracteres.",EDITOR_MIN_NUMBER:"El nÃºmero mÃ­nimo es {0}.",EDITOR_MAX_NUMBER:"El nÃºmero maximo es {0}.",EDITOR_MIN_DATE:"La fecha mÃ­nima es {0}.",EDITOR_MAX_DATE:"La fecha mÃ¡xima es {0}.",EDITOR_MATCH:"El campo debe de conincidir con el campo {0}.",CAPTION_APPLY:"Aplicar",CAPTION_CLEAR:"Limpiar",CAPTION_CLOSE:"Cerrar",CAPTION_SELECTCOLUMNS:"Seleccionar columnas",CAPTION_FILTER:"Filtro",CAPTION_VALUE:"Valor",CAPTION_REMOVE:"Remover",CAPTION_CANCEL:"Cancelar",CAPTION_EDIT:"Editar",CAPTION_SAVE:"Guardar",CAPTION_PRINT:"Imprimir",CAPTION_LOAD:"Cargar",CAPTION_ADD:"Agregar",UI_SEARCH:"buscar . . .",UI_PAGESIZE:"# Registros:",UI_EXPORTCSV:"Exportar CSV",UI_CURRENTROWS:"Esta pÃ¡gina",UI_ALLROWS:"Todo",UI_REMOVEROW:"Â¿Desea eliminar el registro?",UI_SHOWINGRECORDS:"Mostrando registros {0} al {1} de {2}",UI_FILTEREDRECORDS:"(De un total de {0} registros)",UI_HTTPERROR:"No se logro contactar el servidor, intente mÃ¡s tarde.",UI_GENERATEREPORT:"Generar Reporte",UI_TWOCOLS:"Dos columnas",UI_ONECOL:"Una columna",UI_MAXIMIZE:"Maximizar",UI_RESTORE:"Restaurar",UI_MOVEUP:"Mover Arriba",UI_MOVEDOWN:"Mover Abajo",UI_MOVELEFT:"Mover Izquierda",UI_MOVERIGHT:"Mover Derecha",UI_COLLAPSE:"Colapsar",UI_EXPAND:"Expandir",OP_NONE:"Ninguno",OP_EQUALS:"Igual",OP_NOTEQUALS:"No Igual",OP_CONTAINS:"Contiene",OP_NOTCONTAINS:"No Contiene",OP_STARTSWITH:"Comienza Con",OP_NOTSTARTSWITH:"No Comienza Con",OP_ENDSWITH:"Termina Con",OP_NOTENDSWITH:"No Termina Con",OP_BETWEEN:"Entre"}};n.setLanguage=function(t){return n.currentLanguage=t,n};n.addTranslation=function(t,i,r){var u=n.translationTable[t]||n.translationTable[n.currentLanguage]||n.translationTable[n.defaultLanguage];return u[i]=r,n};n.translate=function(t){var i=n.translationTable[n.currentLanguage]||n.translationTable[n.defaultLanguage];return i[t]||t}}]).filter("translate",["tubularTranslate",function(t){return function(i,r,u,f,e){if(n.isDefined(i)){var o=t.translate(i);return o=o.replace("{0}",r||""),o=o.replace("{1}",u||""),o=o.replace("{2}",f||""),o.replace("{3}",e||"")}return i}}])}(angular);