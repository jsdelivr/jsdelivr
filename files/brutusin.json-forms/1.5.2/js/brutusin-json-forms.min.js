if("undefined"==typeof brutusin)window.brutusin=new Object;else if("object"!=typeof brutusin)throw"brutusin global variable already exists";!function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();(void 0===t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,t=0;t<arguments.length;t++){var r=new RegExp("\\{"+t+"\\}","gi");e=e.replace(r,arguments[t])}return e});var BrutusinForms=new Object;BrutusinForms.messages={validationError:"Validation error",required:"This field is **required**",invalidValue:"Invalid field value",addpropNameExistent:"This property is already present in the object",addpropNameRequired:"A name is required",minItems:"At least `{0}` items are required",maxItems:"At most `{0}` items are allowed",pattern:"Value does not match pattern: `{0}`",minLength:"Value must be **at least** `{0}` characters long",maxLength:"Value must be **at most** `{0}` characters long",multipleOf:"Value must be **multiple of** `{0}`",minimum:"Value must be **greater or equal than** `{0}`",exclusiveMinimum:"Value must be **greater than** `{0}`",maximum:"Value must be **lower or equal than** `{0}`",exclusiveMaximum:"Value must be **lower than** `{0}`",minProperties:"At least `{0}` properties are required",maxProperties:"At most `{0}` properties are allowed",uniqueItems:"Array items must be unique"},BrutusinForms.decorators=new Array,BrutusinForms.addDecorator=function(e){BrutusinForms.decorators[BrutusinForms.decorators.length]=e},BrutusinForms.onResolutionStarted=function(e){},BrutusinForms.onResolutionFinished=function(e){},BrutusinForms.onValidationError=function(e,t){e.focus(),e.className.includes(" error")||(e.className+=" error"),alert(t)},BrutusinForms.onValidationSuccess=function(e){e.className=e.className.replace(" error","")},BrutusinForms.postRender=null,BrutusinForms.instances=new Array,BrutusinForms.create=function(schema){function validateDepencyMapIsAcyclic(){function e(t,r,n){if(r.hasOwnProperty(n))return void(error="Schema dependency graph has cycles");if(r[n]=null,!t.hasOwnProperty(n)){t[n]=null;var a=dependencyMap[n];if(a)for(var i=0;i<a.length;i++)e(t,r,a[i]);delete r[n]}}var t=new Object;for(var r in dependencyMap)t.hasOwnProperty(r)||e(t,new Object,r)}function appendChild(e,t,r){e.appendChild(t);for(var n=0;n<BrutusinForms.decorators.length;n++)BrutusinForms.decorators[n](t,r)}function createPseudoSchema(e){var t=new Object;for(var r in e)"items"!==r&&"properties"!==r&&"additionalProperties"!==r&&("pattern"===r?t[r]=new RegExp(e[r]):t[r]=e[r]);return t}function getDefinition(e){var t=e.split("/"),r=root;for(var n in t)"0"!==n&&(r=r[t[n]]);return r}function populateSchemaMap(e,t){var r=createPseudoSchema(t);if(schemaMap[e]=r,t.hasOwnProperty("oneOf")){r.oneOf=new Array,r.type="oneOf";for(var n in t.oneOf){var a=e+"."+n;r.oneOf[n]=a,populateSchemaMap(a,t.oneOf[n])}}else if(t.hasOwnProperty("$ref")){var i=getDefinition(t.$ref);populateSchemaMap(e,i)}else if("object"===t.type){if(t.properties){r.properties=new Object;for(var o in t.properties){var a=e+"."+o;r.properties[o]=a,populateSchemaMap(a,t.properties[o])}}if(t.patternProperties){r.patternProperties=new Object;for(var s in t.patternProperties){var u=e+"["+s+"]";r.patternProperties[s]=u;var l=t.patternProperties[s];l.hasOwnProperty("type")||l.hasOwnProperty("$ref")||l.hasOwnProperty("oneOf")?populateSchemaMap(u,t.patternProperties[s]):populateSchemaMap(u,SCHEMA_ANY)}}if(t.additionalProperties){var a=e+"[*]";r.additionalProperties=a,t.additionalProperties.hasOwnProperty("type")||t.additionalProperties.hasOwnProperty("oneOf")?populateSchemaMap(a,t.additionalProperties):populateSchemaMap(a,SCHEMA_ANY)}}else"array"===t.type&&(r.items=e+"[#]",populateSchemaMap(r.items,t.items));if(t.hasOwnProperty("dependsOn")){null===t.dependsOn&&(t.dependsOn=["$"]);for(var d=new Array,n=0;n<t.dependsOn.length;n++)t.dependsOn[n]?t.dependsOn[n].startsWith("$")?d[n]=t.dependsOn[n]:e.endsWith("]")?d[n]=e+"."+t.dependsOn[n]:d[n]=e.substring(0,e.lastIndexOf("."))+"."+t.dependsOn[n]:d[n]="$";schemaMap[e].dependsOn=d;for(var n=0;n<d.length;n++){var p=dependencyMap[d[n]];p||(p=new Array,dependencyMap[d[n]]=p),p[p.length]=e}}}function renderTitle(e,t,r){if(e&&t){var n=document.createElement("label");"any"!==r.type&&"object"!==r.type&&"array"!==r.type&&(n.htmlFor=getInputId());var a=document.createTextNode(t+":");if(appendChild(n,a,r),r.description&&(n.title=r.description),r.required){var i=document.createElement("sup");appendChild(i,document.createTextNode("*"),r),appendChild(n,i,r),n.className="required"}appendChild(e,n,r)}}function getInputId(){return formId+"_"+inputCounter}function validate(e){var t=!0;if(e.hasOwnProperty("getValidationError")){var r=e.getValidationError();r?(BrutusinForms.onValidationError(e,r),t=!1):BrutusinForms.onValidationSuccess(e)}if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)validate(e.childNodes[n])||(t=!1);return t}function clear(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function render(e,t,r,n,a,i){var o=getSchemaId(r),s=getSchema(o);renderInfoMap[o]=new Object,renderInfoMap[o].titleContainer=e,renderInfoMap[o].container=t,renderInfoMap[o].parentObject=n,renderInfoMap[o].propertyProvider=a,renderInfoMap[o].value=i,clear(e),clear(t);var u=renderers[s.type];u&&!s.dependsOn&&(s.title?renderTitle(e,s.title,s):a&&renderTitle(e,a.getValue(),s),i||(i="undefined"!=typeof initialValue&&null!==initialValue?getInitialValue(r):s["default"]),u(t,r,n,a,i))}function createPropertyProvider(e,t){var r=new Object;return r.getValue=e,r.onchange=t,r}function getInitialValue(id){var ret;try{eval("ret = initialValue"+id.substring(1))}catch(e){ret=null}return ret}function getValue(schema,input){if("function"==typeof input.getValue)return input.getValue();var value;return value=schema["enum"]?input.options[input.selectedIndex].value:input.value,""===value?null:("integer"===schema.type?(value=parseInt(value),isFinite(value)||(value=null)):"number"===schema.type?(value=parseFloat(value),isFinite(value)||(value=null)):"boolean"===schema.type?"input"===input.tagName.toLowerCase()?(value=input.checked,value||(value=!1)):"select"===input.tagName.toLowerCase()&&(value="true"===input.value?!0:"false"===input.value?!1:null):"any"===schema.type&&value&&eval("value="+value),value)}function getSchemaId(e){return e.replace(/\["[^"]*"\]/g,"[*]").replace(/\[\d*\]/g,"[#]")}function getSchema(e){return schemaMap[e]}function onDependencyChanged(e,t){function r(e){for(var t in schemaMap)e.startsWith(t)&&delete schemaMap[t]}function n(e){var t=new Expression(e);t.visit(data,function(e,t,r){delete t[r]})}var a=dependencyMap[e];if(a&&obj.schemaResolver){var i=function(e){if(e)for(var a in e)if(JSON.stringify(schemaMap[a])!==JSON.stringify(e[a])){r(a),n(a),populateSchemaMap(a,e[a]);var i=renderInfoMap[a];i&&render(i.titleContainer,i.container,a,i.parentObject,i.propertyProvider,i.value)}BrutusinForms.onResolutionFinished(t)};BrutusinForms.onResolutionStarted(t),obj.schemaResolver(a,obj.getData(),i)}}function Expression(e){function t(e){if(null===e)return null;for(var t=new Array,r=null,n=0,a=0;a<e.length;a++)'"'===e.charAt(a)?null===r?r='"':'"'===r&&(r=null,t[t.length]=e.substring(n,a+1).trim(),n=a+1):"'"===e.charAt(a)?null===r?r="'":"'"===r&&(r=null,t[t.length]=e.substring(n,a+1).trim(),n=a+1):"["===e.charAt(a)?null===r&&(n!==a&&(t[t.length]=e.substring(n,a).trim()),t[t.length]="[",n=a+1):"]"===e.charAt(a)?null===r&&(n!==a&&(t[t.length]=e.substring(n,a).trim()),t[t.length]="]",n=a+1):"."===e.charAt(a)?null===r&&(n!==a&&(t[t.length]=e.substring(n,a).trim()),n=a+1):a===e.length-1&&(t[t.length]=e.substring(n,a+1).trim());return t}(null===e||0===e.length||"."===e)&&(e="$");for(var r=new Array,n=t(e),a=!1,i=0,o="",s=0;s<n.length;s++){var u=n[s];if("["===u){if(a)throw"Error parsing expression '"+e+"': Nested [ found";a=!0,i=0,o+=u}else if("]"===u){if(!a)throw"Error parsing expression '"+e+"': Unbalanced ] found";a=!1,o+=u,r[r.length]=o,o=""}else if(a){if(i>0)throw"Error parsing expression '"+e+"': Multiple tokens found inside a bracket";o+=u,i++}else r[r.length]=u;if(s===n.length-1&&a)throw"Error parsing expression '"+e+"': Unbalanced [ found"}this.exp=e,this.queue=r,this.visit=function(e,t){function r(e,n,a,i,o){if(null!=a){var s=n.shift();if("$"===s){e="$";var s=n.shift()}if(s)if(Array.isArray(a)){if(!s.startsWith("["))throw"Node '"+e+"' is of type array";var u=s.substring(1,s.length-1);if(u.equals("#"))for(var l=0;l<a.length;l++){var d=a[l];r(e+s,n.slice(0),d,a,l),r(e+"["+l+"]",n.slice(0),d,a,l)}else if("$"===u){var d=a[a.length-1];r(e+s,n.slice(0),d,a,a.length-1)}else{var p=parseInt(u);if(isNaN(p))throw"Element '"+u+"' of node '"+e+"' is not an integer, or the '$' last element symbol,  or the wilcard symbol '#'";if(0>p)throw"Element '"+u+"' of node '"+e+"' is lower than zero";var d=a[p];r(e+s,n.slice(0),d,a,p)}}else{if("object"!=typeof a)throw"boolean"==typeof a||"number"==typeof a||"string"==typeof a?"Node is leaf but still are tokens remaining: "+s:"Node type '"+typeof a+"' not supported for index field '"+e+"'";if("[*]"===s)for(var m in a){var d=a[m];r(e+s,n.slice(0),d,a,m),r(e+'["'+m+'"]',n.slice(0),d,a,m)}else{var d;if(s.startsWith("[")){var u=s.substring(1,s.length-1);if(!u.startsWith('"')&&!u.startsWith("'"))throw"Element '"+u+"' of node '"+e+"' must be a string expression or wilcard '*'";u=u.substring(1,u.length()-1),e+=s,d=a[u]}else e=e.length>0?e+"."+s:s,d=a[s];r(e,n,d,a,s)}}else t(a,i,o)}}r(this.exp,this.queue,e)}}var SCHEMA_ANY={type:"any"},obj=new Object,schemaMap=new Object,dependencyMap=new Object,renderInfoMap=new Object,container,data,error,initialValue,inputCounter=0,root=schema,formId="BrutusinForms#"+BrutusinForms.instances.length;populateSchemaMap("$",schema),validateDepencyMapIsAcyclic();var renderers=new Object;return renderers.integer=function(e,t,r,n,a){renderers.string(e,t,r,n,a)},renderers.number=function(e,t,r,n,a){renderers.string(e,t,r,n,a)},renderers.any=function(e,t,r,n,a){renderers.string(e,t,r,n,a)},renderers.string=function(e,t,r,n,a){var i,o=getSchemaId(t),s=getSchema(o);if("any"===s.type)i=document.createElement("textarea"),a&&(i.value=JSON.stringify(a,null,4),s.readOnly&&(i.disabled=!0));else if(s.media)i=document.createElement("input"),i.type="file",appendChild(i,u,s);else if(s["enum"]){if(i=document.createElement("select"),!s.required){var u=document.createElement("option"),l=document.createTextNode("");u.value="",appendChild(u,l,s),appendChild(i,u,s)}for(var d=0,p=0;p<s["enum"].length;p++){var u=document.createElement("option"),l=document.createTextNode(s["enum"][p]);u.value=s["enum"][p],appendChild(u,l,s),appendChild(i,u,s),a&&s["enum"][p]===a&&(d=p,s.required||d++,s.readOnly&&(i.disabled=!0))}1===s["enum"].length?i.selectedIndex=1:i.selectedIndex=d}else i=document.createElement("input"),"integer"===s.type||"number"===s.type?(i.type="number",i.step="any","number"!=typeof a&&(a=null)):"date-time"===s.format?i.type="datetime-local":"email"===s.format?i.type="email":"text"===s.format?i=document.createElement("textarea"):i.type="text",null!==a&&"undefined"!=typeof a&&(i.value=a,s.readOnly&&(i.disabled=!0));return i.schema=o,i.setAttribute("autocorrect","off"),i.getValidationError=function(){try{var e=getValue(s,i);if(null===e){if(s.required)return BrutusinForms.messages.required}else{if(s.pattern&&!s.pattern.test(e))return BrutusinForms.messages.pattern.format(s.pattern.source);if(s.minLength&&(!e||s.minLength>e.length))return BrutusinForms.messages.minLength.format(s.minLength);if(s.maxLength&&e&&s.maxLength<e.length)return BrutusinForms.messages.maxLength.format(s.maxLength)}if(null!==e&&!isNaN(e)){if(s.multipleOf&&e%s.multipleOf!==0)return BrutusinForms.messages.multipleOf.format(s.multipleOf);if(s.hasOwnProperty("maximum")){if(s.exclusiveMaximum&&e>=s.maximum)return BrutusinForms.messages.exclusiveMaximum.format(s.maximum);if(!s.exclusiveMaximum&&e>s.maximum)return BrutusinForms.messages.maximum.format(s.maximum)}if(s.hasOwnProperty("minimum")){if(s.exclusiveMinimum&&e<=s.minimum)return BrutusinForms.messages.exclusiveMinimum.format(s.minimum);if(!s.exclusiveMinimum&&e<s.minimum)return BrutusinForms.messages.minimum.format(s.minimum)}}}catch(t){return BrutusinForms.messages.invalidValue}},i.onchange=function(){var e;try{e=getValue(s,i)}catch(t){e=null}r?r[n.getValue()]=e:data=e,onDependencyChanged(o,i)},s.description&&(i.title=s.description,i.placeholder=s.description),i.onchange(),i.id=getInputId(),inputCounter++,appendChild(e,i,s),r},renderers["boolean"]=function(e,t,r,n,a){var i,o=getSchemaId(t),s=getSchema(o);if(s.required)i=document.createElement("input"),i.type="checkbox",a===!0&&(i.checked=!0);else{i=document.createElement("select");var u=document.createElement("option"),l=document.createTextNode("");l.value="",appendChild(u,l,s),appendChild(i,u,s);var d=document.createElement("option"),p=document.createTextNode("true");p.value="true",appendChild(d,p,s),appendChild(i,d,s);var m=document.createElement("option"),c=document.createTextNode("false");c.value="false",appendChild(m,c,s),appendChild(i,m,s),a===!0?i.selectedIndex=1:a===!1&&(i.selectedIndex=2)}i.onchange=function(){r?r[n.getValue()]=getValue(s,i):data=getValue(s,i),onDependencyChanged(o,i)},i.schema=o,i.id=getInputId(),inputCounter++,s.description&&(i.title=s.description),i.onchange(),appendChild(e,i,s)},renderers.oneOf=function(e,t,r,n,a){var i=getSchemaId(t),o=getSchema(i),s=document.createElement("select"),u=document.createElement("div");u.innerHTML="",s.type="select",s.schema=i;var l=document.createElement("option");l.value=null,appendChild(s,l,o);for(var d=0;d<o.oneOf.length;d++){var p=document.createElement("option"),m=i+"."+d,c=getSchema(m),h=document.createTextNode(c.title);if(p.value=o.oneOf[d],appendChild(p,h,o),appendChild(s,p,o),void 0!==a&&null!==a&&(o.readOnly&&(s.disabled=!0),a.hasOwnProperty("type")&&c.hasOwnProperty("properties")&&c.properties.hasOwnProperty("type"))){var f=getSchema(c.properties.type);a.type===f["enum"][0]&&(s.selectedIndex=d+1,render(null,u,t+"."+(s.selectedIndex-1),r,n,a))}}s.onchange=function(){render(null,u,t+"."+(s.selectedIndex-1),r,n,a)},appendChild(e,s,o),appendChild(e,u,o)},renderers.object=function(e,t,r,n,a){function i(e){var t=new Object;return t.getValue=function(){return e},t.onchange=function(e){},t}function o(e,t,r,n,a,i){var o;o=getSchemaId(void 0!==i?i.id:r);var s=getSchema(o),u=t.tBodies[0],l=document.createElement("tr"),d=document.createElement("td");d.className="add-prop-name";var p=document.createElement("table"),m=document.createElement("tr"),c=document.createElement("td"),h=document.createElement("td"),f="$"+Object.keys(e).length+"$",v=document.createElement("td");v.className="prop-value";var g=document.createElement("input");g.type="text",g.getValidationError=function(){return g.previousValue!==g.value&&e.hasOwnProperty(g.value)?BrutusinForms.messages.addpropNameExistent:g.value?void 0:BrutusinForms.messages.addpropNameRequired};var y=createPropertyProvider(function(){return g.value?g.value:f},function(t){y.getValue()!==t&&(t||(t=f),t&&e.hasOwnProperty(t)&&(e[y.getValue()]=e[t],delete e[t]))});g.onblur=function(){if(g.previousValue!==g.value){for(var t=g.value,r=1;g.previousValue!==t&&e.hasOwnProperty(t);)t=g.value+"("+r+")",r++;return g.value=t,y.onchange(g.previousValue),void(g.previousValue=g.value)}};var b=document.createElement("button");if(b.setAttribute("type","button"),b.className="remove",appendChild(b,document.createTextNode("x"),s),b.onclick=function(){delete e[g.value],t.deleteRow(l.rowIndex),g.value=null,y.onchange(g.previousValue)},appendChild(c,g,s),appendChild(h,b,s),appendChild(m,c,s),appendChild(m,h,s),appendChild(p,m,s),appendChild(d,p,s),void 0!==i){var x=document.createElement("tr"),w=document.createElement("td");appendChild(w,document.createTextNode(i.pnp_pattern),s),appendChild(x,w,s),appendChild(p,x,s)}appendChild(l,d,s),appendChild(l,v,s),appendChild(u,l,s),appendChild(t,u,s),void 0!==i?render(null,v,i.id,e,y,a):render(null,v,r,e,y,a),n&&(g.value=n,g.onblur())}var s=getSchemaId(t),u=getSchema(s),l=new Object;r?(n.getValue()||0===n.getValue())&&(r[n.getValue()]=l):data=l;var d=document.createElement("table");d.className="object";var p=document.createElement("tbody");appendChild(d,p,u);var m=0;if(u.hasOwnProperty("properties")){m=u.properties.length;for(var c in u.properties){var h=document.createElement("tr"),f=document.createElement("td");f.className="prop-name";var v=t+"."+c,g=document.createElement("td");g.className="prop-value",appendChild(p,h,u),appendChild(h,f,u),appendChild(h,g,u);var y=i(c),b=null;a&&(b=a[c]),render(f,g,v,l,y,b)}}var x=[];if(u.patternProperties||u.additionalProperties){var w=document.createElement("div");if(appendChild(w,d,u),u.patternProperties)for(var O in u.patternProperties){var C=u.patternProperties[O],E=document.createElement("div"),P=document.createElement("button");if(P.setAttribute("type","button"),P.pnp_pattern=O.substr(0),P.id=t+"["+O+"]",P.onclick=function(){o(l,d,t+"["+O+"]",void 0,void 0,this)},(u.maxProperties||u.minProperties)&&(P.getValidationError=function(){return u.minProperties&&m+d.rows.length<u.minProperties?BrutusinForms.messages.minProperties.format(u.minProperties):u.maxProperties&&m+d.rows.length>u.maxProperties?BrutusinForms.messages.maxProperties.format(u.maxProperties):void 0}),C.description&&(P.title=C.description),appendChild(P,document.createTextNode("Add "+O),u),appendChild(E,P,u),a)for(var I in a)if(!u.properties.hasOwnProperty(I)){var N=RegExp(O);-1!==I.search(N)&&-1===x.indexOf(I)&&(o(l,d,t+"["+O+"]",I,a[I]),x.push(I))}appendChild(w,E,u)}if(u.additionalProperties){var S=getSchema(u.additionalProperties),P=document.createElement("button");if(P.setAttribute("type","button"),P.onclick=function(){o(l,d,t+"[*]",void 0)},(u.maxProperties||u.minProperties)&&(P.getValidationError=function(){return u.minProperties&&m+d.rows.length<u.minProperties?BrutusinForms.messages.minProperties.format(u.minProperties):u.maxProperties&&m+d.rows.length>u.maxProperties?BrutusinForms.messages.maxProperties.format(u.maxProperties):void 0}),S.description&&(P.title=S.description),appendChild(P,document.createTextNode("Add"),u),appendChild(w,P,u),a)for(var I in a)u.properties&&u.properties.hasOwnProperty(I)||-1===x.indexOf(I)&&o(l,d,t+'["'+c+'"]',I,a[I],void 0)}appendChild(e,w,u)}else appendChild(e,d,u)},renderers.array=function(e,t,r,n,a){function i(e,t,r,n,a){var i=getSchemaId(r),o=getSchema(i),s=document.createElement("tbody"),u=document.createElement("tr");u.className="item";var l=document.createElement("td");l.className="item-index";var d=document.createElement("td");d.className="item-action";var p=document.createElement("td");p.className="item-value";var m=document.createElement("button");m.setAttribute("type","button"),m.className="remove",a===!0&&(m.disabled=!0),appendChild(m,document.createTextNode("x"),o);var c=function(){for(var e=0;e<t.rows.length;e++){var r=t.rows[e];r.cells[0].innerHTML=e+1}};m.onclick=function(){e.splice(u.rowIndex,1),t.deleteRow(u.rowIndex),c()},appendChild(d,m,o);var h=document.createTextNode(t.rows.length+1);appendChild(l,h,o),appendChild(u,l,o),appendChild(u,d,o),appendChild(u,p,o),appendChild(s,u,o),appendChild(t,s,o);var f=createPropertyProvider(function(){return u.rowIndex});render(null,p,r,e,f,n)}var o=getSchemaId(t),s=getSchema(o),u=getSchema(s.items),l=new Array;r?(n.getValue()||0===n.getValue())&&(r[n.getValue()]=l):data=l,n&&(n.onchange=function(e){delete r[e],r[n.getValue()]=l});var d=document.createElement("div"),p=document.createElement("table");p.className="array",appendChild(d,p,s),appendChild(e,d,s);var m=document.createElement("button");if(s.readOnly&&(m.disabled=!0),m.setAttribute("type","button"),m.getValidationError=function(){if(s.minItems&&s.minItems>p.rows.length)return BrutusinForms.messages.minItems.format(s.minItems);if(s.maxItems&&s.maxItems<p.rows.length)return BrutusinForms.messages.maxItems.format(s.maxItems);if(s.uniqueItems)for(var e=0;e<l.length;e++)for(var t=e+1;t<l.length;t++)if(JSON.stringify(l[e])===JSON.stringify(l[t]))return BrutusinForms.messages.uniqueItems},m.onclick=function(){i(l,p,t+"[#]",null)},u.description&&(m.title=u.description),appendChild(m,document.createTextNode("Add item"),s),appendChild(d,p,s),appendChild(d,m,s),a&&a instanceof Array)for(var c=0;c<a.length;c++)i(l,p,t+"["+c+"]",a[c],s.readOnly);appendChild(e,d,s)},obj.render=function(e,t){container=e,initialValue=t;var r=document.createElement("form");if(r.className="brutusin-form",r.onsubmit=function(e){return!1},container?appendChild(container,r):appendChild(document.body,r),error){var n=document.createElement("label"),a=document.createTextNode(error);appendChild(n,a),n.className="error-message",appendChild(r,n)}else render(null,r,"$",null,null);rendered=!0,dependencyMap.hasOwnProperty("$")&&onDependencyChanged("$"),BrutusinForms.postRender&&BrutusinForms.postRender(obj)},obj.getRenderingContainer=function(){return container},obj.validate=function(){return validate(container)},obj.getData=function(){function e(t,r){if(t instanceof Array){if(0===t.length)return null;for(var n=new Array,a=0;a<t.length;a++)n[a]=e(t[a],r.items);return n}if(""===t)return null;if(t instanceof Object){var n=new Object,i=!1;for(var o in t)if(!o.startsWith("$")||!o.endsWith("$")){var s=e(t[o],r.properties[o]);null!==s&&(n[o]=s,i=!0)}return i||r.required?n:null}return t}return container?e(data,schema):null},BrutusinForms.instances[BrutusinForms.instances.length]=obj,obj},brutusin["json-forms"]=BrutusinForms}();