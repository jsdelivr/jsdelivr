/**
 * angular-recaptcha build:2016-02-08 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2016 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.service("vcRecaptchaService",["$window","$q",function(b,c){function d(){return f?c.when(f):h}function e(){if(!f)throw new Error("reCaptcha has not been loaded yet.")}var f,g=c.defer(),h=g.promise;b.vcRecaptchaApiLoadedCallback=b.vcRecaptchaApiLoadedCallback||[];var i=function(){f=b.grecaptcha,g.resolve(f)};return b.vcRecaptchaApiLoadedCallback.push(i),b.vcRecaptchaApiLoaded=function(){b.vcRecaptchaApiLoadedCallback.forEach(function(a){a()})},a.isDefined(b.grecaptcha)&&i(),{create:function(a,b,c,e){return e.callback=c,e.sitekey=b,d().then(function(b){return b.render(a,e)})},reload:function(a){e(),f.reset(a)},getResponse:function(a){return e(),f.getResponse(a)}}}])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(a,c,d){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",stoken:"=?",theme:"=?",size:"=?",type:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(e,f,g,h){function i(){h&&h.$setValidity("recaptcha",null),l()}function j(){e.response="",k(),e.onExpire({widgetId:e.widgetId})}function k(){h&&h.$setValidity("recaptcha",e.required===!1?null:Boolean(e.response))}function l(){angular.element(a[0].querySelectorAll(".pls-container")).parent().remove()}g.hasOwnProperty("key")||b(),e.widgetId=null,h&&angular.isDefined(g.required)&&e.$watch("required",k);var m=e.$watch("key",function(a){if(a){40!==a.length&&b();var h=function(a){c(function(){e.response=a,k(),e.onSuccess({response:a,widgetId:e.widgetId})})};d.create(f[0],a,h,{stoken:e.stoken||g.stoken||null,theme:e.theme||g.theme||null,type:e.type||g.type||null,tabindex:e.tabindex||g.tabindex||null,size:e.size||g.size||null,"expired-callback":j}).then(function(a){k(),e.widgetId=a,e.onCreate({widgetId:a}),e.$on("$destroy",i)}),m()}})}}}])}(angular);