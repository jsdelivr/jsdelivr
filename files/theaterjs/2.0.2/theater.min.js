!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.theaterJS=t():e.theaterJS=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([/*!**************************!*\
  !*** ./src/theaterJS.js ***!
  \**************************/
function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(){function e(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=(0,i["default"])(e,t,r);return N.casting[n.name]=n,this}function t(e){return N.onStage=e,this}function r(){return N.casting[N.onStage]||null}function n(){var e=this,t=l["default"].toArray(arguments);return t.forEach(function(t){if(c["default"].isString(t)){var r=t.split(":"),a=void 0;r.length>1&&"\\"!==r[0].charAt(r[0].length-1)&&(a=r.shift(),N.options.erase&&n({name:"erase",actor:a}));var u=r.join(":").replace(/\\:/g,":"),o={name:"type",args:[u]};null!=a&&(o.actor=a),n(o)}else c["default"].isFunction(t)?n({name:"callback",args:[t]}):c["default"].isNumber(t)?n(t>0?{name:"wait",args:[t]}:{name:"erase",args:[t]}):c["default"].isArray(t)?t.forEach(function(e){n(e)}):c["default"].isObject(t)&&(c["default"].isArray(t.args)||(t.args=[]),t.args.unshift(f.bind(e)),N.scenario.push(t))}),N.options.autoplay&&u(),this}function u(){return"stopping"===N.status&&(N.status="playing"),"ready"===N.status&&(N.status="playing",f()),this}function o(e){return("ready"===N.status||c["default"].isFunction(e))&&(N.currentScene=-1,"ready"===N.status?u():e()),this}function s(){return N.status="stopping",this}function f(){if("stopping"===N.status)return N.status="ready",this;if("playing"!==N.status)return this;var e=N.scenario[N.currentScene];if(null!=e&&S(e.name+":end",e),N.currentScene+1>=N.scenario.length)return N.status="ready",this;var r=N.scenario[++N.currentScene];switch(r.actor&&t(r.actor),S(r.name+":start",r),r.name){case"type":d.apply(void 0,a(r.args));break;case"erase":g.apply(void 0,a(r.args));break;case"callback":y.apply(void 0,a(r.args));break;case"wait":b.apply(void 0,a(r.args));break;default:console.debug("No scene handler for "+r.name)}return this}function d(e,t){var n=r(),a=N.options.locale,u=N.options.minSpeed.type,o=N.options.maxSpeed.type,i=n.displayValue,s=-1,l=!1,f=null,c=null,d=h["default"].map(t);return t=h["default"].strip(t),function g(){var r=h["default"].strip(n.displayValue.substr(i.length));if(r===t)return e();var v=t.substr(0,s+1),m=r!==v,y=n.shouldBeMistaken(r,t,f,c),b=l||!y;if(m&&b)l=!0,f=null,n.displayValue=i+h["default"].inject(r.substr(0,r.length-1),d),s--,c=s;else{l=!1;var x=t.charAt(++s);y&&(x=p["default"].randomCharNear(x,a),null==f&&(f=s)),n.displayValue=i+h["default"].inject(r+x,d)}return setTimeout(g,n.getTypingSpeed(u,o))}(),this}function g(e,t){var n=r(),a=N.options.minSpeed.erase,u=N.options.maxSpeed.erase,o=n.displayValue,i=h["default"].map(o);o=h["default"].strip(o);var s=o.length,l=void 0,f=0;return c["default"].isNumber(t)&&(t>0?l=t:f=o.length+t),function d(){return s===f?e():(n.displayValue=h["default"].inject(o.substr(0,--s),i),setTimeout(d,l||n.getTypingSpeed(a,u)))}(),this}function y(e,t){return t.call(this,e),this}function b(e,t){return setTimeout(e.bind(this),t),this}function x(e,t){return e.split(",").forEach(function(e){e=e.trim(),c["default"].isArray(N.events[e])||(N.events[e]=[]),N.events[e].push(t)}),this}function S(e){var t=arguments;return c["default"].isArray(N.events[e])&&!function(){var r=[].slice.call(t,1);r.unshift(e);var n=(N.events[e]||[]).concat(N.events["*"]||[]);n.forEach(function(e){e.apply(void 0,a(r))})}(),this}var j=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(j=l["default"].merge({},m,j),c["default"].isNumber(j.minSpeed)){var w=j,A=w.minSpeed;j.minSpeed={erase:A,type:A}}if(c["default"].isNumber(j.maxSpeed)){var _=j,M=_.maxSpeed;j.maxSpeed={erase:M,type:M}}if("detect"===j.locale&&v){var O=v.languages;c["default"].isArray(O)&&c["default"].isString(O[0])&&(j.locale=O[0].substr(0,2))}p["default"].supports(j.locale)||(j.locale=p["default"].defaultLocale);var N={options:j,casting:{},status:"ready",onStage:null,currentScene:-1,scenario:[],events:{}};return t(null),Object.freeze(Object.defineProperties({addActor:e,getCurrentActor:r,addScene:n,play:u,replay:o,stop:s,on:x},{options:{get:function(){return N.options},configurable:!0,enumerable:!0},status:{get:function(){return N.status},configurable:!0,enumerable:!0}}))}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),i=n(o),s=r(2),l=n(s),f=r(1),c=n(f),d=r(5),p=n(d),g=r(4),h=n(g),v="undefined"!=typeof window&&window.navigator,m={autoplay:!0,erase:!0,minSpeed:{erase:80,type:80},maxSpeed:{erase:450,type:450},locale:"detect"};u.init=function(){var e=arguments.length<=0||void 0===arguments[0]?"actor":arguments[0],t=u();return t.addActor(e,{accuracy:1,speed:.8}),t},t["default"]=u,e.exports=t["default"]},/*!*****************************!*\
  !*** ./src/helpers/type.js ***!
  \*****************************/
function(e,t){"use strict";function r(e){return{}.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isNumber:function(e){return"number"==typeof e},isString:function(e){return"[object String]"===r(e)},isObject:function(e){return"[object Object]"===r(e)},isArray:function(e){return"[object Array]"===r(e)},isFunction:function(e){return"function"==typeof e}},e.exports=t["default"]},/*!******************************!*\
  !*** ./src/helpers/utils.js ***!
  \******************************/
function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={toArray:function(e){return[].slice.call(e)},merge:function(e){for(var t=[].slice.call(arguments,1),r=0,n=t.length;n>r;r++){var a=t[r];for(var u in a)a.hasOwnProperty(u)&&(e[u]=a[u])}return e},random:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},randomFloat:function(e,t){return Math.random()*(t-e)+e},getPercentageOf:function(e,t,r){return e-e*r+t*r}},e.exports=t["default"]},/*!**********************!*\
  !*** ./src/actor.js ***!
  \**********************/
function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),u=n(a),o=r(2),i=n(o),s="undefined"!=typeof window&&window.document,l={speed:.6,accuracy:.6};t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n="",a=void 0;if(u["default"].isNumber(t)&&(t={speed:t,accuracy:t}),t=i["default"].merge({},l,t),s&&(null==r&&(r="#"+e),u["default"].isString(r))){var o=r,f=s.querySelector(o);if(null==f)throw new Error("no matches for "+e+"'s selector: "+o);a=f,r=function(e){a.innerHTML=e}}return u["default"].isFunction(r)||(r=console.log.bind(console)),Object.defineProperties({$element:a,getTypingSpeed:function(e,r){var n=i["default"].randomFloat(t.speed,1);return i["default"].getPercentageOf(r,e,n)},shouldBeMistaken:function(e,r){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3],o=10*t.accuracy;if(o>=8)return!1;if(e.length<=o)return!1;if(e.length===r.length)return!1;if(u["default"].isNumber(n)){var s=e.length-n,l=o>=6?10-o:4;if(s>=l)return!1}if(u["default"].isNumber(a)){var s=e.length-a,f=2*Math.max(o,2);if(f>=s)return!1}return i["default"].randomFloat(0,.8)>t.accuracy}},{displayValue:{get:function(){return n},set:function(e){n=e,r(e)},configurable:!0,enumerable:!0},name:{get:function(){return e},configurable:!0,enumerable:!0}})},e.exports=t["default"]},/*!*****************************!*\
  !*** ./src/helpers/html.js ***!
  \*****************************/
function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.match(/<([^\s>]+)/);return Boolean(t)&&o["default"].indexOf(t[1].toLowerCase())>-1}Object.defineProperty(t,"__esModule",{value:!0});var u=r(7),o=n(u);t["default"]={strip:function(e){return e.replace(/(<([^>]+)>)/gi,"")},map:function(e){for(var t=/<[^>]+>/gi,r=[],n=[],u=void 0,o=void 0;u=t.exec(e);)o={tagName:u[0],position:u.index},"/"===o.tagName.charAt(1)?o.opener=n.pop():"/"===o.tagName.charAt(o.tagName.length-2)||a(o.tagName)||n.push(o),r.push(o);return r},inject:function(e,t){for(var r=0,n=void 0;r<t.length;r++)n=t[r],e.length>0&&n.position<=e.length?e=e.substr(0,n.position)+n.tagName+e.substr(n.position):n.opener&&n.opener.position<e.length&&(e+=n.tagName);return e}},e.exports=t["default"]},/*!*********************************!*\
  !*** ./src/helpers/keyboard.js ***!
  \*********************************/
function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){for(var t={},r=0,n=e.length,a=void 0;n>r;r++){a=e[r];for(var u=0,o=a.length;o>u;u++)t[a[u]]={x:u,y:r}}return t}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1),o=n(u),i=r(2),s=n(i),l=r(6),f=n(l),c="en";for(var d in f["default"])if(f["default"].hasOwnProperty(d)){var p=f["default"][d];f["default"][d]={list:p,mapped:a(p)}}t["default"]={defaultLocale:c,supports:function(e){return o["default"].isObject(f["default"][e])},randomCharNear:function(e,t){if(!this.supports(t))throw new Error('locale "'+t+'" is not supported');var r=f["default"][t].mapped,n=1,a=[],u=/[A-Z]/.test(e);e=e.toLowerCase();var o=r[e]||[],i=void 0;for(var l in r)r.hasOwnProperty(l)&&l!==e&&(i=r[l],Math.abs(o.x-i.x)<=n&&Math.abs(o.y-i.y)<=n&&a.push(l));var c=a.length>0?a[s["default"].random(0,a.length-1)]:this.randomChar(t);return u&&(c=c.toUpperCase()),c},randomChar:function(e){if(!this.supports(e))throw new Error('locale "'+e+'" is not supported');var t=f["default"][e].list.join("");return t.charAt(s["default"].random(0,t.length-1))}},e.exports=t["default"]},/*!****************************!*\
  !*** ./src/keyboards.json ***!
  \****************************/
function(e,t){e.exports={en:["qwertyuiop","asdfghjkl","zxcvbnm"],fr:["azertyuiop","qsdfghjklm","wxcvbn"],da:["qwertyuiopå","asdfghjklæø","zxcvbnm"],de:["qwertzuiopü","asdfghjklöä","yxcvbnm"],pl:["qwertyuiopęó","asdfghjkląśł","zxcvbnmżźćń"],pt:["qwertyuiop","asdfghjklç","zxcvbnm"],ru:["йцукенгшщзх","фывапролджэ","ячсмитьбюъ"]}},/*!********************************!*\
  !*** ./src/void-elements.json ***!
  \********************************/
function(e,t){e.exports=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}])});
//# sourceMappingURL=theater.min.js.map