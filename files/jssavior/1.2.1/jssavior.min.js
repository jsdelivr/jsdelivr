!function(a){"use strict";a.JSSavior={version:"1.2.1",config:{context:null,id:"",keepConsoleErrors:!0,url:a.location.protocol+"//jssavior.com/api/send/"},init:function(){var b=this;if(b.setConfig(),JSSaviorConfig&&JSSaviorConfig.errorQueue)for(var c=0;c<JSSaviorConfig.errorQueue.length;++c)b.handleError(JSSaviorConfig.errorQueue[c]);a.onerror=function(a,c,d,e,f){return b.handleError({column:e,errorObj:f,file:c,line:d,message:a})}},handleError:function(a){var b=this;return this.config.id?a.message.indexOf("Script error.")>-1?!b.config.keepConsoleErrors:(a.domain=location.hostname,a.project=b.config.id,a.url=document.URL,a.userAgent=navigator.userAgent,a.version=b.version,b.config.context&&(a.context=b.config.context),a.errorObj&&a.errorObj.message&&a.errorObj.stack&&(a.stack={message:a.errorObj.message,stack:a.errorObj.stack},delete a.errorObj),b.postErrorData(a),!b.config.keepConsoleErrors):!b.config.keepConsoleErrors},handleResult:function(a){try{if(4==a.readyState)if(200===a.status){if(!JSON||!JSON.parse||!a.responseText)return null;var b=JSON.parse(a.responseText);"error"==b.status&&console.log("Javascript error cannot be logged: "+b.reason)}else console.log("JSSavior: Service unavailable")}catch(c){}},postErrorData:function(b){var c=this;if(c.config.url){b.clientInfo={};var d;d=a.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),d.open("POST",c.config.url,!0),d.setRequestHeader("Content-Type","application/json"),d.onreadystatechange=function(){c.handleResult(d)},d.send(JSON.stringify(b))}},setConfig:function(){var a=this;"undefined"==typeof console&&(console={log:function(){}}),JSSaviorConfig&&("undefined"!=typeof JSSaviorConfig.keepConsoleErrors&&(a.config.keepConsoleErrors=JSSaviorConfig.keepConsoleErrors),"undefined"!=typeof JSSaviorConfig.projectId&&(a.config.id=JSSaviorConfig.projectId),"undefined"!=typeof JSSaviorConfig.context&&(a.config.context=JSSaviorConfig.context),"undefined"!=typeof JSSaviorConfig.apiUrl&&(a.config.url=JSSaviorConfig.apiUrl)),this.config.id||console.log("JSSavior: You need to provide an account id")},test:function(a){var b=this;b.handleError({column:0,errorObj:!1,file:"test.js",line:0,message:a})}},JSSavior.init()}(window);