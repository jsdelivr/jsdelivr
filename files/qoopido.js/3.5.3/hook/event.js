/*!
* Qoopido.js library v3.5.3, 2014-8-14
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(e){window.qoopido.registerSingleton("hook/event",e,["../base"])}(function(e,t,r,n,o,c,a){"use strict";function i(e,t,r){for(var n,o=0;(n=r[o])!==a;o++)e[n]=t[n];e._properties=e._properties.concat(r)}var l={general:{properties:"type altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),process:function(e,t){e.originalEvent=t,e.metaKey=t.metaKey&&t.metaKey!==!1?!0:!1,e.target||(e.target=t.srcElement||c),3===e.target.nodeType&&(e.target=e.target.parentNode)}},mouse:{regex:new RegExp("^(?:mouse|pointer|contextmenu|touch)|click"),properties:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement relatedTarget which".split(" "),process:function(e,t){var r,n,o;n=t.fromElement,o=t.button,null===e.pageX&&null!==t.clientX&&(r=e.target.ownerDocument||c,r=r.documentElement||r.body,e.pageX=t.clientX+(r.scrollLeft||0)-(r.clientLeft||0),e.pageY=t.clientY+(r.scrollTop||0)-(r.clientTop||0)),!e.relatedTarget&&n&&(e.relatedTarget=n===e.target?t.toElement:n),e.which||o===a||(e.which=1&o?1:2&o?3:4&o?2:0)}},key:{regex:new RegExp("^key"),properties:"char charCode key keyCode which".split(" "),process:function(e,t){null===e.which&&(e.which=null!==t.charCode?t.charCode:t.keyCode)}}};return e.base.extend({add:function(e,t){return e&&t&&l[e]&&(l[e]=t),this},get:function(e){return e&&l[e]?l[e]:null},process:function(e,t){var r,n,o;for(r in l)n=l[r],o=!n.regex||n.regex.test(t.type),o&&(n.properties&&i(e,t,n.properties),n.process&&n.process(e,t),n.delegate&&(e.delegate=n.delegate))}})});