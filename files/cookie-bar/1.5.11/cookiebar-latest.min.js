function setupCookieBar(){function e(){if(h.abort(),console.log("cookieBAR - Timeout for ip geolocation"),document.cookie.length>0||window.localStorage.length>0){var e=a();void 0===e&&t()}}function t(){var e=n(),t="";m("theme")&&(t="-"+m("theme"));var o=B.replace(/[^\/]*$/,""),a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",o+"cookiebar"+t+".css"),document.head.appendChild(a);var i=new XMLHttpRequest;i.open("GET",o+"/lang/"+e+".html",!0),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=document.createElement("div");if(e.innerHTML=i.responseText,document.getElementsByTagName("body")[0].appendChild(e),g=document.getElementById("cookie-bar"),y=document.getElementById("cookie-bar-button"),p=document.getElementById("cookie-bar-button-no"),k=document.getElementById("cookie-bar-prompt"),v=document.getElementById("cookie-bar-prompt-button"),f=document.getElementById("cookie-bar-prompt-close"),b=document.getElementById("cookie-bar-prompt-content"),E=document.getElementById("cookie-bar-no-consent"),thirdparty=document.getElementById("cookie-bar-thirdparty"),tracking=document.getElementById("cookie-bar-tracking"),privacyPage=document.getElementById("cookie-bar-privacy-page"),privacyLink=document.getElementById("cookie-bar-privacy-link"),m("showNoConsent")||(E.style.display="none",p.style.display="none"),m("blocking")&&(r(k,500),f.style.display="none"),m("thirdparty")&&(thirdparty.style.display="block"),m("tracking")&&(tracking.style.display="block"),m("top")?(g.style.top=0,d("top")):(g.style.bottom=0,d("bottom")),m("privacyPage")){var t=decodeURIComponent(m("privacyPage"));privacyLink.href=t,privacyPage.style.display="inline-block"}u(),r(g,250),d()}},i.send()}function o(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(e[t].hasAttribute("src")){var o=e[t].src;if(o.indexOf("cookiebar")>-1)return o}}function n(){var e=m("forceLang");return e===!1&&(e=navigator.language||navigator.userLanguage),e=e.substr(0,2),CookieLanguages.indexOf(e)<0&&(e="en"),e}function a(){var e=document.cookie.match(/(;)?cookiebar=([^;]*);?/);return null==e?void 0:decodeURI(e[2])}function i(e,t){var o=30;m("remember")&&(o=m("remember"));var n=new Date;n.setDate(n.getDate()+parseInt(o));var a=encodeURI(t)+(null===o?"":"; expires="+n.toUTCString()+";path=/");document.cookie=e+"="+a}function c(){document.cookie.split(";").forEach(function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),localStorage.clear()}function r(e,t){var o=e.style;o.opacity=0,o.display="block",function n(){(o.opacity-=-.1)>.9?null:setTimeout(n,t/10)}()}function l(e,t){var o=e.style;o.opacity=1,function n(){(o.opacity-=.1)<.1?o.display="none":setTimeout(n,t/10)}()}function d(e){setTimeout(function(){var t=document.getElementById("cookie-bar").clientHeight;switch(e){case"top":document.getElementsByTagName("body")[0].style.marginTop=t+"px";break;case"bottom":document.getElementsByTagName("body")[0].style.marginBottom=t+"px"}},300)}function s(){var e=document.getElementById("cookie-bar").clientHeight;if(m("top")){var t=parseInt(document.getElementsByTagName("body")[0].style.marginTop);document.getElementsByTagName("body")[0].style.marginTop=t-e+"px"}else{var o=parseInt(document.getElementsByTagName("body")[0].style.marginBottom);document.getElementsByTagName("body")[0].style.marginBottom=o-e+"px"}}function m(e){var t=B.split(e+"=");return t[1]?t[1].split(/[&?]+/)[0]:!1}function u(){y.addEventListener("click",function(){i("cookiebar","CookieAllowed"),s(),l(k,250),l(g,250)}),p.addEventListener("click",function(){var e=E.textContent.trim(),t=window.confirm(e);t===!0&&(c(),i("cookiebar","CookieDisallowed"),s(),l(k,250),l(g,250))}),v.addEventListener("click",function(){r(k,250)}),f.addEventListener("click",function(){l(k,250)})}var g,y,p,k,v,f,b,E,B=o();"CookieDisallowed"==a()&&(c(),i("cookiebar","CookieDisallowed"));var h=new XMLHttpRequest;h.open("GET","//freegeoip.net/json/",!0),h.onreadystatechange=function(){if(4===h.readyState&&200===h.status){clearTimeout(T);var e=JSON.parse(h.responseText).country_code;if(cookieLawStates.indexOf(e)>-1){if(m("always")){var o=a();void 0===o&&t()}else if(document.cookie.length>0||window.localStorage.length>0){var o=a();void 0===o&&t()}}else console.log("cookieBAR - Not an EU user, no cookieBAR.")}},h.send();var T=setTimeout(e,1500)}var CookieLanguages=["ca","de","en","es","fr","hu","it","nl","pt"],cookieLawStates=["BE","BG","CZ","DK","DE","EE","IE","EL","ES","FR","IT","CY","LV","LT","LU","HU","MT","NL","AT","PL","PT","RO","SI","SK","FI","SE","GB"];document.addEventListener("DOMContentLoaded",function(){setupCookieBar()});
