var MenuIO,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=a(e,"js-menu-item");return t}function u(e){var t=a(e,"js-menu");return t}function a(e,t,n){var i,u;return n||(n="data-name"),e&&(u=e.getAttribute(n),u===t&&(i=!0)),i}function r(t){var n,i,u="data-menu",r="js-submenu";return i=e(t),n=a(i,r,u)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=u,this.isSubMenu=r}MenuIO=function(n,i,u){function a(){var e,t=Util.type.object(u);t||(e=u,u={},u[e]=null),h=r(u),y.addEventListener("click",s),y.addEventListener("contextmenu",c)}function r(e){var t,n="",i=function(e,t){var n='data-menu="js-submenu"',u="";return t?t+=".":t="",Object.keys(e).forEach(function(a){var r,m="",s="",c="",l=t+a,o=e[a],d=Util.type.object(o);d?(m=Util.render(U.MAIN,{items:i(o,l)}),s=" menu-submenu",c=" "+n):M[l]=o,I.icon&&(r=Util.convertName(a),s+=" icon icon-"+r),u+=Util.render(U.ITEM,{name:a,subitems:m,className:s,attribute:c,path:l})}),u};return n=i(e),t=document.createElement("ul"),t.setAttribute("data-name","js-menu"),t.className="menu menu-hidden",t.innerHTML=n,v.appendChild(t),t}function m(e,t){var n,i=x.getItem(e),u=x.isName(i),a=x.isItem(i),r=x.isSubMenu(i);return u&&a||(i=document.elementFromPoint(t.x,t.y),r=x.isSubMenu(i),u=x.isName(i),a=x.isItem(i)),n={name:u,item:a,sub:r}}function s(e,t){var n,i,u=I.afterClick,a=I.beforeClick,r=I.name,s=e.target,c=t||m(s,{x:e.clientX,y:e.clientY});i=Util.exec(a,r),c.sub?e.preventDefault():(d(),i||!c.name&&!c.item||(n=f(s),Util.exec(n),Util.exec(u)))}function c(e){var t=e.target,n=e.clientX,i=e.clientY,u=m(t,{x:n,y:i});u.name||u.item||u.sub?s(e,u):(d(),o(n,i)),e.preventDefault()}function l(t,n){var i=Util.type.number(t),u=Util.type.number(n),a=b(),r=e.innerHeight;a+n>r&&(n-=a),i&&(h.style.left=t+"px"),u&&(h.style.top=n-15+"px")}function o(e,t){var n=I.beforeShow,i=I.name,u={x:e,y:t,name:i},a=Util.exec(n,u);a||(h.classList.remove("menu-hidden"),l(u.x,u.y))}function d(){var e=Util.exec(I.beforeClose);e||h.classList.add("menu-hidden")}function f(e){var t,n;return e=x.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=M[t]}function b(){var e,t;return p||(e=getComputedStyle(h),t=e.height,p=parseInt(t,10)),p}if(!(this instanceof MenuIO))return new MenuIO(n,i,u);var h,v,p,y,I={},x=new t,M={},U={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path="{{ path }}">{{ name }}</label>{{ subitems }}</li>'};u?(v=y=n,I=i):i?(v=y=n,u=i):(v=document.body,y=e,u=n),this.show=o,this.hide=d,a()}}(window);
!function(r){"use strict";function e(){function r(){function r(r){var e=new RegExp("\\s([a-zA-Z]+)"),n={}.toString.call(r),t=n.match(e)[1],i=t.toLowerCase();return i}return r.array=function(e){var n;return n=Array.isArray?Array.isArray(e):"array"===r(e)},r.arrayBuffer=function(e){return"arraybuffer"===r(e)},r.boolean=function(r){return"boolean"==typeof r},r.function=function(r){return"function"==typeof r},r.number=function(r){return"number"==typeof r},r.object=function(r){var n=e.type(r),t="object"===n;return t},r.string=function(r){return"string"==typeof r},r.undefined=function(r){return"undefined"==typeof r},r.file=function(r){var n,t,i="[object File]";return n=e.exec.ifExist(r,"toString"),t=n===i},r}var e=this;this.exec=function(r){var n,t=e.slice(arguments,1);return e.type.function(r)&&(n=r.apply(null,t)),n},this.type=new r,this.slice=function(r,e){var n;return r&&(n=[].slice.call(r,e)),n},this.render=function(r,n){var t,i=!0,o="\\s*",u=["{{"+o,o+"}}"];return t=e.ownRender(r,n,u,i)},this.ownRender=function(r,n,t,i){var o,u,a,c,f,s=r;c=t[0],f=t[1]||c;for(u in n)o=n[u],o=e.exec(o)||o,a=c+u+f,s=e.replaceStr(s,a,o,i);return a=c+".*"+f,s=e.replaceStr(s,a,"",i)},this.replaceStr=function(r,n,t,i){var o,u=e.type.string(r);return u&&n&&(i||(n=e.escapeRegExp(n)),o=new RegExp(n,"g"),r=r.replace(o,t)),r},this.rmStr=function(r,n,t){var i,o=[],u=e.type.string(r),a=e.type.array(n),c=function(r,e){var n=r.replace(e,"");return n};return i=t?c:e.replaceStr,u&&n&&(a?o=n:o.push(n),o.forEach(function(e){r=i(r,e,"")})),r},this.escapeRegExp=function(r){var n=r,t=e.type.string(r);return t&&(n=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),n},this.convertName=function(r){var n=r&&r.toLowerCase();return n=e.rmStr(n,["(",")"]),n=e.replaceStr(n," ","-")}}var n=r.window?window:global;"object"==typeof module&&module.exports?module.exports=new e:n.Util||(n.Util=new e)}(this);