/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 1.9.0
 * bootstrap-fileinput
 * For more JQuery Plugins visit http://plugins.krajee.com
 */!function(e){var i='{preview}\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {upload}\n       {browse}\n   </div>\n</div>',t="{preview}\n{remove}\n{upload}\n{browse}\n",n='<div class="file-preview {class}">\n   <div class="file-preview-status text-center text-success"></div>\n   <div class="close fileinput-remove text-right">&times;</div>\n   <div class="file-preview-thumbnails"></div>\n   <div class="clearfix"></div></div>',a='<div class="form-control file-caption {class}">\n   <span class="glyphicon glyphicon-file kv-caption-icon"></span><div class="file-caption-name"></div>\n</div>',l='<div id="{id}" class="modal fade">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h3 class="modal-title">Detailed Preview <small>{title}</small></h3>\n      </div>\n      <div class="modal-body">\n        <textarea class="form-control" style="font-family:Monaco,Consolas,monospace; height: {height}px;" readonly>{body}</textarea>\n      </div>\n    </div>\n  </div>\n</div>\n',r=function(i,t){return null===i||void 0===i||i==[]||""===i||t&&""===e.trim(i)},o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(i,t,n){return r(i)||r(i[t])?n:e(i[t])},p=function(e,i){return"undefined"!=typeof e?e.match("image.*"):i.match(/\.(gif|png|jpe?g)$/i)},c=function(e,i){return"undefined"!=typeof e?e.match("text.*"):i.match(/\.(txt|md|csv|htm|html|php|ini)$/i)},d=function(){return Math.round((new Date).getTime()+100*Math.random())},v=function(i,t){this.$element=e(i),this.init(t),this.listen()};v.prototype={constructor:v,init:function(e){var n=this;n.showCaption=e.showCaption,n.showPreview=e.showPreview,n.initialPreview=e.initialPreview,n.initialCaption=e.initialCaption,n.overwriteInitial=e.overwriteInitial,n.showRemove=e.showRemove,n.showUpload=e.showUpload,n.captionClass=e.captionClass,n.previewClass=e.previewClass,n.mainClass=e.mainClass,n.mainTemplate=r(e.mainTemplate)?n.showCaption?i:t:e.mainTemplate,n.previewTemplate=n.showPreview?e.previewTemplate:"",n.captionTemplate=e.captionTemplate,n.browseLabel=e.browseLabel,n.browseIcon=e.browseIcon,n.browseClass=e.browseClass,n.removeLabel=e.removeLabel,n.removeIcon=e.removeIcon,n.removeClass=e.removeClass,n.uploadLabel=e.uploadLabel,n.uploadIcon=e.uploadIcon,n.uploadClass=e.uploadClass,n.uploadUrl=e.uploadUrl,n.msgLoading=e.msgLoading,n.msgProgress=e.msgProgress,n.msgSelected=e.msgSelected,n.previewFileType=e.previewFileType,n.wrapTextLength=e.wrapTextLength,n.wrapIndicator=e.wrapIndicator,n.isDisabled=n.$element.attr("disabled")||n.$element.attr("readonly"),r(n.$element.attr("id"))&&n.$element.attr("id",d()),"undefined"==typeof n.$container?n.$container=n.createContainer():n.refreshContainer(),n.$captionContainer=s(e,"elCaptionContainer",n.$container.find(".file-caption")),n.$caption=s(e,"elCaptionText",n.$container.find(".file-caption-name")),n.$previewContainer=s(e,"elPreviewContainer",n.$container.find(".file-preview")),n.$preview=s(e,"elPreviewImage",n.$container.find(".file-preview-thumbnails")),n.$previewStatus=s(e,"elPreviewStatus",n.$container.find(".file-preview-status")),n.initPreview(),n.original={preview:n.$preview.html(),caption:n.$caption.html()},this.options=e,n.$element.removeClass("file-loading")},listen:function(){var i=this;i.$element.on("change",e.proxy(i.change,i)),e(i.$element[0].form).on("reset",e.proxy(i.reset,i)),i.$container.find(".fileinput-remove").on("click",e.proxy(i.clear,i))},refresh:function(i){var t=this,n=arguments.length?e.extend(t.options,i):t.options;t.init(n)},initPreview:function(){var e=this,i="",t=e.initialPreview,n=e.initialPreview.length,a=e.initialCaption.length,l=a>0?e.initialCaption:n+" file selected";if(o(t)&&n>0){for(var r=0;n>r;r++)i+='<div class="file-preview-frame">'+t[r]+"</div>\n";n>1&&0==a&&(l=n+" files selected")}else{if(!(n>0))return a>0?(e.$caption.html(l),e.$captionContainer.attr("title",l),void e.$captionContainer.find(".kv-caption-icon").show()):void 0;i='<div class="file-preview-frame">'+t+"</div>"}e.initialPreviewContent=i,e.$preview.html(i),e.$caption.html(l),e.$captionContainer.attr("title",l),e.$container.removeClass("file-input-new")},clear:function(e){var i=this;if(e&&e.preventDefault(),i.$element.val(""),e!==!1&&(i.$element.trigger("change"),i.$element.trigger("fileclear")),i.overwriteInitial||r(i.initialPreviewContent)){i.$preview.html("");var t=!i.overwriteInitial&&i.initialCaption.length>0?i.original.caption:"";i.$caption.html(t),i.$captionContainer.attr("title",""),i.$container.removeClass("file-input-new").addClass("file-input-new")}else i.$preview.html(i.original.preview),i.$caption.html(i.original.caption),i.$container.removeClass("file-input-new");i.overwriteInitial&&i.$captionContainer.find(".kv-caption-icon").hide()},reset:function(){var e=this;e.clear(!1),e.$preview.html(e.original.preview),e.$caption.html(e.original.caption),e.$container.find(".fileinput-filename").text(""),e.$element.trigger("filereset"),e.initialPreview.length>0&&e.$container.removeClass("file-input-new")},change:function(e){var i,t=this,n=t.$element,a=n.get(0).files,r=a?a.length:1,o=n.val().replace(/\\/g,"/").replace(/.*\//,""),s=t.$preview,v=t.$previewContainer,m=t.$previewStatus,f=t.msgLoading,u=t.msgProgress,w=t.msgSelected,h=t.previewFileType,g=parseInt(t.wrapTextLength),b=t.wrapIndicator;if(i=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files,0!==i.length){s.html(""),t.overwriteInitial||s.html(t.initialPreviewContent);for(var C=i.length,$=0;C>$;$++)!function(e){var i=e.name,t=p(e.type,e.name),n=c(e.type,e.name);if(s.length>0&&("any"==h?t||n:"text"==h?n:t)&&"undefined"!=typeof FileReader){var a=new FileReader;m.html(f),v.addClass("loading"),a.onload=function(e){var t="",a="";if(n){var r=e.target.result;if(r.length>g){var o=d(),p=.75*window.innerHeight,a=l.replace("{id}",o).replace("{title}",i).replace("{body}",r).replace("{height}",p);b=b.replace("{title}",i).replace("{dialog}","$('#"+o+"').modal('show')"),r=r.substring(0,g-1)+b}t='<div class="file-preview-frame"><div class="file-preview-text" title="'+i+'">'+r+"</div></div>"+a}else t='<div class="file-preview-frame"><img src="'+e.target.result+'" class="file-preview-image" title="'+i+'" alt="'+i+'"></div>';s.append("\n"+t),$>=C-1&&(v.removeClass("loading"),m.html(""))},a.onprogress=function(i){if(i.lengthComputable){var t=parseInt(i.loaded/i.total*100,10),n=u.replace("{percent}",t).replace("{file}",e.name);m.html(n)}},n?a.readAsText(e):a.readAsDataURL(e)}else s.append('\n<div class="file-preview-frame"><div class="file-preview-other"><h2><i class="glyphicon glyphicon-file"></i></h2>'+i+"</div></div>")}(i[$]);var y=r>1?w.replace("{n}",r):o;t.$caption.html(y),t.$captionContainer.attr("title",y),t.$container.removeClass("file-input-new"),n.trigger("fileselect",[r,o])}},createContainer:function(){var i=this,t=e(document.createElement("div")).attr({"class":"file-input file-input-new"}).html(i.renderMain());return i.$element.before(t),t.find(".btn-file").append(i.$element),t},refreshContainer:function(){var e=this;e.$container.before(e.$element),e.$container.html(e.renderMain()),e.$container.find(".btn-file").append(e.$element)},renderMain:function(){var e=this,i=e.previewTemplate.replace("{class}",e.previewClass),t=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,n=e.captionTemplate.replace("{class}",t);return e.mainTemplate.replace("{class}",e.mainClass).replace("{preview}",i).replace("{caption}",n).replace("{upload}",e.renderUpload()).replace("{remove}",e.renderRemove()).replace("{browse}",e.renderBrowse())},renderBrowse:function(){var e=this,i=e.browseClass+" btn-file",t="";return e.isDisabled&&(t=" disabled "),'<div class="'+i+'"'+t+"> "+e.browseIcon+e.browseLabel+" </div>"},renderRemove:function(){var e=this,i=e.removeClass+" fileinput-remove fileinput-remove-button",t="";return e.showRemove?(e.isDisabled&&(t=" disabled "),'<button type="button" class="'+i+'"'+t+">"+e.removeIcon+e.removeLabel+"</button>"):""},renderUpload:function(){var e=this,i="",t="";return e.showUpload?(e.isDisabled&&(t=" disabled "),i=r(e.uploadUrl)?'<button type="submit" class="'+e.uploadClass+'"'+t+">"+e.uploadIcon+e.uploadLabel+"</button>":'<a href="'+e.uploadUrl+'" class="'+e.uploadClass+'"'+t+">"+e.uploadIcon+e.uploadLabel+"</a>"):""}},e.fn.fileinput=function(i){return this.each(function(){var t=e(this),n=t.data("fileinput");n||t.data("fileinput",n=new v(this,i)),"string"==typeof i&&n[i]()})},e.fn.fileinput=function(i){var t=Array.apply(null,arguments);return t.shift(),this.each(function(){var n=e(this),a=n.data("fileinput"),l="object"==typeof i&&i;a||n.data("fileinput",a=new v(this,e.extend({},e.fn.fileinput.defaults,l,e(this).data()))),"string"==typeof i&&a[i].apply(a,t)})},e.fn.fileinput.defaults={showCaption:!0,showPreview:!0,showRemove:!0,showUpload:!0,captionClass:"",previewClass:"",mainClass:"",mainTemplate:null,initialPreview:"",initialCaption:"",initialPreviewContent:"",overwriteInitial:!0,previewTemplate:n,captionTemplate:a,browseLabel:"Browse &hellip;",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> &nbsp;',browseClass:"btn btn-primary",removeLabel:"Remove",removeIcon:'<i class="glyphicon glyphicon-ban-circle"></i> ',removeClass:"btn btn-default",uploadLabel:"Upload",uploadIcon:'<i class="glyphicon glyphicon-upload"></i> ',uploadClass:"btn btn-default",uploadUrl:null,msgLoading:"Loading &hellip;",msgProgress:"Loaded {percent}% of {file}",msgSelected:"{n} files selected",previewFileType:"image",wrapTextLength:250,wrapIndicator:' <span class="wrap-indicator" title="{title}" onclick="{dialog}">[&hellip;]</span>',elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null},e(document).ready(function(){var i=e("input.file[type=file]"),t=Object.keys(i).length;t>0&&i.fileinput()})}(window.jQuery);