{"version":3,"sources":["handler/html.js"],"names":["definition","abstractHandler","parseHtml","source","node","fragment","document","createDocumentFragment","container","innerHTML","firstElementChild","appendChild","HandlerHtml","suffix","regexMatchType","createElement","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","provide","extends"],"mappings":";CAAC,WACA,YAEA,SAASA,GAAWC,GAKnB,QAASC,GAAUC,GAClB,GACCC,GADGC,EAAWC,SAASC,wBAKxB,KAFAC,EAAUC,UAAYN,EAEhBC,EAAOI,EAAUE,mBACtBL,EAASM,YAAYP,EAGtB,OAAOC,GAGR,QAASO,MAjBT,GAAIC,GAAiB,QACpBC,EAAiB,cACjBN,EAAiBF,SAASS,cAAc,OA+BzC,OAdAH,GAAYI,WACXC,SAAU,SAASC,GAClB,MAAOJ,GAAeK,KAAKD,IAE5BE,aAAc,SAASC,GACtB,GAAIC,GAAWD,EAAWE,IAAID,QAE9BD,GAAWE,IAAID,SAAWA,EAASE,OAAOX,EAAOY,UAAYZ,EAASS,EAAWT,EAASS,GAE3FI,QAAS,SAASL,GACjBM,QAAQ,WAAa,MAAOzB,GAAUmB,EAAWlB,YAI5C,IAAKS,EAAYgB,QAAQ3B,IAGjC0B,SAAU,4BAA8B3B","file":"html.js","sourcesContent":["(function() {\n\t'use strict';\n\n\tfunction definition(abstractHandler) {\n\t\tvar suffix         = '.html',\n\t\t\tregexMatchType = /^text\\/html/,\n\t\t\tcontainer      = document.createElement('body');\n\n\t\tfunction parseHtml(source) {\n\t\t\tvar fragment = document.createDocumentFragment(),\n\t\t\t\tnode;\n\n\t\t\tcontainer.innerHTML = source;\n\n\t\t\twhile(node = container.firstElementChild) {\n\t\t\t\tfragment.appendChild(node);\n\t\t\t}\n\n\t\t\treturn fragment;\n\t\t}\n\n\t\tfunction HandlerHtml() {}\n\n\t\tHandlerHtml.prototype = {\n\t\t\tvalidate: function(type) {\n\t\t\t\treturn regexMatchType.test(type);\n\t\t\t},\n\t\t\tonPreRequest: function(dependency) {\n\t\t\t\tvar pathname = dependency.url.pathname;\n\t\t\t\t\n\t\t\t\tdependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n\t\t\t},\n\t\t\tprocess: function(dependency) {\n\t\t\t\tprovide(function() { return parseHtml(dependency.source); });\n\t\t\t}\n\t\t};\n\n\t\treturn new (HandlerHtml.extends(abstractHandler));\n\t}\n\n\tprovide([ '/demand/abstract/handler' ], definition);\n}());"]}