/*! jCarousel - v0.3.0beta1 - 2012-08-21
* http://sorgalla.com/jcarousel/
* Copyright (c) 2012 Jan Sorgalla; Licensed MIT, GPL */
(function(a,b){"use strict";var c=function(a){return parseFloat(a)||0},d=Array.prototype.slice,e=a.jcarousel={};e.version="@VERSION";var f=/^([+\-]=)?(.+)$/;e.parseTarget=function(a){var b=!1,c=typeof a!="object"?f.exec(a):null;return c?(a=parseInt(c[2],10)||0,c[1]&&(b=!0,c[1]==="-="&&(a*=-1))):typeof a!="object"&&(a=parseInt(a,10)||0),{target:a,relative:b}},e.detectCarousel=function(a){var b;while(a.size()>0){b=a.filter("[data-jcarousel]");if(b.size()>0)return b;b=a.find("[data-jcarousel]");if(b.size()>0)return b;a=a.parent()}return null},e.basePrototype=function(b){return{version:e.version,_options:{},_element:null,_init:a.noop,_create:a.noop,_destroy:a.noop,_reload:a.noop,create:function(){return this._element.attr("data-"+b.toLowerCase(),!0).data(b,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(b).removeAttr("data-"+b.toLowerCase()),this)},reload:function(a){return!1===this._trigger("reload")?this:(a&&this.options(a),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(b,c){if(arguments.length===0)return a.extend({},this._options);if(typeof b=="string"){if(typeof c=="undefined")return typeof this._options[b]=="undefined"?null:this._options[b];this._options[b]=c}else this._options=a.extend({},this._options,b);return this},_trigger:function(c,d,e){var f=a.Event((c+"."+b).toLowerCase());return(d||this._element).trigger(f,[this].concat(e||[])),!f.isDefaultPrevented()}}},e.plugin=function(b,c){return e.create(b,a.extend({},{_carousel:null,carousel:function(){return this._carousel||(this._carousel=e.detectCarousel(this.options("carousel")||this._element),this._carousel||a.error('Could not detect carousel for plugin "'+b+'"')),this._carousel}},c))},e.create=function(b,c){var f=function(b,c){this._element=a(b),this.options(c),this._init(),this.create()};return f.prototype=a.extend({},e.basePrototype(b),c),a.fn[b]=function(c){var e=d.call(arguments,1),g=this;return typeof c=="string"?this.each(function(){var d=a(this).data(b);if(!d)return a.error("Cannot call methods on "+b+" prior to initialization; "+'attempted to call method "'+c+'"');if(!a.isFunction(d[c])||c.charAt(0)==="_")return a.error('No such method "'+c+'" for '+b+" instance");var f=d[c].apply(d,e);if(f!==d&&typeof f!="undefined")return g=f,!1}):this.each(function(){var d=a(this).data(b);d?d.reload(c):new f(this,c)}),g},f},e.create("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:null,_first:null,_last:null,_visible:null,_fullyvisible:null,_init:function(){var b=this;return this.onWindowResize=function(){b.resizeTimer&&clearTimeout(b.resizeTimer),b.resizeTimer=setTimeout(function(){b.reload()},100)},this.onAnimationComplete=function(c){b.animating=!1;var d=b.list().find("[data-jcarousel-clone]");d.size()>0&&(d.remove(),b._reload()),b._trigger("animateend"),a.isFunction(c)&&c.call(b,!0)},this},_create:function(){this._reload(),a(b).bind("resize.jcarousel",this.onWindowResize)},_destroy:function(){a(b).unbind("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),this.vertical==null&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),this.rtl==null&&(this.rtl=function(b){if((""+b.attr("dir")).toLowerCase()==="rtl")return!0;var c=!1;return b.parents("[dir]").each(function(){if(/rtl/i.test(a(this).attr("dir")))return c=!0,!1}),c}(this._element)),this.lt=this.vertical?"top":"left",this._items=null;var b=this._target||this.closest();return this.circular=this.options("wrap")==="circular",this.list().css({left:0,top:0}),b.size()>0&&(this._prepare(b),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.circular=this.options("wrap")==="circular"&&this._fullyvisible.size()<this.items().size(),this.list().css(this.lt,this._position(b)+"px")),this},list:function(){if(this._list===null){var b=this.options("list");this._list=a.isFunction(b)?b.call(this):this._element.find(b)}return this._list},items:function(){if(this._items===null){var b=this.options("items");this._items=(a.isFunction(b)?b.call(this):this.list().find(b)).not("[data-jcarousel-clone]")}return this._items},closest:function(){var b=this,d=this.list().position()[this.lt],e=a(),f=!1,g=this.vertical?"bottom":this.rtl?"left":"right",h;return this.rtl&&!this.vertical&&(d=(d+this.list().width()-this.clipping())*-1),this.items().each(function(){e=a(this);if(f)return!1;var i=b.dimension(e);d+=i;if(d>=0){h=i-c(e.css("margin-"+g));if(Math.abs(d)-i+h/2<=0)f=!0;else return!1}}),e},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var a=this.options("wrap"),b=this.items().size()-1;return b>=0&&(a&&a!=="first"||this._last.index()<b||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var a=this.options("wrap");return this.items().size()>0&&(a&&a!=="last"||this._first.index()>0||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(a){return a["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(b,d,f){if(this.animating)return this;if(!1===this._trigger("scroll",null,[b,d]))return this;a.isFunction(d)&&(f=d,d=!0);var g=e.parseTarget(b);if(g.relative){var h=this.items().size()-1,i=Math.abs(g.target),j,k,l,m,n=this.options("wrap");if(g.target>0){var o=this._last.index();if(o>=h&&this.tail)this.inTail?n==="both"||n==="last"?this._scroll(0,d,f):this._scroll(Math.min(this._target.index()+i,h),d,f):this._scrollTail(d,f);else if(o!==h||n!=="both"&&n!=="last"){j=this._target.index(),k=j+i;if(this.circular&&k>h){m=h,l=this.items().get(-1);while(m++<k)l=this.items().eq(0),l.after(l.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(l),this._items=null;this._scroll(l,d,f)}else this._scroll(Math.min(k,h),d,f)}else this._scroll(0,d,f)}else if(this.inTail)this._scroll(Math.max(this._first.index()-i+1,0),d,f);else{j=this._first.index(),k=j-i;if(j!==0||n!=="both"&&n!=="first")if(this.circular&&k<0){m=k,l=this.items().get(0);while(m++<0){l=this.items().eq(-1),l.after(l.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(l),this._items=null;var p=c(this.list().css(this.lt)),q=this.dimension(l);this.rtl&&!this.vertical?p+=q:p-=q,this.list().css(this.lt,p+"px")}this._scroll(l,d,f)}else this._scroll(Math.max(j-i,0),d,f);else this._scroll(h,d,f)}}else this._scroll(g.target,d,f);return this._trigger("scrollend"),this},_scroll:function(b,d,e){if(this.animating)return a.isFunction(e)&&e.call(this,!1),this;typeof b!="object"?b=this.items().eq(b):typeof b.jquery=="undefined"&&(b=a(b));if(b.size()===0)return a.isFunction(e)&&e.call(this,!1),this;this.inTail=!1,this._prepare(b);var f=this._position(b),g=c(this.list().css(this.lt));if(f===g)return a.isFunction(e)&&e.call(this,!1),this;var h={};return h[this.lt]=f+"px",this._animate(h,d,e),this},_scrollTail:function(b,c){if(this.animating||!this.tail)return a.isFunction(c)&&c.call(this,!1),this;var d=this.list().position()[this.lt];this.rtl?d+=this.tail:d-=this.tail,this.inTail=!0;var e={};return e[this.lt]=d+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(e,b,c),this},_animate:function(b,c,d){if(!1===this._trigger("animate"))return a.isFunction(d)&&d.call(this,!1),this;this.animating=!0;var e=this.options("animation");if(!e||c===!1)this.list().css(b),this.onAnimationComplete(d);else{var f=this;if(a.isFunction(e))e.call(this,b,function(){f.onAnimationComplete(d)});else{var g=typeof e=="object"?e:{duration:e},h=g.complete;g.complete=function(){f.onAnimationComplete(d),a.isFunction(h)&&h.call(this)},this.list().animate(b,g)}}return this},_prepare:function(b){var d=b.index(),e=d,f=this.dimension(b),g=this.clipping(),h={target:b,first:b,last:b,visible:b,fullyvisible:f<=g?b:a()},i=this.vertical?"bottom":this.rtl?"left":"right",j,k;this.options("center")&&(f/=2,g/=2);if(f<g)for(;;){j=this.items().eq(++e);if(j.size()===0){if(!this.circular)break;j=this.items().eq(0);if(b.get(0)===j.get(0))break;j.after(j.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(j),this._items=null}f+=this.dimension(j),h.last=j,h.visible=h.visible.add(j),k=c(j.css("margin-"+i)),f-k<=g&&(h.fullyvisible=h.fullyvisible.add(j));if(f>=g)break}if(!this.circular&&f<g){e=d;for(;;){if(--e<0)break;j=this.items().eq(e);if(j.size()===0)break;f+=this.dimension(j),h.first=j,h.visible=h.visible.add(j),k=c(j.css("margin-"+i)),f-k<=g&&(h.fullyvisible=h.fullyvisible.add(j));if(f>=g)break}}return this._update(h),this.tail=0,this.options("wrap")!=="circular"&&this.options("wrap")!=="custom"&&h.last.index()===this.items().size()-1&&(f-=c(h.last.css("margin-"+i)),f>g&&(this.tail=f-g)),this},_position:function(a){var b=this._first,c=b.position()[this.lt];return this.rtl&&!this.vertical&&(c-=this.clipping()-this.dimension(b)),this.options("center")&&(c-=this.clipping()/2-this.dimension(b)/2),(a.index()>b.index()||this.inTail)&&this.tail?(c=this.rtl?c-this.tail:c+this.tail,this.inTail=!0):this.inTail=!1,-c},_update:function(b){var c=this,d={target:this._target||a(),first:this._first||a(),last:this._last||a(),visible:this._visible||a(),fullyvisible:this._fullyvisible||a()},e=(b.first||d.first).index()<d.first.index(),f,g=function(f){var g=[],h=[];b[f].each(function(){d[f].index(this)<0&&g.push(this)}),d[f].each(function(){b[f].index(this)<0&&h.push(this)}),e?g=g.reverse():h=h.reverse(),c._trigger("item"+f+"in",a(g)),c._trigger("item"+f+"out",a(h)),c["_"+f]=b[f]};for(f in b)g(f);return this}})})(jQuery,window),function(a){"use strict",a.jcarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click"},_active:null,_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("createend.jcarousel",a.proxy(this._create,this))},this),this.onReload=a.proxy(this._reload,this),this.onEvent=a.proxy(function(a){a.preventDefault(),this.carousel().jcarousel("scroll",this.options("target"))},this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy).bind("reloadend.jcarousel scrollend.jcarousel",this.onReload),this._element.bind(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.unbind(".jcarouselcontrol",this.onEvent),this.carousel().unbind("destroy.jcarousel",this.onDestroy).unbind("reloadend.jcarousel scrollend.jcarousel",this.onReload)},_reload:function(){var b=a.jcarousel.parseTarget(this.options("target")),c=this.carousel(),d;if(b.relative)d=c.jcarousel(b.target>0?"hasNext":"hasPrev");else{var e=typeof b.target!="object"?c.jcarousel("items").eq(b.target):b.target;d=c.jcarousel("target").index(e)>=0}return this._active!==d&&(this._trigger(d?"active":"inactive"),this._active=d),this}})}(jQuery),function(a){"use strict",a.jcarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(a){return'<a href="#'+a+'">'+a+"</a>"}},_pages:{},_items:{},_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("createend.jcarousel",a.proxy(this._create,this))},this),this.onReload=a.proxy(this._reload,this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy).bind("reloadend.jcarousel",this.onReload),this._reload()},_destroy:function(){a.fn.jcarouselControl&&a.each(this._items,function(a,b){b.jcarouselControl("destroy")}),this._element.empty(),this.carousel().unbind("destroy.jcarousel",this.onDestroy).unbind("reloadend.jcarousel",this.onReload)},_reload:function(){var b=this.options("perPage");this._pages={},this._items={},a.isFunction(b)&&(b=b.call(this));if(b==null)this._pages=this._calculatePages();else{var c=parseInt(b,10)||0,d=this.carousel().jcarousel("items"),e=1,f=0,g;for(;;){g=d.eq(f++);if(g.size()===0)break;this._pages[e]?this._pages[e]=this._pages[e].add(g):this._pages[e]=g,f%c===0&&e++}}var h=this,i=this._element.empty(),j=this.options("item");a.each(this._pages,function(b,c){var d=h._items[b]=a(j.call(h,b,c));i.append(d),a.fn.jcarouselControl&&d.jcarouselControl({carousel:h.carousel(),target:c.eq(0)})})},items:function(){return this._items},_calculatePages:function(){var a=this.carousel().data("jcarousel"),b=a.items(),c=a.clipping(),d=0,e=0,f=1,g={},h;for(;;){h=b.eq(e++);if(h.size()===0)break;g[f]?g[f]=g[f].add(h):g[f]=h,d+=a.dimension(h),d>=c&&(f++,d=0)}return g}})}(jQuery),function(a){"use strict",a.jcarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("createend.jcarousel",a.proxy(this._create,this))},this),this.onAnimateEnd=a.proxy(this.start,this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy),this.options("autostart")&&this.start()},_destroy:function(){this.stop(),this.carousel().unbind("destroy.jcarousel",this.onDestroy)},start:function(){return this.stop(),this.carousel().one("animateend.jcarousel",this.onAnimateEnd),this._timer=setTimeout(a.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this},stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().unbind("animateend.jcarousel",this.onAnimateEnd),this}})}(jQuery);