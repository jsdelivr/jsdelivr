/*! jCarousel - v0.3.0beta1 - 2012-08-21
* http://sorgalla.com/jcarousel/
* Copyright (c) 2012 Jan Sorgalla; Licensed MIT, GPL */
(function(a){"use strict",a.jcarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(a){return'<a href="#'+a+'">'+a+"</a>"}},_pages:{},_items:{},_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("createend.jcarousel",a.proxy(this._create,this))},this),this.onReload=a.proxy(this._reload,this)},_create:function(){this.carousel().one("destroy.jcarousel",this.onDestroy).bind("reloadend.jcarousel",this.onReload),this._reload()},_destroy:function(){a.fn.jcarouselControl&&a.each(this._items,function(a,b){b.jcarouselControl("destroy")}),this._element.empty(),this.carousel().unbind("destroy.jcarousel",this.onDestroy).unbind("reloadend.jcarousel",this.onReload)},_reload:function(){var b=this.options("perPage");this._pages={},this._items={},a.isFunction(b)&&(b=b.call(this));if(b==null)this._pages=this._calculatePages();else{var c=parseInt(b,10)||0,d=this.carousel().jcarousel("items"),e=1,f=0,g;for(;;){g=d.eq(f++);if(g.size()===0)break;this._pages[e]?this._pages[e]=this._pages[e].add(g):this._pages[e]=g,f%c===0&&e++}}var h=this,i=this._element.empty(),j=this.options("item");a.each(this._pages,function(b,c){var d=h._items[b]=a(j.call(h,b,c));i.append(d),a.fn.jcarouselControl&&d.jcarouselControl({carousel:h.carousel(),target:c.eq(0)})})},items:function(){return this._items},_calculatePages:function(){var a=this.carousel().data("jcarousel"),b=a.items(),c=a.clipping(),d=0,e=0,f=1,g={},h;for(;;){h=b.eq(e++);if(h.size()===0)break;g[f]?g[f]=g[f].add(h):g[f]=h,d+=a.dimension(h),d>=c&&(f++,d=0)}return g}})})(jQuery);