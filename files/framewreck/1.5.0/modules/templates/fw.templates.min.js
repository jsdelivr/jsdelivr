!function(a){window.define&&define.amd?define(["F"],a):a(F)}(function(F){return F.tH={},F.ext({template:function(ctx,r){var S=String.prototype,M=[],i=0,t=this[0],s=("SCRIPT"==t.tagName?t[F.H]:t.outerHTML)[r="replace"](/(?:{{#if(?: *))(.*)(?: *)}}/g,function(a,b){return M[i]=b,"{##"+i++ +"##}"});for(i=M[F.L];i--;)s=s[r](RegExp("{##"+i+"##}([\\s\\S]*?){{\\/if}}","g"),"{##"+i+"##}$1{##/"+i+"##}");return S.FObj=function(a,b,c){return this[r](c=/{{(?: *)(\w+)(?: *)}}([\s\S]*?){{\/(?: *)\1(?: *)}}/g,function(d,e,f){if(b="",a[e])for(i in a[e])b+=f.FTag("ctx['"+e+"']["+i+"]",a),b=b.FIf("ctx."+e+"["+i+"].",a),b.match(c)&&(b=b.FObj(a[e][i]));return b})},S.FIf=function(V,ctx,m,v,e){return this[r](/{##(\d)##}([\s\S]*){##\/\1##}/g,function(p,a,b,f){a=M[+a],m=a.match(/(^!|^not) */),v=V,m&&(a=a.replace(m[0],""),v="!"+v);try{f=eval(v+a)}catch(e){f=0}return b.match(e=/{{(#+)else}}[\s\S]*/)?b[r](f?e:/[\s\S]*\{{(#+)else}}/,""):f?b:""})},S.FTag=function(V,ctx,t){return this[r](/{+\{ *([A-Za-z0-9_.]+) *["']*(.*?)["']*}}+/g,function(p,$1,$2,f){if($2)return F.tH[$1]?F.tH[$1].apply(0,$2[r](/["'] *["']*/g,"{|}").split("{|}")):(console.warn("F: Helper",$1,"not found!"),"");try{f=eval(!V.big||$1.match(t=/\./g)?V+"['"+$1.replace(t,"']['")+"']":V)}catch(e){}return f=f?f.big?f:"string"!=typeof f[$1]?p:f[$1]:"","{"==p[2]?new Option(f)[F.H]:f})},F(s.FObj(ctx,1).FTag("ctx",ctx).FIf("ctx.",ctx)[r](/{%(.*)%}/g,function(p,$1){return eval($1)}).trim())},loadTemplate:function(a,b,c,d){d=this.x,F().ajax("GET",a,function(a,e){e=F(a.responseText).template(c),d&&e.appendTo(d[0]),b&&b.call(e)})},registerHelper:function(a,b){return F.tH[a]=b,this}})});