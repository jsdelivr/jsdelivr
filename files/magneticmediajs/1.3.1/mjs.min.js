/* 
 * Magneticmediajs 1.3.1 | https://www.magneticmediajs.com
 * Copyright (c) 2014-2015 Arnaud Leyder | Leyder Consulting | https://www.leyder-consulting.com
 * Released under MIT license https://www.magneticmediajs.com/mit-license.html
 * For contact information please visit https://www.magneticmediajs.com/about.html
 */
var mjsGlobal={itemOnStage:!1,itemType:"",itemName:"",mapCallback:function(){},mapInstance:{},borderWidth:{},borderRadius:{},videoWidth:{},videoHeight:{},loadError:0,locationProtocol:"",hasTouchMove:!1,hasSwipe:!1,hasSwipeLeft:!1,hasSwipeRight:!1,startX:0,startY:0,timeSpacer:!1,isResizeReady:!1,inResizing:!1},Magneticmediajs=function(){function C(a,c,d){this.elements=this.getElements(a);this._defaults={color1:"080808",color2:"fdfdfd",borderWidth:8,borderRadius:8,background:"000000",backgroundOpacity:.7, displayTitle:!1,videoWidth:640,videoHeight:360,autoPlayVideo:!1,zoomOn:!1,zoomLevel:2,zoomType:"default",zoomSize:200,sharing:!1,facebookID:0xedf5063be3ee,gallery:!1,ecommerce:!1,showIcons:!0,galleryMaxThumbnailHeight:150,thumbnailPadding:0,thumbnailBorderWidth:0,thumbnailBorderRadius:0,thumbnailBorderColor:"BBB",filter:"none",onMjsMediaOnStage:function(){},onMjsMediaOffStage:function(){}};this.settings=c;this.data=d}var ga=function(){var a=window.location.protocol;mjsGlobal.locationProtocol="undefined"=== typeof a?"https:":"http:"===a?a:"https:"},V=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,d,g){return a+a+d+d+g+g});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},H=function(a,c,d,g,b,h,k){var l=a/c;768>d?(b/=2.5,h/=2.5,d=Math.floor(75*d/100),g=Math.floor(75*g/100)):768<=d&&1024>d?(b/=1.5,h/=1.5,d=Math.floor(80*d/100),g=Math.floor(80*g/100)):(d=Math.floor(82*d/100),g=Math.floor(82*g/100));a> d&&c>g?(a=d,c=Math.floor(a/l),c>g&&(c=g,a=Math.floor(c*l))):a>d?(a=d,c=Math.floor(a/l),"maps"===k&&c<g&&(c=g)):c>g?(c=g,a=Math.floor(c*l),"maps"===k&&a<d&&(a=d)):(a=d,c=Math.floor(a/l),c>g&&(c=g,a=Math.floor(c*l)));k=[];k[0]=a;k[1]=c;k[2]=b;k[3]=h;return k},W=function(a){mjsGlobal.itemOnStage=!0;mjsGlobal.itemName=a;"image"===a||"flickr"===a||"instagram"===a?mjsGlobal.itemType="image":"video"===a||"youtube"===a||"vimeo"===a||"dailymotion"===a?mjsGlobal.itemType="video":"maps"===a&&(mjsGlobal.itemType= "maps")},da=function(){mjsGlobal.itemOnStage=!1;mjsGlobal.itemName="";mjsGlobal.itemType="";mjsGlobal.mapInstance=null},L=function(){var a=0;return a=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/g)?window.innerHeight:$(window).height()},N=function(a,c){$(".mjs-fs-wrapper").length&&0===a&&0<c&&($(".mjs-fs-wrapper > img").css("border-radius",c+"px"),$(".mjs-fs-wrapper > video").css("border-radius",c+"px"))},I=function(a,c,d,g,b,h,k,l,m,q,r,t){var v=$(window).width(),w=L(),x=new Image; x.id="mjs-img-full";$(x).appendTo(".mjs-fs-wrapper");var n=$(".mjs-fs-wrapper");$(x).on("load",function(){var a=X(x),y=a[0],a=a[1],u=H(y,a,v,w,q,r,"picture"),y=u[0],a=u[1],E=u[2],u=u[3];n.css({width:y+"px",height:a+"px","max-width":"","max-height":""}).fadeIn(300);c&&Y(x.src,d,g,b);h&&""!==k&&(n.append('<div class="mjs-title-area">'+k+"</div>"),n.css({"margin-top":"-15px"}));J(l,m,E,u);"none"!==t&&n.find("img").addClass("mjs-"+t);$(".mjs-parent-spin").removeClass("mjs-do-spin").hide();N(E,u);$(document).trigger("mjsMediaOnStage")}); $(x).on("error",function(){$(".mjs-fullscreen").remove();$(".mjs-parent-spin").removeClass("mjs-do-spin").hide();alert("An error occurred while loading this content. Please try again later.")});x.src=a},Z=function(a,c,d,g,b){a=new google.maps.LatLng(a,c);d={zoom:d,center:a};mjsGlobal.mapInstance=new google.maps.Map(document.getElementById("map-canvas"),d);var h=new google.maps.InfoWindow({content:b,maxWidth:300}),k=new google.maps.Marker({position:a,map:mjsGlobal.mapInstance,animation:google.maps.Animation.DROP, title:g});google.maps.event.addListener(k,"click",function(){h.open(mjsGlobal.mapInstance,k)})},aa=function(a){var c=$("#mjsMaps");c.next().remove();c.remove();c=document.createElement("script");c.type="text/javascript";c.id="mjsMaps";window.mapCallback=mjsGlobal.mapCallback;c.src=""!==a?mjsGlobal.locationProtocol+"//maps.googleapis.com/maps/api/js?key="+a+"&v=3.exp&callback=window.mapCallback":mjsGlobal.locationProtocol+"//maps.googleapis.com/maps/api/js?v=3.exp&callback=window.mapCallback";document.body.appendChild(c)}, O=function(a,c,d,g,b,h,k,l,m,q){var r=$(window).width(),t=L();$(".mjs-fullscreen").css({width:r+"px",height:t+"px"});$('<div id="map-canvas" class="map-area"></div>').appendTo(".mjs-fs-wrapper");mjsGlobal.mapCallback=function(){Z(h,k,l,m,q)};aa(b);r=H(r,t,r,t,d,g,"maps");d=r[0];g=r[1];b=r[2];r=r[3];$(".mjs-fs-wrapper").css({width:d+"px",height:g+"px","max-width":"","max-height":"",background:"#FFFFFF",color:"#000000"}).fadeIn(300);J(a,c,b,r);$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(); $(document).trigger("mjsMediaOnStage")},P=function(a,c,d,g,b,h,k,l,m,q,r,t){var v=$(window).width(),w=L();"mjsSingleItem"===c&&(c=t,t="");var x=0;b&&(x=1);var n="";-1<a.indexOf("youtube")?n='<div class="mjs-video-player"><iframe src="'+mjsGlobal.locationProtocol+"//www.youtube.com/embed/"+c+"?autoplay="+x+'" frameborder="0" allowfullscreen></iframe></div>':-1<a.indexOf("vimeo")?n='<div class="mjs-video-player"><iframe src="'+mjsGlobal.locationProtocol+"//player.vimeo.com/video/"+c+"?autoplay="+x+ '" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>':-1<a.indexOf("dailymotion")?n='<div class="mjs-video-player"><iframe src="'+mjsGlobal.locationProtocol+"//www.dailymotion.com/embed/video/"+c+"?autoplay="+x+'" frameborder="0"></iframe></div>':(a=c,c=t,""===t&&(c=a,a=""),t=!1,document.createElement("video").canPlayType&&""!==document.createElement("video").canPlayType("video/mp4")&&(t=!0),t?n='<video controls poster="'+a+'" src="'+c+'" class="mjs-video-player" '+ (b?"autoplay":"")+' preload="auto"></video>':(t=c,"http:"!==t.substring(0,5)&&"https:"!==t.substring(0,5)&&(t="../"+t),"undefined"!==typeof swfobject&&swfobject.hasFlashPlayerVersion("10")&&(a=encodeURIComponent(a),t=encodeURIComponent(t),n='<div class="mjs-video-player"><object width="100%" height="100%"><param name="movie" value="flash/StrobeMediaPlayback.swf"></param><param name="flashvars" value="src='+t+"&poster="+a+"&controlBarAutoHide=true&autoPlay="+b+'"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param><embed width="100%" height="100%" src="flash/StrobeMediaPlayback.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="transparent" flashvars="src='+ t+"&poster="+a+"&controlBarAutoHide=true&autoPlay="+b+'"></embed></object>')));v=H(d,g,v,w,q,r,"video");b=v[0];q=v[1];r=v[2];v=v[3];$(".mjs-fs-wrapper").append(n);$(".mjs-fs-wrapper, .mjs-video-player").css({width:b+"px",height:q+"px","max-width":d+"px","max-height":g+"px"}).fadeIn(300);w=n=0;n=b>d?d:b;w=q>g?g:q;$(".mjs-video-player").find("iframe").css({width:n+"px",height:w+"px"});h&&""!==k&&$(".mjs-fs-wrapper").append('<div class="mjs-title-area">'+k+"</div>").css({"margin-top":"-15px"});J(l,m, r,v);$(".mjs-parent-spin").removeClass("mjs-do-spin").hide();N(r,v);$(document).trigger("mjsMediaOnStage")},ha=function(a,c,d){var g="mqdefault";"small"===c?g="default":"medium"===c?g="mqdefault":"large"===c&&(g="hqdefault");a=mjsGlobal.locationProtocol+"//img.youtube.com/vi/"+a+"/"+g+".jpg";$("#mjsThumb"+d).prop("src",a)},ia=function(a,c,d){$.ajax({url:"https://www.vimeo.com/api/v2/video/"+a+".json?callback=?",dataType:"jsonp",timeout:5E3}).done(function(a){var b="",b="small"===c?a[0].thumbnail_small: "medium"===c?a[0].thumbnail_medium:a[0].thumbnail_large;-1<b.indexOf("http:")&&"https:"===mjsGlobal.locationProtocol&&(b=b.replace("http:",mjsGlobal.locationProtocol));$("#mjsThumb"+d).prop("src",b)}).fail(function(){$("#mjsThumb"+d).parent().remove();mjsGlobal.loadError+=1})},ja=function(a,c,d){var g="360";"small"===c?g="180":"medium"===c?g="360":"large"===c&&(g="720");$.getJSON("https://api.dailymotion.com/video/"+a+"?fields=thumbnail_"+g+"_url",function(b){b=b["thumbnail_"+g+"_url"];$("#mjsThumb"+ d).prop("src",b)}).fail(function(){$("#mjsThumb"+d).parent().remove();mjsGlobal.loadError+=1})},X=function(a){var c=[];if(a.naturalWidth)c[0]=a.naturalWidth,c[1]=a.naturalHeight;else{var d=new Image;d.src=a.src;$(d).on("load",function(){c[0]=this.width;c[1]=this.height})}return c},Q=function(a,c,d,g,b,h,k,l,m,q,r,t,v,w,x){var n,B;$.ajax({url:"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=3b109ff5810e4d81b73292507ca19928&text="+c+"&safe_search=1&per_page=10&user_id="+a+ "&format=json&jsoncallback=?",dataType:"jsonp",timeout:5E3}).done(function(a){"undefined"!==typeof a.photos&&0<a.photos.total?$.each(a.photos.photo,function(a,c){"thumbnail"===g?(B=mjsGlobal.locationProtocol+"//farm"+c.farm+".static.flickr.com/"+c.server+"/"+c.id+"_"+c.secret+"_n.jpg",$("#mjsThumb"+d).prop("src",B)):(n=mjsGlobal.locationProtocol+"//farm"+c.farm+".static.flickr.com/"+c.server+"/"+c.id+"_"+c.secret+"_b.jpg",I(n,b,h,k,l,m,q,r,t,v,w,x))}):"thumbnail"===g?($("#mjsThumb"+d).parent().remove(), mjsGlobal.loadError+=1):($(".mjs-fullscreen").remove(),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),alert("An error occurred while loading this content. Please try again later."))}).fail(function(){"thumbnail"===g?($("#mjsThumb"+d).parent().remove(),mjsGlobal.loadError+=1):($(".mjs-fullscreen").remove(),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),alert("An error occurred while loading this content. Please try again later."))})},R=function(a,c,d,g,b,h,k,l){var m;m=a;if(c)q=m.originalEvent.touches[0].pageX; else{var q=0;m||(m=window.event);m.pageX?q=m.pageX:m.clientX&&(q=m.clientX)}m=q;c?c=a.originalEvent.touches[0].pageY:(c=0,a||(a=window.event),a.pageY?c=a.pageY:a.clientX&&(c=a.clientY));q=c;a=c=0;c=m<b+l/4?-(l/4):m>=d+b-l/4?d-3*l/4:m-l/2-b;a=q<h+l/4?-(l/4):q>=g+h-l/4?g-3*l/4:q-l/2-h;b=c*k+l/2;l=a*k+l/2;0>l&&(l=0);0>b&&(b=0);$("#mjs-zoom-box").css({"background-position":"-"+b+"px -"+l+"px",left:c+"px",top:a+"px","background-size":d*k+"px "+g*k+"px"})},ea=function(a){a.stopPropagation();a.preventDefault(); "mjs-fs-wrapper"!==a.target.id&&$(".mjs-fs-wrapper").trigger("mouseleave")},Y=function(a,c,d,g){var b=!1,h=$(".mjs-fs-wrapper"),k=h.width(),l=h.height(),m=h.offset().left,q=h.offset().top,r=!1;$(document).on("touchstart",ea);$(".mjs-fs-wrapper").on("mouseleave",function(){$("#mjs-zoom-box").fadeOut("fast",function(){$(this).remove();b=!1})});h.on("touchstart",function(a){a.stopPropagation();a.preventDefault();r=!0;$(this).trigger("mouseenter",[a])});h.on("mouseenter",function(t,v){if(b)r||(v=t),"mjs-zoom-box"!== v.target.id&&h.trigger("mouseleave");else{$('<div id="mjs-zoom-box"></div>').hide().appendTo($(this));var w=$("#mjs-zoom-box");w.css({"background-image":'url("'+a+'")'}).fadeIn("fast");b=!0;var x=$(window).width(),n=g;480>x?n=100:768>x&&(n/=1.4);100>n?n=100:300<n&&(n=300);w.width(n).height(n);"lens"===d?w.css({"border-radius":"50%","-webkit-box-shadow":"inset 0px 0px 2px 2px #000,0 0 0 8px #0a0a0a, 0 0 0 9px #EEE, 0px 0px 2px 10px #000","box-shadow":"inset 0px 0px 2px 2px #000, 0 0 0 8px #0a0a0a,0 0 0 9px #EEE, 0px 0px 2px 10px #000"}): w.css({"border-radius":"1px",border:"none","-webkit-box-shadow":"0px 0px 3px 1px #000","box-shadow":"0px 0px 3px 1px #000"});r||(v=t);R(v,r,k,l,m,q,c,n)}h.on("mousemove touchmove",function(a){R(a,r,k,l,m,q,c,n)})})},J=function(a,c,d,g){var b="",h="";a===c?(b=a,h="000"):(b=a,h=c);var k=$(".mjs-fs-wrapper");k.css({"border-radius":g+"px"});k.find("#mjs-img-full").length?k.find("#mjs-img-full").css({border:d+"px solid #"+a,"border-radius":g+"px"}):k.find(".map-area").length?k.find(".map-area").css({border:d+ "px solid #"+a,"border-radius":g+"px"}):k.find("video.mjs-video-player").length?k.find("video.mjs-video-player").css({border:d+"px solid #"+a,"border-radius":g+"px"}):k.find("iframe").length&&k.find("iframe").css({border:d+"px solid #"+a,"border-radius":g+"px"});$(".mjs-title-area").css({color:"#"+h,background:"#"+b,"border-radius":Math.round(g/2)+"px"});$(".mjs-close, .mjs-facebook, .mjs-twitter").css({color:"#"+c})},fa=function(a,c){$(".mjs-parent-spin").css({background:"#"+a,color:"#"+c})},S=function(a){a.stopPropagation(); var c=e.data.param1.find("img");switch(a.which){case 32:a.preventDefault();$(document).find(".mjs-fullscreen").length||(a.data.param1.hasClass("mjs-generic")?c.trigger("click"):a.data.param1.trigger("click"));break;case 27:a.preventDefault();$(".mjs-fullscreen").fadeOut(300,function(){$(this).remove();da();$(document).trigger("mjsMediaOffStage")});break;case 37:a.preventDefault();$(".mjs-previous").trigger("click");break;case 39:a.preventDefault(),$(".mjs-next").trigger("click")}},ka=function(a,c){for(var d= $(window.location).attr("search"),d=d.substr(1).split("&"),g=0,b=d.length;g<b;g++){var h=d[g].split("=");"magnetid"===h[0]&&(c&&h[1]===a?$("img#mjsThumb"+h[1].substr(h[1].length-1)).trigger("click"):!c&&(1<a.indexOf(h[1])||a===h[1])&&$("#"+h[1].replace("mjs","")).trigger("click"))}},M=function(a){if(10<Math.abs(a.originalEvent.touches[0].clientX-mjsGlobal.startX)||10<Math.abs(a.originalEvent.touches[0].clientY-mjsGlobal.startY))mjsGlobal.hasTouchMove=!0,$(document).off("touchmove",M)},T=function(a){50< a.originalEvent.touches[0].clientX-mjsGlobal.startX?(mjsGlobal.hasSwipe=!0,mjsGlobal.hasSwipeLeft=!0,$(document).off("touchmove",T)):50<mjsGlobal.startX-a.originalEvent.touches[0].clientX&&(mjsGlobal.hasSwipe=!0,mjsGlobal.hasSwipeRight=!0,$(document).off("touchmove",T))};C.prototype.init=function(){if(null===this.elements)return null;var a=$.trim(this.elements).split(","),c=this.settings,d=this._defaults,g;for(g in d)if("undefined"!==typeof c[g]){if(typeof c[g]!==typeof d[g])return console.log("Invalid input settings (typeof) for Magneticmedisjs"), null;d[g]=c[g]}this.settings=d;var b=this.data;if(b.constructor!==Array)return console.log("Invalid data array - not an Array"),null;c=b.length;if(1>c)return null;for(g=0;g<c;g++){var h=b[g];if(h.constructor!==Array)return console.log("Invalid data array - not an Array of Array"),null;var k=h.length;if(2>k)return null;for(var l=0;l<k;l++)if("string"!==typeof h[l]&&"maps"===h[0]&&"number"!==typeof h[l])return console.log("Invalid data array - only strings are valid for data arraycontent"+typeof h[l]), null}var m=d.gallery,c=d.galleryMaxThumbnailHeight;g=d.thumbnailPadding;var h=d.thumbnailBorderWidth,k=d.thumbnailBorderRadius,l=d.thumbnailBorderColor,q=d.videoWidth,r=d.videoHeight,t=d.autoPlayVideo,v=d.zoomOn,w=d.zoomLevel;1>w?w=1:4<w&&(w=4);var x=d.zoomType,n=d.zoomSize,B=d.displayTitle,y=d.color1,u=d.color2,E=d.filter,z=d.borderWidth;20<z?z=20:0>z&&(z=0);var A=d.borderRadius;20<A?A=20:0>A&&(A=0);var C=d.background,H=d.backgroundOpacity,J=d.sharing,N=d.facebookID,U=d.ecommerce;U&&(m=!0);var R= d.showIcons,X=d.onMjsMediaOnStage,Y=d.onMjsMediaOffStage,K=b.length;ga();for(var d=0,Z=a.length;d<Z;d++){var D=$($.trim(a[d]));m||D.attr("tabindex","0");var f=0,ba=0;$(document).on("mjsMediaOnStage",function(){X()});$(document).on("mjsMediaOffStage",function(){Y()});$("body").has(".mjs-parent-spin").length||($("body").append('<div class="mjs-parent-spin"><span class="mjs-s-spin animate-spin"></span></div>'),fa(y,u));m&&D.addClass("mjs-row-gallery").hide();for(var p=0;p<K;p++){if(m){var F="mjs"+p; U?0===p?(D.addClass("mjs-ecommerce-gallery"),D.append('<div class="mjs-generic mjs-ecommerce-main" tabindex="0"><img id="mjsThumb'+p+'" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" /></div>')):(1===p&&D.append('<div id="mjs-ecommerce-col"></div>'),$("#mjs-ecommerce-col").append('<div class="mjs-generic mjs-ecommerce-col-img" tabindex="0"><img id="mjsThumb'+p+'" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" /></div>')):D.append('<div class="mjs-generic" tabindex="0"><img id="mjsThumb'+ p+'" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" /></div>');var G=$("#mjsThumb"+p);G.on("error",{param:p},function(a){$("#mjsThumb"+a.data.param).parent().remove();mjsGlobal.loadError+=1});G.on("load",function(){"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"!==$(this).attr("src")&&(ba+=1)});"youtube"===b[p][0]?ha(b[p][1],b[p][2],p):"vimeo"===b[p][0]?ia(b[p][1],b[p][2],p):"dailymotion"===b[p][0]?ja(b[p][1],b[p][2],p):"flickr"===b[p][0]?Q(b[p][1],b[p][2],p,"thumbnail", "","","","","","","","","","",E):"instagram"===b[p][0]?G.prop("src",mjsGlobal.locationProtocol+"//instagram.com/p/"+b[p][1]+"/media/?size=m"):G.prop("src",b[p][1]);R&&("video"===b[p][0]||"youtube"===b[p][0]||"vimeo"===b[p][0]||"dailymotion"===b[p][0]?G.parent().append('<div class="mjs-video-play-gallery mjs-i-play-circled"></div>'):"maps"===b[p][0]&&G.parent().append('<div class="mjs-video-play-gallery mjs-i-location"></div>'));$(".mjs-video-play-gallery").css({color:"#"+u});var G=G.parent().children(), ca=1}else F="undefined"!==typeof D.attr("id")?"mjs"+D.attr("id"):D.offset().left+D.offset().top,G=D,ca=0;mjsGlobal.borderWidth[F]=z;mjsGlobal.borderRadius[F]=A;mjsGlobal.videoWidth[F]=q;mjsGlobal.videoHeight[F]=r;G.on("touchstart",function(a){$("body").has(".mjs-fullscreen").length||($(document).off("touchmove",M),mjsGlobal.hasTouchMove=!1,mjsGlobal.startX=a.originalEvent.touches[0].clientX,mjsGlobal.startY=a.originalEvent.touches[0].clientY,$(document).on("touchmove",M),$(this).on("touchend",function la(a){$(document).off("touchmove", M);mjsGlobal.hasTouchMove||(a.stopPropagation(),a.preventDefault(),a.target.click());$(this).off("touchend",la)}))});G.on("click",{param:p},function(a){a.stopPropagation();if(!$("body").has(".mjs-fullscreen").length){mjsGlobal.timeSpacer=!0;setTimeout(function(){mjsGlobal.timeSpacer=!1},500);$("#mjs-zoom-box").remove();f=a.data.param;var d="";$("body").append('<div class="mjs-fullscreen"></div>');a=$(".mjs-fullscreen");$(".mjs-parent-spin").show().addClass("mjs-do-spin");fa(y,u);var c=V("#"+C).r, g=V("#"+C).g,h=V("#"+C).b,k=$(window).width(),l=L();a.css({width:k+"px",height:l+"px",background:"rgba("+c+", "+g+", "+h+", "+H+")"});c="";c=1<K&&m?"mjs"+f:F;a.append('<div class="mjs-fs-wrapper" id="'+c+'"><div class="mjs-close mjs-icons mjs-i-cancel"></div></div>');c=$(".mjs-fs-wrapper");c.off("mouseleave mouseenter");J&&c.append('<div class="mjs-facebook mjs-icons mjs-i-facebook-squared"></div><div class="mjs-twitter mjs-icons mjs-i-twitter-squared"></div>');B&&("image"!==b[f][0]&&"instagram"!== b[f][0]||m||"undefined"===typeof b[f][2]?"undefined"!==typeof b[f][3]&&(d=b[f][3]):d=b[f][2]);W(b[f][0]);"image"===b[f][0]?I(b[f][ca+1],v,w,x,n,B,d,y,u,z,A,E):"flickr"===b[f][0]?Q(b[f][1],b[f][2],f,"big",v,w,x,n,B,d,y,u,z,A,E):"instagram"===b[f][0]?I(mjsGlobal.locationProtocol+"//instagram.com/p/"+b[f][ca+1]+"/media/?size=l",v,w,x,n,B,d,y,u,z,A,E):"video"===b[f][0]||"youtube"===b[f][0]||"vimeo"===b[f][0]||"dailymotion"===b[f][0]?m?P(b[f][0],b[f][1],q,r,t,B,d,y,u,z,A,b[f][2]):P(b[f][0],"mjsSingleItem", q,r,t,B,d,y,u,z,A,b[f][1]):"maps"===b[f][0]&&(m?O(y,u,z,A,b[f][2],b[f][3],b[f][4],b[f][5],b[f][6],b[f][7]):O(y,u,z,A,b[f][1],b[f][2],b[f][3],b[f][4],b[f][5],b[f][6]));1<K&&m&&(c.append('<div class="mjs-previous mjs-i-left-open"></div><div class="mjs-next mjs-i-right-open"></div>'),c=$(".mjs-previous"),g=$(".mjs-next"),c.css({color:"#"+u}),g.css({color:"#"+u}),c.on("touchstart",function(a){a.stopPropagation();a.preventDefault();a.target.click()}),c.on("click",function(){$("#mjs-zoom-box").remove(); var a=$(".mjs-fs-wrapper");a.off("mouseleave mouseenter");f--; -1===f&&(f=K-1);$(".mjs-title-area").remove();B&&(d="undefined"!==typeof b[f][3]?b[f][3]:"");var c;mjsGlobal.itemOnStage&&"image"===mjsGlobal.itemType?c=$(".mjs-fs-wrapper").find("img"):mjsGlobal.itemOnStage&&"video"===mjsGlobal.itemType?c=$(".mjs-video-player"):mjsGlobal.itemOnStage&&"maps"===mjsGlobal.itemType&&(c=$(".map-area"));W(b[f][0]);"instagram"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage"); I(mjsGlobal.locationProtocol+"//instagram.com/p/"+b[f][2]+"/media/?size=l",v,w,x,n,B,d,y,u,z,A,E)}):"flickr"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");Q(b[f][1],b[f][2],f,"big",v,w,x,n,B,d,y,u,z,A,E)}):"image"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");I(b[f][2],v,w,x,n,B,d,y,u,z,A,E)}):"video"===b[f][0]||"youtube"===b[f][0]||"vimeo"===b[f][0]||"dailymotion"===b[f][0]?c.fadeOut(200,function(){$(this).remove(); $(document).trigger("mjsMediaOffStage");P(b[f][0],b[f][1],q,r,t,B,d,y,u,z,A,b[f][1])}):"maps"===b[f][0]&&c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");O(y,u,z,A,b[f][2],b[f][3],b[f][4],b[f][5],b[f][6],b[f][7])});a.attr("id","mjs"+f)}),g.on("touchstart",function(a){a.stopPropagation();a.preventDefault();a.target.click()}),g.on("click",function(){$("#mjs-zoom-box").remove();var a=$(".mjs-fs-wrapper");a.off("mouseleave mouseenter");f++;f===K&&(f=0);$(".mjs-title-area").remove(); B&&(d="undefined"!==typeof b[f][3]?b[f][3]:"");var c;mjsGlobal.itemOnStage&&"image"===mjsGlobal.itemType?c=$(".mjs-fs-wrapper").find("img"):mjsGlobal.itemOnStage&&"video"===mjsGlobal.itemType?c=$(".mjs-video-player"):mjsGlobal.itemOnStage&&"maps"===mjsGlobal.itemType&&(c=$(".map-area"));W(b[f][0]);"instagram"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");I(mjsGlobal.locationProtocol+"//instagram.com/p/"+b[f][2]+"/media/?size=l",v,w,x,n,B,d,y,u,z,A,E)}): "flickr"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");Q(b[f][1],b[f][2],f,"big",v,w,x,n,B,d,y,u,z,A,E)}):"image"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");I(b[f][2],v,w,x,n,B,d,y,u,z,A,E)}):"video"===b[f][0]||"youtube"===b[f][0]||"vimeo"===b[f][0]||"dailymotion"===b[f][0]?c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");P(b[f][0],b[f][1],q,r,t,B,d,y,u,z,A,b[f][1])}):"maps"=== b[f][0]&&c.fadeOut(200,function(){$(this).remove();$(document).trigger("mjsMediaOffStage");O(y,u,z,A,b[f][2],b[f][3],b[f][4],b[f][5],b[f][6],b[f][7])});a.attr("id","mjs"+f)}));a.on("touchstart",function(a){if(mjsGlobal.timeSpacer)a.stopPropagation(),a.preventDefault();else{a.stopPropagation();a.preventDefault();var b=$(a.target);"undefined"!==typeof b[0].src&&-1<b[0].src.indexOf("maps.gstatic.com")||($(document).off("touchmove",M),mjsGlobal.hasSwipe=!1,mjsGlobal.hasSwipeLeft=!1,mjsGlobal.hasSwipeRight= !1,mjsGlobal.startX=a.originalEvent.touches[0].clientX,mjsGlobal.startY=a.originalEvent.touches[0].clientY,$(document).on("touchmove",T),$(this).on("touchend",function ma(a){$(document).off("touchmove",T);mjsGlobal.hasSwipe?mjsGlobal.hasSwipeLeft?$(".mjs-next").trigger("click"):mjsGlobal.hasSwipeRight&&$(".mjs-previous").trigger("click"):a.target.click();$(this).off("touchend",ma)}))}});a.on("click",function(a){mjsGlobal.timeSpacer?(a.stopPropagation(),a.preventDefault()):(a=$(a.target),"undefined"!== typeof a[0].src&&-1<a[0].src.indexOf("maps.gstatic.com")||a.parents(".mjs-fs-wrapper").length&&!a.hasClass("mjs-close")||$(this).fadeOut(300,function(){$(this).remove();$(".mjs-parent-spin").removeClass("mjs-do-spin").hide();da(mjsGlobal);$(document).trigger("mjsMediaOffStage")}),$(document).off("touchstart",ea))})}});ka(F,m);J&&($(document).on("touchstart","#"+F+" > .mjs-facebook",function(a){a.stopPropagation();a.preventDefault();a.target.click()}),$(document).on("click","#"+F+" > .mjs-facebook", function(){var a=window.location.origin+window.location.pathname,a=a+"?magnetid="+$(".mjs-fs-wrapper").attr("id"),a=mjsGlobal.locationProtocol+"//www.facebook.com/dialog/share?app_id="+N+"&display=popup&href="+encodeURIComponent(a)+"&redirect_uri="+a;window.open(a,"_blank")}),$(document).on("touchstart","#"+F+" > .mjs-twitter",function(a){a.stopPropagation();a.preventDefault();a.target.click()}),$(document).on("click","#"+F+" .mjs-twitter",function(){var a=window.location.origin+window.location.pathname, a=a+"?magnetid="+$(".mjs-fs-wrapper").attr("id"),a=mjsGlobal.locationProtocol+"//twitter.com/share?url="+encodeURIComponent(a);window.open(a,"_blank")}))}if(m){var aa=setInterval(function(){ba>=K-mjsGlobal.loadError&&(D.show(0,function(){if(U){var a=$("#mjs-ecommerce-col").height();a>$(".mjs-ecommerce-main").height()&&($(".mjs-ecommerce-gallery").height(a),$(".mjs-ecommerce-main").addClass("mjs-ecommerce-main-adjust"))}}),clearInterval(aa))},100);$(".mjs-generic").css({border:h+"px solid #"+l,"-webkit-border-radius":k+ "px","-moz-border-radius":k+"px","border-radius":k+"px",padding:g+"px"});$(".mjs-generic").find("img").css({"max-height":c+"px",background:"#"+y,border:"none"})}m?($(".mjs-generic").on("focusout",function(){$(document).off("keydown",S)}),$(".mjs-generic").on("focusin",function(){var a=$(this);$(document).on("keydown",{param1:a},S)})):(D.on("focusout",function(){$(document).off("keydown",S)}),D.on("focusin",function(){var a=$(this);$(document).on("keydown",{param1:a},S)}))}if(U)$(window).on("resize", function(){var a=$("#mjs-ecommerce-col").height();a>$(".mjs-ecommerce-main").height()?($(".mjs-ecommerce-gallery").height(a),$(".mjs-ecommerce-main").addClass("mjs-ecommerce-main-adjust")):$(".mjs-ecommerce-main").removeClass("mjs-ecommerce-main-adjust")});if(!mjsGlobal.isResizeReady){var na=this;$(window).on("resize",function(){na.doResize()});mjsGlobal.isResizeReady=!0}};C.prototype.openMedia=function(a){a=$("#"+a);a.hasClass("mjs-generic")?a.find("img").trigger("click"):a.trigger("click");return this}; C.prototype.closeMedia=function(){$(".mjs-close").trigger("click");return this};C.prototype.previousMedia=function(){mjsGlobal.itemOnStage&&$(".mjs-previous").trigger("click");return this};C.prototype.nextMedia=function(){mjsGlobal.itemOnStage&&$(".mjs-next").trigger("click");return this};C.prototype.getOpenedMediaInfo=function(){return mjsGlobal.itemOnStage?mjsGlobal.itemName:null};C.prototype.getElements=function(a){return"string"===typeof a?a:null};C.prototype.setDefaults=function(a){var c=this._setDefaults, d;for(d in c)"undefined"!==typeof a[d]&&typeof c[d]===typeof a[d]&&(this._setDefaults[d]=a[d]);return this};C.prototype.doResize=function(){mjsGlobal.inResizing||(mjsGlobal.inResizing=!0,setTimeout(function(){console.log("setTimeout");var a=$(".mjs-fs-wrapper"),c=$(".mjs-fullscreen"),d=a.width(),g=a.height(),b=$(window).width(),h=L(),k="",l=[],m=a.attr("id"),q=mjsGlobal.borderWidth[m],m=mjsGlobal.borderRadius[m];mjsGlobal.itemOnStage&&"image"===mjsGlobal.itemType?(k="picture",l=H(d,g,b,h,q,m,k)): mjsGlobal.itemOnStage&&"video"===mjsGlobal.itemType?(k="video",l=H(d,g,b,h,q,m,k)):mjsGlobal.itemOnStage&&"maps"===mjsGlobal.itemType&&(k="maps",l=H(d,g,b,h,q,m,k));d=l[0];g=l[1];c.css({width:b+"px",height:h+"px"});"maps"===k?(a.css({width:d+"px",height:g+"px"}),google.maps.event.trigger(mjsGlobal.mapInstance,"resize")):(a.css({width:d+"px",height:g+"px"}),"video"===k&&($(".mjs-video-player").css({width:d+"px",height:g+"px"}),h=b=0,h=a.prop("id"),b=d>mjsGlobal.videoWidth[h]?mjsGlobal.videoWidth[h]: d,h=g>mjsGlobal.videoHeight[h]?mjsGlobal.videoHeight[h]:g,$(".mjs-video-player").find("iframe").css({width:b+"px",height:h+"px"})));if(c.find("#mjs-zoom-box").length){c.trigger("click");var r=a.prop("id").replace("mjs","");setTimeout(function(){$("#"+r).trigger("click")},1E3)}mjsGlobal.inResizing=!1},100));return this};return C}();