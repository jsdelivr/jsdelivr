YUI.add("gallery-base-componentmgr",function(b){
/*!
	 * Base Component Manager
	 * 
	 * Oddnut Software
	 * Copyright (c) 2010-2011 Eric Ferraiuolo - http://eric.ferraiuolo.name
	 * YUI BSD License - http://developer.yahoo.com/yui/license.html
	 */
var e,g="requires",f="initializer",l="destructor",o="instance",i="initComponent",k="initComponents",d="destroyComponent",j=b.Lang,h=j.isArray,a=j.isString,n=j.isObject,c=j.isFunction,m=function(){};e=function(){this._initComponentMgr.apply(this,arguments);};e._COMPONENT_CFG=[g,f,l,o];e.prototype={_components:null,_initComponentMgr:function(){this._components=new b.State();this._initComponentHierarchy();this.publish(k,{defaultFn:this._defInitComponentsFn,fireOnce:true});this.publish(i,{defaultFn:this._defInitComponentFn});this.publish(d,{defaultFn:this._defDestoryComponentFn});if(this.get("initialized")){this.fire(k,{componentsToInit:[]});}else{this.after("initializedChange",function(p){this.fire(k,{componentsToInit:[]});});}b.before(this._destroyComponents,this,"_destroyHierarchy",this);},addComponent:function(s,r){if(!a(s)){return;}if(!n(r)){return;}var v=this._components,t=r.requires,u=r.initializer,q=r.destructor,p=r.instance;u=c(u)?u:a(u)&&c(this[u])?this[u]:null;q=c(q)?q:a(q)&&c(this[q])?this[q]:null;v.add(s,g,t);v.add(s,f,u);v.add(s,l,q);v.add(s,o,p);},getComponent:function(p){return this._components.get(p,o);},destroyComponent:function(){var p=b.Array(arguments,0,true),q=h(p[0])?p[0]:p;b.Array.each(q,function(r){if(this._components.get(r,o)){this._destroyComponent(r);}},this);},useComponent:function(){var p=b.Array(arguments,0,true),t=c(p[p.length-1])?p[p.length-1]:m,q=t===m?p:p.slice(0,-1),r=[],s;if(q.length<1){t.call(this);return;}s=b.Array.partition(q,function(v){var u=this.getComponent(v);r.push(u);return u;},this);if(s.rejects.length>0){b.use.apply(b,this._getRequires(s.rejects).concat(b.bind(function(v){var u=[];v.Array.each(s.rejects,this._initComponent,this);v.Array.each(q,function(w){u.push(this.getComponent(w));},this);t.apply(this,u);},this)));}else{t.apply(this,r);}},_initComponentHierarchy:function(){var r=this._getClasses(),s={},p=e._COMPONENT_CFG,q,t;t=function(v,u){if(!s[u]){s[u]=b.mix({},v,true,p);}else{b.mix(s[u],v,true,p);}};for(q=r.length-1;q>=0;q--){b.Object.each(r[q].COMPONENTS,t);}b.Object.each(s,function(v,u){this.addComponent(u,v);},this);},_getRequires:function(q){q=h(q)?q:[q];var p=[];b.Array.each(q,function(r){p=p.concat(this._components.get(r,g)||[]);},this);return b.Array.unique(p);},_initComponent:function(p){this.fire(i,{componentToInit:p});},_destroyComponent:function(p){this.fire(d,{component:p});},_destroyComponents:function(){var p=this._components.data[o];b.each(p,function(q,r){if(q){this._destroyComponent(r);}},this);},_defInitComponentsFn:function(r){var q=r.componentsToInit,p=this._getRequires(q);b.use.apply(b,p.concat(b.bind(function(s){s.Array.each(q,this._initComponent,this);},this)));},_defInitComponentFn:function(t){var s=this._components,q=t.componentToInit,r=s.get(q,f),p=s.get(q,o);if(!p&&c(r)){p=r.call(this);if(p._yuievt&&c(p.addTarget)){p.addTarget(this);}s.add(q,o,p);}t.component=p;},_defDestoryComponentFn:function(t){var s=this._components,r=t.component,q=s.get(r,l),p=s.get(r,o);if(!p){return;}if(p._yuievt&&c(p.removeTarget)){p.removeTarget(this);}if(c(q)){q.call(this,p);}else{if(c(p.destroy)){p.destroy();}}s.remove(r,o);}};e.prototype.use=e.prototype.useComponent;b.BaseComponentMgr=e;},"gallery-2011.05.04-20-03",{requires:["base-base","collection"]});