/* esri-leaflet-related - v2.0.0 - Mon Sep 14 2015 12:26:56 GMT-0700 (PDT)
 * Copyright (c) 2015 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports,require("esri-leaflet")):typeof define==="function"&&define.amd?define(["exports","esri-leaflet"],factory):factory(global.L.esri.Related={},L.esri)})(this,function(exports,esri_leaflet){"use strict";exports.VERSION="2.0.0";exports.Query=esri_leaflet.Task.extend({setters:{offset:"offset",limit:"limit",outFields:"fields",objectIds:"objectIds",relationshipId:"relationshipId",definitionExpression:"definitionExpression",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnZ:"returnZ",returnM:"returnM",token:"token"},path:"queryRelatedRecords",params:{returnGeometry:true,outSr:4326,outFields:"*",returnZ:true,returnM:false},initialize:function(endpoint){if(endpoint.service){esri_leaflet.Task.prototype.initialize.call(this,endpoint.service)}else{esri_leaflet.Task.prototype.initialize.call(this,endpoint)}},simplify:function(map,factor){var mapWidth=Math.abs(map.getBounds().getWest()-map.getBounds().getEast());this.params.maxAllowableOffset=mapWidth/map.getSize().y*factor;return this},run:function(callback,context){return this.request(function(error,response){var result={features:[]};for(var i=0;i<response.relatedRecordGroups.length;i++){for(var k=0;k<response.relatedRecordGroups[i].relatedRecords.length;k++){result.features.push(response.relatedRecordGroups[i].relatedRecords[k])}}callback.call(context,error,response&&esri_leaflet.Util.responseToFeatureCollection(result),response)},context)}});function query(options){return new exports.Query(options)}var EsriLeafletRelated=query;exports.query=query;exports.default=EsriLeafletRelated});
//# sourceMappingURL=./esri-leaflet-related.js.map