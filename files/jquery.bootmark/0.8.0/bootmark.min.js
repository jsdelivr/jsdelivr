/**!
* @file bootmark: markdown + bootstrap as a jQuery plugin
* @author [obedm503](https://github.com/obedm503/)
* @git [git repo](https://github.com/obedm503/bootmark.git)
* @examples [examples/starters/templates](https://obedm503.github.io/bootmark/docs/examples.html)
* @version 0.8.0
* @license MIT
*/
(function($,document){"use scrict";function defineBootmark(){var version="0.8.0";var defaults={markdown:false,fetch:false,src:"",join:"----",promise:false,template:{text:false,fetch:false,id:"bootmark-template"},html:{favicon:"https://obedm503.github.io/bootmark/bootmark-favicon.png",indent:false,toc:true,tocTitle:$(document).attr("title"),tocId:"nav",tocLimit:6,theme:"readable",prettifyTheme:"atelier-forest-light",prettify:true,credit:true},showdown:{parseImgDimensions:true,simplifiedAutoLink:true,literalMidWordUnderscores:true,strikethrough:true,tables:true,tablesHeaderId:true,tasklists:true,extensions:[]}};$.fn.bootmark=function(t){var e=this;e.hide();t=_private.parseObject(t,["fetch","html","showdown","template"]);var o=$.extend(true,{},defaults,$.fn.bootmark.options||{},t);if(o.html.prettify&&o.showdown.extensions.indexOf("prettify")<0&&typeof prettyPrint!=="undefined"){o.showdown.extensions.push("prettify")}_private.insertMeta("viewport","width=device-width, initial-scale=1");_private.insertLink("https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/"+o.html.theme.toLowerCase().trim()+"/bootstrap.min.css");if(o.html.favicon){_private.insertLink(o.html.favicon,"image/x-icon","shortcut icon")}_private.insertLink("https://unpkg.com/bootmark@"+version+"/dist/bootmark.min.css");if(o.showdown.extensions.indexOf("prettify")>=0){_private.insertLink("https://jmblog.github.io/color-themes-for-google-code-prettify/themes/"+o.html.prettifyTheme.toLowerCase().trim().replace(/ /g,"-")+".min.css")}var n=[_private.getTemplate(o),_private.getMarkdown(e,o)];var a=Promise.all(n).then(function(t){var n=new showdown.Converter(o.showdown).makeHtml(t[1]);e.html(_private.replaceHtml(t[0],n));_private.doDom(e,o);return n}).catch(console.error);if(o.promise){console.warn('Bootmark: as of v0.8.0 "promise" has been depracated and will be removed. Use "$(\'#id\').bootmark({...}).promise().then(...)"  instead.');return a.then(function(t){e.show();return t})}a.then(function(){e.show()});return e};$.fn.bootmark.version=version;$.fn.bootmark.options={template:{},html:{},showdown:{extensions:[]}};var _private={unescape:function unescape(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot/g,'"').replace(/&#39/g,"'").replace(/&amp;/g,"&")},insertLink:function insertLink(t,e,o){if(!$('link[href="'+t+'"], link[type="'+e+'"], link[rel="'+o+'"]').length){var n=$("<link />");n.attr({href:t,type:e||"text/css",rel:o||"stylesheet"});$("head").append(n)}},insertMeta:function insertMeta(t,e){if(!$('meta[content="'+e+'"]').length){var o=$("<meta />");o.attr({name:t,content:e});$("head").append(o)}},parseObject:function parseObject(obj,props){for(var i in obj){if(i&&typeof obj[i]==="string"&&obj.hasOwnProperty(i)&&props.indexOf(i)>=0){if(i==="fetch"){if(obj[i].trim()[0]==="["){obj[i]=eval("("+obj[i]+")")}}else{obj[i]=eval("("+obj[i]+")")}}}return obj},replaceHtml:function replaceHtml(t,e){return t.replace(/\$\{bootmark\}/gi,e)},getMarkdown:function getMarkdown(t,e){return new Promise(function getMarkdownPromise(o,n){if(e.markdown){o(e.markdown)}else if(e.src){var a=e.src.split(" ").filter(function(t){return t.length});var r=a.map(function(t){return fetch(t).then(function(t){return t.text()})});Promise.all(r).then(function(t){return t.join("\n\n"+e.join+"\n\n\n")}).then(o).catch(n)}else if(e.fetch){console.warn('Bootmark: as of v0.8.0 "fetch" was depracated and will be removed. Use "src" instead.');if(typeof e.fetch==="string"){fetch(e.fetch).then(function(t){return t.text()}).then(o).catch(n)}else{var i=e.fetch.map(function(t){return fetch(t).then(function(t){return t.text()})});Promise.all(i).then(function(t){return t.join("\n\n"+e.join+"\n\n\n")}).then(o).catch(n)}}else{o(_private.unescape(t.html()))}})},getTemplate:function getTemplate(t){return new Promise(function(e,o){if(t.template.text){e(t.template.text)}else if(t.template.fetch){fetch(t.template.fetch).then(function(t){return t.text()}).then(function(t){var e=$("<div></div>").html(t);return $("template",e).html()}).then(e).catch(o)}else if($("#"+t.template.id).length){e($("#"+t.template.id).html())}else if(t.html.toc){var n=t.html.tocTitle.replace(/ /gi,"-");e('<div class="container-fluid" id="'+n+'">'+'<div class="row">'+'<div class="col-sm-3 col-md-3 col-lg-2">'+'<nav class="navbar navbar-default navbar-fixed-side">'+'<div class="container-fluid">'+'<div class="navbar-header">'+'<button class="navbar-toggle" data-target="#'+t.html.tocId+'" data-toggle="collapse">'+'<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span>'+'<span class="icon-bar"></span><span class="icon-bar"></span>'+"</button>"+'<a class="navbar-brand active page-scroll" href="#'+n+'">'+t.html.tocTitle+"</a>"+"</div>"+'<div class="collapse navbar-collapse" id="'+t.html.tocId+'">'+'<ul class="bootmark-toc nav navbar-nav"></ul>'+"</div>"+"</div>"+"</nav>"+"</div>"+'<div class="bootmark-main has-toc col-sm-9 col-md-9 col-lg-10">'+"${bootmark}"+"</div>"+"</div>"+"</div>")}else{e('<div class="container">'+'<div class="row">'+'<div class="bootmark-main">'+"${bootmark}"+"</div>"+"</div>"+"</div>")}})},doDom:function(t,e){if($('a[href^="#"]',t).length){var o=$('a[href^="#"]',t);o.each(function(){$(this).addClass("page-scroll")})}if($("#"+e.html.tocId,t).length){var n=$("#"+e.html.tocId,t);n.on("click","a",function(){n.collapse("hide")})}if(e.html.toc){var a=$("ul.bootmark-toc",t);var r={1:"h1",2:"h1, h2",3:"h1, h2, h3",4:"h1, h2, h3, h4",5:"h1, h2, h3, h4, h5",6:"h1, h2, h3, h4, h5, h6"};var i=e.html.tocLimit;i=i>6?6:i<1?1:i;var s=$(r[i],t);s.each(function(t,e){var o=$("<li></li>").addClass("bootmark-"+e.localName).html(' <a class="page-scroll" href="#'+e.id+'">'+e.innerText+"</a>");a.append(o)})}if($("table",t).length){$("table",t).addClass(" table table-striped table-bordered ").wrap(' <div class="table-responsive"></div> ')}if(e.html.indent&&$("p",t).length){$("p",t).addClass("bootmark-indent")}if(e.html.credit&&!$("#bootmark-footer").length){var l='<div class="container-fluid bg-primary">'+'<p class="text-center">'+'<a style="color: inherit" href="https://obedm503.github.io/bootmark">This project uses bootmark. Bootmark allows developers to focus on their projects and not how they are presented.</a>'+"<p>"+"</div>";var c=$('<footer id="bootmark-footer"></footer>').html(l);$("body").append(c)}if(e.showdown.extensions.indexOf("prettify")>=0){prettyPrint()}}};$(function documentReady(){$(document).on("click","a.page-scroll",function(t){t.preventDefault();var e=$(this);var o=e.attr("href").substring(1);var n;if($("#"+o).length){n=$("#"+o)[0]}else if($('a[name="'+o+'"]').length){n=$('a[name="'+o+'"]')[0]}if(n){$("html, body").animate({scrollTop:n.offsetTop},900)}});if($("bootmark").length){$("bootmark").each(function(){var t=$(this);t.bootmark({fetch:t.attr("fetch"),src:t.attr("src"),join:t.attr("join"),template:t.attr("template"),html:t.attr("html"),css:t.attr("css"),showdown:t.attr("showdown"),promise:t.attr("promise")})})}if($(".bootmark").length){$(".bootmark").each(function(){var t=$(this);t.bootmark({fetch:t.attr("data-fetch"),src:t.attr("data-src"),join:t.attr("data-join"),template:t.attr("data-template"),html:t.attr("data-html"),css:t.attr("data-css"),showdown:t.attr("data-showdown"),promise:t.attr("data-promise")})})}})}if(typeof jQuery==="undefined"){throw new Error("JQuery is not defined")}if(typeof showdown==="undefined"){throw new Error("Showdown is not defined")}if(typeof jQuery.fn.modal==="undefined"){throw new Error("Bootstrap is not defined")}if(typeof Promise==="undefined"){throw new Error("Promise API is not defined")}if(typeof fetch==="undefined"){console.warn("fetch API is not defined")}if(typeof prettyPrint==="undefined"){console.warn("Code Prettify is not defined")}if(typeof jQuery.fn.bootmark==="undefined"){defineBootmark()}})(jQuery,document);
//# sourceMappingURL=./dist/bootmark.min.js.map