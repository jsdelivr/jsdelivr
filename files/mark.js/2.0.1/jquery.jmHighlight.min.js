/*!***************************************************
 * jmHighlight
 * Version 2.0.1
 * Copyright (c) 2015, Julian Motz
 * Released under the MIT license
 *****************************************************/
(function(d,f){"function"===typeof define&&define.amd?define(["jquery"],function(h){return f(h,d)}):"object"===typeof exports?f(require("jquery"),d):f(d.jQuery,d)})(this,function(d,f){function h(c,b,a){if(0==b instanceof e||0==b.length||"string"!==typeof c||""==c)return!1;var g=c.split(" ");if(1<g.length){for(var d=0,f=g.length;d<f;d++)if(0==h(g[d],b,a))return!1;return!0}"object"!==typeof a&&(a={});"string"!==typeof a.element&&(a.element=k.element);"string"!==typeof a.className&&(a.className=k.highlight); m(b,function(b){if(-1==b.nodeValue.toLowerCase().indexOf(c.toLowerCase()))return!0;var g="<"+a.element+" class='"+a.className+"' data-jmHighlight='true'>",d="</"+a.element+">";if(null!=b.parentNode){var e=new RegExp(c,"gi"),f=e.exec(b.parentNode.innerHTML)[0];b.parentNode.innerHTML=b.parentNode.innerHTML.replace(e,g+f+d)}});return!0}function n(c,b,a){if(0==c instanceof e||0==c.length)return!1;"object"!==typeof b&&(b={});"string"!==typeof b.element&&(b.element=k.element);"string"!==typeof b.className&& (b.className=k.highlight);c.each(function(){e(this).find(b.element+"."+b.className).each(function(){var b=e(this);"string"===typeof a&&""!=a&&-1==b.text().toLowerCase().indexOf(a.toLowerCase())||b.replaceWith(b.text())})});return!0}function l(c,b){if("object"!==typeof b||0==c instanceof e)return!1;var a=c;"[object Array]"===Object.prototype.toString.call(b)&&(a=a.filter(function(){var a=e(this),c=!1;b.forEach(function(b){a.is(b)&&(c=!0)});return c?!1:!0}));return a}function m(c,b){if("undefined"=== typeof c||0==c instanceof e||"function"!==typeof b)return!1;c.each(function(){e(this).contents().filter(function(){return 3==this.nodeType?!0:!1}).each(function(){b(this)})});return!0}var e=d,k={element:"span",className:"highlight"};d.fn.jmHighlight=function(c,b){var a;a=e(this);if(0==a instanceof e||"string"!==typeof c||""==c)a=!1;else{a=a.find("*:not([data-jmHighlight])");if("object"===typeof b&&"object"===typeof b.filter){var d=l(a,b.filter);0!=d&&(a=d)}h(c,a,b);a=!0}return a};d.fn.jmRemoveHighlight= function(c,b){var a;a=e(this);if("undefined"===typeof a||0==a instanceof e)a=!1;else{a=a.find("*:not([data-jmHighlight])");if("object"===typeof c&&"object"===typeof c.filter){var d=l(a,c.filter);0!=d&&(a=d)}n(a,c,b);a=!0}return a}});
