/*!
 * tire.js
 * Copyright (c) 2012-2013 Fredrik Forsmo
 * Version: 1.2.0
 * Released under the MIT License.
 *
 * Date: 2013-05-24
 */
(function(e,t){function p(r,i){var s=(s=/callback\=([A-Za-z0-9\-\.]+)/.exec(r))?s[1]:"jsonp"+ +(new Date),o=n.createElement("script"),u=null,a=function(){u!==null&&clearTimeout(u),h(o).remove();try{delete e[s]}catch(n){e[s]=t}},f=function(t){a(),t==="timeout"&&(e[s]=l),h.isFunction(i.error)&&i.error(t,i)};o.onerror=function(){f("error")},i.timeout>0&&(u=setTimeout(function(){f("timeout")},i.timeout)),e[s]=function(n){h(o).remove();try{delete e[s]}catch(r){e[s]=t}h.ajaxSuccess(n,null,i)},i.data=h.param(i.data),o.src=r.replace(/\=\?/,"="+s),h("head")[0].appendChild(o)}function d(e){try{return e?(h.isPlainObject(e)||h.isArray(e))&&JSON.stringify?JSON.stringify(e):e:e}catch(t){return e}}function v(e){var t;try{return e?e==="true"||(e==="false"?!1:e==="null"?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?h.parseJSON(e):e:t):e}catch(n){return e}}function m(e,t){var r="";return n.defaultView&&n.defaultView.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),r=n.defaultView.getComputedStyle(e,"").getPropertyValue(t)):e.currentStyle?r=e.currentStyle[t]:r=e.style[t],r?r:""}function y(e){var t=n.createElement("div");return h.isString(e)||h.isNumeric(e)?t.innerHTML=e:t.appendChild(e),t}function C(e){return e._eventId||(e._eventId=b++)}function k(e,t){return w[e]=w[e]||{},w[e][t]=w[e][t]||[]}function L(e,t,n,r){var i=C(e),s=k(i,t),o=(""+t).split("."),u=r||n,a=function(t){var r=t.data;h.isString(r)&&/^[\[\{]/.test(r)&&(r=h.parseJSON(t.data));var i=n.apply(e,[t].concat(r));return i===!1&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1),i};return a._i=u._i=u._i||++b,a.realEvent=o[0],a.ns=o.slice(1).sort().join(" "),s.push(a),a}function A(e){var n={originalEvent:e};for(var r in e){!x.test(r)&&e[r]!==t&&(n[r]=e[r]);for(var i in N)n[i]=function(){return this[N[i]]=E,e[i].apply(e,arguments)},n[N[i]]=S}return n}function O(e,n,r,i){var s,o;h.isString(i)?(o=r,s=function(){return function(e,t,n){return function(r){var i=h(r.target||r.srcElement).closest(n,e).get(0),s;if((r.target||r.srcElement)===i)return s=h.extend(A(r),{currentTarget:i,liveFired:e}),t.apply(i,[s].concat(f.call(arguments,1)))}}(e,r,i)}):(r=i,i=t),h.each(n.split(/\s/),function(n,u){var a=(u+"").split(".");if(o!==t&&a[0]in T){var f=s();s=function(){return function(e){var t=e.relatedTarget;if(!t||t!==this&&!h.contains(this,t))return f.apply(this,arguments)}}}u=T[a[0]]||a[0];var l=L(e,u,s&&s()||r,o);i&&(l.selector=i),e.addEventListener?e.addEventListener(u,l,!1):e.attachEvent&&e.attachEvent("on"+u,l)})}function M(e,n,r,i){var s=e.slice(1).sort().join(" ");return n===t&&(i.selector===r||i.realEvent===e[0]||i.ns===s)||n._i===i._i}function _(e,n,r,i){var s=C(e);r===t&&h.isFunction(i)&&(r=i,i=t),h.each(n.split(/\s/),function(t,n){var o=(""+n).split(".");n=T[o[0]]||o[0];var u=k(s,n);for(var a=0;a<u.length;a++)if(M(o,r,i,u[a])){if(e.removeEventListener)e.removeEventListener(n,u[a],!1);else if(e.detachEvent){var f="on"+n;h.isString(e[f])&&(e[f]=null),e.detachEvent(f,u[a])}Array.remove(w[s][n],a,1)}w[s][n].length||delete w[s][n]});for(var o in w[s])return;delete w[s]}var n=e.document,r=e.tire,i=e.$,s=/^#([\w\-]*)$/,o=/^\.([\w\-]*)$/,u=/^[\w\-]+$/,a=/^<([\w:]+)/,f=[].slice,l=function(){};Array.remove=function(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r)};try{f.call(n.documentElement.childNodes,0)[0].nodeType}catch(c){f=function(e){e=e||0;var t,n=[];for(;t=this[e];e++)n.push(t);return n}}var h=function(e,t){return new h.fn.find(e,t)};h.fn=h.prototype={length:0,extend:function(e){for(var t in e)this[t]=e[t]},find:function(r,i){var l=[],c;if(!r)return this;if(h.isFunction(r))return h.ready(r);if(r.nodeType)return this.selector="",this.context=r,this.set([r]);if(r.length===1&&r[0].nodeType)return this.selector=this.context=r[0],this.set(r);i=this.context?this.context:i||n,h.isPlainObject(i)&&(c=i,i=n);if(h.isString(r)){this.selector=r;if(s.test(r)&&i.nodeType===i.DOCUMENT_NODE)l=(l=i.getElementById(r.substr(1)))?[l]:[];else if(i.nodeType!==1&&i.nodeType!==9)l=[];else if(a.test(r)){var p=i.createElement("div");p.innerHTML=r,this.each.call(f.call(p.childNodes,0),function(){l.push(this)})}else l=f.call(o.test(r)&&i.getElementsByClassName!==t?i.getElementsByClassName(r.substr(1)):u.test(r)?i.getElementsByTagName(r):i.querySelectorAll(r))}else r.nodeName||r===e?l=[r]:h.isArray(r)&&(l=r);return r.selector!==t?(this.selector=r.selector,this.context=r.context):this.context===t&&(l[0]!==t&&!h.isString(l[0])?this.context=l[0]:this.context=n),this.set(l).each(function(){return c&&h(this).attr(c)})},pluck:function(e){var t=[];return this.each(function(){this[e]&&t.push(this[e])}),t},each:function(e,t){var n,r;typeof e=="function"&&(t=e,e=this);if(e===this||e instanceof Array){for(n=0;n<e.length;++n)if(t.call(e[n],n,e[n])===!1)break}else for(r in e)if(e.hasOwnProperty(r)&&t.call(e[r],r,e[r])===!1)break;return e},set:function(e){var t=0,n=h();n.selector=this.selector,n.context=this.context;for(;t<e.length;t++)n[t]=e[t];return n.length=t,n}},h.extend=function(){var e=arguments[0]||{};return typeof e!="object"&&typeof e!="function"&&(e={}),arguments.length===1&&(e=this),h.fn.each(f.call(arguments),function(t,n){for(var r in n)e[r]!==n[r]&&(e[r]=n[r])}),e},h.fn.find.prototype=h.fn,h.extend({version:"1.2.0",each:h.fn.each,trim:function(e){return e==null?"":e.trim?e.trim():(""+e).replace(/^\s+|\s+$/g,"")},contains:function(e,t){return e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&16)},matches:function(e,r){if(!e||e.nodeType!==1)return!1;var i=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,r);if(n.querySelectorAll!==t){var s=e.parentNode.querySelectorAll(r);for(var o=0;o<s.length;o++)if(s[o]===e)return!0}return!1},isFunction:function(e){return typeof e=="function"},isArray:function(e){return e instanceof Array},isString:function(e){return typeof e=="string"},isNumeric:function(e){return typeof e=="number"},isObject:function(e){return e instanceof Object&&!this.isArray(e)&&!this.isFunction(e)&&!this.isWindow(e)},isPlainObject:function(e){if(!e||!this.isObject(e)||this.isWindow(e)||e.nodeType)return!1;if(e.__proto__===Object.prototype)return!0;var n;for(n in e);return n===t||{}.hasOwnProperty.call(e,n)},isWindow:function(e){return e!==null&&e!==t&&(e===e.window||"setInterval"in e)},parseJSON:function(t){if(!this.isString(t)||!t)return null;t=this.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);try{return(new Function("return "+t))()}catch(n){return null}},noConflict:function(t){return t&&(e.tire=r),e.$=i,h}}),h.extend({ajax:function(e,n){n=n||h.ajaxSettings,h.isObject(e)&&(h.isFunction(n)&&(e.success=e.success||n),n=e,e=n.url),h.isFunction(n)&&(n={success:n});for(var r in h.ajaxSettings)n.hasOwnProperty(r)||(n[r]=h.ajaxSettings[r]);if(!e)return n.xhr();var i=n.xhr(),s="error",o=null,u=n.dataType==="jsonp",a={html:"text/html",text:"text/plain",xml:"application/xml, text/xml",json:"application/json"},f=h.param(n.data)!==""?h.param(n.data):null;for(var l in a)e.indexOf("."+l)!==-1&&!n.dataType&&(n.dataType=l);if(u||/\=\?|callback\=/.test(e))return/\=\?/.test(e)||(e=(e+"&callback=?").replace(/[&?]{1,2}/,"?")),p(e,n);if(h.isFunction(n.beforeOpen)){var c=n.beforeOpen(i,n);if(!c)return i.abort(),i;i=c}if(i){i.open(n.type,e,!0),(a=a[n.dataType.toLowerCase()])!==t&&(i.setRequestHeader("Accept",a),a.indexOf(",")!==-1&&(a=a.split(",")[0]),i.overrideMimeType&&i.overrideMimeType(a)),(n.contentType||n.data&&n.type!=="GET")&&i.setRequestHeader("Content-Type",n.contentType||"application/x-www-form-urlencoded");for(var d in n.headers)n.headers.hasOwnProperty(d)&&i.setRequestHeader(d,n.headers[d]);n.timeout>0&&(o=setTimeout(function(){s="timeout",i.abort()},n.timeout)),i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300||i.status===304?n.success!==t&&h.ajaxSuccess(null,i,n):n.error!==t&&(o!==null&&clearTimeout(o),n.error(s,n,i)))};if(h.isFunction(n.beforeSend)){var v=n.beforeSend(i,n);v!==!1&&i.send(f),i=v}else i.send(f);return i}},ajaxSettings:{beforeOpen:null,beforeSend:null,contentType:"application/x-www-form-urlencoded",data:{},dataType:"",error:l,headers:{"X-Requested-With":"XMLHttpRequest"},success:l,timeout:0,type:"GET",url:"",xhr:function(){var t=null;return e.XMLHttpRequest?t=new XMLHttpRequest:e.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t}},ajaxSuccess:function(e,t,n){var r;t&&((n.dataType==="json"||!1)&&(r=h.parseJSON(t.responseText))===null&&(r=t.responseText),n.dataType==="xml"&&(r=t.responseXML),r=r||t.responseText),!r&&e&&(r=e),h.isFunction(n.success)&&n.success(r)},param:function(e,t){var n=[];return this.each(e,function(e,r){var i=t?t+"["+e+"]":e;n.push(h.isObject(r)?h.param(r,i):encodeURIComponent(i)+"="+encodeURIComponent(r))}),n.join("&").replace("%20","+")}}),h.fn.extend({addClass:function(e){if(e&&h.isString(e))return this.each(function(t,n){if(n.nodeType===1){var r=e.split(/\s+/);if(!n.className&&r.length===1)n.className=e;else{var i=n.className;for(var s=0;s<r.length;s++)i.indexOf(r[s])===-1&&(i+=" "+r[s]);n.className=h.trim(i)}}})},removeClass:function(e){return this.each(function(t,n){if(e&&h.isString(e)){var r=e.split(/\s+/);if(n.nodeType===1&&n.className){if(r.length===1)n.className=n.className.replace(e,"");else for(var i=0;i<r.length;i++)n.className=n.className.replace(r[i],"");n.className=h.trim(n.className.replace(/\s{2}/g," ")),n.className===""&&n.removeAttribute("class")}}})},hasClass:function(e){var t=(this[0]?this[0]:this).className.split(/\s+/),n=e.split(/\s+/),r=0;if(n.length>1){var i=!1;for(r=0;r<n.length;r++)i=this.hasClass.call(this,n[r]);return i}if(h.isString(e)){for(r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}},attr:function(e,n){if(h.isObject(e))return this.each(function(){for(var t in e)this.setAttribute&&this.setAttribute(t,e[t]===null?e[t]+"":e[t])});if((n||n===null||n===!1)&&h.isString(e))return this.each(function(){this.setAttribute&&this.setAttribute(e,n===null?n+"":n)});if(h.isString(e)){var r;for(var i=0;i<this.length;i++){if(this[i].getAttribute!==t&&(r=this[i].getAttribute(e))!==null)break;continue}return r}},data:function(e,t){return t=this.attr("data-"+e,d(t)),t instanceof h?t:v(t)},removeAttr:function(e){return this.each(function(){if(e&&this.nodeType===1){var t=e.split(/\s+/);for(var n=0;n<t.length;n++)this.removeAttribute(t[n])}})}}),h.fn.extend({css:function(e,n){return h.isString(e)&&n===t?this.length>0?m(this[0],e):t:this.each(function(){if(this.style!==t)if(h.isString(e))this.style[e]=n;else for(var r in e)this.style[r]=e[r]})},hide:function(){return this.css("display","none")},show:function(){return this.each(function(){if(this.style!==t){try{this.style.display==="none"&&(this.style.display=null)}catch(e){}m(this,"display")==="none"&&(this.style.display="block")}})}});var g=function(){function u(){t?n.removeEventListener("DOMContentLoaded",u,!1):n.readyState==="complete"&&n.detachEvent("onreadystatechange",u),f()}function a(){if(r)return;try{s.doScroll("left")}catch(e){setTimeout(a,10)}f()}function f(){if(r)return;r=!0;for(var e=0;e<o.length;e++)o[e].call(n,h)}var t=!!n.addEventListener,r=!1,i=!1,s=n.documentElement,o=[];return t?(n.addEventListener("DOMContentLoaded",u,!0),e.addEventListener("load",f,!1)):(n.attachEvent("onreadystatechange",u),e.attachEvent("onload",f),s.doScroll&&e===e.top&&a()),function(e){return r?e.call(n,h):o.push(e)}}();h.ready=h.fn.ready=g,h.fn.extend({is:function(e){return this.length>0&&h.matches(this[0],e)},closest:function(e,t){var n=this[0];while(n&&!h.matches(n,e)){n=n.parentNode;if(!n||!n.ownerDocument||n===t||n.nodeType===11)break}return h(n)},parent:function(e){var n=this.pluck("parentNode");return e===t?h(n):h(n).filter(e)},children:function(e){var n=[];return this.each(function(){h.each(f.call(this.children,0),function(e,t){n.push(t)})}),e===t?h(n):h(n).filter(e)},text:function(e){return e===t?this.length>0?this[0].textContent===t?this[0].innerText:this[0].textContent:null:this.each(function(){this.textContent=e})},val:function(e){return arguments.length?this.each(function(){if(this.nodeType!==1)return;e===null||e===t?e="":h.isNumeric(e)&&(e+=""),this.value=e}):this.length>0?this[0].multiple?this.find("option").filter(function(){return this.selected}).pluck("value"):this[0].value:null},empty:function(){return this.each(function(){this.innerHTML=""})},html:function(e,t){if(arguments.length===0)return this.length>0?this[0].innerHTML:null;t=t||"inner";if(e instanceof h){var n=this;return e.each(function(e,r){n.html.call(n,r,t)})}return this.each(function(){if(t==="inner")h.isString(e)||h.isNumeric(e)?this.innerHTML=e:(this.innerHTML="",this.appendChild(e));else if(t==="remove")this.parentNode.removeChild(this);else{var n=y(e),r=n.childNodes,i;t==="prepend"?this.insertBefore(n,this.firstChild):t==="append"?this.insertBefore(n,null):t==="before"?this.parentNode.insertBefore(n,this):t==="after"&&this.parentNode.insertBefore(n,this.nextElementSibling?this.nextElementSibling:this.nextSibling),i=n.parentNode;while(r.length)i.insertBefore(r[0],n);i.removeChild(n)}})}}),h.each(["prepend","append","before","after","remove"],function(e,t){h.fn[t]=function(e){return function(t){return this.html(t,e)}}(t)}),h.fn.extend({filter:function(e){if(h.isFunction(e)){var t=[];return this.each(function(n,r){e.call(r,n)&&t.push(r)}),h(t)}return this.filter(function(){return h.matches(this,e)})},not:function(e){return this.filter(function(){return!h.matches(this,e)})},eq:function(e){return e===-1?h(f.call(this,this.length-1)):h(f.call(this,e,e+1))},get:function(e){return e===t?f.call(this):this[e>=0?e:e+this.length]},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),h(e)}});var b=1,w={},E=function(){return!0},S=function(){return!1},x=/^([A-Z]|layer[XY]$)/,T={mouseenter:"mouseover",mouseleave:"mouseout"},N={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isStopImmediatePropagation",stopPropagation:"isPropagationStopped"};h.events=h.events||{},h.fn.extend({on:function(e,t,n){return this.each(function(){O(this,e,n,t)})},off:function(e,t,n){return this.each(function(){_(this,e,n,t)})},trigger:function(e,t){return this.each(function(r,i){i===n&&!i.dispatchEvent&&(i=n.documentElement);var s,o=!!n.createEvent,u=(e+"").split(".");e=T[u[0]]||u[0],o?(s=n.createEvent("HTMLEvents"),s.initEvent(e,!0,!0)):(s=n.createEventObject(),s.cancelBubble=!0),s.data=t||{},s.eventName=e,h.isString(s.data)&&!h.isString(t)&&JSON.stringify&&(s.data=JSON.stringify(t));if(o)i.dispatchEvent(s);else try{i.fireEvent("on"+e,s)}catch(a){i.attachEvent("onpropertychange",function(t){if(t.eventName===e&&t.srcElement._eventId){var n=k(t.srcElement._eventId,t.eventName);if(n.length)for(var r=0;r<n.length;r++)n[r](t)}}),i.fireEvent("onpropertychange",s)}})}}),e.$=e.tire=h})(window);
