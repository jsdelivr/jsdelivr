var Transformie={defaults:{inlineCSS:"*",stylesheets:true,track:"*",centerOrigin:"margin"},toRadian:function(a){if(a.indexOf("deg")!=-1){return parseFloat(a,10)*(Math.PI*2/360)}else if(a.indexOf("grad")!=-1){return parseFloat(a,10)*(Math.PI/200)}else{return parseFloat(a,10)}},getTransformValue:function(a){return a["-webkit-transform"]||a["webkit-transform"]||a["transform"]||a.webkitTransform||a["-moz-transform"]||a["moz-transform"]||a.MozTransform||a.mozTransform},track:function(a){jQuery(a).unbind("propertychange").bind("propertychange",function(a){if(a.originalEvent.propertyName=="style.webkitTransform"||a.originalEvent.propertyName=="style.MozTransform"||a.originalEvent.propertyName=="style.transform")Transformie.applyMatrixToElement(Transformie.computeMatrix(Transformie.getTransformValue(this.style)),this)})},apply:function(a){jQuery(a).each(function(){var a=Transformie.getTransformValue(this.style);a&&Transformie.applyMatrixToElement(Transformie.computeMatrix(a),this)})},parseStylesheets:function(){for(var a=0;a<document.styleSheets.length;a++){if(document.styleSheets[a].readOnly)continue;for(var b=0;b<document.styleSheets[a].rules.length;b++){var c=Transformie.getTransformValue(document.styleSheets[a].rules[b].style);c&&Transformie.applyMatrixToSelector(Transformie.computeMatrix(c),document.styleSheets[a].rules[b].selectorText)}}},applyMatrixToSelector:function(a,b){if(b.indexOf&&b.indexOf(":hover")!=-1)return;jQuery(b).each(function(){Transformie.applyMatrixToElement(a,this)})},applyMatrixToElement:function(a,b){if(!b.filters["DXImageTransform.Microsoft.Matrix"]){b.style.filter=(b.style.filter?"":" ")+"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand')";Transformie.track(b)}b.filters["DXImageTransform.Microsoft.Matrix"].M11=a.elements[0][0];b.filters["DXImageTransform.Microsoft.Matrix"].M12=a.elements[0][1];b.filters["DXImageTransform.Microsoft.Matrix"].M21=a.elements[1][0];b.filters["DXImageTransform.Microsoft.Matrix"].M22=a.elements[1][1];if(Transformie.defaults.centerOrigin){b.style[Transformie.defaults.centerOrigin=="margin"?"marginLeft":"left"]=-(b.offsetWidth/2)+b.clientWidth/2+"px";b.style[Transformie.defaults.centerOrigin=="margin"?"marginTop":"top"]=-(b.offsetHeight/2)+b.clientHeight/2+"px"}},computeMatrix:function(a){var b=a.match(/[A-z]+\([^\)]+/g)||[];var c=[];for(var d=0;d<b.length;d++){var e=b[d].split("(")[0],f=b[d].split("(")[1];switch(e){case"matrix":var g=f.split(",");c.push($M([[g[0],g[2],0],[g[1],g[3],0],[0,0,1]]));break;case"rotate":var h=Transformie.toRadian(f);c.push($M([[Math.cos(h),-Math.sin(h),0],[Math.sin(h),Math.cos(h),0],[0,0,1]]));break;case"scale":c.push($M([[f,0,0],[0,f,0],[0,0,1]]));break;case"scaleX":c.push($M([[f,0,0],[0,1,0],[0,0,1]]));break;case"scaleY":c.push($M([[1,0,0],[0,f,0],[0,0,1]]));break;case"skew":var h=Transformie.toRadian(f);c.push($M([[1,0,0],[Math.tan(h),1,0],[0,0,1]]));case"skewX":var h=Transformie.toRadian(f);c.push($M([[1,Math.tan(h),0],[0,1,0],[0,0,1]]));break;case"skewY":var h=Transformie.toRadian(f);c.push($M([[1,0,0],[Math.tan(h),1,0],[0,0,1]]));break}}if(!c.length)return;var i=c[0];for(var d=0;d<c.length;d++){if(c[d+1])i=c[d].x(c[d+1])}return i}};jQuery(function(){if(!jQuery.browser.msie)return;Transformie.defaults.stylesheets&&Transformie.parseStylesheets();Transformie.inlineCSS&&Transformie.apply(Transformie.inlineCSS===true?"*":Transformie.inlineCSS);Transformie.defaults.track&&Transformie.track(Transformie.defaults.track)})