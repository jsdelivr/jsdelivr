function doInstallModule(a){var d=[];d.module_name=a;exec_xml("install","procInstallAdminInstall",d,completeInstallModule)}function doUpdateModule(a){var d=[];d.module_name=a;exec_xml("install","procInstallAdminUpdate",d,completeInstallModule)}function completeInstallModule(a){alert(a.message);location.reload()}
jQuery(function(a){function d(){var b=a(".x>.body"),e=b.find(">.gnb"),d=b.children("#content.content");d.width("99.99%");setTimeout(function(){d.removeAttr("style");e.height()>d.height()&&d.height(e.height())},100)}window.scrollTo(0,0);a(document.body).on("click",".x [data-toggle]",function(){var b=a(this);if(b.is("a")&&b.attr("href")!=b.attr("data-toggle")){var e=b.attr("href");b.attr("data-toggle",e)}e=a(b.attr("data-toggle"));e.toggle();e.is(":visible")&&!e.find("a,input,button,textarea,select").length?
e.not(":disabled").attr("tabindex","0").focus():e.is(":visible")&&e.find("a,input,button,textarea,select").length?e.not(":disabled").find("a,input,button,textarea,select").eq(0).focus():b.focus();return!1});a(document.body).on("click",".x [data-show]",function(){var b=a(this);if(b.is("a")&&b.attr("href")!=b.attr("data-show")){var e=b.attr("href");b.attr("data-show",e)}a(b.attr("data-show")).show().attr("tabindex","0").focus();return!1});a(document.body).on("click",".x [data-hide]",function(){var b=
a(this);if(b.is("a")&&b.attr("href")!=b.attr("data-hide")){var e=b.attr("href");b.attr("data-hide",e)}a(b.attr("data-hide")).hide();b.focus();return!1});a.fn.xeTabbable=function(){a(this).each(function(){var b=a(this);b.find(">.x_nav-tabs>li>a").each(function(b){a(this).attr("data-index",b+1)});b.find(">.x_tab-content>.x_tab-pane").each(function(b){a(this).attr("data-index",b+1)})});a('.x .x_tab-content>.x_tab-pane:not(".x_active")').hide()};a(".x .x_tabbable").xeTabbable();a(document.body).on("click",
'.x .x_nav-tabs>li>a[href^="#"]',function(){var b=a(this);if(b.parent("li").hasClass("x_disabled"))return!1;b.parent("li").addClass("x_active").siblings().removeClass("x_active");b.closest(".x_nav-tabs").next(".x_tab-content").find(">.x_tab-pane").eq(b.attr("data-index")-1).addClass("x_active").show().siblings(".x_tab-pane").removeClass("x_active").hide();b.parents(".x_tabbable").trigger("tab_change",[parseInt(b.attr("data-index"))-1,b]);return!1});a.fn.gnb=function(){var b=a(".x>.body"),e=b.find(">.gnb"),
g=e.find(">ul>li"),f=new Date;f.setTime(f.getTime()+30758400);g.find(">a").prepend("<i />");g.find(">ul").prev("a").append("<b />");g.each(function(b){a(this).attr("data-index",b+1)});var h=g.find(">ul>li.active_").closest("li.active").attr("data-index");g.find(">ul>li.active_").clone().addClass("active").attr("data-index",h).prependTo("#gnbNav").find(">a").prepend("<i />");g.find(">a").click(function(){function e(){b.removeClass("wide");d()}var h=a(this),g=a(this).parent("li"),n=g.hasClass("open"),
k=g.hasClass("active"),j=1<=g.find(">ul").length,t=b.hasClass("wide");if(!n&&!k&&j)return g.addClass("open").find(">ul").slideDown(100),e(),setCookie("__xe_admin_gnb_tx_"+h.data("href"),"open",f),!1;if(n&&!k&&j&&!t)return g.removeClass("open").find(">ul").slideUp(100),e(),setCookie("__xe_admin_gnb_tx_"+h.data("href"),"close",f),!1;if(t&&!j||k||t&&n)return e(),!1});e.find('>a[href="#gnbNav"]').click(function(){a(this).parent(".gnb").toggleClass("open");b.toggleClass("wide");980>=a(window).width()&&
!e.hasClass("open")&&a("#gnbNav").removeClass("ex");d();a(this).parent(".gnb").hasClass("open")?setCookie("__xe_admin_gnb_status","open",f):setCookie("__xe_admin_gnb_status","close",f);return!1});e.find(".exMenu>button").click(function(){a("#gnbNav").toggleClass("ex");d();a("#gnbNav").hasClass("ex")?setCookie("__xe_admin_gnb_ex_status","open",f):setCookie("__xe_admin_gnb_ex_status","close",f)});(g=getCookie("__xe_admin_gnb_status"))&&setCookie("__xe_admin_gnb_status",g,f);(g=getCookie("__xe_admin_gnb_ex_status"))&&
setCookie("__xe_admin_gnb_xe_status",g,f);if("undefined"!=typeof __xe_admin_gnb_txs)for(var j in __xe_admin_gnb_txs)g=__xe_admin_gnb_txs[j],h=getCookie(g),setCookie(g,h,f)};a(".gnb").gnb();a(".x #lang").mouseleave(function(){a(this).hide()}).focusout(function(){var b=a(this);setTimeout(function(){b.find("a:focus").length||b.mouseleave()},500)});a(".x th :checkbox").change(function(){var b=a(this),e=b.data("name");b.closest("table").find(":checkbox").filter(function(){var b=a(this);return!b.prop("disabled")&&
(b.attr("name")==e||b.data("name")==e)}).prop("checked",b.prop("checked")).end().end().trigger("update.checkbox",[e,this.checked])});a(document.body).on("click",".x .x_pagination .x_disabled, .x .x_pagination .x_active",function(){return!1});if(1<a(".x .section").length){var h=a(".x .section").find(">h1:first");h.each(function(){var b=a(this);b.next().length&&b.append('<button type="button" class="snToggle x_icon-chevron-up">Toggle this section</button>')});a(".x .section.collapsed>h1>.snToggle").removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down");
h.find(">.snToggle").click(function(){var b=a(this),e=b.closest(".section");e.hasClass("collapsed")?(e.removeClass("collapsed"),b.removeClass("x_icon-chevron-down").addClass("x_icon-chevron-up")):(e.addClass("collapsed"),b.removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down"));d()})}h=a(".x .x_alert");h.prepend('<button type="button" class="x_close">&times;</button>');h.children(".x_close").click(function(){a(this).parent(".x_alert").hide()});a(".x .x_btn").click(function(){if(a(this).hasClass("x_disabled"))return!1});
a.fn.vr=function(){this.each(function(){var b=a(this);"|"==b.text()&&b.addClass("vr").filter(":first-child, :last-child").remove()})};a(".x i").vr();a.fn.labelMaker=function(){this.each(function(b){b+=1;var e=a(this);b="i"+b;e.next("input, textarea, select").filter("[id]").not(":radio, :checkbox").length?e.attr("for",e.next().attr("id")):e.next("input, textarea, select").not("[id]").not(":radio, :checkbox").length?e.attr("for",b).next().attr("id",b):e.prev(":radio, :checkbox").filter("[id]").length?
e.attr("for",e.prev().attr("id")):e.prev(":radio, :checkbox").not("[id]").length?e.attr("for",b).prev().attr("id",b):e.children("input, textarea, select").filter("[id]").length?e.attr("for",e.children("input, textarea, select").filter("[id]").eq(0).attr("id")):e.children("input, textarea, select").not("[id]").length&&e.attr("for",b).children("input, textarea, select").not("[id]").eq(0).attr("id",b)})};a("label:not([for])").labelMaker();a.fn.checkToggle=function(){function b(){setTimeout(function(){a(":checked").parent("label").addClass("checked");
a(':not(":checked")').parent("label").removeClass("checked")},0)}this.change(b);b()};a(":radio, :checkbox").checkToggle();a.fn.fileTypeOverlap=function(){this.each(function(){var b=a(this);b.wrap('<span class="fileBtn x_btn" />').before(b.attr("title"))})};a('input[type="file"].overlap').fileTypeOverlap();a.fn.tableSpan=function(){this.each(function(){var b=a(this),e=b.find(">thead>tr:eq(0)>th").length,b=b.find(">tbody>tr:eq(0)>td:only-child");e!=b.attr("colspan")&&b.attr("colspan",e).css("text-align",
"center")})};a("table").tableSpan()});
jQuery(function(a){var d=[],h=a('<div class="x_modal-backdrop"></div>').appendTo("body").hide();a.fn.xeModalWindow=function(){this.not(".xe-modal-window").addClass("xe-modal-window").each(function(){a(a(this).attr("href")).addClass("x").hide()}).click(function(){var b=a(this);"showing"==a(b.attr("href")).data("state")?b.trigger("close.mw"):b.trigger("open.mw");return!1}).bind("open.mw",function(){function b(){e.trigger("after-open.mw")}var e=a(this),g,f;g=a(e.attr("href"));if(!(d.length&&d[d.length-
1].get(0)==g.get(0))){g.parent("body").length||(f=a('<button type="button" class="x_close">&times;</button>'),f.click(function(){g.data("anchor").trigger("close.mw")}),g.find("[data-hide]").click(function(){g.data("anchor").trigger("close.mw")}),a("body").append(g),g.prepend(f));g.data("anchor",e);f=a.Event("before-open.mw");e.trigger(f);if(f.isDefaultPrevented())return!1;f=e.data("duration")||"fast";g.data("state","showing");a(document).bind("keydown.mw",function(a){if(27==a.which)return e.trigger("close.mw"),
!1});g.fadeIn(f,b).find("button.x_close:first").focus();a("body").css("overflow","hidden");d.push(g);f=1040+2*(d.length-1);h.css("z-index",f).show();g.css("z-index",f+1)}}).bind("close.mw",function(){function b(){e.trigger("after-close.mw")}var e=a(this),g,f;f=a(e.attr("href"));if(!(d.length&&d[d.length-1].get(0)!=f.get(0))){g=a.Event("before-close.mw");e.trigger(g);if(g.isDefaultPrevented())return!1;g=e.data("duration")||"fast";f.data("state","hiding");f.fadeOut(g,b);a("body").css("overflow","auto");
e.focus();d.pop();f=1040+2*(d.length-1);d.length?h.css("z-index",f):h.hide()}});a("div.x_modal").addClass("x")};a("a.modalAnchor").xeModalWindow()});
jQuery(function(a){var d=!1;a.fn.xeContentToggler=function(){this.not(".xe-content-toggler").addClass("xe-content-toggler").each(function(){var h=a(this);$layer=a(h.attr("href"));$layer.hide().not(".xe-toggling-content").addClass("xe-toggling-content").mousedown(function(){d=!0}).focusout(function(){setTimeout(function(){!d&&(!$layer.find(":focus").length&&"showing"==$layer.data("state"))&&h.trigger("close.tc");d=!1},1)})}).click(function(){var d=a(this),b;b=a(d.attr("href"));b.data("anchor",d);"showing"==
b.data("state")?d.trigger("close.tc"):d.trigger("open.tc");return!1}).bind("open.tc",function(){function h(){b.trigger("after-open.tc")}var b=a(this),e,g,f;e=a(b.attr("href"));g=b.data("effect");f=b.data("duration")||"fast";e.data("state","showing");b.trigger("before-open.tc");d=!1;a(document).unbind("mousedown.tc keydown.tc").bind("mousedown.tc keydown.tc",function(d){if(d&&("keydown"==d.type&&27!=d.which||"mousedown"==d.type&&(d=a(d.target),d.is("html,.tgAnchor,.tgContent")||e.has(d).length)))return!0;
b.trigger("close.tc");return!1});switch(g){case "slide":e.slideDown(f,h);break;case "slide-h":g=e.css({"overflow-x":"",width:""}).width();e.show().css({"overflow-x":"hidden",width:"0px"}).animate({width:g},f,function(){e.css({"overflow-x":"",width:""});h()});break;case "fade":e.fadeIn(f,h);break;default:e.show(),b.trigger("after-open.tc")}}).bind("close.tc",function(){function d(){b.trigger("after-close.tc")}var b=a(this),e,g,f;a(document).unbind("mousedown.tc keydown.tc");e=a(b.attr("href"));g=b.data("effect");
f=b.data("duration")||"fast";e.data("state","hiding");b.trigger("before-close.tc");switch(g){case "slide":e.slideUp(f,d);break;case "slide-h":e.animate({width:0},f,function(){e.hide();d()});break;case "fade":e.fadeOut(f,d);break;default:e.hide(),b.trigger("after-close.tc")}});return this};a("a.tgAnchor").xeContentToggler()});
jQuery(function(a){a.fn.xeModuleFinder=function(){this.not(".xe-module-finder").addClass("xe-module-finder").find("a.tgAnchor.findsite").bind("before-open.tc",function(){var d,h,b;d=a(this);h=a(d.attr("href")).find(">ul");b=d.prev("input:text").val();a.exec_json("admin.getSiteAllList",{domain:b},function(b){var g=b.site_list,f,k;h.empty();d.closest(".modulefinder").find(".moduleList,.moduleIdList").attr("disabled","disabled");if(b.error||!a.isArray(g))d.trigger("close.tc");else{f=0;for(k=g.length;f<
k;f++)b=a("<li />").appendTo(h),a('<button type="button" />').text(g[f].domain).data("site_srl",g[f].site_srl).appendTo(b)}})}).end().find(".tgContent.suggestion").delegate("button","click",function(){var d,h;d=a(this);h=d.closest(".modulefinder");h.find("a.tgAnchor.findsite").trigger("close.tc");a.exec_json("module.procModuleAdminGetList",{site_srl:d.data("site_srl")},function(b){var e=b.module_list,d;if(!b.error&&e){b=h.find(".moduleList").data("module_list",e).removeAttr("disabled").empty();for(d in e)e.hasOwnProperty(d)&&
a("<option />").attr("value",d).text(e[d].title).appendTo(b);b.prop("selectedIndex",0).change().focus();b.is(":visible")||b.slideDown(100,function(){h.find(".moduleIdList:not(:visible)").slideDown(100).trigger("show")}).trigger("show")}})}).end().find(".moduleList,.moduleIdList").hide().end().find(".moduleList").change(function(){var d,h,b;d=a(this);h=d.val();b=d.data("module_list");if(b[h]){b=b[h].list;d=d.closest(".modulefinder").find(".moduleIdList").removeAttr("disabled").empty();for(var e in b)b.hasOwnProperty(e)&&
a("<option />").attr("value",b[e].module_srl).text(b[e].browser_title).appendTo(d);d.prop("selectedIndex",0).change()}});return this};a(".modulefinder").xeModuleFinder()});
jQuery(function(a){var d=0;_xeModuleSearch=function(){var h=this,b=a(this),e=b.data("multiple");e||(e="");var g="__module_searcher_"+d;d++;a.exec_json("module.getModuleAdminModuleSearcherHtml",{id:g,is_multiple:e},function(d){function e(a,b){var d;a.find("li div").width("");a.css("height","auto");a.css("overflow-y","");a.height()>b&&(d=a.find("li div"),d.width(d.width()-20+"px"),a.css("height",b+"px"),a.css("overflow-y","auto"))}function j(b){var d,f=RegExp(b,"ig"),g=q;n.empty();i=0;for(c=g.length;i<
c;i++){d=g[i].domain;if(b){if(!d.match(f))continue;d=d.replace(f,function(a){return'<span class="highlight">'+a+"</span>"})}$li=a("<li />").appendTo(n);a("<a>").attr("href","#").html(d).data("site_srl",g[i].site_srl).appendTo($li)}e(n,w-t.parent("div").height());1==g.length&&n.find("a").trigger("click")}if(d&&d.html){b.after(d.html).addClass("tgAnchor").attr("href","#"+g).xeContentToggler();var l=b.next(".moduleWindow");d=l.find(".siteList");var p=l.find(".moduleList"),r=l.find(".instanceList"),n=
d.find(">ul"),z=p.find(">ul"),s=r.find(">select"),t=l.find("input.siteFinder"),q,w=280;t.keyup(function(){j(t.val())});"undefined"==typeof console&&(console={log:function(){}});b.not(".xe-module-search").addClass("xe-module-search").parent().find(".moduleTrigger").bind("before-open.tc",function(){var b;b=a(this);n.empty();s.empty();p.hide();r.hide();a.exec_json("admin.getSiteAllList",{domain:""},function(d){var e=d.site_list;d.error||!a.isArray(e)?b.trigger("close.tc"):(q=e,j(t.val()),t.focus())})});
l.find(".siteList>ul").delegate("a","click",function(b){var d;d=a(this);d.closest(".moduleSearch");z.empty();r.hide();a.exec_json("module.procModuleAdminGetList",{site_srl:d.data("site_srl")},function(b){var g=b.module_list,f;if(!b.error&&g){for(f in g)g.hasOwnProperty(f)&&($li=a("<li />").appendTo(z),a("<a>").attr("href","#").html(g[f].title).data("moduleInstanceList",g[f].list).appendTo($li));l.find(".moduleList").show();e(z,w);n.find("li").removeClass("x_active");d.parent("li").addClass("x_active")}});
b.preventDefault()}).end().find(".moduleList>ul").delegate("a","click",function(b){var d,g;d=a(this);if(g=d.data("moduleInstanceList")){h.sSelectedModuleType=d.text();s.empty();for(var f in g)g.hasOwnProperty(f)&&($li=a("<option />").html(g[f].browser_title+" ("+g[f].mid+")").appendTo(s).val(g[f].module_srl).data("mid",g[f].mid).data("module_srl",g[f].module_srl).data("layout_srl",g[f].layout_srl).data("browser_title",g[f].browser_title));r.show();e(s,w);z.find("li").removeClass("x_active");d.parent("li").addClass("x_active");
b.preventDefault()}}).end().find(".moduleSearch_ok").click(function(d){var e=[];s.find("option:selected").each(function(){e.push({type:h.sSelectedModuleType,module_srl:a(this).data("module_srl"),layout_srl:a(this).data("layout_srl"),browser_title:a(this).data("browser_title"),mid:a(this).data("mid")})});b.trigger("moduleSelect",[e]);a(".moduleTrigger").trigger("close.tc");d.preventDefault()})}});return this};a.fn.xeModuleSearch=function(){a(this).each(_xeModuleSearch)};a.fn.xeModuleSearchHtml=function(){var d=
0;a(this).each(function(){var b=a(this),e=b.attr("id");e||(e="__module_search_"+d);d++;var e=a('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>"),g=a('<input type="text" readonly>');b.after(e).after("&nbsp;").after(g).hide();e.xeModuleSearch();e.bind("moduleSelect",function(a,d){g.val(d[0].browser_title+" ("+d[0].mid+")");b.val(d[0].module_srl)});b.val()&&a.exec_json("module.getModuleAdminModuleInfo",{search_module_srl:b.val()},function(a){a&&a.module_info&&g.val(a.module_info.browser_title+" ("+
a.module_info.mid+")")})});return this}});
jQuery(function(a){var d=a.fn.hide;a.fn.hide=function(b,e,g,f){a(this).trigger("hide",[f]);a(this).find(".active").removeClass("active");var h=a(this).attr("id");a(this).hasClass("col")&&(a(this).next().hide(b,e,g,f),h&&a(this).parent().find('a[href="#'+h+'"]').parent("li.active").removeClass("active"));return d.apply(this,arguments)};var h=a.fn.show;a.fn.show=function(b,d,g,f){a(this).trigger("show",[f]);if(a(this).hasClass("col")){a(this).next().hide(b,d,g,f);var k=a(this).parent();setTimeout(function(){k.scrollTo(k.width(),
0,{duration:0})},0)}var j=h.apply(this,arguments),l=a(this);setTimeout(function(){l.trigger("after-show",[f])},0);return j}});
jQuery(function(a){a.xeMsgBox={htOptions:{}};var d=a.xeMsgBox.$msgBox=a("<section />").addClass("x_modal _common x").hide().css("z-index",9999);d.html('<button type="button" class="x_close _cancel">&times;</button>\t\t<div class="x_modal-header">\t\t\t<h1 class="_title"></h1>\t\t</div>\t\t<div class="x_modal-body">\t\t\t<div class="_text"></div>\t\t</div>\t\t<div class="x_modal-footer">\t\t\t<button type="button" class="x_btn x_pull-left _cancel">'+xe.cmd_cancel+'</button>\t\t\t<button type="submit" class="x_btn x_btn-inverse x_pull-right x_btn-primary _ok">'+
xe.cmd_confirm+"</button>\t\t</div>");a("body").append(d);d.find("._ok").click(function(){a.xeMsgBox.fnOnOK()});d.find("._cancel").click(function(){a.xeMsgBox.fnOnCancel()});d.bind("show",function(){a.xeMsgBox.bVisible=!0;a.xeMsgBox._showFoggy();a.xeMsgBox.fnOnShow();0<d.find("input,button").length&&setTimeout(function(){d.find("input,button").each(function(b,d){var g=a(d);if(g.is(":visible"))return g.focus(),!1})},0)});d.bind("hide",function(){a.xeMsgBox.bVisible=!1;a.xeMsgBox._hideFoggy();a.xeMsgBox.fnOnHide()});
a(document.body).on("keydown",function(b){a.xeMsgBox.bVisible&&27===b.keyCode&&(d.find("._cancel").click(),b.preventDefault())});a.xeMsgBox.fnOnOK=function(){"function"===typeof a.xeMsgBox.htOptions.fnOnOK&&a.xeMsgBox.htOptions.fnOnOK()||d.hide()};a.xeMsgBox.fnOnCancel=function(){"function"===typeof a.xeMsgBox.htOptions.fnOnCancel&&a.xeMsgBox.htOptions.fnOnCancel();d.hide()};a.xeMsgBox.fnOnShow=function(){"function"===typeof a.xeMsgBox.htOptions.fnOnShow&&a.xeMsgBox.htOptions.fnOnShow()};a.xeMsgBox.fnOnHide=
function(){"function"===typeof a.xeMsgBox.htOptions.fnOnHide&&a.xeMsgBox.htOptions.fnOnHide()};a.xeMsgBox.showMsgBox=function(b){a('head>link[rel="stylesheet"]:last').after('<link rel="stylesheet" href="./modules/menu/tpl/css/themes/default/style.css" />');b=a.xeMsgBox.htOptions=b||{};var e=b.sTitle||"",g=b.sText||"",f=b.bDanger||!1;d.find("._title").html(e);d.find("._text").html(g);""===g?d.addClass("_nobody"):d.removeClass("_nobody");e=d.find("._ok");f?(e.removeClass("x_btn-inverse"),e.addClass("x_btn-danger")):
(e.removeClass("x_btn-danger"),e.addClass("x_btn-inverse"));b.bSmall?d.addClass("_small"):d.removeClass("_small");b.bAlert?d.addClass("_type_alert"):d.removeClass("_type_alert");d.show()};a.xeMsgBox.alertDialog=function(a){a=a||{};a.bAlert=!0;this.showMsgBox(a)};a.xeMsgBox.alert=function(a){htOptions={bAlert:!0,bNobody:!0,bSmall:!0,sText:a};this.showMsgBox(htOptions)};a.xeMsgBox.confirmDialog=function(a){a=a||{};a.bAlert=!1;this.showMsgBox(a)};var h=a.xeMsgBox.$foggyLayer=a("<div />");h.css({position:"fixed",
top:0,left:0,backgroundColor:"#000",opacity:0.5,display:"none",zIndex:9998});a(a.find("body")).append(h);a.xeMsgBox._resizeFoggy=function(){h.css({width:0,height:0});setTimeout(function(){h.css({width:a(document).width(),height:a(document).height()})},0)};a(window).resize(a.xeMsgBox._resizeFoggy);a.xeMsgBox._resizeFoggy();a.xeMsgBox._showFoggy=function(){h.show()};a.xeMsgBox._hideFoggy=function(){h.hide()}});
jQuery(function(a){a.xeFoggy={};var d=a.xeFoggy.$foggyLayer=a("<div />");d.css({position:"fixed",top:0,left:0,backgroundColor:"#000",opacity:0.5,display:"none",zIndex:9998});a("body").append(d);a.xeFoggy._resizeFoggy=function(){d.css({width:0,height:0});setTimeout(function(){d.css({width:a(document).width(),height:a(document).height()})},0)};a(window).resize(a.xeFoggy._resizeFoggy);a.xeFoggy._resizeFoggy();a.xeFoggy.show=function(a){a?d.css({opacity:0}):d.css({opacity:0.5});d.show()};a.xeFoggy.hide=
function(){d.hide()}});
jQuery(function(a){var d=a('<tr class="placeholder"><td>&nbsp;</td></tr>');a.fn.xeSortableTable=function(){this.not(".xe-sortable-table").addClass("xe-sortable-table").delegate("button.dragBtn","mousedown.st",function(h){var b,e,g,f,k,j,l,p,r,n;if(1==h.which){e=a(this);g=e.closest("tr");f=e.closest("table");n=f.get(0).offsetParent;e=g.height();k=g.width();before_event=a.Event("before-drag.st");f.trigger(before_event);if(before_event.isDefaultPrevented())return!1;b=h.pageY;j=getOffset(g.get(0),n);
$clone=g.attr("target",!0).clone(!0).appendTo(f);r=(h=f.find("thead th")).length;h.filter("[colspan]").attr("colspan",function(a,b){r+=b-1});d.find("td").attr("colspan",r);l=[];f.find("tbody>tr:not([target],.sticky,:hidden)").each(function(){var b=a(this),d;d=getOffset(this,n);l.push({top:d.top,bottom:d.top+b.height(),$item:b})});$clone.addClass("draggable").css({position:"absolute",opacity:0.6,width:k,height:e,left:j.left,top:j.top,zIndex:100});d.css({position:"absolute",opacity:0.6,width:k,height:"10px",
left:j.left,top:j.top,backgroundColor:"#bbb",overflow:"hidden",zIndex:99}).appendTo(f);g.css("opacity",0.6);a(document).unbind("mousedown.st mouseup.st").bind("mousemove.st",function(a){var e,g,f;p=null;a=j.top-(b-a.pageY);e=0;for(g=l.length;e<g;e++)f=l[e],e&&f.top>a||e<g-1&&f.bottom<a||(p={element:f.$item},f.top>a-12?(p.state="before",d.css("top",f.top-5)):(p.state="after",d.css("top",f.bottom-5)));$clone.css({top:a})}).bind("mouseup.st",function(){var b;a(document).unbind("mousemove.st mouseup.st");
g.removeAttr("target").css("opacity","");$clone.remove();d.remove();p&&(b=a(p.element),b[p.state](g),f.trigger("after-drag.st"))})}});return this};a("table.sortable").xeSortableTable()});
jQuery(function(a){a(".filebox").bind("before-open.mw",function(){function b(h){f.html(h.html);f.find(".select").bind("click",function(){var b=a("input.select_checkbox:checked");0==b.length?(b=a(this).closest("tr").find("img.filebox_item").attr("src"))?(d.trigger("filebox.selected",[b]),d.trigger("close.mw")):alert("None selected!"):(d.trigger("filebox.selected",[b]),d.trigger("close.mw"));return!1});f.find(".x_pagination").find("a").filter(function(){return a(this).data("toggle")||a(this).parent().hasClass("x_disabled")||
a(this).parent().hasClass("x_active")?!1:!0}).bind("click",function(){var d=a(this).attr("page");a.exec_json("module.getFileBoxListHtml",{page:d},b);return!1});a("#goToFileBox").find("button").bind("click",function(){var d=a(this).prev("input").val();a.exec_json("module.getFileBoxListHtml",{page:d},b);return!1});f.closest(".x_modal-body").scrollTop(0)}var d,f,h;d=a(this);h=d.attr("href");f=a(h).find(".filebox_list");a.exec_json("module.getFileBoxListHtml",{page:"1"},b)});var d=a(".x .dsTg .__simple"),
h=a(".x .dsTg .__detail");a(".x .dsTg td.title").each(function(){var b=a(this);0==b.find("p.x_alert").length&&b.addClass("tg").find(">*:not(:first-child)").hide()});var b=a(".x .dsTg td.tg>*:not(:first-child)");d.click(function(){b.hide();h.removeClass("x_active");d.addClass("x_active")});h.click(function(){b.show();h.addClass("x_active");d.removeClass("x_active")})});
jQuery(function(a){a.fn.xeMultilingualWindow=function(d){function h(){if(j.is(":visible")&&j.find(".editMode").length){var a=j.find(".editMode");confirm(xe.msg_confirm_save_and_use_multilingual)?a.find(".save").trigger("click"):a.find(".cancel").trigger("click")}return!0}function b(){j.find(".item > fieldset").hide().prev("a").children("i").removeClass("x_icon-chevrom-up").addClass("x_icon-chevron-down");f.find('[href="#lang_create"]').trigger("click");k.find(".editMode").children("textarea").val("");
l=!1;return!0}function e(a,b){var d=f.data("lang-target");l=!1;d&&d.trigger("selected.g11n",[a,b])}function g(b,f,l,k,s){"undefined"==typeof b&&(b=1);"undefined"==typeof f&&(f=xe.current_lang);"undefined"==typeof l&&(l="");"undefined"==typeof k&&(k="");"undefined"==typeof s&&(s=!0);a.exec_json("module.getModuleAdminLangListHtml",{page:b,lang_code:f,search_keyword:l,name:k,list_count:d.list_count,mid:current_url.getQuery("mid")},function(b){b&&b.html&&(j.html(b.html),j.find(".x_pagination a").click(function(){var b=
a(this).data("page"),d=a(this).data("search_keyword"),e=a(this).data("current_lang");if(b)return g(b,e,d),!1}),j.find(".x_pagination").submit(function(){var b=a(this).find('[name="page"]').val(),d=a(this).data("search_keyword"),e=a(this).data("current_lang");if(!b)return!1;g(b,e,d);return!1}),j.find(".search").submit(function(){var b=a(this).find('[name="search_keyword"]').val(),d=a(this).find('[name="lang_code"]').val();g(1,d,b);return!1}),j.find("#search_cancel").click(function(){g(1,xe.current_lang,
"")}),j.find(".set").append('<i class="x_icon-chevron-down"></i>').click(function(){function b(e){d.next("fieldset").find("textarea").each(function(){var b=a(this),d=e.langs[b.data("lang")];/^\$user_lang->/.test(d)?b.val("").data("value",""):b.val(d).data("value",d)});d.data("is_loaded",!0)}var d=a(this),e=d.data("lang_code");h();d.next("fieldset").is(":visible")?d.children("i").removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down"):(d.parent(".item").siblings(".item").find("a > i").removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down").end().children("fieldset").hide(),
d.children("i").removeClass("x_icon-chevron-down").addClass("x_icon-chevron-up"));"undefined"==typeof d.data("is_loaded")&&a.exec_json("module.getModuleAdminLangCode",{name:e,mid:current_url.getQuery("mid")},b)}),d.view_use||j.find(".useit").hide(),d.view_modify||j.find(".modify").hide(),d.view_delete||j.find(".delete").hide(),"save"==d.modify_type&&j.find(".save").text(xe.cmd_save),j.find(".modify").click(function(){a(this).closest("fieldset").addClass("editMode").find("textarea").removeAttr("disabled");
a(this).siblings(".cancel").prependTo(a(this).parent());a(this).siblings(".delete").attr("disabled","disabled")}),j.find(".cancel").click(function(){a(this).closest("fieldset").removeClass("editMode").find("textarea").attr("disabled","disabled").each(function(){var b=a(this);b.val(b.data("value"))});a(this).siblings(".modify").prependTo(a(this).parent());a(this).siblings(".delete").removeAttr("disabled");return!1}),j.find(".delete").click(function(){confirm(xe.confirm_delete)&&(lang_name=a(this).closest(".item").find('[href^="#lang-"]').data("lang_code"),
a.exec_json("module.procModuleAdminDeleteLang",{name:lang_name,mid:current_url.getQuery("mid")},function(a){if(a)if(a.error)alert(a.message);else{var b=j.find(".x_pagination");a=b.data("page");var d=b.data("search_keyword"),b=b.data("lang_code");a||($page=1);g(a,b,d)}}))}),j.find(".item").submit(function(){var b=a(this),d=b.find(".editMode").children("textarea"),e=b.find('[href^="#lang-"]'),f={},g=null;d.each(function(){var b=a(this);f[b.attr("class")]=b.val();b.data("tmp_value",b.val());xe.current_lang==
b.attr("class")&&(g=b.val())});f.lang_name=e.data("lang_code");f.mid=current_url.getQuery("mid");a.exec_json("module.procModuleAdminInsertLang",f,function(f){f&&(!f.error&&f.name)&&(d.each(function(){var b=a(this);b.data("value",b.data("tmp_value"))}),e.children("span").html(g),j.find(".cancel").trigger("click"),b.find(".useit").trigger("click"))});return!1}),j.find(".useit").click(function(){var b=a(this).closest(".item").find('[href^="#lang-"]'),d=b.data("lang_code"),b=b.children("span").text();
e(d,b)}),s&&(document.location.href="#lang_search"),k&&a("#lang_search").find('[href^="#lang-"]').trigger("click"))})}var f=a(this),k=f.find("#lang_create"),j=f.find("#lang_search"),l=!1;d=a.extend({create_type:"save_and_use",modify_type:"save_and_use",view_use:!0,view_modify:!0,view_delete:!1,list_count:5},d||{});"save_and_use"!=d.create_type&&k.find(".save-useit").text(xe.cmd_save);f.find(".x_tabbable").xeTabbable();k.find(".editMode textarea").change(function(){l=!0});k.submit(function(){var f=
{},g=null;a(this).find(".editMode").children("textarea").each(function(){var b=a(this);f[b.attr("class")]=b.val();xe.current_lang==b.attr("class")&&(g=b.val())});if(!g)return alert(xe.msg_empty_multilingual),!1;f.mid=current_url.getQuery("mid");a.exec_json("module.procModuleAdminInsertLang",f,function(a){a&&(!a.error&&a.name)&&("save_and_use"==d.create_type?e(a.name,g):(alert(a.message),b()))});return!1});f.find('[href="#lang_search"]').click(function(a,b){"undefined"==typeof b&&g()});f.bind("reset.g11n",
function(){b()});f.bind("before-open.g11n",function(a,b){b?(g(1,xe.current_lang,"",b,!1),f.find('[href="#lang_search"]').trigger("click",!0)):g(1,xe.current_lang,"","",!1)});f.bind("before-close.g11n",function(){var a;k.is(":visible")&&l&&confirm(xe.msg_confirm_save_and_use_multilingual)&&k.find(".save-useit").trigger("click");a=!h()||!b()?!1:void 0;return a});return this}});var is_loaded_multilingual_window_html=!1;
jQuery(function(a){a.fn.xeLoadMultilingualWindowHtml=function(){a.exec_json("module.getModuleAdminMultilingualHtml",{mid:current_url.getQuery("mid")},function(d){var h=a("#content");a(d.html).appendTo(h).xeMultilingualWindow();a(".lang_code").trigger("loaded-multilingualWindow")});return this}});var multilingual_id_count=0;
jQuery(function(a){a.fn.xeApplyMultilingualUI=function(){a(this).each(function(){function d(){function d(){j.val(p.val()).width(j.data("width")).removeAttr("disabled").data("active",!1);j.parent(".g11n").removeClass("active");/^\$user_lang->/.test(j.val())&&a.exec_json("module.getModuleAdminLangCode",{name:j.val().replace("$user_lang->",""),mid:current_url.getQuery("mid")},function(a){if(a&&a.langs){var b=j.width();j.closest(".g11n").addClass("active");j.val(a.langs[xe.current_lang]).attr("disabled",
"disabled").width(b-44).data("active",!0)}})}var f=a("#g11n"),k=h.width(),j="TEXTAREA"==b.tagName||"textarea"==h.data("type")?a('<textarea id="lang_'+e+'" class="lang_code" style="width:'+k+'px" data-width="'+k+'">').data("lang-id",e):a('<input type="text" id="lang_'+e+'" class="lang_code" style="width:'+(k-28)+'px" data-width="'+(k-28)+'">').data("lang-id",e);j.attr("placeholder",h.attr("placeholder"));var k=a('<button type="button" class="x_add-on remover" title="'+xe.cmd_remove_multilingual_text+
'"><i class="x_icon-remove"></i>'+xe.cmd_remove_multilingual_text+"</button>").data("lang-target",e),l=a('<a href="#g11n" class="x_add-on modalAnchor" title="'+xe.cmd_set_multilingual_text+'"><i class="x_icon-globe"></i>'+xe.cmd_set_multilingual_text+"</a>").data("lang-target",e);h.parent().addClass("g11n").addClass("x_input-append");h.after(j,k,l);h.hide();l.attr("href","#g11n").xeModalWindow();j.bind("selected.g11n",function(a,b,d){a=j.width();j.data("active")||(a-=44);j.width(a).attr("disabled",
"disabled").val(d).data("active",!0).parent(".g11n").addClass("active");j.siblings("#"+j.data("lang-id")).val("$user_lang->"+b);l.trigger("close.mw")});l.bind("open.mw",function(){a(this);j.data("active")?f.trigger("before-open.g11n",j.prev(".lang_code").val().replace("$user_lang->","")):f.trigger("before-open.g11n");f.data("lang-target",j)});l.bind("before-close.mw",function(){return f.trigger("before-close.g11n")});k.click(function(){var b=a(this),d=a("#lang_"+b.data("lang-target"));if(d.data("active")){var e=
d.width();d.val("").removeAttr("disabled").width(e+44).data("active",!1).parent(".g11n").removeClass("active");b.siblings(".lang_code").val("")}});var p=h;j.bind("change keyup",function(){h=a(this);h.data("active")||p.val(h.val())});h.bind("reload-multilingual",d);d()}is_loaded_multilingual_window_html||(a().xeLoadMultilingualWindowHtml(),is_loaded_multilingual_window_html=!0);var h=a(this),b=this;h.parent().hasClass("g11n")?h.siblings().remove():h.wrap("<span></span>");var e=h.attr("id");e||(e="__lang_code_"+
multilingual_id_count,multilingual_id_count++,h.attr("id",e));a("#g11n").length?d():h.bind("loaded-multilingualWindow",d)});return this};a('.vLang[type="hidden"]').each(function(){var d=a(this);d.next("textarea.vLang").length&&d.data("type","textarea");d.removeClass("vLang").addClass("lang_code");d.parent().find(".editUserLang").remove().end().find(".vLang").remove()});a(".lang_code").xeApplyMultilingualUI()});
function getOffset(a,d){for(var h=0,b=0;a&&a!=d;)h+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;return{top:h,left:b}}jQuery._xeAdminVar=jQuery._xeAdminVar||{};
jQuery(function(a){function d(a){var d=jQuery;a=b(a.menuList,0,"menuSelector_menuTree","menuSelector_menuTreeNode");f.html(a);j=d.xeMenuSelectorVar.bMultiSelect;a={plugins:["themes","html_data","ui","crrm"],crrm:{move:{check_move:function(a){var b=this._get_parent(a.o);if(-1===b)return!1;b=this._get_parent(a.np);return!b?!1:!0}}},core:{}};j||(a.ui={select_multiple_modifier:!1});f.jstree(a).bind("loaded.jstree",function(a,b){b.inst.open_all();var e=d._xeAdminVar.sRenameOnload;d._xeAdminVar.sRenameOnload=
null;var f=d._xeAdminVar.sSelectOnload;d._xeAdminVar.sSelectOnload=null;e&&(d("#siteMapTree").jstree("rename",d("#menu"+e)),d("#menu"+e)[0].scrollIntoView(!0));if(f&&(e=d("#menu"+f)[0]))d("#siteMapTree").jstree("select_node",d(e)),e.scrollIntoView(!0);d(this).find("A._menu_node").filter(function(a,b){var e=d(b);h(e)||e.css("opacity","0.2")})}).bind("select_node.jstree",function(){}).bind("before.jstree",function(a,b){if("select_node"==b.func&&($node=d(b.args[0]),!h($node)))return a.stopImmediatePropagation(),
!1});f.find("._nodeType_1, ._nodeType_3").parent("li").addClass("x_disabled")}function h(b){b=a.parseJSON(b.attr("data-param"));return 0<a.xeMenuSelectorVar.aAllowedType.length&&0>a.inArray(b.sType,a.xeMenuSelectorVar.aAllowedType)||-1<a.inArray(b.sType,a.xeMenuSelectorVar.aDisallowedType)?!1:!0}function b(a,d,e,f){var g=jQuery;e=e||"menuSelector_menuTree";f=f||"menuSelector_menuTreeNode";g=jQuery;if(0==a.length)return"";for(var h,j,q,w,u,v,x,C,A="",B,m=0,D=a.length;m<D;m++){a[m].sParentSrl=d;x=a[m].menuSrl?
1:2;q="";switch(x){case 1:j=a[m].title;h=a[m].menuSrl;u=a[m].menuItems.list;B="#propertiesRoot";v="_ROOT";break;case 2:j=a[m].text,q=a[m].url,h=a[m].node_srl,w=a[m].is_start_module,u=a[m].list,v=a[m].module_type,sModule=a[m].module,B="#properties","Y"===a[m].is_shortcut?(v="_SHORTCUT",q="",a[m].bShortCut=!0):a[m].bShortCut=!1}k[h]=a[m];k[h].aNode=u||[];k[h].nNodeType=x;k[h].sNodeSrl=h;k[h].sText=j;k[h].sMenuNameKey=k[h].menu_name_key;k[h].sModuleSrl=C=k[h].module_srl;k[h].sModuleType=v;sSubTree="";
u&&0<u.length&&(sSubTree=b(u,h,e,f));var y=j;w&&(y+=" ${h}");"_SHORTCUT"===k[h].sModuleType&&(y+=" ${s}",x=3);q=g.tmpl(f,{MenuTitleWithHome:y,MenuTitle:j,MenuId:h,MenuUrl:q,NodeType:x,MenuType:v,SubTree:sSubTree,Target:B,ModuleSrl:C}).data("sMenuId",h).data("sMenuUrl",q).data("sMenuTitle",j).data("sMenuType",v);A+=q[0].outerHTML.replace("${h}","<i class='x_icon-home' title='Home Page'>[HOME]</i>").replace("${s}","<i class='x_icon-share' title='Shortcut'></i>")}return g.tmpl(e,{Nodes:A}).get()[0].outerHTML}
function e(b){var d=a(b.target);a.xeMenuSelectorVar.bMultiSelect="true"==""+d.data("multiple");a.xeMenuSelectorVar.aAllowedType=a.grep((""+(d.data("allowedType")||"")).split(","),function(a){return""!==a});a.xeMenuSelectorVar.aDisallowedType=a.grep((""+(d.data("disallowedType")||"")).split(","),function(a){return""!==a});a.xeMenuSelectorVar.aDisallowedType.push("_ROOT");a.xeMenuSelectorVar.aDisallowedType.push("_SHORTCUT");-1<a.inArray("page",a.xeMenuSelectorVar.aAllowedType)&&a.xeMenuSelectorVar.aAllowedType.push("ARTICLE",
"WIDGET","OUTSIDE");-1<a.inArray("page",a.xeMenuSelectorVar.aDisallowedType)&&a.xeMenuSelectorVar.aDisallowedType.push("ARTICLE","WIDGET","OUTSIDE");a.xeMenuSelectorVar.$container=a.xeMsgBox.$msgBox;a.xeMsgBox.confirmDialog({sTitle:xe.msg_select_menu,sText:'<select class="site_selector" style="width:100%;display:none"></select><div class="tree"></div>',bSmall:!0,bDanger:!0,fnOnOK:function(){var b=[];f.find(".jstree-clicked").each(function(){var d=a.parseJSON(a(this).attr("data-param"));b.push({browser_title:d.sMenuTitle,
mid:d.sMenuUrl,module_srl:d.sModuleSrl,menu_id:d.sMenuId,type:d.sType})});d.trigger("moduleSelect",[b])}});a.exec_json("admin.getSiteAllList",{domain:""},g)}function g(b){b=b.site_list;f=a.xeMenuSelectorVar.$container.find(".tree");var d=a.xeMenuSelectorVar.$container.find(".site_selector"),e=b.length;if(1>=e)d.hide();else{d.html("");for(var g=0;g<e;g++)d.append(a("<option>").val(b[g].site_srl).html(b[g].domain));d.show()}a.xeShowMenuSelector(f,"0")}var f,k,j;a.xeMenuSelectorVar={bMultiSelect:!1};
a.template("menuSelector_menuTree","<ul>{{html Nodes}}</ul>");a.template("menuSelector_menuTreeNode",'\t<li>\t\t<a href="#" class="_nodeType_${NodeType} _menu_node _menu_url_${MenuUrl}" data-param=\'{ "sMenuId":"${MenuId}", "sMenuUrl":"${MenuUrl}", "sMenuTitle":"${MenuTitle}", "sType":"${MenuType}", "sModuleSrl":"${ModuleSrl}" }\'>${MenuTitle}</a>\t\t{{html SubTree}}\t</li>');a.xeShowMenuSelector=function(a,b){var e=jQuery,g={menu_srl:0,site_srl:b};f=a;k={};e.exec_json("menu.getMenuAdminSiteMap",
g,d)};a.xeShowMenuSelectorIn=function(b){a.xeMenuSelectorVar.$container=b;a.xeMenuSelectorVar.bMultiSelect="true"==""+b.data("multiple");a.xeMenuSelectorVar.aAllowedType=a.grep((""+(b.data("allowedType")||"")).split(","),function(a){return""!==a});a.xeMenuSelectorVar.aDisallowedType=a.grep((""+(b.data("disallowedType")||"")).split(","),function(a){return""!==a});a.xeMenuSelectorVar.aDisallowedType.push("_ROOT");a.xeMenuSelectorVar.aDisallowedType.push("_SHORTCUT");b.not("._eventBound").addClass("_eventBound").on("change",
".site_selector",function(){var d=a(this).val();a.xeShowMenuSelector(b.find(".tree"),d);b.trigger("site_changed")});a.exec_json("admin.getSiteAllList",{domain:""},g)};a.fn.xeMenuSearchHtml=function(){var b=0;a(this).each(function(){var d=a(this),f=d.attr("id");f||(f="__module_search_"+b);b++;var f=d.attr("data-multiple"),g=d.attr("data-allowedType"),h=d.attr("data-disallowedType"),j=a('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>");j.data("multiple",f);j.data("allowedType",g);j.data("disallowedType",
h);var k=a('<input type="text" readonly>');d.after(j).after("&nbsp;").after(k).hide();j.data("multiple",a(this).data("multiple"));j.on("click",e);j.bind("moduleSelect",function(a,b){k.val(b[0].browser_title+" ("+b[0].mid+")");d.val(b[0].module_srl)});d.val()&&a.exec_json("module.getModuleAdminModuleInfo",{search_module_srl:d.val()},function(a){a&&a.module_info&&k.val(a.module_info.browser_title+" ("+a.module_info.mid+")")})});return this};$msgBox=a(".x_modal._common");$msgBox.on("change",".site_selector",
function(){var b=a(this).val();a.xeShowMenuSelector(f,b)});a.fn.xeMenuSearch=function(){a(this).each(function(b,d){a(d).on("click",e)})};a(".module_search").xeMenuSearchHtml();a(".moduleTrigger").xeMenuSearch()});jQuery(function(a){try{window.alert=function(){return a.xeMsgBox.alert.apply(a.xeMsgBox,arguments)},setTimeout(function(){a("div.message.info").fadeOut(1E3)},2500)}catch(d){}});
jQuery(function(a){a("#site,.x_modal._common").on("keydown","input",function(d){var h,b;if(13===d.keyCode)for(h=a(d.target).parent();h&&!h.hasClass("col");){b=h.find("button.x_btn-primary,button.x_btn-inverse");if(0<b.length){a(d.target).hasClass("lang_code")&&a(d.target).blur();d.preventDefault();b.click();break}h=h.parent()}})});
