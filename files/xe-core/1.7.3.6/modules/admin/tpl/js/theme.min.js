jQuery(function(b){b("#theme,#skin").find("button.showAll").text("Show All").click(function(){var a=b(this),c=b("#skin").find(">.thumbPreview");a.toggleClass("hideAll").hasClass("hideAll")?(a.text("Hide All"),c.children("li").addClass("active").removeClass("highlight").eq(0).addClass("highlight").end().find(">ul.a:not(.selected)").show()):(a.text("Show All"),c.children("li").removeClass("active highlight").find(">ul.a:not(.selected)").hide())}).end().find(">.thumbPreview").removeClass("jx").find("ul.a").hide().before('<ul class="a selected"></ul>').prev("ul.a").each(function(){var a=
b(this);a.delegate("span.thumb","click",function(){b(this).closest(".a").nextAll("a.prevToggle:first").trigger("toggle.tp");return!1}).append(a.next(".a").find(">li.noDirection:first"))}).end().after('<a href="#toggle-tp" class="prevToggle">Show</a>').next("a.prevToggle").bind("toggle.tp",function(){var a=b(this).prev(".a");a.closest(".thumbPreview").children("li").removeClass("highlight").end();a.parent().toggleClass("active").hasClass("active")?a.slideDown(100).closest("li").addClass("highlight"):
a.slideUp(100)}).click(function(){b(this).trigger("toggle.tp");return!1}).end().find("span.thumb").attr("role","radio").click(function(){b(this).next("input:radio").prop("checked",!0).change()}).end().find("> .i > label").attr("title",function(){return b(this).text()}).end().find("input:radio").bind("redraw",function(){var a=b(this),c=a.closest(".a").prev(".a"),e=a.val();e!=c.find(">li:eq(1)").data("value")&&(c.find(">li:not(.noDirection)").remove(),e?(a.closest("li").clone().find("input:radio").remove().end().find("label").wrapInner("<strong>").find(">strong").text(function(){return b(this).attr("title")}).unwrap().end().end().appendTo(c),
c.find(">li.noDirection").hide()):c.children("li.noDirection").show())}).change(function(){var a=b(this);a.trigger("redraw");"themeItem"!=a.attr("name")&&b("#theme").trigger("select-theme")}).filter(":checked").change().end().filter('[name="themeItem"]').change(function(){var a=b(this),c,e;if(a=(b("#theme").data("themes")||{})[a.val()]){c=b("#skin").find(".i > input:radio").filter('[value=""]').prop("checked",!0).end();for(var d in a)a.hasOwnProperty(d)&&(e="layout"==d?d:d+"-skin",a[d]&&c.filter('[name="'+
e+'"][value="'+a[d]+'"]').prop("checked",!0));c.filter(":checked").trigger("redraw")}}).end();b("#theme").bind("select-theme",function(){function a(a){var b="",c;for(c in a)if(a.hasOwnProperty(c)&&("layout"==c||j.elements[c+"-skin"]))b+=c+"\t"+a[c]+"\n";return b}var c=b(this),e,d,j,f,k={};e=c.data("themes")||{};d=b("#skin").find(".i > input:radio");f=d.filter(':checked[value!=""]').get();j=d.get(0).form;for(var g=0,l=f.length;g<l;g++)d=f[g].name.match(/^layout|(\w+)-skin$/),k[d[1]||d[0]]=f[g].value;
f=a(k);for(var h in e)if(e.hasOwnProperty(h)&&f==a(e[h])){c.find('input:radio[name="themeItem"][value="'+h+'"]').prop("checked",!0).change();return}c.find('input:radio[name="themeItem"][value="user_define"]').prop("checked",!0).change()})});
