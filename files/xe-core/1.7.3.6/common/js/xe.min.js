(function(g){var c,a,d;var e=[];c={getName:function(){return"Core"},createApp:function(j,h){var i=b();g.extend(i.prototype,a,h);i.prototype.getName=function(){return j};return i},createPlugin:function(j,h){var i=b();g.extend(i.prototype,d,h);i.prototype.getName=function(){return j};return i},getApps:function(){return g.makeArray(e)},getApp:function(h){h=(h||"").toLowerCase();if(typeof e[h]!="undefined"){return e[h]}else{return null}},registerApp:function(h){var i=h.getName().toLowerCase();e.push(h);if(!g.isArray(e[i])){e[i]=[]}e[i].push(h);h.parent=this;if(g.isFunction(h.activate)){h.activate()}},unregisterApp:function(i){var j=i.getName().toLowerCase();var h=g.inArray(i,e);if(h>=0){e=e.splice(h,1)}if(g.isArray(e[j])){h=g.inArray(i,e[j]);if(h>=0){e[j]=e[j].splice(h,1)}}if(g.isFunction(i.deactivate)){i.deactivate()}},broadcast:function(i,h){this._broadcast(this,i,h)},_broadcast:function(j,l,k){for(var h=0;h<e.length;h++){e[h]._cast(j,l,k)}this._cast(j,l,k)}};a={_plugins:[],_messages:{},getPlugin:function(h){h=h.toLowerCase();if(g.isArray(this._plugins[h])){return this._plugins[h]}else{return[]}},registerPlugin:function(j){var h=this;var i=j.getName().toLowerCase();if(g.inArray(j,this._plugins)>=0){return false}this._plugins.push(j);if(!g.isArray(this._plugins[i])){this._plugins[i]=[]}this._plugins[i].push(j);g.each(j._binded_fn,function(l,k){h.registerHandler(l,k)});j.oApp=this;if(g.isFunction(j.activate)){j.activate()}return true},registerHandler:function(h,i){var j=this._messages;h=h.toUpperCase();if(!g.isArray(j[h])){j[h]=[]}j[h].push(i)},cast:function(i,h){return this._cast(this,i,h||[])},broadcast:function(h,j,i){if(this.parent&&this.parent._broadcast){this.parent._broadcast(h,j,i)}},_cast:function(k,h,j){var l,m;var q=this._messages;h=h.toUpperCase();if(q["BEFORE_"+h]||this["API_BEFORE_"+h]){var n=this._cast(k,"BEFORE_"+h,j);if(!n){return}}var p=[],o="API_"+h;if(g.isArray(q[h])){for(l=0;l<q[h].length;l++){p.push(q[h][l](k,j))}}if(p.length<2){p=p[0]}if(q["AFTER_"+h]||this["API_AFTER_"+h]){this._cast(k,"AFTER_"+h,j)}if(!/^(?:AFTER|BEFORE)_/.test(h)){return p}else{return g.isArray(p)?(g.inArray(false,p)<0):((typeof p=="undefined")?true:!!p)}}};d={oApp:null,cast:function(i,h){if(this.oApp&&this.oApp._cast){return this.oApp._cast(this,i,h||[])}},broadcast:function(i,h){if(this.oApp&&this.oApp.broadcast){this.oApp.broadcast(this,mag,h||[])}}};function b(){var h=function(){var i=this;var j=null;if(g.isArray(this._plugins)){this._plugins=[]}if(this._messages){this._messages={}}else{this._binded_fn={}}g.each(this,function(k,n){if(!g.isFunction(n)){return true}if(!/^API_([A-Z0-9_]+)$/.test(k)){return true}var m=RegExp.$1;var l=function(o,p){return i[k](o,p)};if(i._messages){i._messages[m]=[l]}else{i._binded_fn[m]=l}});if(g.isFunction(this.init)){this.init.apply(this,arguments)}};return h}window.xe=g.extend(a,c);window.xe.lang={};g(function(){xe.broadcast("ONREADY")});g(window).load(function(){xe.broadcast("ONLOAD")})})(jQuery);if(jQuery){jQuery.noConflict()}(function(b){var a=navigator.userAgent.toLowerCase();b.os={Linux:/linux/.test(a),Unix:/x11/.test(a),Mac:/mac/.test(a),Windows:/win/.test(a)};b.os.name=(b.os.Windows)?"Windows":(b.os.Linux)?"Linux":(b.os.Unix)?"Unix":(b.os.Mac)?"Mac":"";window.XE={loaded_popup_menus:new Array(),addedDocument:new Array(),checkboxToggleAll:function(d){if(!is_def(d)){d="cart"}var c={wrap:null,checked:"toggle",doClick:false};switch(arguments.length){case 1:if(typeof(arguments[0])=="string"){d=arguments[0]}else{b.extend(c,arguments[0]||{});d="cart"}break;case 2:d=arguments[0];b.extend(c,arguments[1]||{})}if(c.doClick==true){c.checked=null}if(typeof(c.wrap)=="string"){c.wrap="#"+c.wrap}if(c.wrap){var e=b(c.wrap).find("input[name="+d+"]:checkbox")}else{var e=b("input[name="+d+"]:checkbox")}if(c.checked=="toggle"){e.each(function(){b(this).attr("checked",(b(this).attr("checked"))?false:true)})}else{(c.doClick==true)?e.click():e.attr("checked",c.checked)}},displayPopupMenu:function(l,e,j){var t=j.target_srl;var s=j.menu_id;var k=l.menus;var o="";if(this.loaded_popup_menus[s]){o=this.loaded_popup_menus[s]}else{if(k){var u=k.item;if(typeof(u.length)=="undefined"||u.length<1){u=new Array(u)}if(u.length){for(var m=0;m<u.length;m++){var d=u[m].url;var q=u[m].str;var r=u[m].icon;var p=u[m].target;var c="";var n="";switch(p){case"popup":n=" onclick=\"popopen(this.href,'"+p+"'); return false;\"";break;case"javascript":n=' onclick="'+d+'; return false; "';d="#";break}o+="<li "+c+'><a href="'+d+'"'+n+">"+q+"</a></li> "}}}this.loaded_popup_menus[s]=o}if(o){var g=b("#popup_menu_area").html("<ul>"+o+"</ul>");var h={top:j.page_y,left:j.page_x};if(g.outerHeight()+h.top>b(window).height()+b(window).scrollTop()){h.top=b(window).height()-g.outerHeight()+b(window).scrollTop()}if(g.outerWidth()+h.left>b(window).width()+b(window).scrollLeft()){h.left=b(window).width()-g.outerWidth()+b(window).scrollLeft()}g.css({top:h.top,left:h.left}).show().focus()}}}})(jQuery);jQuery(function(c){if(c.browser.msie){c("select").each(function(h,d){var g=false;var k=new Array();for(var e=0;e<d.options.length;e++){if(d.options[e].disabled){d.options[e].style.color="#CCCCCC";g=true}else{k[h]=(k[h]>-1)?k[h]:e}}if(!g){return}d.oldonchange=d.onchange;d.onchange=function(){if(this.options[this.selectedIndex].disabled){this.selectedIndex=k[h]}else{if(this.oldonchange){this.oldonchange()}}};if(d.selectedIndex>=0&&d.options[d.selectedIndex].disabled){d.onchange()}})}var a=c(".xe_content .fold_button");if(a.size()){var b=c("div.fold_container",a);c("button.more",a).click(function(){c(this).hide().next("button").show().parent().next(b).show()});c("button.less",a).click(function(){c(this).hide().prev("button").show().parent().next(b).hide()})}jQuery('input[type="submit"],button[type="submit"]').click(function(e){var d=jQuery(e.currentTarget);setTimeout(function(){return function(){d.attr("disabled","disabled")}}(),0);setTimeout(function(){return function(){d.removeAttr("disabled")}}(),3000)})});(function(){function a(d,c){return(d.replace(/#.*$/,"")===c.replace(/#.*$/,""))}var b=Array.isArray||function(c){return Object.prototype.toString.call(c)=="[object Array]"};String.prototype.getQuery=function(e){var i=a(this,window.location.href)?current_url:this;var c=i.indexOf("?");if(c==-1){return null}var h=i.substr(c+1,this.length),d={};h.replace(/([^=]+)=([^&]*)(&|$)/g,function(){d[arguments[1]]=arguments[2]});var g=d[e];if(typeof(g)=="undefined"){g=""}return g};String.prototype.setQuery=function(q,e){var k=a(this,window.location.href)?current_url:this;var p=k.indexOf("?");var g=k.replace(/#$/,"");var l,s,r;if(typeof(e)=="undefined"){e=""}if(p!=-1){var j=g.substr(p+1,k.length),m={},u=[];g=k.substr(0,p);j.replace(/([^=]+)=([^&]*)(&|$)/g,function(i,c,v){m[c]=v});m[q]=e;for(var d in m){if(!m.hasOwnProperty(d)){continue}if(!(r=String(m[d]).trim())){continue}u.push(d+"="+decodeURI(r))}j=u.join("&");g=g+(j?"?"+j:"")}else{if(String(e).trim()){g=g+"?"+q+"="+e}}s=/^https:\/\/([^:\/]+)(:\d+|)/i;if(s.test(g)){var t="http://"+RegExp.$1;if(window.http_port&&http_port!=80){t+=":"+http_port}g=g.replace(s,t)}var o=!!window.enforce_ssl;if(!o&&b(window.ssl_actions)&&(l=g.getQuery("act"))){for(var h=0,n=ssl_actions.length;h<n;h++){if(ssl_actions[h]===l){o=true;break}}}s=/http:\/\/([^:\/]+)(:\d+|)/i;if(o&&s.test(g)){var t="https://"+RegExp.$1;if(window.https_port&&https_port!=443){t+=":"+https_port}g=g.replace(s,t)}g=g.replace(/\/(index\.php)?\?/,"/index.php?");return encodeURI(g)};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}})();function xSleep(b){b=b/1000;var a=new Date();var c=new Date();while(c.getTime()-a.getTime()<b){c=new Date()}}function isDef(){for(var a=0;a<arguments.length;++a){if(typeof(arguments[a])=="undefined"){return false}}return true}var winopen_list=new Array();function winopen(a,g,b){if(typeof(xeVid)!="undefined"&&a.indexOf(request_uri)>-1&&!a.getQuery("vid")){a=a.setQuery("vid",xeVid)}try{if(g!="_blank"&&winopen_list[g]){winopen_list[g].close();winopen_list[g]=null}}catch(d){}if(typeof(g)=="undefined"){g="_blank"}if(typeof(b)=="undefined"){b=""}var c=window.open(a,g,b);c.focus();if(g!="_blank"){winopen_list[g]=c}}function popopen(a,b){if(typeof(b)=="undefined"){b="_blank"}if(typeof(xeVid)!="undefined"&&a.indexOf(request_uri)>-1&&!a.getQuery("vid")){a=a.setQuery("vid",xeVid)}winopen(a,b,"width=800,height=600,scrollbars=yes,resizable=yes,toolbars=no")}function sendMailTo(a){location.href="mailto:"+a}function move_url(a,b){if(!a){return false}if(typeof(b)=="undefined"){b="N"}if(b=="N"){b=false}else{b=true}if(/^\./.test(a)){a=request_uri+a}if(b){winopen(a)}else{location.href=a}return false}function displayMultimedia(e,d,a,b){var c=_displayMultimedia(e,d,a,b);if(c){document.writeln(c)}}function _displayMultimedia(a,c,j,l){if(a.indexOf("files")==0){a=request_uri+a}var e={wmode:"transparent",allowScriptAccess:"sameDomain",quality:"high",flashvars:"",autostart:false};var d=jQuery.extend(e,l||{});var k=(d.autostart&&d.autostart!="false")?"true":"false";delete (d.autostart);var g="";var h="";var i="";if(/\.(gif|jpg|jpeg|bmp|png)$/i.test(a)){i='<img src="'+a+'" width="'+c+'" height="'+j+'" />'}else{if(/\.flv$/i.test(a)||/\.mov$/i.test(a)||/\.moov$/i.test(a)||/\.m4v$/i.test(a)){i='<embed src="'+request_uri+'common/img/flvplayer.swf" allowfullscreen="true" autostart="'+k+'" width="'+c+'" height="'+j+'" flashvars="&file='+a+"&width="+c+"&height="+j+"&autostart="+k+'" wmode="'+d.wmode+'" />'}else{if(/\.swf/i.test(a)){g="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";if(typeof(enforce_ssl)!="undefined"&&enforce_ssl){h="https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0"}else{h="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0"}i='<object classid="'+g+'" codebase="'+h+'" width="'+c+'" height="'+j+'" flashvars="'+d.flashvars+'">';i+='<param name="movie" value="'+a+'" />';for(var b in d){if(d[b]!="undefined"&&d[b]!=""){i+='<param name="'+b+'" value="'+d[b]+'" />'}}i+='<embed src="'+a+'" autostart="'+k+'"  width="'+c+'" height="'+j+'" flashvars="'+d.flashvars+'" wmode="'+d.wmode+'"></embed></object>'}else{if(jQuery.browser.mozilla||jQuery.browser.opera){k=(d.autostart&&d.autostart!="false")?"1":"0"}i='<embed src="'+a+'" autostart="'+k+'" width="'+c+'" height="'+j+'"';if(d.wmode=="transparent"){i+=' windowlessvideo="1"'}i+="></embed>"}}}return i}function zbxe_folder_open(a){jQuery("#folder_open_"+a).hide();jQuery("#folder_close_"+a).show();jQuery("#folder_"+a).show()}function zbxe_folder_close(a){jQuery("#folder_open_"+a).show();jQuery("#folder_close_"+a).hide();jQuery("#folder_"+a).hide()}function setFixedPopupSize(){var g=jQuery,j=g(window),b=g("body>.popup"),a,d,c,e,i;i=b.css({overflow:"scroll"}).offset();a=b.width(10).height(10000).get(0).scrollWidth+i.left*2;d=b.height(10).width(10000).get(0).scrollHeight+i.top*2;if(a<800){a=800+i.left*2}c=j.width();e=j.height();if(a!=c){window.resizeBy(a-c,0)}if(d!=e){window.resizeBy(0,d-e)}b.width(a-i.left*2).css({overflow:"",height:""})}function doCallModuleAction(a,c,b){var d={target_srl:b,cur_mid:current_mid,mid:current_mid};exec_xml(a,c,d,completeCallModuleAction)}function completeCallModuleAction(a,b){if(a.message!="success"){alert(a.message)}location.reload()}function completeMessage(a){alert(a.message);location.reload()}function doChangeLangType(a){if(typeof(a)=="string"){setLangType(a)}else{var b=a.options[a.selectedIndex].value;setLangType(b)}location.href=location.href.setQuery("l","")}function setLangType(b){var a=new Date();a.setTime(a.getTime()+(7000*24*3600000));setCookie("lang_type",b,a,"/")}function doDocumentPreview(e){var a=e;while(a.nodeName!="FORM"){a=a.parentNode}if(a.nodeName!="FORM"){return}var b=a.getAttribute("editor_sequence");var c=editorGetContent(b);var d=window.open("","previewDocument","toolbars=no,width=700px;height=800px,scrollbars=yes,resizable=yes");var g=jQuery("#previewDocument");if(!g.length){jQuery('<form id="previewDocument" target="previewDocument" method="post" action="'+request_uri+'"><input type="hidden" name="module" value="document" /><input type="hidden" name="act" value="dispDocumentPreview" /><input type="hidden" name="content" /></form>').appendTo(document.body);g=jQuery("#previewDocument")[0]}else{g=g[0]}if(g){g.content.value=c;g.submit()}}function doDocumentSave(g){var b=g.form.getAttribute("editor_sequence");var i=editorRelKeys[b]["content"].value;if(typeof(b)!="undefined"&&b&&typeof(editorRelKeys)!="undefined"&&typeof(editorGetContent)=="function"){var c=editorGetContent(b);editorRelKeys[b]["content"].value=c}var h={},e=["error","message","document_srl"],a=g.form.elements,d=jQuery(g.form).serializeArray();jQuery.each(d,function(j,k){var l=jQuery.trim(k.value);if(!l){return true}if(/\[\]$/.test(k.name)){k.name=k.name.replace(/\[\]$/,"")}if(h[k.name]){h[k.name]+="|@|"+l}else{h[k.name]=k.value}});exec_xml("document","procDocumentTempSave",h,completeDocumentSave,e,h,g.form);editorRelKeys[b]["content"].value=i;return false}function completeDocumentSave(a){jQuery("input[name=document_srl]").eq(0).val(a.document_srl);alert(a.message)}var objForSavedDoc=null;function doDocumentLoad(a){objForSavedDoc=a.form;popopen(request_uri.setQuery("module","document").setQuery("act","dispTempSavedList"))}function doDocumentSelect(a){if(!opener||!opener.objForSavedDoc){window.close();return}opener.location.href=opener.current_url.setQuery("document_srl",a).setQuery("act","dispBoardWrite");window.close()}function viewSkinInfo(a,b){popopen("./?module=module&act=dispModuleSkinInfo&selected_module="+a+"&skin="+b,"SkinInfo")}var addedDocument=new Array();function doAddDocumentCart(b){var a=b.value;addedDocument[addedDocument.length]=a;setTimeout(function(){callAddDocumentCart(addedDocument.length)},100)}function callAddDocumentCart(a){if(addedDocument.length<1||a!=addedDocument.length){return}var b=new Array();b.srls=addedDocument.join(",");exec_xml("document","procDocumentAddCart",b,null);addedDocument=new Array()}function transRGB2Hex(d){if(!d){return d}if(d.indexOf("#")>-1){return d.replace(/^#/,"")}if(d.toLowerCase().indexOf("rgb")<0){return d}d=d.replace(/^rgb\(/i,"").replace(/\)$/,"");value_list=d.split(",");var c="";for(var b=0;b<value_list.length;b++){var a=parseInt(value_list[b],10).toString(16);if(a.length==1){a="0"+a}c+=a}return c}function toggleSecuritySignIn(){var a=location.href;if(/https:\/\//i.test(a)){location.href=a.replace(/^https/i,"http")}else{location.href=a.replace(/^http/i,"https")}}function reloadDocument(){location.reload()}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var l,j,g,k,h,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){l=c.charCodeAt(b++);j=c.charCodeAt(b++);g=c.charCodeAt(b++);k=l>>2;h=((l&3)<<4)|(j>>4);e=((j&15)<<2)|(g>>6);d=g&63;if(isNaN(j)){e=d=64}else{if(isNaN(g)){d=64}}a=a+this._keyStr.charAt(k)+this._keyStr.charAt(h)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var l,j,g;var k,h,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){k=this._keyStr.indexOf(c.charAt(b++));h=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(e>>2);g=((e&3)<<6)|d;a=a+String.fromCharCode(l);if(e!=64){a=a+String.fromCharCode(j)}if(d!=64){a=a+String.fromCharCode(g)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};if(typeof(resizeImageContents)=="undefined"){function resizeImageContents(){}}if(typeof(activateOptionDisabled)=="undefined"){function activateOptionDisabled(){}}objectExtend=jQuery.extend;function toggleDisplay(a){jQuery("#"+a).toggle()}function svc_folder_open(a){jQuery("#_folder_open_"+a).hide();jQuery("#_folder_close_"+a).show();jQuery("#_folder_"+a).show()}function svc_folder_close(a){jQuery("#_folder_open_"+a).show();jQuery("#_folder_close_"+a).hide();jQuery("#_folder_"+a).hide()}function open_calendar(c,d,b){if(typeof(d)=="undefined"){d=""}var a="./common/tpl/calendar.php?";if(c){a+="fo_id="+c}if(d){a+="&day_str="+d}if(b){a+="&callback_func="+b}popopen(a,"Calendar")}var loaded_popup_menus=XE.loaded_popup_menus;function createPopupMenu(){}function chkPopupMenu(){}function displayPopupMenu(a,b,c){XE.displayPopupMenu(a,b,c)}function GetObjLeft(a){return jQuery(a).offset().left}function GetObjTop(a){return jQuery(a).offset().top}function replaceOuterHTML(b,a){jQuery(b).replaceWith(a)}function getOuterHTML(a){return jQuery(a).html().trim()}function setCookie(b,c,a,e){var d=b+"="+escape(c)+((!a)?"":("; expires="+a.toGMTString()))+"; path="+((!e)?"/":e);document.cookie=d}function getCookie(b){var a=document.cookie.match(new RegExp(b+"=(.*?)(?:;|$)"));if(a){return unescape(a[1])}}function is_def(a){return(typeof(a)!="undefined")}function ucfirst(a){return a.charAt(0).toUpperCase()+a.slice(1)}function get_by_id(a){return document.getElementById(a)}jQuery(function(a){a(document).click(function(d){var e=a("#popup_menu_area");if(!e.length){e=a('<div id="popup_menu_area" tabindex="0" style="display:none;z-index:9999" />').appendTo(document.body)}e.hide();var b=a(d.target).filter("a,div,span");if(!b.length){b=a(d.target).closest("a,div,span")}if(!b.length){return}var c=b.attr("class"),g;if(c){g=c.match(new RegExp("(?:^| )((document|comment|member)_([1-9]\\d*))(?: |$)",""))}if(!g){return}var i="get"+ucfirst(g[2])+"Menu";var j={mid:current_mid,cur_mid:current_mid,menu_id:g[1],target_srl:g[3],cur_act:current_url.getQuery("act"),page_x:d.pageX,page_y:d.pageY};var h="error message menus".split(" ");d.preventDefault();d.stopPropagation();if(is_def(window.xeVid)){j.vid=xeVid}if(is_def(XE.loaded_popup_menus[j.menu_id])){return XE.displayPopupMenu(j,h,j)}show_waiting_message=false;exec_xml("member",i,j,XE.displayPopupMenu,h,j);show_waiting_message=true});a("a._xe_popup").click(function(){var e=a(this),c=e.attr("name"),b=e.attr("href"),d;if(!c){c="_xe_popup_"+Math.floor(Math.random()*1000)}d=window.open(b,c,"left=10,top=10,width=10,height=10,resizable=no,scrollbars=no,toolbars=no");if(d){d.focus()}return false});if(a.datepicker){a.datepicker.setDefaults({dateFormat:"yy-mm-dd"})}});var show_waiting_message=true;function xml2json(c,d,b){var h={toObj:function(k){var q={};if(k.nodeType==1){if(b&&k.attributes.length){for(var p=0;p<k.attributes.length;p++){q["@"+k.attributes[p].nodeName]=(k.attributes[p].nodeValue||"").toString()}}if(k.firstChild){var j=0,m=0,l=false;for(var r=k.firstChild;r;r=r.nextSibling){if(r.nodeType==1){l=true}else{if(r.nodeType==3&&r.nodeValue.match(/[^ \f\n\r\t\v]/)){j++}else{if(r.nodeType==4){m++}}}}if(l){if(j<2&&m<2){h.removeWhite(k);for(var r=k.firstChild;r;r=r.nextSibling){if(r.nodeType==3){q=h.escape(r.nodeValue)}else{if(r.nodeType==4){q=h.escape(r.nodeValue)}else{if(q[r.nodeName]){if(q[r.nodeName] instanceof Array){q[r.nodeName][q[r.nodeName].length]=h.toObj(r)}else{q[r.nodeName]=[q[r.nodeName],h.toObj(r)]}}else{q[r.nodeName]=h.toObj(r)}}}}}else{if(!k.attributes.length){q=h.escape(h.innerXml(k))}else{q["#text"]=h.escape(h.innerXml(k))}}}else{if(j){if(!k.attributes.length){q=h.escape(h.innerXml(k))}else{q["#text"]=h.escape(h.innerXml(k))}}else{if(m){if(m>1){q=h.escape(h.innerXml(k))}else{for(var r=k.firstChild;r;r=r.nextSibling){q=h.escape(r.nodeValue)}}}}}}if(!k.attributes.length&&!k.firstChild){q=null}}else{if(k.nodeType==9){q=h.toObj(k.documentElement)}else{alert("unhandled node type: "+k.nodeType)}}return q},toJson:function(s,l,r){var q=l?('"'+l+'"'):"";if(s instanceof Array){for(var p=0,t=s.length;p<t;p++){s[p]=h.toJson(s[p],"",r+"\t")}q+=(l?":[":"[")+(s.length>1?("\n"+r+"\t"+s.join(",\n"+r+"\t")+"\n"+r):s.join(""))+"]"}else{if(s==null){q+=(l&&":")+"null"}else{if(typeof(s)=="object"){var k=[];for(var j in s){k[k.length]=h.toJson(s[j],j,r+"\t")}q+=(l?":{":"{")+(k.length>1?("\n"+r+"\t"+k.join(",\n"+r+"\t")+"\n"+r):k.join(""))+"}"}else{if(typeof(s)=="string"){q+=(l&&":")+'"'+s.toString()+'"'}else{q+=(l&&":")+s.toString()}}}}return q},innerXml:function(k){var j="";if("innerHTML" in k){j=k.innerHTML}else{var i=function(q){var o="";if(q.nodeType==1){o+="<"+q.nodeName;for(var m=0;m<q.attributes.length;m++){o+=" "+q.attributes[m].nodeName+'="'+(q.attributes[m].nodeValue||"").toString()+'"'}if(q.firstChild){o+=">";for(var p=q.firstChild;p;p=p.nextSibling){o+=i(p)}o+="</"+q.nodeName+">"}else{o+="/>"}}else{if(q.nodeType==3){o+=q.nodeValue}else{if(q.nodeType==4){o+="<![CDATA["+q.nodeValue+"]]>"}}}return o};for(var l=k.firstChild;l;l=l.nextSibling){j+=i(l)}}return j},escape:function(i){return i.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(j){j.normalize();for(var k=j.firstChild;k;){if(k.nodeType==3){if(!k.nodeValue.match(/[^ \f\n\r\t\v]/)){var i=k.nextSibling;j.removeChild(k);k=i}else{k=k.nextSibling}}else{if(k.nodeType==1){h.removeWhite(k);k=k.nextSibling}else{k=k.nextSibling}}}return j}};if(c.nodeType==9){c=c.documentElement}var g=h.toObj(h.removeWhite(c)),a;if(typeof(JSON)=="object"&&jQuery.isFunction(JSON.stringify)&&false){var e={};e[c.nodeName]=g;a=JSON.stringify(e);return a}else{a=h.toJson(g,c.nodeName,"");return"{"+(d?a.replace(/\t/g,d):a.replace(/\t|\n/g,""))+"}"}}(function($){$.exec_xml=window.exec_xml=function(module,act,params,callback_func,response_tags,callback_func_arg,fo_obj){var xml_path=request_uri+"index.php";if(!params){params={}}if($.isArray(params)){params=arr2obj(params)}params.module=module;params.act=act;if(typeof(xeVid)!="undefined"){params.vid=xeVid}if(typeof(response_tags)=="undefined"||response_tags.length<1){response_tags=["error","message"]}else{response_tags.push("error","message")}if($.isArray(ssl_actions)&&params.act&&$.inArray(params.act,ssl_actions)>=0){var url=default_url||request_uri;var port=window.https_port||443;var _ul=$("<a>").attr("href",url)[0];var target="https://"+_ul.hostname.replace(/:\d+$/,"");if(port!=443){target+=":"+port}if(_ul.pathname[0]!="/"){target+="/"}target+=_ul.pathname;xml_path=target.replace(/\/$/,"")+"/index.php"}var _u1=$("<a>").attr("href",location.href)[0];var _u2=$("<a>").attr("href",xml_path)[0];if(_u1.protocol!=_u2.protocol||_u1.port!=_u2.port){return send_by_form(xml_path,params)}var xml=[],i=0;xml[i++]='<?xml version="1.0" encoding="utf-8" ?>';xml[i++]="<methodCall>";xml[i++]="<params>";$.each(params,function(key,val){xml[i++]="<"+key+"><![CDATA["+val+"]]></"+key+">"});xml[i++]="</params>";xml[i++]="</methodCall>";var _xhr=null;if(_xhr&&_xhr.readyState!=0){_xhr.abort()}function onsuccess(data,textStatus,xhr){var resp_xml=$(data).find("response")[0],resp_obj,txt="",ret=[],tags={},json_str="";waiting_obj.css("display","none").trigger("cancel_confirm");if(!resp_xml){alert(_xhr.responseText);return null}json_str=xml2json(resp_xml,false,false);resp_obj=(typeof(JSON)=="object"&&$.isFunction(JSON.parse))?JSON.parse(json_str):eval("("+json_str+")");resp_obj=resp_obj.response;if(typeof(resp_obj)=="undefined"){ret.error=-1;ret.message="Unexpected error occured.";try{if(typeof(txt=resp_xml.childNodes[0].firstChild.data)!="undefined"){ret.message+="\r\n"+txt}}catch(e){}return ret}$.each(response_tags,function(key,val){tags[val]=true});tags.redirect_url=true;tags.act=true;$.each(resp_obj,function(key,val){if(tags[key]){ret[key]=val}});if(ret.error!=0){if($.isFunction($.exec_xml.onerror)){return $.exec_xml.onerror(module,act,ret,callback_func,response_tags,callback_func_arg,fo_obj)}alert((ret.message||"An unknown error occured while loading ["+module+"."+act+"]").replace(/\\n/g,"\n"));return null}if(ret.redirect_url){location.href=ret.redirect_url.replace(/&amp;/g,"&");return null}if($.isFunction(callback_func)){callback_func(ret,response_tags,callback_func_arg,fo_obj)}}try{$.ajax({url:xml_path,type:"POST",dataType:"xml",data:xml.join("\n"),contentType:"text/plain",beforeSend:function(xhr){_xhr=xhr},success:onsuccess,error:function(xhr,textStatus){waiting_obj.css("display","none");var msg="";if(textStatus=="parsererror"){msg="The result is not valid XML :\n-------------------------------------\n";if(xhr.responseText==""){return}msg+=xhr.responseText.replace(/<[^>]+>/g,"")}else{msg=textStatus}try{console.log(msg)}catch(ee){}}})}catch(e){alert(e);return}var waiting_obj=$(".wfsr");if(show_waiting_message&&waiting_obj.length){var timeoutId=$(".wfsr").data("timeout_id");if(timeoutId){clearTimeout(timeoutId)}$(".wfsr").css("opacity",0);$(".wfsr").data("timeout_id",setTimeout(function(){$(".wfsr").css("opacity","")},1000));waiting_obj.html(waiting_message).show()}};function send_by_form(url,params){var frame_id="xeTmpIframe";var form_id="xeVirtualForm";if(!$("#"+frame_id).length){$('<iframe name="%id%" id="%id%" style="position:absolute;left:-1px;top:1px;width:1px;height:1px"></iframe>'.replace(/%id%/g,frame_id)).appendTo(document.body)}$("#"+form_id).remove();var form=$('<form id="%id%"></form>'.replace(/%id%/g,form_id)).attr({id:form_id,method:"post",action:url,target:frame_id});params.xeVirtualRequestMethod="xml";params.xeRequestURI=location.href.replace(/#(.*)$/i,"");params.xeVirtualRequestUrl=request_uri;$.each(params,function(key,value){$('<input type="hidden">').attr("name",key).attr("value",value).appendTo(form)});form.appendTo(document.body).submit()}function arr2obj(arr){var ret={};for(var key in arr){if(arr.hasOwnProperty(key)){ret[key]=arr[key]}}return ret}$.exec_json=function(action,data,func,f_error){if(typeof(data)=="undefined"){data={}}action=action.split(".");if(action.length==2){var timeoutId=$(".wfsr").data("timeout_id");if(timeoutId){clearTimeout(timeoutId)}$(".wfsr").css("opacity",0);$(".wfsr").data("timeout_id",setTimeout(function(){$(".wfsr").css("opacity","")},1000));if(show_waiting_message){$(".wfsr").html(waiting_message).show()}$.extend(data,{module:action[0],act:action[1]});if(typeof(xeVid)!="undefined"){$.extend(data,{vid:xeVid})}$.ajax({type:"POST",dataType:"json",url:request_uri,contentType:"application/json",data:$.param(data),success:function(data){$(".wfsr").hide().trigger("cancel_confirm");if(data.error!=0&&data.error>-1000){if(data.error==-1&&data.message=="msg_is_not_administrator"){alert("You are not logged in as an administrator");if($.isFunction(f_error)){f_error(data)}return}else{alert(data.message);if($.isFunction(f_error)){f_error(data)}return}}if($.isFunction(func)){func(data)}}})}};$.fn.exec_html=function(action,data,type,func,args){if(typeof(data)=="undefined"){data={}}if(!$.inArray(type,["html","append","prepend"])){type="html"}var self=$(this);action=action.split(".");if(action.length==2){var timeoutId=$(".wfsr").data("timeout_id");if(timeoutId){clearTimeout(timeoutId)}$(".wfsr").css("opacity",0);$(".wfsr").data("timeout_id",setTimeout(function(){$(".wfsr").css("opacity","")},1000));if(show_waiting_message){$(".wfsr").html(waiting_message).show()}$.extend(data,{module:action[0],act:action[1]});$.ajax({type:"POST",dataType:"html",url:request_uri,data:$.param(data),success:function(html){$(".wfsr").hide().trigger("cancel_confirm");self[type](html);if($.isFunction(func)){func(args)}}})}};function beforeUnloadHandler(){return""}$(function($){$(".wfsr").ajaxStart(function(){$(window).bind("beforeunload",beforeUnloadHandler)}).bind("ajaxStop cancel_confirm",function(){$(window).unbind("beforeunload",beforeUnloadHandler)})})})(jQuery);(function(g){var e=[];var k=[];var a={};var j=[];var d={};var b=xe.createApp("Validator",{init:function(){var q=/^[\w-]+((?:\.|\+|\~)[\w-]+)*@[\w-]+(\.[\w-]+)+$/;this.cast("ADD_RULE",["email",q]);this.cast("ADD_RULE",["email_address",q]);var t=/^[a-z]+[\w-]*[a-z0-9_]+$/i;this.cast("ADD_RULE",["userid",t]);this.cast("ADD_RULE",["user_id",t]);var s=/^(https?|ftp|mms):\/\/[0-9a-z-]+(\.[_0-9a-z-]+)+(:\d+)?/;this.cast("ADD_RULE",["url",s]);this.cast("ADD_RULE",["homepage",s]);var o=new RegExp("^[\uAC00-\uD7A3]*$");this.cast("ADD_RULE",["korean",o]);var p=new RegExp("^[\uAC00-\uD7A30-9]*$");this.cast("ADD_RULE",["korean_number",p]);var m=/^[a-z]*$/i;this.cast("ADD_RULE",["alpha",m]);var n=/^[a-z][a-z0-9_]*$/i;this.cast("ADD_RULE",["alpha_number",n]);var r=/^[0-9]*$/;this.cast("ADD_RULE",["number",r])},run:function(p){var n="";if(p._filter){n=p._filter.value}var o=[p,n];var m=this.cast("VALIDATE",o);if(typeof m=="undefined"){m=false}return m},API_ONREADY:function(){var m=this;g("form").each(function(){if(this.onsubmit){this["xe:onsubmit"]=this.onsubmit;this.onsubmit=null}}).submit(function(q){var p=this["xe:onsubmit"];var o=g.isFunction(p);var n=o?p.apply(this):m.run(this);if(!n){q.stopImmediatePropagation()}return n})},API_VALIDATE:function(o,M){var w=true,n=M[0],N=n.elements,x,p,F,q;var A,y,Q,m,P,O,J,s,H,E,B,D,u,C,v,G,L,z,I,t;if(N.ruleset){x=n.elements.ruleset.value}else{if(N._filter){x=n.elements._filter.value}}if(!x){return true}if(g.isFunction(j[x])){q=j[x]}x=g.extend({},a[x.toLowerCase()]||{},d);function K(r){return r.replace(/([\.\+\-\[\]\{\}\(\)\\])/g,"\\$1")}A=[];for(G=0,L=n.elements.length;G<L;G++){m=N[G];Q=m.name;if(!Q||!N[Q]){continue}if(!N[Q].length||N[Q][0]===m){A.push(Q)}}A=A.join("\n");p={};for(Q in x){if(!x.hasOwnProperty(Q)){continue}y=[];if(Q.substr(0,1)=="^"){y=A.match((new RegExp("^"+K(Q.substr(1))+".*$","gm")))}else{continue}if(!y){y=[]}for(G=0,L=y.length;G<L;G++){p[y[G]]=x[Q]}x[Q]=null;delete x[Q]}x=g.extend(x,p);for(Q in x){if(!x.hasOwnProperty(Q)){continue}f=x[Q];m=N[Q];if(!m){m=N[Q+"[]"]}P=m?g.trim(c(g(m))):"";O=(f.modifier||"")+",";if(!m||m.disabled){continue}if(f["if"]){if(!g.isArray(f["if"])){f["if"]=[f["if"]]}for(G=0;G<f["if"].length;G++){I=f["if"][G];t=new Function("el","return !!("+(I.test.replace(/\$(\w+)/g,"(jQuery('[name=$1]').is(':radio, :checkbox') ? jQuery('[name=$1]:checked').val() : jQuery('[name=$1]').val())"))+")");if(t(N)){f[I.attr]=I.value}else{delete f[I.attr]}}}if(!P){if(f["default"]){P=f["default"]}if(f.required){return this.cast("ALERT",[n,Q,"isnull"])&&false}else{continue}}E=parseInt(f.minlength)||0;H=parseInt(f.maxlength)||0;D=/b$/.test(f.minlength||"");B=/b$/.test(f.maxlength||"");J=P.length;if(D||B){s=h(P)}if((E&&E>(D?s:J))||(H&&H<(B?s:J))){return this.cast("ALERT",[n,Q,"outofrange",E,H])&&false}if(f.equalto){C=N[f.equalto];v=C?g.trim(c(g(C))):"";if(C&&v!==P){return this.cast("ALERT",[n,Q,"equalto"])&&false}}u=(f.rule||"").split(",");for(G=0,L=u.length;G<L;G++){if(!(z=u[G])){continue}w=this.cast("APPLY_RULE",[z,P]);if(O.indexOf("not,")>-1){w=!w}if(!w){return this.cast("ALERT",[n,Q,"invalid_"+z])&&false}}}if(g.isFunction(q)){return q(n)}return true},API_ADD_RULE:function(n,o){var m=o[0].toLowerCase();k[m]=o[1]},API_DEL_RULE:function(n,o){var m=o[0].toLowerCase();delete k[m]},API_GET_RULE:function(n,o){var m=o[0].toLowerCase();if(k[m]){return k[m]}else{return null}},API_ADD_FILTER:function(n,p){var m=p[0].toLowerCase();var o=p[1];a[m]=o},API_DEL_FILTER:function(n,o){var m=o[0].toLowerCase();delete a[m]},API_GET_FILTER:function(n,o){var m=o[0].toLowerCase();if(a[m]){return a[m]}else{return null}},API_ADD_EXTRA_FIELD:function(n,o){var m=o[0].toLowerCase();var p=o[1];d[m]=p},API_GET_EXTRA_FIELD:function(n,o){var m=o[0].toLowerCase();return d[m]},API_DEL_EXTRA_FIELD:function(n,o){var m=o[0].toLowerCase();delete d[m]},API_APPLY_RULE:function(n,p){var m=p[0];var o=p[1];if(typeof(k[m])=="undefined"){return true}if(g.isFunction(k[m])){return k[m](o)}if(k[m] instanceof RegExp){return k[m].test(o)}if(g.isArray(k[m])){return(g.inArray(o,k[m])>-1)}return true},API_ALERT:function(t,r){var m=r[0];var s=r[1];var q=r[2];var n=r[3];var p=r[4];var u=this.cast("GET_MESSAGE",[s]);var o=this.cast("GET_MESSAGE",[q]);if(o!=q){o=(o.indexOf("%s")<0)?(u+o):(o.replace("%s",u))}if(n||p){o+="("+(n||"")+"~"+(p||"")+")"}this.cast("SHOW_ALERT",[o]);g(m.elements[s]).focus()},API_SHOW_ALERT:function(m,n){alert(n[0])},API_ADD_MESSAGE:function(n,p){var m=p[0];var o=p[1];e[m]=o},API_GET_MESSAGE:function(n,o){var m=o[0];return e[m]||m},API_ADD_CALLBACK:function(n,p){var m=p[0];var o=p[1];j[m]=o},API_REMOVE_CALLBACK:function(n,o){var m=o[0];delete j[m]}});var l=new b;xe.registerApp(l);var i=xe.createPlugin("editor_stub",{API_BEFORE_VALIDATE:function(n,q){var o=q[0];var m=o.getAttribute("editor_sequence");if(m&&typeof m=="object"){m=m.value}if(m){try{editorRelKeys[m].content.value=editorRelKeys[m].func(m)||""}catch(p){}}}});l.registerPlugin(new i);function c(m){var n=[];if(m.is(":radio")){return m.filter(":checked").val()}else{if(m.is(":checkbox")){m.filter(":checked").each(function(){n.push(this.value)});return n.join("|@|")}else{return m.val()}}}function h(m){m+="";if(!m.length){return 0}m=encodeURI(m);var n=m.split("%").length-1;return m.length-n*2}})(jQuery);function filterAlertMessage(e){var d=e.error;var g=e.message;var b=e.act;var a=e.redirect_url;var c=location.href;if(typeof(g)!="undefined"&&g&&g!="success"){alert(g)}if(typeof(b)!="undefined"&&b){c=current_url.setQuery("act",b)}else{if(typeof(a)!="undefined"&&a){c=a}}if(c==location.href){c=c.replace(/#(.*)$/,"")}location.href=c}function procFilter(b,a){a(b);return false}function legacy_filter(k,a,b,e,j,d,l,h){var i=xe.getApp("Validator")[0],c=jQuery,g=[];if(!i){return false}if(!a.elements._filter){c(a).prepend('<input type="hidden" name="_filter" />')}a.elements._filter.value=k;g[0]=k;g[1]=function(p){var q={},m=[],n=p.elements,o=c(p).serializeArray();c.each(o,function(s,t){var r=c.trim(t.value),u=t.name;if(!r||!u){return true}if(h[u]){u=h[u]}if(/\[\]$/.test(u)){u=u.replace(/\[\]$/,"")}if(q[u]){q[u]+="|@|"+r}else{q[u]=t.value}});if(l&&!confirm(l)){return false}exec_xml(b,e,q,j,d,q,a)};i.cast("ADD_CALLBACK",g);i.cast("VALIDATE",[a,k]);return false};