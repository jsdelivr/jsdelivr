!function(a,b){"use strict";function c(a,b,d){d=d||{};var e,f;b?(e=a.id||(b&&b.id)+"_"+g,a.id=e):(e=a.id="root",b=null),d[e]=f=a,Object.defineProperty(a,"container",{value:b,writable:!0});for(var g=0,h=a.items.length;h>g;g++){var i=a.items[g];i.items?(i.id||(i.id=f.id+"_"+g),c(i,f,d)):(d[i.id]=i,Object.defineProperty(i,"container",{value:f,writable:!0}))}return d}function d(a){for(var b=1,c=0,d=a.length;d>c;c++)a[c].priority<b&&(b=a[c].priority);return 0>b&&(b=0),b}function e(a){a?(this.setup=a,this.allItems=c(a)):(this.setup={id:"root",direction:"horizontal",gutter:0,items:[]},this.allItems={root:this.setup})}e.prototype.allItems=null,e.prototype.setup=null,e.prototype.direction="horizontal",e.prototype.packItems=function(a){a||(a=this.setup);var c=this,d=new b(a),e=a.gutter||0;return d.items=a.items.sort(this.sorter).map(function(b){if(b.hidden)return b;var f=new Rectangle(b);return f.width=!f.precalculateWidth&&"string"==typeof f.width&&f.width.indexOf("%")>0?(a.width+e)*parseFloat(f.width)/100-e:parseFloat(f.width),f.height=!f.precalculateHeight&&"string"==typeof f.height&&f.height.indexOf("%")>0?(a.height+e)*parseFloat(f.height)/100-e:parseFloat(f.height),b.items&&(f=c.packItems(f)),d.add(f),f}),d.height=a.precalculateHeight?d.minHeight:parseFloat(a.height),d.width=a.precalculateWidth?d.minWidth:parseFloat(a.width),d},e.prototype.reprioritizeItem=function(a,b,c){var d,e,a,f=a,g=a.container&&a.container.items;if(!g)throw new RangeError("Cannot reprioritize root container");if(g.length<2)return this;var h=g.indexOf(f);if(c||b&&1>=h||!b&&h>=g.length-2)if(b){if(1==f.priority)return this;if(d=g[0],d==a)return f.priority=1,this;d.priority=(g[1].priority+1)/2,f.priority=1}else{if(0==f.priority)return this;if(e=g[g.length-1],e==a)return f.priority=0,this;e.priority=g[g.length-2].priority/2,f.priority=0}else b?(d=g[h-2],e=g[h-1]):(d=g[h+1],e=g[h+2]),f.priority=(d.priority+e.priority)/2;return this.packItems(),this},e.prototype.resizeItem=function(a,b,c){return a.width=b,a.height=c,this.packItems(),this},e.prototype.moveToContainer=function(a,b,c){var d=a.container&&a.container.items;if(!d)throw new RangeError("Cannot move root container");var e;if(e=b.items,d==e)return!1;var f=this.isInContainer(a,b),g=a.container;d.splice(d.indexOf(a),1),a.container=b,e.push(a),c||this.packItems(),f&&this.moveToContainer(b,g,c)},e.prototype.deleteContainer=function(a,b){if(void 0===a.items)throw new RangeError("Cannot delete real element");var c=a.container;if("root"==a.id||!c)throw new RangeError("Cannot delete root container");for(var d=c.items,e=a.items.length;e--;)this.moveToContainer(a.items[e],c,!0);var f=d.splice(d.indexOf(a),1)[0];return delete this.allItems[a.id],b||this.packItems(),f},e.prototype.generatePackageName=function(a){for(var b=0;this.allItems[a.id+"_"+b];)b++;return a.id+"_"+b},e.prototype.createNewContainer=function(a,b,c,e){b=b||this.setup,a||(a=this.generatePackageName(b));var f=b.items,g={gutter:0,items:[],id:a,priority:c?c.priority:d(f)/2,width:c&&c.width||0,height:c&&c.height||0};return this.allItems[a]=g,Object.defineProperty(g,"container",{value:b,writable:!0}),f.push(g),e||this.packItems(),g},e.prototype.isInContainer=function(a,b){for(var c=b.container;c;){if(c==a)return!0;c=c.container}return!1},a.Package=e}(window,Packer);
//# sourceMappingURL=package.js.map