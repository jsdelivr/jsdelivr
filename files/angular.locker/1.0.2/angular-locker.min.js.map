/*! angular-locker v1.0.2 | (c) 2014 @tymondesigns | https://github.com/tymondesigns/angular-locker */
{"version":3,"file":"angular-locker.min.js","sources":["angular-locker.min.js"],"names":["root","factory","define","amd","angular","exports","module","window","this","provider","_value","value","isFunction","_keyByVal","obj","Object","keys","filter","key","defaults","driver","namespace","eventsEnabled","setDefaultDriver","getDefaultDriver","setDefaultNamespace","getDefaultNamespace","setEventsEnabled","enabled","getEventsEnabled","$get","$window","$rootScope","$parse","Locker","_registeredDrivers","local","localStorage","session","sessionStorage","_resolveDriver","hasOwnProperty","Error","_deriveDriver","_driver","_namespace","_eventsEnabled","_separator","_watchers","_checkSupport","_supported","l","setItem","removeItem","e","_getPrefix","_serialize","toJson","_unserialize","fromJson","_event","name","payload","$emit","extend","_setItem","oldVal","_getItem","_exists","equals","oldValue","newValue","indexOf","getItem","_removeItem","prototype","put","isObject","forEach","isDefined","add","has","get","def","isArray","items","k","arguments","length","forget","pull","all","split","splice","join","clean","empty","clear","count","bind","$scope","isUndefined","$eval","assign","self","$id","$watch","newVal","unbind","getDriver","getNamespace","supported","drivers"],"mappings":"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","sourcesContent":["/**\n * angular-locker\n *\n * A simple & configurable abstraction for local/session storage in angular projects.\n *\n * @link https://github.com/tymondesigns/angular-locker\n * @author Sean Tymon @tymondesigns\n * @license MIT License, http://www.opensource.org/licenses/MIT\n */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return factory(root.angular);\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = factory(root.angular || (window && window.angular));\n    } else {\n        factory(root.angular);\n    }\n})(this, function (angular) {\n\n    'use strict';\n\n    angular.module('angular-locker', [])\n\n    .provider('locker', function () {\n\n        /**\n         * If value is a function then execute, otherwise return\n         *\n         * @param  {Mixed}  value\n         * @return {Mixed}\n         */\n        var _value = function (value) {\n            return angular.isFunction(value) ? value() : value;\n        };\n\n        /**\n         * Get the key of an object by the value\n         *\n         * @param  {Object}  obj\n         * @param  {Mixed}   value\n         * @return {String}\n         */\n        var _keyByVal = function (obj, value) {\n            return Object.keys(obj).filter(function (key) { return obj[key] === value; })[0];\n        };\n\n        /**\n         * Set the default driver and namespace\n         *\n         * @type {Object}\n         */\n        var defaults = {\n            driver: 'local',\n            namespace: 'locker',\n            eventsEnabled: true\n        };\n\n        return {\n\n            /**\n             * Allow setting of default storage driver via `lockerProvider`\n             * e.g. lockerProvider.setDefaultDriver('session');\n             *\n             * @param {String}  driver\n             */\n            setDefaultDriver: function (driver) {\n                defaults.driver = _value(driver);\n                return this;\n            },\n\n            /**\n             * Get the default driver\n             */\n            getDefaultDriver: function () {\n                return defaults.driver;\n            },\n\n            /**\n             * Allow setting of default namespace via `lockerProvider`\n             * e.g. lockerProvider.setDefaultNamespace('myAppName');\n             *\n             * @param {String}  namespace\n             */\n            setDefaultNamespace: function (namespace) {\n                defaults.namespace = _value(namespace);\n                return this;\n            },\n\n            /**\n             * Get the default namespace\n             */\n            getDefaultNamespace: function () {\n                return defaults.namespace;\n            },\n\n            /**\n             * Set whether the events are enabled\n             *\n             * @param {Boolean}  enabled\n             */\n            setEventsEnabled: function (enabled) {\n                defaults.eventsEnabled = enabled;\n                return this;\n            },\n\n            /**\n             * Get whether the events are enabled\n             */\n            getEventsEnabled: function () {\n                return defaults.eventsEnabled;\n            },\n\n            /**\n             * The locker service\n             */\n            $get: ['$window', '$rootScope', '$parse', function ($window, $rootScope, $parse) {\n\n                /**\n                 * Define the Locker class\n                 *\n                 * @param {Storage}  driver\n                 * @param {String}   namespace\n                 */\n                function Locker (driver, namespace, eventsEnabled) {\n\n                    /**\n                     * @type {Object}\n                     */\n                    this._registeredDrivers = {\n                        local: $window.localStorage,\n                        session: $window.sessionStorage\n                    };\n\n                    /**\n                     * Get the Storage instance from the key\n                     *\n                     * @param  {String}  driver\n                     * @return {Storage}\n                     */\n                    this._resolveDriver = function (driver) {\n                        if (! this._registeredDrivers.hasOwnProperty(driver)) {\n                            throw new Error('The driver \"' + driver + '\" was not found.');\n                        }\n\n                        return this._registeredDrivers[driver];\n                    };\n\n                    /**\n                     * Get the driver key (local/session) by the Storage instance\n                     *\n                     * @param  {Storage}  driver\n                     * @return {String}\n                     */\n                    this._deriveDriver = function (driver) {\n                        return _keyByVal(this._registeredDrivers, driver);\n                    };\n\n                    /**\n                     * @type {Storage}\n                     */\n                    this._driver = this._resolveDriver(driver);\n\n                    /**\n                     * @type {String}\n                     */\n                    this._namespace = namespace;\n\n                    /**\n                     * @type {Boolean}\n                     */\n                    this._eventsEnabled = eventsEnabled;\n\n                    /**\n                     * @type {String}\n                     */\n                    this._separator = '.';\n\n                    /**\n                     * @type {Object}\n                     */\n                    this._watchers = {};\n\n                    /**\n                     * Check browser support\n                     *\n                     * @see https://github.com/Modernizr/Modernizr/blob/master/feature-detects/storage/localstorage.js#L38-L47\n                     * @param  {String}  driver\n                     * @return {Boolean}\n                     */\n                    this._checkSupport = function (driver) {\n                        if (typeof this._supported === 'undefined') {\n                            var l = 'l';\n                            try {\n                                this._resolveDriver(driver || 'local').setItem(l, l);\n                                this._resolveDriver(driver || 'local').removeItem(l);\n                                this._supported = true;\n                            } catch (e) {\n                                this._supported = false;\n                            }\n                        }\n\n                        return this._supported;\n                    };\n\n                    /**\n                     * Build the storage key from the namspace\n                     *\n                     * @param  {String}  key\n                     * @return {String}\n                     */\n                    this._getPrefix = function (key) {\n                        return this._namespace + this._separator + key;\n                    };\n\n                    /**\n                     * Try to encode value as json, or just return the value upon failure\n                     *\n                     * @param  {Mixed}  value\n                     * @return {Mixed}\n                     */\n                    this._serialize = function (value) {\n                        try {\n                            return angular.toJson(value);\n                        } catch (e) {\n                            return value;\n                        }\n                    };\n\n                    /**\n                     * Try to parse value as json, if it fails then it probably isn't json so just return it\n                     *\n                     * @param  {String}  value\n                     * @return {Object|String}\n                     */\n                    this._unserialize = function (value) {\n                        try {\n                            return angular.fromJson(value);\n                        } catch (e) {\n                            return value;\n                        }\n                    };\n\n                    /**\n                     * Trigger an event\n                     *\n                     * @param  {String} name\n                     * @param  {Object} payload\n                     * @return {void}\n                     */\n                    this._event = function (name, payload) {\n                        if (this._eventsEnabled) {\n                            $rootScope.$emit(name, angular.extend(payload, {\n                                driver: this._deriveDriver(this._driver),\n                                namespace: this._namespace,\n                            }));\n                        }\n                    };\n\n                    /**\n                     * Add to storage\n                     *\n                     * @param {String}  key\n                     * @param {Mixed}  value\n                     */\n                    this._setItem = function (key, value) {\n                        if (this._checkSupport()) {\n                            try {\n                                var oldVal = this._getItem(key);\n                                this._driver.setItem(this._getPrefix(key), this._serialize(value));\n                                if (this._exists(key) && ! angular.equals(oldVal, value)) {\n                                    this._event('locker.item.updated', { key: key, oldValue: oldVal, newValue: value });\n                                } else {\n                                    this._event('locker.item.added', { key: key, value: value });\n                                }\n                            } catch (e) {\n                                if (['QUOTA_EXCEEDED_ERR', 'NS_ERROR_DOM_QUOTA_REACHED', 'QuotaExceededError'].indexOf(e.name) !== -1) {\n                                    throw new Error('The browser storage quota has been exceeded');\n                                } else {\n                                    throw new Error('Could not add item with key \"' + key + '\"');\n                                }\n                            }\n                        } else {\n                            throw new Error('The browser does not support localStorage');\n                        }\n                    };\n\n                    /**\n                     * Get from storage\n                     *\n                     * @param  {String}  key\n                     * @return {Mixed}\n                     */\n                    this._getItem = function (key) {\n                        if (this._checkSupport()) {\n                            return this._unserialize(this._driver.getItem(this._getPrefix(key)));\n                        } else {\n                            throw new Error('The browser does not support localStorage');\n                        }\n                    };\n\n                    /**\n                     * Exists in storage\n                     *\n                     * @param  {String}  key\n                     * @return {Boolean}\n                     */\n                    this._exists = function (key) {\n                        if (this._checkSupport()) {\n                            return this._driver.hasOwnProperty(this._getPrefix(_value(key)));\n                        } else {\n                            throw new Error('The browser does not support localStorage');\n                        }\n                    };\n\n                    /**\n                     * Remove from storage\n                     *\n                     * @param  {String}  key\n                     * @return {Boolean}\n                     */\n                    this._removeItem = function (key) {\n                        if (this._checkSupport()) {\n                            if (! this._exists(key)) return false;\n                            this._driver.removeItem(this._getPrefix(key));\n\n                            this._event('locker.item.forgotten', { key: key });\n\n                            return true;\n                        } else {\n                            throw new Error('The browser does not support localStorage');\n                        }\n                    };\n                }\n\n                /**\n                 * Define the public api\n                 *\n                 * @type {Object}\n                 */\n                Locker.prototype = {\n\n                    /**\n                     * Add a new item to storage (even if it already exists)\n                     *\n                     * @param  {Mixed}  key\n                     * @param  {Mixed}  value\n                     * @return {self}\n                     */\n                    put: function (key, value) {\n                        if (! key) return false;\n                        key = _value(key);\n\n                        if (angular.isObject(key)) {\n                            angular.forEach(key, function (value, key) {\n                                this._setItem(key, value);\n                            }, this);\n                        } else {\n                            if (! angular.isDefined(value)) return false;\n                            this._setItem(key, _value(value));\n                        }\n\n                        return this;\n                    },\n\n                    /**\n                     * Add an item to storage if it doesn't already exist\n                     *\n                     * @param  {Mixed}  key\n                     * @param  {Mixed}  value\n                     * @return {Boolean}\n                     */\n                    add: function (key, value) {\n                        if (! this.has(key)) {\n                            this.put(key, value);\n                            return true;\n                        }\n\n                        return false;\n                    },\n\n                    /**\n                     * Retrieve the specified item from storage\n                     *\n                     * @param  {String|Array}  key\n                     * @param  {Mixed}  def\n                     * @return {Mixed}\n                     */\n                    get: function (key, def) {\n                        if (angular.isArray(key)) {\n                            var items = {};\n                            angular.forEach(key, function (k) {\n                                if (this.has(k)) items[k] = this._getItem(k);\n                            }, this);\n\n                            return items;\n                        }\n\n                        if (! this.has(key)) return arguments.length === 2 ? def : void 0;\n\n                        return this._getItem(key);\n                    },\n\n                    /**\n                     * Determine whether the item exists in storage\n                     *\n                     * @param  {String|Function}  key\n                     * @return {Boolean}\n                     */\n                    has: function (key) {\n                        return this._exists(key);\n                    },\n\n                    /**\n                     * Remove specified item(s) from storage\n                     *\n                     * @param  {Mixed}  key\n                     * @return {Object}\n                     */\n                    forget: function (key) {\n                        key = _value(key);\n\n                        if (angular.isArray(key)) {\n                            angular.forEach(key, function (key) {\n                                this._removeItem(key);\n                            }, this);\n                        } else {\n                            this._removeItem(key);\n                        }\n\n                        return this;\n                    },\n\n                    /**\n                     * Retrieve the specified item from storage and then remove it\n                     *\n                     * @param  {String|Array}  key\n                     * @param  {Mixed}  def\n                     * @return {Mixed}\n                     */\n                    pull: function (key, def) {\n                        var value = this.get(key, def);\n                        this.forget(key);\n\n                        return value;\n                    },\n\n                    /**\n                     * Return all items in storage within the current namespace\n                     *\n                     * @return {Object}\n                     */\n                    all: function () {\n                        var items = {};\n                        angular.forEach(this._driver, function (value, key) {\n                            var split = key.split(this._separator);\n                            if (split.length > 1 && split[0] === this._namespace) {\n                                split.splice(0, 1);\n                                key = split.join(this._separator);\n                            }\n                            if (this.has(key)) items[key] = this.get(key);\n                        }, this);\n\n                        return items;\n                    },\n\n                    /**\n                     * Remove all items set within the current namespace\n                     *\n                     * @return {self}\n                     */\n                    clean: function () {\n                        this.forget(Object.keys(this.all()));\n\n                        return this;\n                    },\n\n                    /**\n                     * Empty the current storage driver completely. careful now.\n                     *\n                     * @return {self}\n                     */\n                    empty: function () {\n                        this._driver.clear();\n\n                        return this;\n                    },\n\n                    /**\n                     * Get the total number of items within the current namespace\n                     *\n                     * @return {Integer}\n                     */\n                    count: function () {\n                        return Object.keys(this.all()).length;\n                    },\n\n                    /**\n                     * Bind a storage key to a $scope property\n                     *\n                     * @param  {Object}  $scope\n                     * @param  {String}  key\n                     * @param  {Mixed}   def\n                     * @return {self}\n                     */\n                    bind: function ($scope, key, def) {\n                        if (angular.isUndefined( $scope.$eval(key) )) {\n                            $parse(key).assign($scope, this.get(key, def));\n                            if (! this.has(key)) this.put(key, def);\n                        }\n\n                        var self = this;\n                        this._watchers[key + $scope.$id] = $scope.$watch(key, function (newVal) {\n                            if (angular.isDefined(newVal)) self.put(key, newVal);\n                        }, angular.isObject($scope[key]));\n\n                        return this;\n                    },\n\n                    /**\n                     * Unbind a storage key from a $scope property\n                     *\n                     * @param  {Object}  $scope\n                     * @param  {String}  key\n                     * @return {self}\n                     */\n                    unbind: function ($scope, key) {\n                        $parse(key).assign($scope, void 0);\n                        this.forget(key);\n                        if (this._watchers[key + $scope.$id]) {\n                            // execute the de-registration function\n                            this._watchers[key + $scope.$id]();\n                            delete this._watchers[key + $scope.$id];\n                        }\n\n                        return this;\n                    },\n\n                    /**\n                     * Set the storage driver on a new instance to enable overriding defaults\n                     *\n                     * @param  {String}  driver\n                     * @return {self}\n                     */\n                    driver: function (driver) {\n                        return new Locker(driver, this._namespace, this._eventsEnabled);\n                    },\n\n                    /**\n                     * Get the currently set driver\n                     *\n                     * @return {Storage}\n                     */\n                    getDriver: function () {\n                        return this._driver;\n                    },\n\n                    /**\n                     * Set the namespace on a new instance to enable overriding defaults\n                     *\n                     * @param  {String}  namespace\n                     * @return {self}\n                     */\n                    namespace: function (namespace) {\n                        return new Locker(this._deriveDriver(this._driver), namespace, this._eventsEnabled);\n                    },\n\n                    /**\n                     * Get the currently set namespace\n                     *\n                     * @return {String}\n                     */\n                    getNamespace: function () {\n                        return this._namespace;\n                    },\n\n                    /**\n                     * Check browser support\n                     *\n                     * @see https://github.com/Modernizr/Modernizr/blob/master/feature-detects/storage/localstorage.js#L38-L47\n                     * @param  {String}  driver\n                     * @return {Boolean}\n                     */\n                    supported: function (driver) {\n                        return this._checkSupport(driver);\n                    }\n                };\n\n                /**\n                 * Create the driver instances\n                 *\n                 * @type {Object}\n                 */\n                var drivers = {\n                    local: new Locker('local', defaults.namespace, defaults.eventsEnabled),\n                    session: new Locker('session', defaults.namespace, defaults.eventsEnabled)\n                };\n\n                return drivers[defaults.driver];\n            }]\n        };\n\n    });\n\n});\n"],"sourceRoot":"/source/"}