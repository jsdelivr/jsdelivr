/*! tauCharts - v0.1.0 - 2014-11-05
* https://github.com/TargetProcess/tauCharts
* Copyright (c) 2014 Taucraft Limited; Licensed Creative Commons */
!function(a,b){if("function"==typeof define&&define.amd)define(["underscore","d3"],function(a,c){return b(a,c)});else if("object"==typeof module&&module.exports){{var c=require("underscore");require("d3")}module.exports=b(c)}else a.tauChart=b(a._,a.d3)}(this,function(a,b){var c,d,e;return function(a){function b(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(c){if(b(r,c)){var d=r[c];delete r[c],t[c]=!0,m.apply(a,d)}if(!b(q,c)&&!b(t,c))throw new Error("No "+c);return q[c]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(c,d,e,f){var h,k,l,m,n,s,u=[],v=typeof e;if(f=f||c,"undefined"===v||"function"===v){for(d=!d.length&&e.length?["require","exports","module"]:d,n=0;n<d.length;n+=1)if(m=o(d[n],f),k=m.f,"require"===k)u[n]=p.require(c);else if("exports"===k)u[n]=p.exports(c),s=!0;else if("module"===k)h=u[n]=p.module(c);else if(b(q,k)||b(r,k)||b(t,k))u[n]=j(k);else{if(!m.p)throw new Error(c+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=e?e.apply(q[c],u):void 0,c&&(h&&h.exports!==a&&h.exports!==q[c]?q[c]=h.exports:l===a&&s||(q[c]=l))}else c&&(q[c]=e)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,e=function(a,c,d){c.splice||(d=c,c=[]),b(q,a)||b(r,a)||(r[a]=[a,c,d])},e.amd={jQuery:!0}}(),e("../node_modules/almond/almond",function(){}),e("utils/utils",["exports"],function(a){var b={clone:function(a){return JSON.parse(JSON.stringify(a))},isArray:function(a){return Array.isArray(a)},autoScale:function(a){var b=10,c=Math.min.apply(null,a),d=Math.max.apply(null,a);if(c===d){var e=d>=0?-1:1,f=d||1;d-=e*f/b}for(var g=[c,d],h=g[1]-g[0],i=Math.pow(10,Math.floor(Math.log(h/b)/Math.LN10)),j=b/h*i,k=[[.15,10],[.35,5],[.75,2],[1,1]],l=-1;j>k[++l][0];);i*=k[l][1],g[0]=Math.floor(g[0]/i)*i,g[1]=Math.ceil(g[1]/i)*i;var m=c-g[0],n=g[1]-d,o=i/2;if(c>=0)g[0]=0;else{var p=o>=m?i:0;g[0]=g[0]-p}var q=o>=n?i:0;return g[1]=g[1]+q,[parseFloat(g[0].toFixed(15)),parseFloat(g[1].toFixed(15))]}};a.utils=b}),e("unit-domain-period-generator",["exports"],function(a){var b={day:{cast:function(a){return new Date(a.setHours(0,0,0,0))},next:function(a){return new Date(a.setDate(a.getDate()+1))}},week:{cast:function(a){return a=new Date(a.setHours(0,0,0,0)),a=new Date(a.setDate(a.getDate()-a.getDay()))},next:function(a){return new Date(a.setDate(a.getDate()+7))}},month:{cast:function(a){return a=new Date(a.setHours(0,0,0,0)),a=new Date(a.setDate(1))},next:function(a){return new Date(a.setMonth(a.getMonth()+1))}},quarter:{cast:function(a){a=new Date(a.setHours(0,0,0,0)),a=new Date(a.setDate(1));var b=a.getMonth(),c=b-b%3;return new Date(a.setMonth(c))},next:function(a){return new Date(a.setMonth(a.getMonth()+3))}},year:{cast:function(a){return a=new Date(a.setHours(0,0,0,0)),a=new Date(a.setDate(1)),a=new Date(a.setMonth(0))},next:function(a){return new Date(a.setFullYear(a.getFullYear()+1))}}},c={add:function(a,c){return b[a.toLowerCase()]=c,this},get:function(a){return b[a.toLowerCase()]},generate:function(a,c,d){var e=[],f=b[d.toLowerCase()];if(f){var g=f.cast(new Date(c)),h=f.cast(new Date(a));for(e.push(h);(h=f.next(new Date(h)))<=g;)e.push(h)}return e}};a.UnitDomainPeriodGenerator=c}),e("unit-domain-mixin",["exports","./unit-domain-period-generator","./utils/utils","underscore","d3"],function(a,b,c,d,e){var f=b.UnitDomainPeriodGenerator,g=c.utils,h=d,i=e,j={ordinal:function(a,b){return i.scale.ordinal().domain(a).rangePoints(b,1)},linear:function(a,b,c){var d=c.autoScale?g.autoScale(a):i.extent(a),e=h.isNumber(c.min)?c.min:d[0],f=h.isNumber(c.max)?c.max:d[1],j=[Math.min(e,d[0]),Math.max(f,d[1])];return i.scale.linear().domain(j).rangeRound(b,1)},period:function(a,b,c){var d=i.extent(a),e=h.isNull(c.min)||h.isUndefined(c.min)?d[0]:new Date(c.min).getTime(),g=h.isNull(c.max)||h.isUndefined(c.max)?d[1]:new Date(c.max).getTime(),j=[Math.min(e,d[0]),Math.max(g,d[1])],k=f.generate(j[0],j[1],c.period);return i.scale.ordinal().domain(k).rangePoints(b,1)},time:function(a,b,c){var d=i.extent(a),e=h.isNull(c.min)||h.isUndefined(c.min)?d[0]:new Date(c.min).getTime(),f=h.isNull(c.max)||h.isUndefined(c.max)?d[1]:new Date(c.max).getTime(),g=[Math.min(e,d[0]),Math.max(f,d[1])];return i.time.scale().domain(g).range(b)}},k=function(){var a=function(a,b){var c=function(a){return function(b){return b[a]}},d=function(b){var d=a[b]||{},e=d.value?c(d.value):function(a){return a},f=h.contains(["period","time"],d.scale);return f?h.compose(function(a){return new Date(a).getTime()},e):e},e=function(b){var c=a[b]||{};return c.order||null},g=function(a){var b={category:function(a,b,c){return c},order:function(a,b,c){var d=e(a);return d?h.union(d,c):h.sortBy(c,b)},measure:function(a,b,c){return h.sortBy(c,b)},"as-is":function(a,b,c){return c}};return b[a]||b["as-is"]},i=function(a){var b={category:g("category"),order:function(a,b,c){var d=e(a);return d?h.union(c,d):c},measure:g("measure"),"as-is":g("as-is")};return b[a]||b["as-is"]};this.fnDimension=function(b,c){var d=(c||{}).dimensions||{},e=a[b]||{},f=d[b]||{};return{scaleDim:b,scaleType:f.scale||e.scale,dimType:f.type||e.type}},this.fnSource=function(a){var c=h.map(a,function(a,b){return function(c){return d(b)(c[b])===a}});return h(b).filter(function(a){return h.every(c,function(b){return b(a)})})};var k=function(c,e){if(!a[c])return[null];var f=d(c),g=h(b).chain().pluck(c).uniq(f).value();return e(c,f,g)};this.fnDomain=function(b){var c=d(b),e=(a[b]||{}).type,f=k(b,g(e));return f.map(c)},this.fnScaleTo=function(b,e,g){var l=g||{},m=h.defaults({},a[b]),n=l.map?c(l.map):d(b),o=l.period?function(a){return f.get(l.period).cast(new Date(a))}:function(a){return a},p=k(b,i(m.type)).map(n),q=j[m.scale](p,e,l),r=function(a){return q(o(n(a)))};for(var s in q)q.hasOwnProperty(s)&&(r[s]=q[s]);return r}};return Object.defineProperties(a.prototype,{mix:{writable:!0,value:function(a){return a.dimension=this.fnDimension,a.source=this.fnSource,a.domain=this.fnDomain,a.scaleTo=this.fnScaleTo,a.partition=function(){return a.source(a.$where)},a}}}),a}();a.UnitDomainMixin=k}),e("units-registry",["exports"],function(a){var b={},c={add:function(a,c){var d={};return d.draw="function"==typeof c?c:c.draw,d.walk=c.walk||function(a){return a},b[a]=d,this},get:function(a){if(!b.hasOwnProperty(a))throw new Error("Unknown unit type: "+a);return b[a]}};a.UnitsRegistry=c}),e("dsl-reader",["exports","./utils/utils","./unit-domain-mixin","./units-registry"],function(a,b,c,d){var e=b.utils,f=c.UnitDomainMixin,g=d.UnitsRegistry,h=function(){var a=function(a,b){this.spec=e.clone(a),this.domain=new f(this.spec.dimensions,b)};return Object.defineProperties(a.prototype,{buildGraph:{writable:!0,value:function(){var a=this,b=function(c){return g.get(c.type).walk(a.domain.mix(c),b)};return b(this.spec.unit)}},calcLayout:{writable:!0,value:function(a,b,c){return a.options={top:0,left:0,width:c.width,height:c.height},b(a,this.domain)}},renderGraph:{writable:!0,value:function(a,b){var c=this;a.options.container=b;var d=function(a){return g.get(a.type).draw(c.domain.mix(a),d)};return d(a),a.options.container}}}),a}();a.DSLReader=h}),e("formatter-registry",["exports","d3"],function(b,c){var d=c,e={day:d.time.format("%d-%b-%Y"),week:d.time.format("%d-%b-%Y"),"week-range":function(a){var b=new Date(a),c=new Date(a),e=new Date(c.setDate(c.getDate()+7)),f=d.time.format("%d-%b-%Y");return f(b)+" - "+f(e)},month:function(a){var b=new Date(a),c=b.getMonth(),e=0===c?"%B, %Y":"%B";return d.time.format(e)(a)},"month-year":d.time.format("%B, %Y"),quarter:function(a){var b=new Date(a),c=b.getMonth(),d=(c-c%3)/3;return"Q"+(d+1)+" "+b.getFullYear()},year:d.time.format("%Y")},f={get:function(b){var c=e[b];return c||(c=function(c){var e=a.isDate(c)?d.time.format(b):d.format(b);return e(c)}),c},add:function(a,b){e[a]=b}};b.FormatterRegistry=f}),e("utils/utils-draw",["exports","../utils/utils","../formatter-registry"],function(c,d,e){var f=d.utils,g=e.FormatterRegistry,h=function(a,b){return"translate("+a+","+b+")"},i=function(a){return"rotate("+a+")"},j=function(b){return a.contains(["bottom","top"],b.toLowerCase())?"h":"v"},k=function(a,b,c){var d=a.selectAll(".tick line"),e=c/d[0].length,f=e/2;if("ordinal"===b.scaleType||"period"===b.scaleType){var g="h"===j(b.guide.scaleOrient),h=g?"x":"y",i=g?f:-f;d.attr(h+"1",i).attr(h+"2",i)}},l=function(a,b){var c="h"===j(b.guide.scaleOrient)?1:-1;a.append("text").attr("transform",i(b.guide.label.rotate)).attr("class","label").attr("x",c*b.guide.size*.5).attr("y",c*b.guide.label.padding).style("text-anchor",b.guide.label.textAnchor).text(b.guide.label.text)},m=function(a,b){a.selectAll(".tick text").attr("transform",i(b.guide.rotate)).style("text-anchor",b.guide.textAnchor)},n=function(c,d,e){var f=this;if(c.scaleDim){var i=b.svg.axis().scale(c.scaleObj).orient(c.guide.scaleOrient).ticks(a.max([Math.round(e/c.guide.density),4]));c.guide.tickFormat&&i.tickFormat(g.get(c.guide.tickFormat));var j=f.append("g").attr("class",c.guide.cssClass).attr("transform",h.apply(null,d)).call(i);k(j,c,e),m(j,c),l(j,c)}},o=function(c,d,e){var f=this,g=f.append("g").attr("class","grid").attr("transform",h(0,0)),i=(c.guide.showGridLines||"").toLowerCase();if(i.length>0){var j=g.append("g").attr("class","grid-lines");if(i.indexOf("x")>-1&&c.x.scaleDim){var l=c.x,m=b.svg.axis().scale(l.scaleObj).orient(l.guide.scaleOrient).tickSize(d).ticks(a.max([Math.round(e/l.guide.density),4])),n=j.append("g").attr("class","grid-lines-x").call(m);k(n,l,e)}if(i.indexOf("y")>-1&&c.y.scaleDim){var o=c.y,p=b.svg.axis().scale(o.scaleObj).orient(o.guide.scaleOrient).tickSize(-e).ticks(a.max([Math.round(d/o.guide.density),4])),q=j.append("g").attr("class","grid-lines-y").call(p);k(q,o,d)}j.selectAll("text").remove()}return g},p=function(c){var d,e,g=a.times(10,function(a){return"color10-"+(1+a)}),h=c.guide.color||{},i=c.color,j=i.scaleDim,k=h.brewer||g;return f.isArray(k)?(e=c.domain(j),d=k):(e=Object.keys(k),d=e.map(function(a){return k[a]})),{get:function(a){return b.scale.ordinal().range(d).domain(e)(a)},dimension:j}},q=function(b){return b.options=b.options||{},b.guide=b.guide||{},b.guide.padding=a.defaults(b.guide.padding||{},{l:0,b:0,r:0,t:0}),b.guide.x=a.defaults(b.guide.x||{},{label:"",padding:0,density:30,cssClass:"x axis",scaleOrient:"bottom",rotate:0,textAnchor:"middle",tickPeriod:null,tickFormat:null,autoScale:!0}),b.guide.x.label=a.isObject(b.guide.x.label)?b.guide.x.label:{text:b.guide.x.label},b.guide.x.label=a.defaults(b.guide.x.label,{padding:32,rotate:0,textAnchor:"middle"}),b.guide.x.tickFormat=b.guide.x.tickFormat||b.guide.x.tickPeriod,b.guide.y=a.defaults(b.guide.y||{},{label:"",padding:0,density:30,cssClass:"y axis",scaleOrient:"left",rotate:0,textAnchor:"end",tickPeriod:null,tickFormat:null,autoScale:!0}),b.guide.y.label=a.isObject(b.guide.y.label)?b.guide.y.label:{text:b.guide.y.label},b.guide.y.label=a.defaults(b.guide.y.label,{padding:32,rotate:-90,textAnchor:"middle"}),b.guide.y.tickFormat=b.guide.y.tickFormat||b.guide.y.tickPeriod,b},r={translate:h,rotate:i,getOrientation:j,fnDrawDimAxis:n,fnDrawGrid:o,generateColor:p,applyNodeDefaults:q};c.utilsDraw=r}),e("matrix",["exports"],function(b){var c=function(){var b=function(b,c){var d,e=a.toArray(arguments);d=a.isArray(e[0])?e[0]:a.times(b,function(){return a.times(c,function(){return null})}),this.cube=d};return b.prototype={iterate:function(b){var c=this.cube;return a.each(c,function(c,d){a.each(c,function(a,c){b(d,c,a)})}),this},getRC:function(a,b){return this.cube[a][b]},setRC:function(a,b,c){return this.cube[a][b]=c,this},sizeR:function(){return this.cube.length},sizeC:function(){var a=this.cube[0]||[];return a.length}},b}();b.TMatrix=c}),e("layout-engine-factory",["exports","./utils/utils","./utils/utils-draw","./matrix"],function(b,c,d,e){var f=this,g=c.utils,h=d.utilsDraw,i=e.TMatrix,j=function(b){var c=function(b){var d=h.applyNodeDefaults(b);if(!d.$matrix)return d;var e,f=d.options,g=d.guide.padding,i=f.width-(g.l+g.r),j=f.height-(g.t+g.b),k=d.$matrix.sizeR(),l=d.$matrix.sizeC(),m=i/l,n=j/k;return e=d.guide.split?{calcHeight:function(a,b,c,d){return a/d},calcTop:function(a,b,c,d){return(b+1)*(a/d)*c}}:{calcHeight:function(a){return a},calcTop:function(a,b){return b*n}},d.$matrix.iterate(function(b,d,f){var g=f.length;a.each(f,function(a,f){a.options={width:m,left:d*m,height:e.calcHeight(n,b,f,g),top:e.calcTop(n,b,f,g)},c(a)})}),d};return c(b)},k={DEFAULT:j,"SHARE-AXES":function(b,c){var d=function(b,c,e){var f=b.$matrix.getRC(0,0);return f[0].$matrix&&(e.x[c]=e.x[c]||{},e.x[c][f[0].x]=[],e.y[c]=e.y[c]||{},e.y[c][f[0].y]=[]),b.$matrix.iterate(function(b,f,i){if(0===b||0===f){var j=h.applyNodeDefaults(i[0]);if(j.$matrix){var k=a.extend(g.clone(a.omit(j,"$matrix")),{type:"WRAP.AXIS"});0===b&&e.x[c][k.x].push(k),0===f&&e.y[c][k.y].push(k),d(j,c+1,e)}}}),b},e=h.applyNodeDefaults({type:"WRAPPER.SHARED.AXES",options:g.clone(b.options),x:[],y:[],$matrix:new i([[[b]]])}),f=d(c.mix(e),0,e),k=f.x.reduce(function(a,b){return Object.keys(b).forEach(function(c){a+=b[c][0].guide.padding.b}),a},0),l=f.y.reduce(function(a,b){return Object.keys(b).forEach(function(c){a+=b[c][0].guide.padding.l}),a},0);return b.options.width=e.options.width-l,b.options.height=e.options.height-k,b=j(b,c),f},"EXTRACT-AXES":function(b,c){var d=function(b){var d=function(b,c){var e=h.applyNodeDefaults(b);a.each([e.guide.x||{},e.guide.y||{}],function(a){return a.hide=!0});var f=e.$matrix.sizeR(),j=e.$matrix.sizeC();return c.$axes=new i(f,j),e.$matrix.iterate(function(b,e,i){var j=[];c.$axes.setRC(b,e,j);var k=0===e,l=b===f-1;i.forEach(function(b){var c=h.applyNodeDefaults(b);if(c.$matrix){var e=a.extend(g.clone(a.omit(c,"$matrix")),{type:"WRAP.AXIS"});j.push(e),c.guide.padding.l=0,c.guide.padding.b=0,e.guide.padding.l=k?e.guide.padding.l:0,e.guide.padding.b=l?e.guide.padding.b:0,d(c,e)}})}),e},e=h.applyNodeDefaults({type:"WRAP.MULTI_AXES",options:g.clone(b.options),x:{},y:{},$matrix:new i([[[b]]])});return d(c.mix(e),e),e.$matrix=new i([[[h.applyNodeDefaults({type:"WRAP.MULTI_GRID",x:{},y:{},$matrix:new i([[[b]]])})]]]),e},e=function(a){var b=function(a){var c=a.options,d=a.guide.padding,e=c.width-(d.l+d.r),f=c.height-(d.t+d.b),g=a.$axes.sizeR(),i=a.$axes.sizeC(),j=h.applyNodeDefaults(a.$axes.getRC(g-1,0)[0]||{}),k=j.guide.padding.l,l=j.guide.padding.b,m=e-k,n=f-l,o=m/i,p=n/g;return a.$axes.iterate(function(a,c,d){var e=0===c,f=a===g-1;(e||f)&&d.forEach(function(d){d.options={showX:f,showY:e,width:o+(e?k:0),height:p+(f?l:0),top:a*p,left:c*o+(e?0:k)},d.$axes&&b(d)})}),a};b(a);var d=0,e=0,f=function(a){var b=a.guide.padding,c=a.$axes.sizeR();return a.$axes.iterate(function(a,g,h){0===g&&a===c-1&&(d+=b.l,e+=b.b,h.forEach(function(a){return f(a)}))}),a};f(a);var g=a.options.width-d,i=a.options.height-e,k=a.$matrix.getRC(0,0)[0];return k.options={top:0,left:d,width:g,height:i},j(k,c),a};return e(d(b))}},l={get:function(a){return(k[a]||k.DEFAULT).bind(f)}};b.LayoutEngineFactory=l}),e("plugins",["exports"],function(a){{var c=function(){var a=function(a){this._plugins=a};return Object.defineProperties(a.prototype,{_call:{writable:!0,value:function(a,b){for(var c=0;c<this._plugins.length;c++)"function"==typeof this._plugins[c][a]&&this._plugins[c][a].apply(this._plugins[c],b)}},render:{writable:!0,value:function(){this._call("render",arguments)}},click:{writable:!0,value:function(){this._call("click",arguments)}},mouseover:{writable:!0,value:function(){this._call("mouseover",arguments)}},mouseout:{writable:!0,value:function(){this._call("mouseout",arguments)}},mousemove:{writable:!0,value:function(){this._call("mousemove",arguments)}}}),a}(),d=function(a){return function(){this.on("click",function(c){a.click(new f(c),new e(b.select(this)))}).on("mouseover",function(c){a.mouseover(new f(c),new e(b.select(this)))}).on("mouseout",function(c){a.mouseout(new f(c),new e(b.select(this)))}).on("mousemove",function(c){a.mousemove(new f(c),new e(b.select(this)))})}},e=function(){var a=function(a){this.element=a};return a}(),f=(function(){var a=function(a){this.data=a};return a}(),function(){var a=function(a){this.datum=a};return a}());!function(){var a=function(a,b){this.svg=a.svg,this.html=a.html,this.mapper=b};return Object.defineProperties(a.prototype,{elements:{writable:!0,value:function(){return this.svg.selectAll(".i-role-datum")}}}),a}()}a.propagateDatumEvents=d,a.Plugins=c}),e("utils/utils-dom",["exports"],function(a){var b={getStyle:function(a,b){return window.getComputedStyle(a,void 0).getPropertyValue(b)},getContainerSize:function(a){var b=2*parseInt(this.getStyle(a,"padding")||0,10),c=a.getBoundingClientRect();return{width:c.width-b,height:c.height-b}}};a.utilsDom=b}),e("const",["exports"],function(a){var b="graphical-report__";a.CSS_PREFIX=b}),e("charts/tau.plot",["exports","../dsl-reader","../layout-engine-factory","../plugins","../utils/utils-dom","../const"],function(c,d,e,f,g,h){var i=d.DSLReader,j=e.LayoutEngineFactory,k=f.Plugins,l=f.propagateDatumEvents,m=g.utilsDom,n=h.CSS_PREFIX,o=function(){var c=function(b){var c=this.convertConfig(b);this.config=a.defaults(c,{spec:null,data:[],plugins:[]}),c.spec.dimensions=this._normalizeDimensions(c.spec.dimensions,c.data),this.plugins=this.config.plugins,this.spec=this.config.spec,this.data=this.config.data,this._plugins=new k(this.config.plugins)};return Object.defineProperties(c.prototype,{renderTo:{writable:!0,value:function(c,d){var e=b.select(c),f=e[0][0];if(null===f)throw new Error("Target element not found");var g=a.defaults(d||{},m.getContainerSize(f));if(0!==this.data.length){f.innerHTML="";var h=e.append("svg").attr("class",n+"svg").attr("width",g.width).attr("height",g.height),k=new i(this.spec,this.data),o=k.buildGraph(),p=j.get(this.config.layoutEngine||"EXTRACT-AXES"),q=k.calcLayout(o,p,g),r=k.renderGraph(q,h);r.selectAll(".i-role-datum").call(l(this._plugins)),this._plugins.render(r)}}},_autoDetectDimensions:{writable:!0,value:function(b){var c=function(b){var c;return c=a.isObject(b)?"order":a.isNumber(b)?"measure":"category"};return a.reduce(b,function(b,d){return a.each(d,function(a,d){var e=c(a);b[d]=b[d]||{type:e},b[d].type=b[d].type===e?e:"category"}),b},{})}},_autoAssignScales:{writable:!0,value:function(b){var c={category:"ordinal",order:"ordinal",measure:"linear"};return a.each(b,function(a){var b=a.type.toLowerCase();a.scale=a.scale||c[b]}),b}},_normalizeDimensions:{writable:!0,value:function(a,b){var c=a?a:this._autoDetectDimensions(b);return this._autoAssignScales(c)}},convertConfig:{writable:!0,value:function(a){return a}}}),c}();c.Plot=o}),e("charts/tau.chart",["exports","./tau.plot","../utils/utils"],function(a,b,c){function d(a){return a?a:null}function e(a){return j.isArray(a)?a:[a]}function f(a,b){return{type:a,x:b.x,y:b.y,color:b.color,guide:{color:b.colorGuide},flip:b.flip,size:b.size}}function g(a,b){for(var c=e(b.x),g=e(b.y),h=e(b.guide),i=Math.max(c.length,g.length),j={type:"COORDS.RECT",unit:[]},k=b.guide&&b.guide.color||{},l=i;l>0;l--){var m=c.pop(),n=g.pop(),o=h.pop();l===i?(j.x=m,j.y=n,j.unit.push(f(a,{x:d(m),y:d(n),color:b.color,size:b.size,flip:b.flip,colorGuide:k})),j.guide=o||{padding:{l:45,b:45,r:24,t:24},showGridLines:"xy",x:{label:m},y:{label:n}}):j={type:"COORDS.RECT",x:d(m),y:d(n),unit:[j],guide:o||{padding:{l:0,b:45,r:0,t:0},x:{label:m},y:{label:n}}}}return b.spec={dimensions:b.dimensions,unit:j},b}var h=function(a,b){a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),a.__proto__=b},i=b.Plot,j=c.utils,k={scatterplot:function(a){return g("ELEMENT.POINT",a)},line:function(a){return g("ELEMENT.LINE",a)},bar:function(a){return a.flip=!1,g("ELEMENT.INTERVAL",a)},horizontalBar:function(a){return a.flip=!0,g("ELEMENT.INTERVAL",a)}},l=function(a){var b=function(){a.apply(this,arguments)};return h(b,a),Object.defineProperties(b.prototype,{convertConfig:{writable:!0,value:function(a){var b=this._normalizeDimensions(a.dimensions,a.data);return a.dimensions=b,k[a.type](a)}}}),b}(i);a.Chart=l}),e("elements/coords",["exports","../utils/utils-draw","../const","../utils/utils","../matrix"],function(b,c,d,e,f){var g=c.utilsDraw,h=d.CSS_PREFIX,i=e.utils,j=f.TMatrix,k={CROSS:function(b,c,d){var e=b.domain(c),f=b.domain(d).reverse();return a(f).map(function(b){return a(e).map(function(a){var e={};return c&&(e[c]=a),d&&(e[d]=b),e})})}},l=function(a){return k[a]||function(){return[[{}]]}},m=function(b,c,d){var e=a.defaults(i.clone(b),a.pick.apply(a,[c].concat(d)));return e.guide=a.extend(i.clone(c.guide||{}),e.guide||{}),e},n={walk:function(b,c){var d=a.defaults(b,{$where:{}}),e=a.any(d.unit,function(a){return 0===a.type.indexOf("COORDS.")}),f=l(e?"CROSS":""),g=new j(f(d,d.x,d.y)),h=new j(g.sizeR(),g.sizeC());return g.iterate(function(b,c,e){var f=a.extend({},d.$where,e),g=a(d.unit).map(function(b){return a.extend(m(b,d,["x","y"]),{$where:f})});h.setRC(b,c,g)}),d.$matrix=h,h.iterate(function(b,d,e){a.each(e,function(a){return c(a)})}),d},draw:function(b,c){var d=b.options,e=b.guide.padding;b.x.guide=b.guide.x,b.y.guide=b.guide.y;var f=d.left+e.l,i=d.top+e.t,j=d.width-(e.l+e.r),k=d.height-(e.t+e.b),l={map:b.x.guide.tickLabel,min:b.x.guide.tickMin,max:b.x.guide.tickMax,period:b.x.guide.tickPeriod,autoScale:b.x.guide.autoScale};b.x.scaleObj=b.x.scaleDim&&b.scaleTo(b.x.scaleDim,[0,j],l);var m={map:b.y.guide.tickLabel,min:b.y.guide.tickMin,max:b.y.guide.tickMax,period:b.y.guide.tickPeriod,autoScale:b.y.guide.autoScale};b.y.scaleObj=b.y.scaleDim&&b.scaleTo(b.y.scaleDim,[k,0],m),b.x.guide.size=j,b.y.guide.size=k;var n=[0,k+b.guide.x.padding],o=[0-b.guide.y.padding,0],p=d.container.append("g").attr("class",h+"cell cell").attr("transform",g.translate(f,i));b.x.guide.hide||g.fnDrawDimAxis.call(p,b.x,n,j),b.y.guide.hide||g.fnDrawDimAxis.call(p,b.y,o,k);var q=g.fnDrawGrid.call(p,b,k,j);b.$matrix.iterate(function(b,d,e){e.forEach(function(b){b.options=a.extend({container:q},b.options),c(b)})})}};b.coords=n}),e("elements/line",["exports","../utils/utils-draw","../const"],function(a,c,d){var e=c.utilsDraw,f=d.CSS_PREFIX,g=function(a){var c=a.options,d=c.xScale,g=c.yScale,h=e.generateColor(a),i=b.nest().key(function(a){return a[h.dimension]}).entries(a.partition()),j=function(){this.attr("class",function(a){return f+"line line "+h.get(a.key)});var a=this.selectAll("path").data(function(a){return[a.values]});a.call(l),a.enter().append("path").call(l),a.exit().remove()},k=b.svg.line().x(function(b){return d(b[a.x.scaleDim])}).y(function(b){return g(b[a.y.scaleDim])}),l=function(){this.attr("d",k)},m=c.container.selectAll(".line").data(i);m.call(j),m.enter().append("g").call(j),m.exit().remove()};a.line=g}),e("elements/size",["exports"],function(c){var d=function(c,d){c=a.filter(c,a.isFinite);var e=[Math.min.apply(null,c),Math.max.apply(null,c)],f=0===e[0]?e[1]:Math.max(1,e[1]/e[0]),g=[Math.max(1,d/(Math.log(f)+1)),d];return b.scale.linear().range(g).domain(e)};c.sizeScale=d}),e("elements/point",["exports","../utils/utils-draw","../const","./size"],function(b,c,d,e){var f=c.utilsDraw,g=d.CSS_PREFIX,h=e.sizeScale,i=function(b){var c=b.options,d=c.xScale,e=c.yScale,i=f.generateColor(b),j=a.max([c.width,c.height]),k=h(b.domain(b.size.scaleDim),j/100),l=function(){return this.attr("r",function(c){var d=k(c[b.size.scaleDim]);return a.isFinite(d)?d:j/100}).attr("class",function(a){return g+"dot dot i-role-datum "+i.get(a[i.dimension])}).attr("cx",function(a){return d(a[b.x.scaleDim])}).attr("cy",function(a){return e(a[b.y.scaleDim])})},m=c.container.selectAll(".dot").data(b.partition());m.call(l),m.exit().remove(),m.enter().append("circle").call(l)};b.point=i}),e("elements/interval",["exports","../utils/utils-draw","../const"],function(a,c,d){var e=c.utilsDraw,f=d.CSS_PREFIX,g="i-role-bar-group",h=function(a){return"measure"===a.dimType},i=function(a){var b,c,d;return h(a.dim)?(b=1,c=1,d=0):(b=a.size/a.domain(a.dim.scaleDim).length,c=b/(a.categories.length+1),d=c),{tickWidth:b,intervalWidth:c,offsetCategory:d}},j=function(a){var c,d,j,k,l,m=0,n=a.options,o=e.generateColor(a),p=a.partition(),q=b.nest().key(function(a){return a[o.dimension]}).entries(p),r=n.xScale,s=n.yScale;if(a.flip){var t=i({domain:a.domain,dim:a.y,categories:q,size:n.height}),u=t.tickWidth,v=t.intervalWidth,w=t.offsetCategory;c=h(a.x)?function(b){return r(Math.min(m,b[a.x.scaleDim]))}:0,d=function(b){return s(b[a.y.scaleDim])-u/2},j=h(a.x)?function(b){return Math.abs(r(b[a.x.scaleDim])-r(m))}:function(b){return r(b[a.x.scaleDim])},k=function(){return v},l=function(a,b){return e.translate(0,b*w+w/2)}}else{var x=i({domain:a.domain,dim:a.x,categories:q,size:n.width}),u=x.tickWidth,v=x.intervalWidth,w=x.offsetCategory;c=function(b){return r(b[a.x.scaleDim])-u/2},d=h(a.y)?function(b){return s(Math.max(m,b[a.y.scaleDim]))}:function(b){return s(b[a.y.scaleDim])},j=function(){return v},k=h(a.y)?function(b){return Math.abs(s(b[a.y.scaleDim])-s(m))}:function(b){return n.height-s(b[a.y.scaleDim])},l=function(a,b){return e.translate(b*w+w/2,0)}}var y=function(){return this.attr("class",function(a){return"i-role-datum bar "+f+"bar "+o.get(a[o.dimension])}).attr("x",c).attr("y",d).attr("width",j).attr("height",k)},z=function(){this.attr("class",g).attr("transform",l);var a=this.selectAll("bar").data(function(a){return a.values});a.call(y),a.enter().append("rect").call(y),a.exit().remove()},A=n.container.selectAll("."+g).data(q);A.call(z),A.enter().append("g").call(z),A.exit().remove()};a.interval=j}),e("elements/coords-parallel",["exports","../utils/utils-draw","../const","../utils/utils","../matrix"],function(c,d,e,f,g){var h=d.utilsDraw,i=(e.CSS_PREFIX,f.utils),j=g.TMatrix,k=function(b,c,d){var e=a.defaults(i.clone(b),a.pick.apply(a,[c].concat(d)));return e.guide=a.extend(i.clone(c.guide||{}),e.guide||{}),e},l={walk:function(b,c){var d=a.defaults(b,{$where:{}}),e=new j(1,1),f=new j(1,1);return e.iterate(function(b,c){var e=a.extend({},d.$where),g=a(d.unit).map(function(b){return a.extend(k(b,d,["x"]),{$where:e})});f.setRC(b,c,g)}),d.$matrix=f,f.iterate(function(b,d,e){a.each(e,function(a){return c(a)})}),d},draw:function(c,d){var e=c.options,f=c.guide.padding,g=e.left+f.l,i=e.top+f.t,j=e.width-(f.l+f.r),k=e.height-(f.t+f.b),l=c.x.map(function(a){return c.scaleTo(a,[k,0],{})}),m=e.container.append("g").attr("class","graphical-report__cell cell").attr("transform",h.translate(g,i)),n=function(a,b){return"translate("+a+","+b+")"},o=function(a){return"rotate("+a+")"},p=function(a,c){var d=this,e=b.svg.axis().scale(a).orient("left"),f=d.append("g").attr("class","y axis").attr("transform",n.apply(null,c)).call(e);f.selectAll(".tick text").attr("transform",o(0)).style("text-anchor","end")},q=j/(c.x.length-1);l.forEach(function(a,b){p.call(m,a,[b*q,0])});var r=m.append("g").attr("class","grid").attr("transform",n(0,0));c.$matrix.iterate(function(b,c,e){e.forEach(function(b){b.options=a.extend({container:r},b.options),d(b)})})}};c.CoordsParallel=l}),e("elements/coords-parallel-line",["exports","../utils/utils-draw","../const"],function(a,c,d){var e=c.utilsDraw,f=(d.CSS_PREFIX,{draw:function(a){a.color=a.dimension(a.color,a);var c=a.options,d=a.x.reduce(function(b,d){return b[d]=a.scaleTo(d,[c.height,0],{}),b},{}),f=e.generateColor(a),g=b.nest().key(function(a){return a[f.dimension]}).entries(a.partition()).map(function(b){var c=b.values[0],d=[];return a.x.forEach(function(a){d.push({key:a,val:c[a]})}),d}),h=function(){this.attr("class",function(){return"graphical-report__line line color10-9"});var a=this.selectAll("path").data(function(a){return[a]});a.call(l),a.enter().append("path").call(l),a.exit().remove()},i=c.width/(a.x.length-1),j={};a.x.forEach(function(a,b){j[a]=b*i});var k=b.svg.line().x(function(a){return j[a.key]}).y(function(a){return d[a.key](a.val)}),l=function(){this.attr("d",k)},m=c.container.selectAll(".line").data(g);m.call(h),m.enter().append("g").call(h),m.exit().remove()}});a.CoordsParallelLine=f}),e("node-map",["exports","./elements/coords","./elements/line","./elements/point","./elements/interval","./utils/utils-draw","./elements/coords-parallel","./elements/coords-parallel-line"],function(b,c,d,e,f,g,h,i){var j=c.coords,k=d.line,l=e.point,m=f.interval,n=g.utilsDraw,o=h.CoordsParallel,p=i.CoordsParallelLine,q=function(a,b){b.forEach(function(b){a[b]=a.dimension(a[b],a)});var c=a.options,d=c.width,e=c.height;a.x.guide=a.guide.x,a.y.guide=a.guide.y;var f={map:a.x.guide.tickLabel,min:a.x.guide.tickMin,max:a.x.guide.tickMax,period:a.x.guide.tickPeriod,autoScale:a.x.guide.autoScale};a.options.xScale=a.x.scaleDim&&a.scaleTo(a.x.scaleDim,[0,d],f);var g={map:a.y.guide.tickLabel,min:a.y.guide.tickMin,max:a.y.guide.tickMax,period:a.y.guide.tickPeriod,autoScale:a.y.guide.autoScale};return a.options.yScale=a.y.scaleDim&&a.scaleTo(a.y.scaleDim,[e,0],g),a},r={"COORDS.RECT":{walk:j.walk,draw:function(a,b){a.x=a.dimension(a.x,a),a.y=a.dimension(a.y,a),j.draw(a,b)}},"ELEMENT.POINT":function(a){l(q(a,["x","y","color","size"]))},"ELEMENT.LINE":function(a){k(q(a,["x","y","color"]))},"ELEMENT.INTERVAL":function(a){m(q(a,["x","y","color"]))},"WRAP.AXIS":function(b,c){b.x=b.dimension(b.x,b),b.y=b.dimension(b.y,b);var d=b.options,e=b.guide.padding;b.x.guide=b.guide.x,b.y.guide=b.guide.y;var f=d.left+e.l,g=d.top+e.t,h=d.width-(e.l+e.r),i=d.height-(e.t+e.b);b.x.guide.size=h,b.y.guide.size=i;var j={map:b.x.guide.tickLabel,min:b.x.guide.tickMin,max:b.x.guide.tickMax,autoScale:b.x.guide.autoScale};b.x.scaleObj=b.x.scaleDim&&b.scaleTo(b.x.scaleDim,[0,h],j);var k={map:b.y.guide.tickLabel,min:b.y.guide.tickMin,max:b.y.guide.tickMax,autoScale:b.y.guide.autoScale};b.y.scaleObj=b.y.scaleDim&&b.scaleTo(b.y.scaleDim,[i,0],k);var l=[0,i+b.guide.x.padding],m=[0-b.guide.y.padding,0],o=d.container.append("g").attr("class","axis-container").attr("transform",n.translate(f,g));d.showX&&!b.x.guide.hide&&n.fnDrawDimAxis.call(o,b.x,l,h),d.showY&&!b.y.guide.hide&&n.fnDrawDimAxis.call(o,b.y,m,i);{var p=o.append("g").attr("class","sub-axis-container").attr("transform",n.translate(0,0)),q=b.$axes.sizeR();b.$axes.sizeC()}b.$axes.iterate(function(b,d,e){(0===d||b===q-1)&&e.forEach(function(b){b.options=a.extend({container:p},b.options||{}),b.$axes&&c(b)})})},"WRAP.MULTI_AXES":function(b,c){var d=b.options,e=b.guide.padding,f=d.left+e.l,g=d.top+e.t,h=(d.width-(e.l+e.r),d.height-(e.t+e.b),d.container.append("g").attr("class","cell-wrapper").attr("transform",n.translate(f,g)));
b.$axes.iterate(function(b,d,e){e.forEach(function(b){b.options=a.extend({container:h},b.options),c(b)})}),b.$matrix.iterate(function(b,d,e){e.forEach(function(b){b.options=a.extend({container:h},b.options),c(b)})})},"WRAP.MULTI_GRID":function(b,c){var d=b.options,e=b.guide.padding,f=d.left+e.l,g=d.top+e.t,h=d.container.append("g").attr("class","grid-wrapper").attr("transform",n.translate(f,g));b.$matrix.iterate(function(b,d,e){e.forEach(function(b){b.options=a.extend({container:h},b.options),c(b)})})},"COORDS.PARALLEL":o,"PARALLEL/ELEMENT.LINE":p};b.nodeMap=r}),e("tau.newCharts",["exports","./charts/tau.plot","./charts/tau.chart","./unit-domain-mixin","./unit-domain-period-generator","./dsl-reader","./layout-engine-factory","./formatter-registry","./node-map","./units-registry"],function(a,b,c,d,e,f,g,h,i,j){var k=b.Plot,l=c.Chart,m=d.UnitDomainMixin,n=e.UnitDomainPeriodGenerator,o=f.DSLReader,p=g.LayoutEngineFactory,q=h.FormatterRegistry,r=i.nodeMap,s=j.UnitsRegistry,t={Plot:k,Chart:l,__api__:{UnitDomainMixin:m,UnitDomainPeriodGenerator:n,DSLReader:o,LayoutEngineFactory:p},api:{UnitsRegistry:s,tickFormat:q,tickPeriod:n}};t.api.UnitsRegistry.add("COORDS.PARALLEL",r["COORDS.PARALLEL"]).add("PARALLEL/ELEMENT.LINE",r["PARALLEL/ELEMENT.LINE"]).add("COORDS.RECT",r["COORDS.RECT"]).add("ELEMENT.POINT",r["ELEMENT.POINT"]).add("ELEMENT.LINE",r["ELEMENT.LINE"]).add("ELEMENT.INTERVAL",r["ELEMENT.INTERVAL"]).add("WRAP.AXIS",r["WRAP.AXIS"]).add("WRAP.MULTI_AXES",r["WRAP.MULTI_AXES"]).add("WRAP.MULTI_GRID",r["WRAP.MULTI_GRID"]),a.tauChart=t}),e("underscore",function(){return a}),e("d3",function(){return b}),d("tau.newCharts").tauChart});