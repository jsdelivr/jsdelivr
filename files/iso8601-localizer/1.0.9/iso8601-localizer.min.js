!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.ISO8601Localizer=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var arrays=require("./lib/arrays"),classes=require("./lib/classes"),ISO8601Localizer=function(){function ISO8601Localizer(userISO8601){this.ISO8601Pattern=/(\d{4})-([0-1][0-9])-([0-3][0-9])T([0-2][0-9]):([0-5][0-9]):([0-5][0-9])/,this.userISO8601=userISO8601,this.userOffset=(new Date).getTimezoneOffset()/-60}return ISO8601Localizer.prototype.to=function(offset){return this.validOffset(offset)||this.errorThrower(0),this.userOffset=offset,this},ISO8601Localizer.prototype.localize=function(){var upperCaseISO8601=this.userISO8601.toUpperCase();this.isValid(upperCaseISO8601)||this.errorThrower(1);var _a=this.getOffset(),offsetHours=_a.offsetHours,operator=_a.operator,matchStrings=upperCaseISO8601.match(this.ISO8601Pattern),fullMatch=matchStrings.shift(),matchNumbers=matchStrings.map(function(val){return parseInt(val)}),year=matchNumbers[0],month=matchNumbers[1],day=matchNumbers[2],hour=matchNumbers[3],minute=matchNumbers[4],second=matchNumbers[5],leapYear=this.isLeapYear(year),daysInMonth=arrays.monthsDays[month-1];leapYear&&2===month&&(daysInMonth=29),this.isLogical(daysInMonth,day)||this.errorThrower(2);var previousMonthDIM=function(){return 0>month-2?arrays.monthsDays[12+(month-2)]:arrays.monthsDays[month-2]}();if(leapYear&&3===month&&(previousMonthDIM=29),"="===operator)return fullMatch;if("+"===operator){var newHour=hour+=offsetHours;if(newHour>23){var addDays=Math.floor(newHour/24),remainingHours=hour=newHour%24,newDay=day+=addDays;if(newDay>daysInMonth){var newMonth=(day=newDay-daysInMonth,month+=1);if(newMonth>12){month=1,year+=1}}}}if("-"===operator){var newHour=hour-=offsetHours;if(1>newHour){newHour=Math.abs(newHour)+24;var decreaseDays=Math.floor(newHour/24),remainingHours=hour=24-newHour%24;0===newHour&&(decreaseDays=1,remainingHours=hour=0);var newDay=day-=decreaseDays;if(1>newDay){var newMonth=(day=previousMonthDIM+newDay,month-=1);if(1>newMonth){month=12,year-=1}}}}var ISO8601=[year,month,day,hour,minute,second].slice(0),stringedISO8601=[];for(var k in ISO8601){var toStringISO8601=ISO8601[k].toString();stringedISO8601.push(1===toStringISO8601.length?"0"+toStringISO8601:toStringISO8601)}return stringedISO8601[0]+"-"+stringedISO8601[1]+"-"+stringedISO8601[2]+"T"+stringedISO8601[3]+":"+stringedISO8601[4]+":"+stringedISO8601[5]},ISO8601Localizer.prototype.errorThrower=function(errorCode){switch(errorCode){case 0:throw"Invalid offset supplied, valid offsets are between -11 to 14";case 1:throw"Invalid ISO8601, try something like(case insensitive, T may be t): 2005-06-03T13:04:32";case 2:throw"Non logical date, please check that there are X days in month Y.";default:throw"Unknow error code."}},ISO8601Localizer.prototype.isLogical=function(maxDays,day){return maxDays>=day},ISO8601Localizer.prototype.getOffset=function(){var offset=this.userOffset;return{operator:function(){return offset>0?"+":0>offset?"-":"="}(),offsetHours:Math.abs(offset)}},ISO8601Localizer.prototype.validOffset=function(offset){var RangerInstance=new classes.Ranger,validOffsets=RangerInstance.getRange(-11,14);return validOffsets.indexOf(offset)>-1?!0:!1},ISO8601Localizer.prototype.isValid=function(maybeValid){return this.ISO8601Pattern.test(maybeValid)},ISO8601Localizer.prototype.isLeapYear=function(year){return year%4===0&&year%100!==0||year%4===0&&year%100===0&&year%400===0},ISO8601Localizer}();module.exports=ISO8601Localizer},{"./lib/arrays":2,"./lib/classes":3}],2:[function(require,module,exports){var arrays;!function(arrays){arrays.monthsDays=[31,28,31,30,31,30,31,31,30,31,30,31]}(arrays||(arrays={})),module.exports=arrays},{}],3:[function(require,module,exports){var classes;!function(classes){var Ranger=function(){function Ranger(){}return Ranger.prototype.getRange=function(start,end){var notBothNegativeTmp=null,bothNegativeTmp=null,bothNegativeFlag=!1,retArray=[];0>start&&0>end?(start=Math.abs(start),end=Math.abs(end),bothNegativeFlag=!0,start>end&&(bothNegativeTmp=end,end=start,start=bothNegativeTmp)):start>end&&(notBothNegativeTmp=end,end=start,start=notBothNegativeTmp);for(var i=start;end>=i;i++)bothNegativeFlag?retArray.push(-i):retArray.push(i);return retArray},Ranger}();classes.Ranger=Ranger}(classes||(classes={})),module.exports=classes},{}]},{},[1])(1)});
//# sourceMappingURL=iso8601-localizer.min.js.map