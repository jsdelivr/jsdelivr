/*
YUI 3.17.2 (build 9c3c78e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/promise/promise.js']) {
   __coverage__['build/promise/promise.js'] = {"path":"build/promise/promise.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":38}}},"2":{"name":"Promise","line":58,"loc":{"start":{"line":58,"column":0},"end":{"line":58,"column":21}}},"3":{"name":"(anonymous_3)","line":75,"loc":{"start":{"line":75,"column":22},"end":{"line":75,"column":39}}},"4":{"name":"(anonymous_4)","line":77,"loc":{"start":{"line":77,"column":11},"end":{"line":77,"column":29}}},"5":{"name":"(anonymous_5)","line":103,"loc":{"start":{"line":103,"column":10},"end":{"line":103,"column":39}}},"6":{"name":"(anonymous_6)","line":109,"loc":{"start":{"line":109,"column":31},"end":{"line":109,"column":58}}},"7":{"name":"(anonymous_7)","line":138,"loc":{"start":{"line":138,"column":13},"end":{"line":138,"column":32}}},"8":{"name":"(anonymous_8)","line":150,"loc":{"start":{"line":150,"column":15},"end":{"line":150,"column":27}}},"9":{"name":"(anonymous_9)","line":168,"loc":{"start":{"line":168,"column":16},"end":{"line":168,"column":47}}},"10":{"name":"(anonymous_10)","line":170,"loc":{"start":{"line":170,"column":11},"end":{"line":170,"column":36}}},"11":{"name":"(anonymous_11)","line":202,"loc":{"start":{"line":202,"column":20},"end":{"line":202,"column":35}}},"12":{"name":"(anonymous_12)","line":229,"loc":{"start":{"line":229,"column":18},"end":{"line":229,"column":35}}},"13":{"name":"(anonymous_13)","line":232,"loc":{"start":{"line":232,"column":17},"end":{"line":232,"column":36}}},"14":{"name":"(anonymous_14)","line":247,"loc":{"start":{"line":247,"column":17},"end":{"line":247,"column":35}}},"15":{"name":"(anonymous_15)","line":249,"loc":{"start":{"line":249,"column":20},"end":{"line":249,"column":47}}},"16":{"name":"(anonymous_16)","line":266,"loc":{"start":{"line":266,"column":14},"end":{"line":266,"column":32}}},"17":{"name":"(anonymous_17)","line":268,"loc":{"start":{"line":268,"column":23},"end":{"line":268,"column":50}}},"18":{"name":"oneDone","line":279,"loc":{"start":{"line":279,"column":8},"end":{"line":279,"column":32}}},"19":{"name":"(anonymous_19)","line":280,"loc":{"start":{"line":280,"column":19},"end":{"line":280,"column":36}}},"20":{"name":"(anonymous_20)","line":311,"loc":{"start":{"line":311,"column":15},"end":{"line":311,"column":33}}},"21":{"name":"(anonymous_21)","line":313,"loc":{"start":{"line":313,"column":23},"end":{"line":313,"column":50}}},"22":{"name":"Resolver","line":338,"loc":{"start":{"line":338,"column":0},"end":{"line":338,"column":27}}},"23":{"name":"(anonymous_23)","line":397,"loc":{"start":{"line":397,"column":13},"end":{"line":397,"column":30}}},"24":{"name":"(anonymous_24)","line":429,"loc":{"start":{"line":429,"column":12},"end":{"line":429,"column":30}}},"25":{"name":"(anonymous_25)","line":470,"loc":{"start":{"line":470,"column":13},"end":{"line":470,"column":30}}},"26":{"name":"(anonymous_26)","line":474,"loc":{"start":{"line":474,"column":23},"end":{"line":474,"column":40}}},"27":{"name":"(anonymous_27)","line":476,"loc":{"start":{"line":476,"column":15},"end":{"line":476,"column":33}}},"28":{"name":"(anonymous_28)","line":501,"loc":{"start":{"line":501,"column":10},"end":{"line":501,"column":39}}},"29":{"name":"(anonymous_29)","line":517,"loc":{"start":{"line":517,"column":19},"end":{"line":517,"column":48}}},"30":{"name":"(anonymous_30)","line":547,"loc":{"start":{"line":547,"column":15},"end":{"line":547,"column":27}}},"31":{"name":"(anonymous_31)","line":560,"loc":{"start":{"line":560,"column":13},"end":{"line":560,"column":37}}},"32":{"name":"(anonymous_32)","line":569,"loc":{"start":{"line":569,"column":19},"end":{"line":569,"column":31}}},"33":{"name":"(anonymous_33)","line":599,"loc":{"start":{"line":599,"column":9},"end":{"line":599,"column":47}}},"34":{"name":"(anonymous_34)","line":615,"loc":{"start":{"line":615,"column":10},"end":{"line":615,"column":22}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":620,"column":39}},"2":{"start":{"line":29,"column":0},"end":{"line":30,"column":21}},"3":{"start":{"line":58,"column":0},"end":{"line":83,"column":1}},"4":{"start":{"line":59,"column":4},"end":{"line":61,"column":5}},"5":{"start":{"line":60,"column":8},"end":{"line":60,"column":31}},"6":{"start":{"line":63,"column":4},"end":{"line":63,"column":46}},"7":{"start":{"line":72,"column":4},"end":{"line":72,"column":30}},"8":{"start":{"line":74,"column":4},"end":{"line":82,"column":5}},"9":{"start":{"line":75,"column":8},"end":{"line":79,"column":11}},"10":{"start":{"line":76,"column":12},"end":{"line":76,"column":36}},"11":{"start":{"line":78,"column":12},"end":{"line":78,"column":36}},"12":{"start":{"line":81,"column":8},"end":{"line":81,"column":27}},"13":{"start":{"line":85,"column":0},"end":{"line":153,"column":3}},"14":{"start":{"line":104,"column":8},"end":{"line":105,"column":38}},"15":{"start":{"line":109,"column":8},"end":{"line":122,"column":11}},"16":{"start":{"line":110,"column":12},"end":{"line":121,"column":14}},"17":{"start":{"line":139,"column":8},"end":{"line":139,"column":45}},"18":{"start":{"line":151,"column":8},"end":{"line":151,"column":42}},"19":{"start":{"line":168,"column":0},"end":{"line":189,"column":2}},"20":{"start":{"line":170,"column":4},"end":{"line":188,"column":6}},"21":{"start":{"line":171,"column":8},"end":{"line":171,"column":19}},"22":{"start":{"line":176,"column":8},"end":{"line":185,"column":9}},"23":{"start":{"line":181,"column":12},"end":{"line":181,"column":39}},"24":{"start":{"line":183,"column":12},"end":{"line":183,"column":22}},"25":{"start":{"line":184,"column":12},"end":{"line":184,"column":19}},"26":{"start":{"line":187,"column":8},"end":{"line":187,"column":24}},"27":{"start":{"line":202,"column":0},"end":{"line":213,"column":2}},"28":{"start":{"line":203,"column":4},"end":{"line":203,"column":13}},"29":{"start":{"line":209,"column":4},"end":{"line":211,"column":18}},"30":{"start":{"line":210,"column":8},"end":{"line":210,"column":24}},"31":{"start":{"line":212,"column":4},"end":{"line":212,"column":38}},"32":{"start":{"line":229,"column":0},"end":{"line":236,"column":2}},"33":{"start":{"line":230,"column":4},"end":{"line":235,"column":11}},"34":{"start":{"line":234,"column":12},"end":{"line":234,"column":27}},"35":{"start":{"line":247,"column":0},"end":{"line":253,"column":2}},"36":{"start":{"line":249,"column":4},"end":{"line":252,"column":7}},"37":{"start":{"line":251,"column":8},"end":{"line":251,"column":23}},"38":{"start":{"line":266,"column":0},"end":{"line":299,"column":2}},"39":{"start":{"line":267,"column":4},"end":{"line":267,"column":23}},"40":{"start":{"line":268,"column":4},"end":{"line":298,"column":7}},"41":{"start":{"line":269,"column":8},"end":{"line":272,"column":9}},"42":{"start":{"line":270,"column":12},"end":{"line":270,"column":88}},"43":{"start":{"line":271,"column":12},"end":{"line":271,"column":19}},"44":{"start":{"line":274,"column":8},"end":{"line":277,"column":27}},"45":{"start":{"line":279,"column":8},"end":{"line":289,"column":9}},"46":{"start":{"line":280,"column":12},"end":{"line":288,"column":14}},"47":{"start":{"line":281,"column":16},"end":{"line":281,"column":39}},"48":{"start":{"line":283,"column":16},"end":{"line":283,"column":28}},"49":{"start":{"line":285,"column":16},"end":{"line":287,"column":17}},"50":{"start":{"line":286,"column":20},"end":{"line":286,"column":37}},"51":{"start":{"line":291,"column":8},"end":{"line":293,"column":9}},"52":{"start":{"line":292,"column":12},"end":{"line":292,"column":36}},"53":{"start":{"line":295,"column":8},"end":{"line":297,"column":9}},"54":{"start":{"line":296,"column":12},"end":{"line":296,"column":64}},"55":{"start":{"line":311,"column":0},"end":{"line":326,"column":2}},"56":{"start":{"line":312,"column":4},"end":{"line":312,"column":23}},"57":{"start":{"line":313,"column":4},"end":{"line":325,"column":7}},"58":{"start":{"line":314,"column":8},"end":{"line":317,"column":9}},"59":{"start":{"line":315,"column":12},"end":{"line":315,"column":89}},"60":{"start":{"line":316,"column":12},"end":{"line":316,"column":19}},"61":{"start":{"line":322,"column":8},"end":{"line":324,"column":9}},"62":{"start":{"line":323,"column":12},"end":{"line":323,"column":61}},"63":{"start":{"line":328,"column":0},"end":{"line":328,"column":20}},"64":{"start":{"line":338,"column":0},"end":{"line":385,"column":1}},"65":{"start":{"line":346,"column":4},"end":{"line":346,"column":25}},"66":{"start":{"line":355,"column":4},"end":{"line":355,"column":24}},"67":{"start":{"line":364,"column":4},"end":{"line":364,"column":27}},"68":{"start":{"line":375,"column":4},"end":{"line":375,"column":29}},"69":{"start":{"line":384,"column":4},"end":{"line":384,"column":24}},"70":{"start":{"line":387,"column":0},"end":{"line":579,"column":9}},"71":{"start":{"line":398,"column":8},"end":{"line":401,"column":9}},"72":{"start":{"line":399,"column":12},"end":{"line":399,"column":33}},"73":{"start":{"line":400,"column":12},"end":{"line":400,"column":39}},"74":{"start":{"line":403,"column":8},"end":{"line":417,"column":9}},"75":{"start":{"line":404,"column":12},"end":{"line":404,"column":56}},"76":{"start":{"line":411,"column":12},"end":{"line":411,"column":33}},"77":{"start":{"line":416,"column":12},"end":{"line":416,"column":34}},"78":{"start":{"line":430,"column":8},"end":{"line":433,"column":9}},"79":{"start":{"line":431,"column":12},"end":{"line":431,"column":34}},"80":{"start":{"line":432,"column":12},"end":{"line":432,"column":38}},"81":{"start":{"line":435,"column":8},"end":{"line":441,"column":9}},"82":{"start":{"line":436,"column":12},"end":{"line":436,"column":55}},"83":{"start":{"line":439,"column":12},"end":{"line":439,"column":35}},"84":{"start":{"line":440,"column":12},"end":{"line":440,"column":32}},"85":{"start":{"line":471,"column":8},"end":{"line":471,"column":24}},"86":{"start":{"line":473,"column":8},"end":{"line":481,"column":9}},"87":{"start":{"line":474,"column":12},"end":{"line":478,"column":15}},"88":{"start":{"line":475,"column":16},"end":{"line":475,"column":36}},"89":{"start":{"line":477,"column":16},"end":{"line":477,"column":36}},"90":{"start":{"line":480,"column":12},"end":{"line":480,"column":32}},"91":{"start":{"line":502,"column":8},"end":{"line":502,"column":52}},"92":{"start":{"line":518,"column":8},"end":{"line":521,"column":40}},"93":{"start":{"line":523,"column":8},"end":{"line":525,"column":9}},"94":{"start":{"line":524,"column":12},"end":{"line":524,"column":40}},"95":{"start":{"line":526,"column":8},"end":{"line":528,"column":9}},"96":{"start":{"line":527,"column":12},"end":{"line":527,"column":38}},"97":{"start":{"line":532,"column":8},"end":{"line":536,"column":9}},"98":{"start":{"line":533,"column":12},"end":{"line":533,"column":33}},"99":{"start":{"line":534,"column":15},"end":{"line":536,"column":9}},"100":{"start":{"line":535,"column":12},"end":{"line":535,"column":32}},"101":{"start":{"line":548,"column":8},"end":{"line":548,"column":28}},"102":{"start":{"line":564,"column":8},"end":{"line":576,"column":9}},"103":{"start":{"line":569,"column":12},"end":{"line":575,"column":15}},"104":{"start":{"line":570,"column":16},"end":{"line":570,"column":27}},"105":{"start":{"line":572,"column":16},"end":{"line":574,"column":17}},"106":{"start":{"line":573,"column":20},"end":{"line":573,"column":36}},"107":{"start":{"line":581,"column":0},"end":{"line":581,"column":30}},"108":{"start":{"line":599,"column":0},"end":{"line":603,"column":2}},"109":{"start":{"line":600,"column":4},"end":{"line":600,"column":39}},"110":{"start":{"line":602,"column":4},"end":{"line":602,"column":77}},"111":{"start":{"line":615,"column":0},"end":{"line":617,"column":2}},"112":{"start":{"line":616,"column":4},"end":{"line":616,"column":46}}},"branchMap":{"1":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]},"2":{"line":117,"type":"cond-expr","locations":[{"start":{"line":118,"column":20},"end":{"line":118,"column":60}},{"start":{"line":118,"column":63},"end":{"line":118,"column":70}}]},"3":{"line":119,"type":"cond-expr","locations":[{"start":{"line":120,"column":20},"end":{"line":120,"column":59}},{"start":{"line":120,"column":62},"end":{"line":120,"column":68}}]},"4":{"line":230,"type":"cond-expr","locations":[{"start":{"line":230,"column":68},"end":{"line":230,"column":73}},{"start":{"line":232,"column":8},"end":{"line":235,"column":10}}]},"5":{"line":230,"type":"binary-expr","locations":[{"start":{"line":230,"column":11},"end":{"line":230,"column":35}},{"start":{"line":230,"column":39},"end":{"line":230,"column":65}}]},"6":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":8}},{"start":{"line":269,"column":8},"end":{"line":269,"column":8}}]},"7":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":16},"end":{"line":285,"column":16}},{"start":{"line":285,"column":16},"end":{"line":285,"column":16}}]},"8":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":8},"end":{"line":291,"column":8}},{"start":{"line":291,"column":8},"end":{"line":291,"column":8}}]},"9":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":8},"end":{"line":314,"column":8}},{"start":{"line":314,"column":8},"end":{"line":314,"column":8}}]},"10":{"line":398,"type":"if","locations":[{"start":{"line":398,"column":8},"end":{"line":398,"column":8}},{"start":{"line":398,"column":8},"end":{"line":398,"column":8}}]},"11":{"line":403,"type":"if","locations":[{"start":{"line":403,"column":8},"end":{"line":403,"column":8}},{"start":{"line":403,"column":8},"end":{"line":403,"column":8}}]},"12":{"line":430,"type":"if","locations":[{"start":{"line":430,"column":8},"end":{"line":430,"column":8}},{"start":{"line":430,"column":8},"end":{"line":430,"column":8}}]},"13":{"line":435,"type":"if","locations":[{"start":{"line":435,"column":8},"end":{"line":435,"column":8}},{"start":{"line":435,"column":8},"end":{"line":435,"column":8}}]},"14":{"line":473,"type":"if","locations":[{"start":{"line":473,"column":8},"end":{"line":473,"column":8}},{"start":{"line":473,"column":8},"end":{"line":473,"column":8}}]},"15":{"line":523,"type":"if","locations":[{"start":{"line":523,"column":8},"end":{"line":523,"column":8}},{"start":{"line":523,"column":8},"end":{"line":523,"column":8}}]},"16":{"line":523,"type":"binary-expr","locations":[{"start":{"line":523,"column":12},"end":{"line":523,"column":24}},{"start":{"line":523,"column":28},"end":{"line":523,"column":58}}]},"17":{"line":526,"type":"if","locations":[{"start":{"line":526,"column":8},"end":{"line":526,"column":8}},{"start":{"line":526,"column":8},"end":{"line":526,"column":8}}]},"18":{"line":526,"type":"binary-expr","locations":[{"start":{"line":526,"column":12},"end":{"line":526,"column":23}},{"start":{"line":526,"column":27},"end":{"line":526,"column":56}}]},"19":{"line":532,"type":"if","locations":[{"start":{"line":532,"column":8},"end":{"line":532,"column":8}},{"start":{"line":532,"column":8},"end":{"line":532,"column":8}}]},"20":{"line":534,"type":"if","locations":[{"start":{"line":534,"column":15},"end":{"line":534,"column":15}},{"start":{"line":534,"column":15},"end":{"line":534,"column":15}}]},"21":{"line":564,"type":"if","locations":[{"start":{"line":564,"column":8},"end":{"line":564,"column":8}},{"start":{"line":564,"column":8},"end":{"line":564,"column":8}}]},"22":{"line":602,"type":"cond-expr","locations":[{"start":{"line":602,"column":35},"end":{"line":602,"column":66}},{"start":{"line":602,"column":69},"end":{"line":602,"column":76}}]},"23":{"line":602,"type":"binary-expr","locations":[{"start":{"line":602,"column":12},"end":{"line":602,"column":20}},{"start":{"line":602,"column":24},"end":{"line":602,"column":31}}]}},"code":["(function () { YUI.add('promise', function (Y, NAME) {","","/**","Wraps the execution of asynchronous operations, providing a promise object that","can be used to subscribe to the various ways the operation may terminate.","","When the operation completes successfully, call the Resolver's `resolve()`","method, passing any relevant response data for subscribers.  If the operation","encounters an error or is unsuccessful in some way, call `reject()`, again","passing any relevant data for subscribers.","","The Resolver object should be shared only with the code resposible for","resolving or rejecting it. Public access for the Resolver is through its","_promise_, which is returned from the Resolver's `promise` property. While both","Resolver and promise allow subscriptions to the Resolver's state changes, the","promise may be exposed to non-controlling code. It is the preferable interface","for adding subscriptions.","","Subscribe to state changes in the Resolver with the promise's","`then(callback, errback)` method.  `then()` wraps the passed callbacks in a","new Resolver and returns the corresponding promise, allowing chaining of","asynchronous or synchronous operations. E.g.","`promise.then(someAsyncFunc).then(anotherAsyncFunc)`","","@module promise","@since 3.9.0","**/","","var Lang  = Y.Lang,","    slice = [].slice;","","/**","A promise represents a value that may not yet be available. Promises allow","you to chain asynchronous operations, write synchronous looking code and","handle errors throughout the process.","","This constructor takes a function as a parameter where you can insert the logic","that fulfills or rejects this promise. The fulfillment value and the rejection","reason can be any JavaScript value. It's encouraged that rejection reasons be","error objects","","<pre><code>","var fulfilled = new Y.Promise(function (resolve) {","    resolve('I am a fulfilled promise');","});","","var rejected = new Y.Promise(function (resolve, reject) {","    reject(new Error('I am a rejected promise'));","});","</code></pre>","","@class Promise","@constructor","@param {Function} fn A function where to insert the logic that resolves this","        promise. Receives `resolve` and `reject` functions as parameters.","        This function is called synchronously.","**/","function Promise(fn) {","    if (!(this instanceof Promise)) {","        return new Promise(fn);","    }","","    var resolver = new Promise.Resolver(this);","","    /**","    A reference to the resolver object that handles this promise","","    @property _resolver","    @type Object","    @private","    */","    this._resolver = resolver;","","    try {","        fn.call(this, function (value) {","            resolver.resolve(value);","        }, function (reason) {","            resolver.reject(reason);","        });","    } catch (e) {","        resolver.reject(e);","    }","}","","Y.mix(Promise.prototype, {","    /**","    Schedule execution of a callback to either or both of \"fulfill\" and","    \"reject\" resolutions for this promise. The callbacks are wrapped in a new","    promise and that promise is returned.  This allows operation chaining ala","    `functionA().then(functionB).then(functionC)` where `functionA` returns","    a promise, and `functionB` and `functionC` _may_ return promises.","","    Asynchronicity of the callbacks is guaranteed.","","    @method then","    @param {Function} [callback] function to execute if the promise","                resolves successfully","    @param {Function} [errback] function to execute if the promise","                resolves unsuccessfully","    @return {Promise} A promise wrapping the resolution of either \"resolve\" or","                \"reject\" callback","    **/","    then: function (callback, errback) {","        var Constructor = this.constructor,","            resolver = this._resolver;","","        // using this.constructor allows for customized promises to be","        // returned instead of plain ones","        return new Constructor(function (resolve, reject) {","            resolver._addCallbacks(","                // Check if callbacks are functions. If not, default to","                // `resolve` and `reject` respectively.","                // The wrapping of the callbacks is done here and not in","                // `_addCallbacks` because it is a feature specific to  `then`.","                // If `done` is added to promises it would call `_addCallbacks`","                // without defaulting to anything and without wrapping","                typeof callback === 'function' ?","                    Promise._wrap(resolve, reject, callback) : resolve,","                typeof errback === 'function' ?","                    Promise._wrap(resolve, reject, errback) : reject","            );","        });","    },","","    /**","    A shorthand for `promise.then(undefined, callback)`.","","    Returns a new promise and the error callback gets the same treatment as in","    `then`: errors get caught and turned into rejections, and the return value","    of the callback becomes the fulfilled value of the returned promise.","","    @method catch","    @param [Function] errback Callback to be called in case this promise is","                        rejected","    @return {Promise} A new promise modified by the behavior of the error","                        callback","    **/","    'catch': function (errback) {","        return this.then(undefined, errback);","    },","","    /**","    Returns the current status of the operation. Possible results are","    \"pending\", \"fulfilled\", and \"rejected\".","","    @method getStatus","    @return {String}","    @deprecated","    **/","    getStatus: function () {","        return this._resolver.getStatus();","    }","});","","/**","Wraps the callback in another function to catch exceptions and turn them into","rejections.","","@method _wrap","@param {Function} resolve Resolving function of the resolver that","                    handles this promise","@param {Function} reject Rejection function of the resolver that","                    handles this promise","@param {Function} fn Callback to wrap","@return {Function}","@private","**/","Promise._wrap = function (resolve, reject, fn) {","    // callbacks and errbacks only get one argument","    return function (valueOrReason) {","        var result;","","        // Promises model exception handling through callbacks","        // making both synchronous and asynchronous errors behave","        // the same way","        try {","            // Use the argument coming in to the callback/errback from the","            // resolution of the parent promise.","            // The function must be called as a normal function, with no","            // special value for |this|, as per Promises A+","            result = fn(valueOrReason);","        } catch (e) {","            reject(e);","            return;","        }","","        resolve(result);","    };","};","","/**","Checks if an object or value is a promise. This is cross-implementation","compatible, so promises returned from other libraries or native components","that are compatible with the Promises A+ spec should be recognized by this","method.","","@method isPromise","@param {Any} obj The object to test","@return {Boolean} Whether the object is a promise or not","@static","**/","Promise.isPromise = function (obj) {","    var then;","    // We test promises by structure to be able to identify other","    // implementations' promises. This is important for cross compatibility and","    // In particular Y.when which should recognize any kind of promise","    // Use try...catch when retrieving obj.then. Return false if it throws","    // See Promises/A+ 1.1","    try {","        then = obj.then;","    } catch (_) {}","    return typeof then === 'function';","};","","/**","Ensures that a certain value is a promise. If it is not a promise, it wraps it","in one.","","This method can be copied or inherited in subclasses. In that case it will","check that the value passed to it is an instance of the correct class.","This means that `PromiseSubclass.resolve()` will always return instances of","`PromiseSubclass`.","","@method resolve","@param {Any} Any object that may or may not be a promise","@return {Promise}","@static","**/","Promise.resolve = function (value) {","    return Promise.isPromise(value) && value.constructor === this ? value :","        /*jshint newcap: false */","        new this(function (resolve) {","        /*jshint newcap: true */","            resolve(value);","        });","};","","/**","A shorthand for creating a rejected promise.","","@method reject","@param {Any} reason Reason for the rejection of this promise. Usually an Error","    Object","@return {Promise} A rejected promise","@static","**/","Promise.reject = function (reason) {","    /*jshint newcap: false */","    return new this(function (resolve, reject) {","    /*jshint newcap: true */","        reject(reason);","    });","};","","/**","Returns a promise that is resolved or rejected when all values are resolved or","any is rejected. This is useful for waiting for the resolution of multiple","promises, such as reading multiple files in Node.js or making multiple XHR","requests in the browser.","","@method all","@param {Any[]} values An array of any kind of values, promises or not. If a value is not","@return [Promise] A promise for an array of all the fulfillment values","@static","**/","Promise.all = function (values) {","    var Promise = this;","    return new Promise(function (resolve, reject) {","        if (!Lang.isArray(values)) {","            reject(new TypeError('Promise.all expects an array of values or promises'));","            return;","        }","","        var remaining = values.length,","            i         = 0,","            length    = values.length,","            results   = [];","","        function oneDone(index) {","            return function (value) {","                results[index] = value;","","                remaining--;","","                if (!remaining) {","                    resolve(results);","                }","            };","        }","","        if (length < 1) {","            return resolve(results);","        }","","        for (; i < length; i++) {","            Promise.resolve(values[i]).then(oneDone(i), reject);","        }","    });","};","","/**","Returns a promise that is resolved or rejected when any of values is either","resolved or rejected. Can be used for providing early feedback in the UI","while other operations are still pending.","","@method race","@param {Any[]} values An array of values or promises","@return {Promise}","@static","**/","Promise.race = function (values) {","    var Promise = this;","    return new Promise(function (resolve, reject) {","        if (!Lang.isArray(values)) {","            reject(new TypeError('Promise.race expects an array of values or promises'));","            return;","        }","        ","        // just go through the list and resolve and reject at the first change","        // This abuses the fact that calling resolve/reject multiple times","        // doesn't change the state of the returned promise","        for (var i = 0, count = values.length; i < count; i++) {","            Promise.resolve(values[i]).then(resolve, reject);","        }","    });","};","","Y.Promise = Promise;","/**","Represents an asynchronous operation. Provides a","standard API for subscribing to the moment that the operation completes either","successfully (`fulfill()`) or unsuccessfully (`reject()`).","","@class Promise.Resolver","@constructor","@param {Promise} promise The promise instance this resolver will be handling","**/","function Resolver(promise) {","    /**","    List of success callbacks","","    @property _callbacks","    @type Array","    @private","    **/","    this._callbacks = [];","","    /**","    List of failure callbacks","","    @property _errbacks","    @type Array","    @private","    **/","    this._errbacks = [];","","    /**","    The promise for this Resolver.","","    @property promise","    @type Promise","    @deprecated","    **/","    this.promise = promise;","","    /**","    The status of the operation. This property may take only one of the following","    values: 'pending', 'fulfilled' or 'rejected'.","","    @property _status","    @type String","    @default 'pending'","    @private","    **/","    this._status = 'pending';","","    /**","    This value that this promise represents.","","    @property _result","    @type Any","    @private","    **/","    this._result = null;","}","","Y.mix(Resolver.prototype, {","    /**","    Resolves the promise, signaling successful completion of the","    represented operation. All \"onFulfilled\" subscriptions are executed and passed","    the value provided to this method. After calling `fulfill()`, `reject()` and","    `notify()` are disabled.","","    @method fulfill","    @param {Any} value Value to pass along to the \"onFulfilled\" subscribers","    **/","    fulfill: function (value) {","        if (this._status === 'pending') {","            this._result = value;","            this._status = 'fulfilled';","        }","","        if (this._status === 'fulfilled') {","            this._notify(this._callbacks, this._result);","","            // Reset the callback list so that future calls to fulfill()","            // won't call the same callbacks again. Promises keep a list","            // of callbacks, they're not the same as events. In practice,","            // calls to fulfill() after the first one should not be made by","            // the user but by then()","            this._callbacks = [];","","            // Once a promise gets fulfilled it can't be rejected, so","            // there is no point in keeping the list. Remove it to help","            // garbage collection","            this._errbacks = null;","        }","    },","","    /**","    Resolves the promise, signaling *un*successful completion of the","    represented operation. All \"onRejected\" subscriptions are executed with","    the value provided to this method. After calling `reject()`, `resolve()`","    and `notify()` are disabled.","","    @method reject","    @param {Any} value Value to pass along to the \"reject\" subscribers","    **/","    reject: function (reason) {","        if (this._status === 'pending') {","            this._result = reason;","            this._status = 'rejected';","        }","","        if (this._status === 'rejected') {","            this._notify(this._errbacks, this._result);","","            // See fulfill()","            this._callbacks = null;","            this._errbacks = [];","        }","    },","","    /*","    Given a certain value A passed as a parameter, this method resolves the","    promise to the value A.","","    If A is a promise, `resolve` will cause the resolver to adopt the state of A","    and once A is resolved, it will resolve the resolver's promise as well.","    This behavior \"flattens\" A by calling `then` recursively and essentially","    disallows promises-for-promises.","","    This is the default algorithm used when using the function passed as the","    first argument to the promise initialization function. This means that","    the following code returns a promise for the value 'hello world':","","        var promise1 = new Y.Promise(function (resolve) {","            resolve('hello world');","        });","        var promise2 = new Y.Promise(function (resolve) {","            resolve(promise1);","        });","        promise2.then(function (value) {","            assert(value === 'hello world'); // true","        });","","    @method resolve","    @param [Any] value A regular JS value or a promise","    */","    resolve: function (value) {","        var self = this;","","        if (Promise.isPromise(value)) {","            value.then(function (value) {","                self.resolve(value);","            }, function (reason) {","                self.reject(reason);","            });","        } else {","            this.fulfill(value);","        }","    },","","    /**","    Schedule execution of a callback to either or both of \"resolve\" and","    \"reject\" resolutions for the Resolver.  The callbacks","    are wrapped in a new Resolver and that Resolver's corresponding promise","    is returned.  This allows operation chaining ala","    `functionA().then(functionB).then(functionC)` where `functionA` returns","    a promise, and `functionB` and `functionC` _may_ return promises.","","    @method then","    @param {Function} [callback] function to execute if the Resolver","                resolves successfully","    @param {Function} [errback] function to execute if the Resolver","                resolves unsuccessfully","    @return {Promise} The promise of a new Resolver wrapping the resolution","                of either \"resolve\" or \"reject\" callback","    @deprecated","    **/","    then: function (callback, errback) {","        return this.promise.then(callback, errback);","    },","","    /**","    Schedule execution of a callback to either or both of \"resolve\" and","    \"reject\" resolutions of this resolver. If the resolver is not pending,","    the correct callback gets called automatically.","","    @method _addCallbacks","    @param {Function} [callback] function to execute if the Resolver","                resolves successfully","    @param {Function} [errback] function to execute if the Resolver","                resolves unsuccessfully","    @private","    **/","    _addCallbacks: function (callback, errback) {","        var callbackList = this._callbacks,","            errbackList  = this._errbacks,","            status       = this._status,","            result       = this._result;","","        if (callbackList && typeof callback === 'function') {","            callbackList.push(callback);","        }","        if (errbackList && typeof errback === 'function') {","            errbackList.push(errback);","        }","","        // If a promise is already fulfilled or rejected, notify the newly added","        // callbacks by calling fulfill() or reject()","        if (status === 'fulfilled') {","            this.fulfill(result);","        } else if (status === 'rejected') {","            this.reject(result);","        }","    },","","    /**","    Returns the current status of the Resolver as a string \"pending\",","    \"fulfilled\", or \"rejected\".","","    @method getStatus","    @return {String}","    @deprecated","    **/","    getStatus: function () {","        return this._status;","    },","","    /**","    Executes an array of callbacks from a specified context, passing a set of","    arguments.","","    @method _notify","    @param {Function[]} subs The array of subscriber callbacks","    @param {Any} result Value to pass the callbacks","    @protected","    **/","    _notify: function (subs, result) {","        // Since callback lists are reset synchronously, the subs list never","        // changes after _notify() receives it. Avoid calling Y.soon() for","        // an empty list","        if (subs.length) {","            // Calling all callbacks after Y.soon to guarantee","            // asynchronicity. Because setTimeout can cause unnecessary","            // delays that *can* become noticeable in some situations","            // (especially in Node.js)","            Y.soon(function () {","                var i, len;","","                for (i = 0, len = subs.length; i < len; ++i) {","                    subs[i](result);","                }","            });","        }","    }","","}, true);","","Y.Promise.Resolver = Resolver;","/**","Abstraction API allowing you to interact with promises or raw values as if they","were promises. If a non-promise object is passed in, a new Resolver is created","and scheduled to resolve asynchronously with the provided value.","","In either case, a promise is returned.  If either _callback_ or _errback_ are","provided, the promise returned is the one returned from calling","`promise.then(callback, errback)` on the provided or created promise.  If neither","are provided, the original promise is returned.","","@for YUI","@method when","@param {Any} promise Promise object or value to wrap in a resolved promise","@param {Function} [callback] callback to execute if the promise is resolved","@param {Function} [errback] callback to execute if the promise is rejected","@return {Promise}","**/","Y.when = function (promise, callback, errback) {","    promise = Promise.resolve(promise);","","    return (callback || errback) ? promise.then(callback, errback) : promise;","};","/**","Returns a new promise that will be resolved when all operations have completed.","Takes both any numer of values as arguments. If an argument is a not a promise,","it will be wrapped in a new promise, same as in `Y.when()`.","","@for YUI","@method batch","@param {Any} operation* Any number of Y.Promise objects or regular JS values","@return {Promise} Promise to be fulfilled when all provided promises are","                    resolved","**/","Y.batch = function () {","    return Promise.all(slice.call(arguments));","};","","","}, '3.17.2', {\"requires\": [\"timers\"]});","","}());"]};
}
var __cov_bUr1a4oWeLtiaZGIeajdgQ = __coverage__['build/promise/promise.js'];
__cov_bUr1a4oWeLtiaZGIeajdgQ.s['1']++;YUI.add('promise',function(Y,NAME){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['1']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['2']++;var Lang=Y.Lang,slice=[].slice;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['3']++;function Promise(fn){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['2']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['4']++;if(!(this instanceof Promise)){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['1'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['5']++;return new Promise(fn);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['1'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['6']++;var resolver=new Promise.Resolver(this);__cov_bUr1a4oWeLtiaZGIeajdgQ.s['7']++;this._resolver=resolver;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['8']++;try{__cov_bUr1a4oWeLtiaZGIeajdgQ.s['9']++;fn.call(this,function(value){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['3']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['10']++;resolver.resolve(value);},function(reason){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['4']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['11']++;resolver.reject(reason);});}catch(e){__cov_bUr1a4oWeLtiaZGIeajdgQ.s['12']++;resolver.reject(e);}}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['13']++;Y.mix(Promise.prototype,{then:function(callback,errback){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['5']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['14']++;var Constructor=this.constructor,resolver=this._resolver;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['15']++;return new Constructor(function(resolve,reject){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['6']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['16']++;resolver._addCallbacks(typeof callback==='function'?(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['2'][0]++,Promise._wrap(resolve,reject,callback)):(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['2'][1]++,resolve),typeof errback==='function'?(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['3'][0]++,Promise._wrap(resolve,reject,errback)):(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['3'][1]++,reject));});},'catch':function(errback){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['7']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['17']++;return this.then(undefined,errback);},getStatus:function(){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['8']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['18']++;return this._resolver.getStatus();}});__cov_bUr1a4oWeLtiaZGIeajdgQ.s['19']++;Promise._wrap=function(resolve,reject,fn){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['9']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['20']++;return function(valueOrReason){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['10']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['21']++;var result;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['22']++;try{__cov_bUr1a4oWeLtiaZGIeajdgQ.s['23']++;result=fn(valueOrReason);}catch(e){__cov_bUr1a4oWeLtiaZGIeajdgQ.s['24']++;reject(e);__cov_bUr1a4oWeLtiaZGIeajdgQ.s['25']++;return;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['26']++;resolve(result);};};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['27']++;Promise.isPromise=function(obj){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['11']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['28']++;var then;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['29']++;try{__cov_bUr1a4oWeLtiaZGIeajdgQ.s['30']++;then=obj.then;}catch(_){}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['31']++;return typeof then==='function';};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['32']++;Promise.resolve=function(value){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['12']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['33']++;return(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['5'][0]++,Promise.isPromise(value))&&(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['5'][1]++,value.constructor===this)?(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['4'][0]++,value):(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['4'][1]++,new this(function(resolve){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['13']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['34']++;resolve(value);}));};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['35']++;Promise.reject=function(reason){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['14']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['36']++;return new this(function(resolve,reject){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['15']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['37']++;reject(reason);});};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['38']++;Promise.all=function(values){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['16']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['39']++;var Promise=this;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['40']++;return new Promise(function(resolve,reject){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['17']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['41']++;if(!Lang.isArray(values)){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['6'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['42']++;reject(new TypeError('Promise.all expects an array of values or promises'));__cov_bUr1a4oWeLtiaZGIeajdgQ.s['43']++;return;}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['6'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['44']++;var remaining=values.length,i=0,length=values.length,results=[];__cov_bUr1a4oWeLtiaZGIeajdgQ.s['45']++;function oneDone(index){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['18']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['46']++;return function(value){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['19']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['47']++;results[index]=value;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['48']++;remaining--;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['49']++;if(!remaining){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['7'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['50']++;resolve(results);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['7'][1]++;}};}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['51']++;if(length<1){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['8'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['52']++;return resolve(results);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['8'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['53']++;for(;i<length;i++){__cov_bUr1a4oWeLtiaZGIeajdgQ.s['54']++;Promise.resolve(values[i]).then(oneDone(i),reject);}});};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['55']++;Promise.race=function(values){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['20']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['56']++;var Promise=this;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['57']++;return new Promise(function(resolve,reject){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['21']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['58']++;if(!Lang.isArray(values)){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['9'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['59']++;reject(new TypeError('Promise.race expects an array of values or promises'));__cov_bUr1a4oWeLtiaZGIeajdgQ.s['60']++;return;}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['9'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['61']++;for(var i=0,count=values.length;i<count;i++){__cov_bUr1a4oWeLtiaZGIeajdgQ.s['62']++;Promise.resolve(values[i]).then(resolve,reject);}});};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['63']++;Y.Promise=Promise;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['64']++;function Resolver(promise){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['22']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['65']++;this._callbacks=[];__cov_bUr1a4oWeLtiaZGIeajdgQ.s['66']++;this._errbacks=[];__cov_bUr1a4oWeLtiaZGIeajdgQ.s['67']++;this.promise=promise;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['68']++;this._status='pending';__cov_bUr1a4oWeLtiaZGIeajdgQ.s['69']++;this._result=null;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['70']++;Y.mix(Resolver.prototype,{fulfill:function(value){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['23']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['71']++;if(this._status==='pending'){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['10'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['72']++;this._result=value;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['73']++;this._status='fulfilled';}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['10'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['74']++;if(this._status==='fulfilled'){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['11'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['75']++;this._notify(this._callbacks,this._result);__cov_bUr1a4oWeLtiaZGIeajdgQ.s['76']++;this._callbacks=[];__cov_bUr1a4oWeLtiaZGIeajdgQ.s['77']++;this._errbacks=null;}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['11'][1]++;}},reject:function(reason){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['24']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['78']++;if(this._status==='pending'){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['12'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['79']++;this._result=reason;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['80']++;this._status='rejected';}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['12'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['81']++;if(this._status==='rejected'){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['13'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['82']++;this._notify(this._errbacks,this._result);__cov_bUr1a4oWeLtiaZGIeajdgQ.s['83']++;this._callbacks=null;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['84']++;this._errbacks=[];}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['13'][1]++;}},resolve:function(value){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['25']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['85']++;var self=this;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['86']++;if(Promise.isPromise(value)){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['14'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['87']++;value.then(function(value){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['26']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['88']++;self.resolve(value);},function(reason){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['27']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['89']++;self.reject(reason);});}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['14'][1]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['90']++;this.fulfill(value);}},then:function(callback,errback){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['28']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['91']++;return this.promise.then(callback,errback);},_addCallbacks:function(callback,errback){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['29']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['92']++;var callbackList=this._callbacks,errbackList=this._errbacks,status=this._status,result=this._result;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['93']++;if((__cov_bUr1a4oWeLtiaZGIeajdgQ.b['16'][0]++,callbackList)&&(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['16'][1]++,typeof callback==='function')){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['15'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['94']++;callbackList.push(callback);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['15'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['95']++;if((__cov_bUr1a4oWeLtiaZGIeajdgQ.b['18'][0]++,errbackList)&&(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['18'][1]++,typeof errback==='function')){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['17'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['96']++;errbackList.push(errback);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['17'][1]++;}__cov_bUr1a4oWeLtiaZGIeajdgQ.s['97']++;if(status==='fulfilled'){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['19'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['98']++;this.fulfill(result);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['19'][1]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['99']++;if(status==='rejected'){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['20'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['100']++;this.reject(result);}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['20'][1]++;}}},getStatus:function(){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['30']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['101']++;return this._status;},_notify:function(subs,result){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['31']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['102']++;if(subs.length){__cov_bUr1a4oWeLtiaZGIeajdgQ.b['21'][0]++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['103']++;Y.soon(function(){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['32']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['104']++;var i,len;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['105']++;for(i=0,len=subs.length;i<len;++i){__cov_bUr1a4oWeLtiaZGIeajdgQ.s['106']++;subs[i](result);}});}else{__cov_bUr1a4oWeLtiaZGIeajdgQ.b['21'][1]++;}}},true);__cov_bUr1a4oWeLtiaZGIeajdgQ.s['107']++;Y.Promise.Resolver=Resolver;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['108']++;Y.when=function(promise,callback,errback){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['33']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['109']++;promise=Promise.resolve(promise);__cov_bUr1a4oWeLtiaZGIeajdgQ.s['110']++;return(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['23'][0]++,callback)||(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['23'][1]++,errback)?(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['22'][0]++,promise.then(callback,errback)):(__cov_bUr1a4oWeLtiaZGIeajdgQ.b['22'][1]++,promise);};__cov_bUr1a4oWeLtiaZGIeajdgQ.s['111']++;Y.batch=function(){__cov_bUr1a4oWeLtiaZGIeajdgQ.f['34']++;__cov_bUr1a4oWeLtiaZGIeajdgQ.s['112']++;return Promise.all(slice.call(arguments));};},'3.17.2',{'requires':['timers']});
