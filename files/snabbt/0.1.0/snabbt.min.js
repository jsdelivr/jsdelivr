/*! snabbt.js v0.1.0 built: 2015-01-02 */
function snabbt(a,b,c){function d(a){return j.tick(a),j.update_element(e),j.stopped()?void 0:j.completed()?void(f.loop>1&&!j.stopped()?(f.loop-=1,j=snabbtjs.create_animation(i),snabbtjs.requestAnimationFrame(d)):(f.callback&&f.callback(),l.length&&(f=l.pop(),g=snabbtjs.state_from_options(h,f,"from_"),h=snabbtjs.state_from_options(new snabbtjs.State({}),f,""),snabbtjs.setup_animation_options(g,h,f),j=new snabbtjs.Animation(f),snabbtjs.running_animations.push([e,j]),j.tick(a),snabbtjs.requestAnimationFrame(d)))):snabbtjs.requestAnimationFrame(d)}if("scroll"===a)return snabbtjs.setup_scroll_animation(b);if("attention"===b)return snabbtjs.setup_attention_animation(a,c);if("stop"===b)return snabbtjs.stop_animation(a);var e=a,f=b,g=snabbtjs.current_animation_transform(e);g||(g=snabbtjs.state_from_options(g,f,"from_"));var h=new snabbtjs.State({});h=snabbtjs.state_from_options(h,f,"");var i=snabbtjs.setup_animation_options(g,h,f),j=snabbtjs.create_animation(i);if(e.hasOwnProperty("length"))for(var k=0;k<e.length;++k)snabbtjs.running_animations.push([e[k],j]);else snabbtjs.running_animations.push([e,j]);j.update_element(e);var l=[],m={then:function(a){return l.unshift(a),m}};return snabbtjs.requestAnimationFrame(d),m}var snabbtjs=snabbtjs||{};snabbtjs.Animation=function(a){this._start_state=a.start_state,this._end_state=a.end_state,this.offset=a.offset,this.duration=a.duration||500,this.delay=a.delay||0,this.easing=snabbtjs.create_easer("linear"),this.perspective=a.perspective,a.easing&&(this.easing=snabbtjs.create_easer(a.easing,a)),this._current_state=this._start_state.clone(),a.offset&&(this._current_state.offset_x=this.offset[0],this._current_state.offset_y=this.offset[1],this._current_state.offset_z=this.offset[2],this._end_state.offset_x=this.offset[0],this._end_state.offset_y=this.offset[1],this._end_state.offset_z=this.offset[2]),this.start_time=0,this.current_time=0,this._stopped=!1},snabbtjs.Animation.prototype.stop=function(){this._stopped=!0},snabbtjs.Animation.prototype.stopped=function(){return this._stopped},snabbtjs.Animation.prototype.tick=function(a){if(!this._stopped){this.start_time||(this.start_time=a),a-this.start_time>this.delay&&(this.current_time=a-this.delay);var b=Math.min(Math.max(0,this.current_time-this.start_time),this.duration),c=this.duration;this.easing.tick(b/c),this.update_current_transform()}},snabbtjs.Animation.prototype.current_state=function(){return this._current_state},snabbtjs.Animation.prototype.update_current_transform=function(){var a=this.easing.value();snabbtjs.TweenStates(this._start_state,this._end_state,this._current_state,a)},snabbtjs.Animation.prototype.completed=function(){return this._stopped?!0:0===this.start_time?!1:this.easing.completed()},snabbtjs.Animation.prototype.update_element=function(a){var b=this._current_state.as_matrix(),c=this._current_state.properties();snabbtjs.update_element_transform(a,b,this.perspective),snabbtjs.update_element_properties(a,c)},snabbtjs.ValueFeededAnimation=function(a){this.value_feeder=a.value_feeder,this.duration=a.duration||500,this.delay=a.delay||0,this.perspective=a.perspective,this.easing=snabbtjs.create_easer("linear"),a.easing&&(this.easing=snabbtjs.create_easer(a.easing,a)),this._current_state=new snabbtjs.State({}),this.current_matrix=this.value_feeder(0),this.start_time=0,this.current_time=0,this._stopped=!1},snabbtjs.ValueFeededAnimation.prototype.stop=function(){this._stopped=!0},snabbtjs.ValueFeededAnimation.prototype.stopped=function(){return this._stopped},snabbtjs.ValueFeededAnimation.prototype.tick=function(a){if(!this._stopped){this.start_time||(this.start_time=a),a-this.start_time>this.delay&&(this.current_time=a-this.delay);var b=Math.min(Math.max(.001,this.current_time-this.start_time),this.duration),c=this.duration;this.easing.tick(b/c),this.update_current_transform()}},snabbtjs.ValueFeededAnimation.prototype.current_state=function(){return this._current_state},snabbtjs.ValueFeededAnimation.prototype.update_current_transform=function(){var a=this.easing.value();this.current_matrix=this.value_feeder(a)},snabbtjs.ValueFeededAnimation.prototype.completed=function(){return this._stopped?!0:this.easing.completed()},snabbtjs.ValueFeededAnimation.prototype.update_element=function(a){snabbtjs.update_element_transform(a,this.current_matrix,this.perspective)},snabbtjs.ScrollAnimation=function(a){this.start_scroll=window.scrollY,this.end_scroll=a.scroll_pos,this.duration=a.duration||500,this.delay=a.delay||0,this.easing=a.easing||snabbtjs.cos_easing,this.start_time=0,this.current_time=0},snabbtjs.ScrollAnimation.prototype.tick=function(a){this.start_time||(this.start_time=a),a-this.start_time>this.delay&&(this.current_time=a-this.delay),this.update_scrolling()},snabbtjs.ScrollAnimation.prototype.update_scrolling=function(){var a=Math.min(Math.max(.001,this.current_time-this.start_time),this.duration),b=this.duration,c=this.easing(a,b),d=this.end_scroll-this.start_scroll,e=this.start_scroll+c*d;window.scrollTo(0,e)},snabbtjs.ScrollAnimation.prototype.completed=function(){return 0===this.start_time?!1:this.current_time-this.start_time>this.duration},snabbtjs.AttentionAnimation=function(a){this.movement=a.movement,this.current_movement=new snabbtjs.State({}),a.initial_velocity=.1,a.equilibrium_position=0,this.spring=new snabbtjs.SpringEasing(a),this._stopped=!1},snabbtjs.AttentionAnimation.prototype.stop=function(){this._stopped=!0},snabbtjs.AttentionAnimation.prototype.stopped=function(){return this._stopped},snabbtjs.AttentionAnimation.prototype.tick=function(){this._stopped||this.spring.equilibrium||(this.spring.tick(),this.update_movement())},snabbtjs.AttentionAnimation.prototype.update_movement=function(){this.current_movement.x=this.movement.x*this.spring.position,this.current_movement.y=this.movement.y*this.spring.position,this.current_movement.z=this.movement.z*this.spring.position,this.current_movement.ax=this.movement.ax*this.spring.position,this.current_movement.ay=this.movement.ay*this.spring.position,this.current_movement.az=this.movement.az*this.spring.position,this.current_movement.bx=this.movement.bx*this.spring.position,this.current_movement.by=this.movement.by*this.spring.position,this.current_movement.bz=this.movement.bz*this.spring.position},snabbtjs.AttentionAnimation.prototype.update_element=function(a){var b=this.current_movement.as_matrix(),c=this.current_movement.properties();snabbtjs.update_element_transform(a,b),snabbtjs.update_element_properties(a,c)},snabbtjs.AttentionAnimation.prototype.current_state=function(){return this.current_movement},snabbtjs.AttentionAnimation.prototype.completed=function(){return this.spring.equilibrium||this._stopped},snabbtjs.create_animation=function(a){return a.value_feeder?new snabbtjs.ValueFeededAnimation(a):new snabbtjs.Animation(a)};var snabbtjs=snabbtjs||{};snabbtjs.linear_easing=function(a){return a},snabbtjs.ease=function(a){return(Math.cos(a*Math.PI+Math.PI)+1)/2},snabbtjs.ease_in=function(a){return-Math.pow(a-1,2)+1},snabbtjs.ease_out=function(a){return a*a},snabbtjs.SpringEasing=function(a){this.position=snabbtjs.option_or_default(a.start_position,0),this.equilibrium_position=snabbtjs.option_or_default(a.equilibrium_position,1),this.velocity=snabbtjs.option_or_default(a.initial_velocity,0),this.spring_constant=snabbtjs.option_or_default(a.spring_constant,.8),this.deacceleration=snabbtjs.option_or_default(a.spring_deacceleration,.9),this.mass=snabbtjs.option_or_default(a.spring_mass,10),this.equilibrium=!1},snabbtjs.SpringEasing.prototype.tick=function(a){if(0!==a&&!this.equilibrium){var b=-(this.position-this.equilibrium_position)*this.spring_constant,c=b/this.mass;this.velocity+=c,this.position+=this.velocity,this.velocity*=this.deacceleration,Math.abs(this.position-this.equilibrium_position)<.001&&Math.abs(this.velocity)<.001&&(this.equilibrium=!0)}},snabbtjs.SpringEasing.prototype.value=function(){return this.position},snabbtjs.SpringEasing.prototype.completed=function(){return this.equilibrium},snabbtjs.EASING_FUNCS={linear:snabbtjs.linear_easing,ease:snabbtjs.ease,"ease-in":snabbtjs.ease_in,"ease-out":snabbtjs.ease_out},snabbtjs.Easer=function(a){this.easer=a,this._value=0},snabbtjs.Easer.prototype.tick=function(a){this._value=this.easer(a),this.last_value=a},snabbtjs.Easer.prototype.value=function(){return this._value},snabbtjs.Easer.prototype.completed=function(){return this.last_value>=1},snabbtjs.create_easer=function(a,b){if("spring"==a)return new snabbtjs.SpringEasing(b);var c;return c=snabbtjs.is_function(a)?a:snabbtjs.EASING_FUNCS[a],new snabbtjs.Easer(c)},window.jQuery&&!function(a){a.fn.snabbt=function(a,b){return snabbt(this.get(),a,b)}}(jQuery);var snabbtjs=snabbtjs||{};snabbtjs.setup_scroll_animation=function(a){function b(a){c.tick(a),c.completed()||snabbtjs.requestAnimationFrame(b)}var c=new snabbtjs.ScrollAnimation(a);snabbtjs.running_animations.push([void 0,c]),snabbtjs.requestAnimationFrame(b)},snabbtjs.setup_attention_animation=function(a,b){function c(b){e.tick(b),e.update_element(a),e.completed()||snabbtjs.requestAnimationFrame(c)}var d=snabbtjs.state_from_options(new snabbtjs.State({}),b,"");b.movement=d;var e=new snabbtjs.AttentionAnimation(b);snabbtjs.running_animations.push([a,e]),snabbtjs.requestAnimationFrame(c)},snabbtjs.stop_animation=function(a){for(var b=0;b<snabbtjs.running_animations.length;++b){var c=snabbtjs.running_animations[b][0],d=snabbtjs.running_animations[b][1];if(a.hasOwnProperty("length"))for(var e=0;e<a.length;++e)c===a[e]&&d.stop();else c===a&&d.stop()}},snabbtjs.current_animation_transform=function(a){for(var b=0;b<snabbtjs.running_animations.length;++b){var c=snabbtjs.running_animations[b][0],d=snabbtjs.running_animations[b][1];if(!d.stopped()){var e;if(a.hasOwnProperty("length")){for(var f=0;f<a.length;++f)if(c===a[f])return e=d.current_state(),d.stop(),e}else if(c===a)return e=d.current_state(),d.stop(),e}}},snabbtjs.state_from_options=function(a,b,c){return a||(a=new snabbtjs.State({})),b[c+"position"]&&(a.x=b[c+"position"][0],a.y=b[c+"position"][1],a.z=b[c+"position"][2]),b[c+"rotation"]&&(a.ax=b[c+"rotation"][0],a.ay=b[c+"rotation"][1],a.az=b[c+"rotation"][2]),b[c+"skew"]&&(a.skew_x=b[c+"skew"][0],a.skew_y=b[c+"skew"][1]),b[c+"rotation_post"]&&(a.bx=b[c+"rotation_post"][0],a.by=b[c+"rotation_post"][1],a.bz=b[c+"rotation_post"][2]),b[c+"scale"]&&(a.sx=b[c+"scale"][0],a.sy=b[c+"scale"][1]),void 0!==b[c+"width"]&&(a.width=b[c+"width"]),void 0!==b[c+"height"]&&(a.height=b[c+"height"]),void 0!==b[c+"opacity"]&&(a.opacity=b[c+"opacity"]),a},snabbtjs.setup_animation_options=function(a,b,c){return c.start_state=a,c.end_state=b,c},snabbtjs.tick_requests=[],snabbtjs.running_animations=[],snabbtjs.requestAnimationFrame=function(a){snabbtjs.tick_requests.push(a)},snabbtjs.tick_animations=function(a){for(var b=snabbtjs.tick_requests.length,c=0;b>c;++c)snabbtjs.tick_requests[c](a);snabbtjs.tick_requests.splice(0,b),window.requestAnimationFrame(snabbtjs.tick_animations),snabbtjs.running_animations=snabbtjs.running_animations.filter(function(a){return!a[1].completed()})},window.requestAnimationFrame(snabbtjs.tick_animations);var snabbtjs=snabbtjs||{};snabbtjs.assigned_matrix_multiplication=function(a,b,c){return c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15],c},snabbtjs.mat_to_css=function(a){for(var b="matrix3d(",c=0;c<a.length-1;++c)b+=Math.abs(a[c])<.01?"0,":a[c].toFixed(10)+"0,";return b+=a[15].toFixed(10)+")"},snabbtjs.mat_to_css2=function(a){var b="matrix3d("+a[0].toFixed(10)+", "+a[1].toFixed(10)+", "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", "+a[4].toFixed(10)+", "+a[5].toFixed(10)+", "+a[6].toFixed(10)+", "+a[7].toFixed(10)+", "+a[8].toFixed(10)+", "+a[9].toFixed(10)+", "+a[10].toFixed(10)+", "+a[11].toFixed(10)+", "+a[12].toFixed(10)+", "+a[13].toFixed(10)+", "+a[14].toFixed(10)+", "+a[15].toFixed(10)+")";return b},snabbtjs.mult=function(a,b){var c=new Float32Array(16);return snabbtjs.assigned_matrix_multiplication(a,b,c),c},snabbtjs.trans=function(a,b,c){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1])},snabbtjs.rotX=function(a){return new Float32Array([1,0,0,0,0,Math.cos(a),-Math.sin(a),0,0,Math.sin(a),Math.cos(a),0,0,0,0,1])},snabbtjs.rotY=function(a){return new Float32Array([Math.cos(a),0,Math.sin(a),0,0,1,0,0,-Math.sin(a),0,Math.cos(a),0,0,0,0,1])},snabbtjs.rotZ=function(a){return new Float32Array([Math.cos(a),-Math.sin(a),0,0,Math.sin(a),Math.cos(a),0,0,0,0,1,0,0,0,0,1])},snabbtjs.skew=function(a,b){return new Float32Array([1,Math.tan(a),0,0,Math.tan(b),1,0,0,0,0,1,0,0,0,0,1])},snabbtjs.scale=function(a,b){return new Float32Array([a,0,0,0,0,b,0,0,0,0,1,0,0,0,0,1])},snabbtjs.ident=function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},snabbtjs.set_css=function(a,b){if(a.hasOwnProperty("length"))for(var c=0;c<a.length;++c)a[c].style.webkitTransform=snabbtjs.mat_to_css(b),a[c].style.transform=snabbtjs.mat_to_css(b);else a.style.webkitTransform=snabbtjs.mat_to_css(b),a.style.transform=snabbtjs.mat_to_css(b)},snabbtjs.State=function(a){this.ax=snabbtjs.option_or_default(a.ax,0),this.ay=snabbtjs.option_or_default(a.ay,0),this.az=snabbtjs.option_or_default(a.az,0),this.x=snabbtjs.option_or_default(a.x,0),this.y=snabbtjs.option_or_default(a.y,0),this.z=snabbtjs.option_or_default(a.z,0),this.bx=snabbtjs.option_or_default(a.bx,0),this.by=snabbtjs.option_or_default(a.by,0),this.bz=snabbtjs.option_or_default(a.bz,0),this.skew_x=snabbtjs.option_or_default(a.skew_x,0),this.skew_y=snabbtjs.option_or_default(a.skew_y,0),this.offset_x=snabbtjs.option_or_default(a.offset_x,0),this.offset_y=snabbtjs.option_or_default(a.offset_y,0),this.offset_z=snabbtjs.option_or_default(a.offset_z,0),this.sx=snabbtjs.option_or_default(a.sx,1),this.sy=snabbtjs.option_or_default(a.sy,1),this.width=a.width,this.height=a.height,this.opacity=snabbtjs.option_or_default(a.opacity,1)},snabbtjs.State.prototype.clone=function(){var a=new snabbtjs.State({ax:this.ax,ay:this.ay,az:this.az,x:this.x,y:this.y,z:this.z,bx:this.bx,by:this.by,bz:this.bz,skew_x:this.skew_x,skew_y:this.skew_y,sx:this.sx,sy:this.sy,height:this.height,width:this.width,opacity:this.opacity});return a},snabbtjs.State.prototype.assign=function(a){this.ax=a.ax,this.ay=a.ay,this.az=a.az,this.x=a.x,this.y=a.y,this.z=a.z,this.bx=a.bx,this.by=a.by,this.bz=a.bz,this.skew_x=a.skew_x,this.skew_y=a.skew_y,this.sx=a.sx,this.sy=a.sy,this.opacity=a.opacity,this.height=this.height,this.width=this.width},snabbtjs.State.prototype.as_matrix=function(){var a=snabbtjs.scale(this.sx,this.sy);return a=snabbtjs.mult(a,snabbtjs.skew(this.skew_x,this.skew_y)),a=snabbtjs.mult(a,snabbtjs.rotX(this.ax)),a=snabbtjs.mult(a,snabbtjs.rotY(this.ay)),a=snabbtjs.mult(a,snabbtjs.rotZ(this.az)),a=snabbtjs.mult(a,snabbtjs.trans(this.x,this.y,this.z)),a=snabbtjs.mult(a,snabbtjs.rotX(this.bx)),a=snabbtjs.mult(a,snabbtjs.rotY(this.by)),a=snabbtjs.mult(a,snabbtjs.rotZ(this.bz)),a=snabbtjs.mult(snabbtjs.trans(this.offset_x,this.offset_y,this.offset_z),a)},snabbtjs.State.prototype.properties=function(){return{opacity:this.opacity,width:this.width+"px",height:this.height+"px"}};var snabbtjs=snabbtjs||{};snabbtjs.TweenStates=function(a,b,c,d){var e=b.x-a.x,f=b.y-a.y,g=b.z-a.z,h=b.ax-a.ax,i=b.ay-a.ay,j=b.az-a.az,k=b.bx-a.bx,l=b.by-a.by,m=b.bz-a.bz,n=b.sx-a.sx,o=b.sy-a.sy,p=b.skew_x-a.skew_x,q=b.skew_y-a.skew_y,r=b.width-a.width,s=b.height-a.height,t=b.opacity-a.opacity;c.ax=a.ax+d*h,c.ay=a.ay+d*i,c.az=a.az+d*j,c.x=a.x+d*e,c.y=a.y+d*f,c.z=a.z+d*g,c.bx=a.bx+d*k,c.by=a.by+d*l,c.bz=a.bz+d*m,c.skew_x=a.skew_x+d*p,c.skew_y=a.skew_y+d*q,c.sx=a.sx+d*n,c.sy=a.sy+d*o,void 0!==b.width&&(c.width=a.width+d*r),void 0!==b.height&&(c.height=a.height+d*s),void 0!==b.opacity&&(c.opacity=a.opacity+d*t)};var snabbtjs=snabbtjs||{};snabbtjs.option_or_default=function(a,b){return"undefined"==typeof a?b:a},snabbtjs._update_element_transform=function(a,b,c){var d="";c&&(d="perspective("+c+"px) "),a.style.webkitTransform=d+snabbtjs.mat_to_css(b),a.style.transform=d+snabbtjs.mat_to_css(b)},snabbtjs.update_element_transform=function(a,b,c){if(a.hasOwnProperty("length"))for(var d=0;d<a.length;++d)snabbtjs._update_element_transform(a[d],b,c);else snabbtjs._update_element_transform(a,b,c)},snabbtjs._update_element_properties=function(a,b){for(var c in b)a.style[c]=b[c]},snabbtjs.update_element_properties=function(a,b){if(a.hasOwnProperty("length"))for(var c=0;c<a.length;++c)snabbtjs._update_element_properties(a[c],b);else snabbtjs._update_element_properties(a,b)},snabbtjs.is_function=function(a){return"function"==typeof a};