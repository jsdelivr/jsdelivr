/**
  * v1.0.32 generated on: Sun Apr 03 2016 19:20:22 GMT-0500 (CDT)
  * Copyright (c) 2014-2016, Ecor Ventures LLC. All Rights Reserved.
  */
window.NGN={},Object.defineProperty(window.NGN,"define",{enumerable:!1,writable:!1,configurable:!1,value:function(e,t,n,i){return{enumerable:e,writable:t,configurable:n,value:i}}}),Object.defineProperties(window.NGN,{_slice:NGN.define(!1,!1,!1,function(e){return Array.prototype.slice.call(e)}),_splice:NGN.define(!1,!1,!1,function(e){return Array.prototype.splice.call(e)}),_typeof:NGN.define(!1,!1,!1,function(e){return Object.prototype.toString.call(e).split(" ")[1].replace(/\]|\[/gi,"").toLowerCase()}),_od:NGN.define(!1,!1,!1,function(e,t,n,i,r,o){Object.defineProperty(e,t,NGN.define(n,i,r,o))}),_get:NGN.define(!1,!1,!1,function(e,t){return t=void 0===t?!0:t,{enumerable:t,get:e}}),coalesce:NGN.define(!0,!1,!1,function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e]&&"null"!==NGN._typeof(arguments[e]))return arguments[e];return null}),emit:NGN.define(!1,!1,!1,function(e){NGN.BUS?NGN.BUS.emit.apply(NGN.BUS,arguments):console.info(e)}),nodelike:{get:function(){var e=!1;try{e=void 0!==require}catch(t){}return e}}}),document.addEventListener("DOMContentLoaded",function(){document.body.classList.add("ngn")}),window.NGN.DOM={},Object.defineProperties(window.NGN.DOM,{ready:NGN.define(!0,!1,!1,function(e){document.addEventListener("DOMContentLoaded",e)}),destroy:NGN.define(!0,!1,!1,function(e){var t=this;if("string"==typeof e){var n=e;if(e=document.querySelectorAll(e),0===e.length)return void console.warn('The "'+n+'" selector did not return any elements.');NGN._slice(e).forEach(function(e){t.destroy(e)})}else{var i=NGN._typeof(e);switch(i){case"array":return void e.forEach(function(e){t.destroy(e)});case"nodelist":return void NGN._slice(e).forEach(function(e){t.destroy(e)});case"htmlelement":return void e.parentNode.removeChild(e);default:if(/^html.*element$/.test(i))return void e.parentNode.removeChild(e);console.warn("An unknown error occurred while trying to remove DOM elements."),console.log("Unknown Element",e)}}}),findParent:NGN.define(!0,!1,!1,function(e,t,n){if("string"==typeof e){if(e=document.querySelectorAll(e),0===e.length)return console.warn('"'+e+'" is an invalid CSS selector (Does not identify any DOM elements).'),null;e=e[0]}var i=e.parentNode,r=0;for(n="number"==typeof n?n:-1;null===i.parentNode.querySelector(t)&&"BODY"!==i.nodeName;){if(r++,n>0&&r>n)return null;i=i.parentNode}return i}),indexOfParent:NGN.define(!0,!1,!1,function(e){return NGN._slice(e.parentNode.children).indexOf(e)})}),window.NGN.BUS=function(){var e=[],t=[],n=[],i={},r=function(e,t){var n=e.filter(function(e){return t.toLowerCase()===e[0].toLowerCase()});return 0===n.length?null:(n.length>1&&console.warn("NGN Event Bus: "+n[0][0]+" exists more than once."),n[0].filter(function(e,t){return 0!==t}))},o=function(t){return r.apply(this,[e,t])},a=function(e){return r.apply(this,[t,e])},s=function(e){return r.apply(this,[n,e])},d=function(e,t){return null===e||void 0===e||null===t||void 0===t};return Object.defineProperties(i,{subscribe:NGN.define(!0,!1,!1,function(t,n){if(d(t,n))throw new Error("subscribe() requires a topic and listener function as arguments.");var i=o(t);null!==i&&i.unshift(t),null===i&&(i=[t])&&e.push(i);var r=i.push(n);return e[e.map(function(e){return e[0]}).indexOf(t)]=i,{unsubscribe:function(){i=i.splice(r,1),0===i.length?e.splice(e.map(function(e){return e[0]}).indexOf(t),1):e[e.map(function(e){return e[0]}).indexOf(t)]=i}}}),subscribeOnce:NGN.define(!0,!1,!1,function(e,n){if(d(e,n))throw new Error("subscribeOnce() requires a topic and listener function as arguments.");var i=a(e);null!==i&&i.unshift(e),null===i&&(i=[e])&&t.push(i),i.push(n),t[t.map(function(e){return e[0]}).indexOf(e)]=i}),on:NGN.define(!0,!1,!1,function(){return this.subscribe.apply(this,arguments)}),once:NGN.define(!0,!1,!1,function(){return this.subscribeOnce.apply(this,arguments)}),bind:NGN.define(!0,!1,!0,function(e,t,i){t="string"==typeof t?[t]:t;var r=s(e);null!==r&&r.unshift(e),null===r&&(r=[e])&&n.push(r);var o=this,a=function(e){t.forEach(function(t){o.publish(t,void 0!==e?e:{})})},d=r.push(a);return n[n.map(function(e){return e[0]}).indexOf(e)]=r,{remove:function(){r=r.splice(d,1),0===r.length?n.splice(n.map(function(e){return e[0]}).indexOf(e),1):n[n.map(function(e){return e[0]}).indexOf(e)]=r}}}),execWildcardListeners:NGN.define(!1,!1,!1,function(e,t,n,i){var r={eventName:e};i=void 0===i?!0:i,n=n.filter(function(t){if(t[0].indexOf("*")>=0){var n=new RegExp(t[0].replace("*",".*","gi"));return n.test(e)}return!1}),i&&(n=n.map(function(e){return e.slice(1,e.length)})),n.forEach(function(e){e.forEach(function(e){e.call(r,void 0!==t?t:{})})})}),execListeners:NGN.define(!1,!1,!1,function(e,t,n){var i={eventName:e};null!==n&&n.forEach(function(e){e.call(i,void 0!==t?t:{})})}),publish:NGN.define(!0,!1,!1,function(n,i){var r=o(n),d=a(n),f=s(n);this.execListeners(n,i,r),null!==d&&(t=t.filter(function(e){return e[0].toLowerCase()!==n.toLowerCase()}),this.execListeners(n,i,d)),this.execListeners(n,i,f),this.execWildcardListeners(n,i,e),this.execWildcardListeners(n,i,t),t=t.filter(function(e){if(e[0].indexOf("*")>=0){var t=new RegExp(e[0].replace("*",".*","gi"));return!t.test(n)}return!0}),this.execWildcardListeners(n,i,t,!1)}),clear:NGN.define(!1,!1,!1,function(i){var r=function(e){return e.filter(function(e){return e[0].toLowerCase()!==i.toLowerCase()})};e=r(e),t=r(t),n=r(n)}),emit:NGN.define(!0,!1,!1,function(){return this.publish.apply(this,arguments)}),subscribers:NGN._get(function(){var n={};return e.forEach(function(e){n[e[0]]={persist:e.length-1,adhoc:0}}),t.forEach(function(e){n[e[0]]=n[e[0]]||{persist:0},n[e[0]].adhoc=e.length-1}),n}),persistentSubscribers:NGN._get(function(){return e.map(function(e){return e[0]}).sort()}),adhocSubscribers:NGN._get(function(){return t.map(function(e){return e[0]}).sort()}),autoSubscribers:NGN._get(function(){return n.map(function(e){return e[0]}).sort()}),pool:NGN.define(!0,!1,!1,function(e,t,n){"string"!=typeof e&&(t=e,e="");var i=this,r={};Object.keys(t).forEach(function(n){"function"==typeof t[n]?r[n]=i.subscribe((e.trim()||"")+n,t[n]):console.warn((e.trim()||"")+n+" could not be pooled in the event bus because it's value is not a function.")}),n&&n(r)}),attach:NGN.define(!0,!1,!1,function(e){var t=this;return function(){var n=NGN._slice(arguments);n.unshift(e),t.publish.apply(t,n)}})}),i}(),window.NGN.ref=new function(){var e=function(e,t,n,i){if(void 0===NGN.BUS)return console.error("The event BUS is required for "+i+"().");var r=function(e){NGN.BUS.emit(t,e)};n.addEventListener(e,r)},t=function(e,t,n){return"string"==typeof e?document[n?"querySelector":"querySelectorAll"]((e+" > "+t).trim()):e[n?"querySelector":"querySelectorAll"](t.trim())};Object.defineProperties(this,{keys:NGN.define(!1,!0,!1,{}),_find:NGN.define(!1,!1,!1,function(e,t){if("string"==typeof e){var n=window.NGN.ref.find((e+" > "+t).trim());if(0===n.length){var i=window.NGN.ref.find(e.trim())[0].parentNode.querySelectorAll(t);if(i.length>0)return 1===i.length?i[0]:i}return n}return window.NGN.ref.find(e.querySelectorAll(t))}),find:NGN.define(!1,!1,!1,function(n){var i="string"!=typeof n,r=i===!1?document.querySelectorAll(n):n,o=null;if(1===r.length)r[0].hasOwnProperty("isArray")||Object.defineProperties(r[0],{isArray:NGN._get(function(){return!1},!1)}),r[0].hasOwnProperty("find")||NGN._od(r[0],"find",!0,!1,!1,function(e){return window.NGN.ref._find(n,e)}),r[0].hasOwnProperty("forward")||NGN._od(r[0],"forward",!0,!1,!1,function(t,n){e(t,n,this,"forward")}),o=r[0];else{var a=NGN._slice(r);"nodelist"===NGN._typeof(r)&&1===a.length&&(a=a[0]),Object.defineProperties(a,{querySelector:NGN.define(!1,!1,!1,function(e){t(n,e)}),querySelectorAll:NGN.define(!1,!1,!1,function(e){t(n,e,!0)}),addEventListener:NGN.define(!1,!1,!1,function(e,t){for(var n=0;n<this.length;n++)this[n].addEventListener(e,t)}),removeEventListener:NGN.define(!1,!1,!1,function(e,t){for(var n=0;n<this.length;n++)this[n].removeEventListener(e,t)}),find:NGN.define(!0,!1,!1,function(e){return window.NGN.ref._find(n,e)}),isArray:NGN._get(function(){return!0},!1),forward:NGN.define(!1,!1,!1,function(t,n){e(t,n,this,"forward")})}),o=a}return o}),create:{enumerble:!0,writable:!1,configurable:!1,value:function(e,t){if(!t&&"string"!=typeof e)return this.find(e);if("string"!=typeof e&&"number"!=typeof e)throw new Error("Cannot add a non-alphanumeric selector reference.");if(0===e.trim().length)throw new Error("Cannot add a blank selector reference.");if(void 0===t||null===t||0===t.trim().length)throw new Error("Cannot create a null/undefined selector reference.");var n=this.cleanKey(e),i=this;NGN._od(window.NGN.ref,n,!1,!0,!0,t),Object.defineProperty(window.NGN.ref,e,{enumerable:!0,get:function(){return i.find(t)},set:function(e){if(void 0===e||null===e||0===e.trim().length)throw new Error("Cannot create a null/undefined selector reference.");window.NGN.ref[n]=e}}),this.keys[e]=t,this.keys[this.cleanKey(e)]=t}},remove:NGN.define(!0,!1,!1,function(e){this.key&&(delete this.key,delete this.keys[e]);var t=this.cleanKey(e);this[t]&&(delete this[t],delete this.keys[t])}),cleanKey:NGN.define(!1,!1,!1,function(e){return e.replace(/[^A-Za-z0-9\_\#\$\@\-\+]/gi,"")+e.length}),json:{enumerable:!0,get:function(){var e=this,t={};return Object.keys(this).forEach(function(n){e.hasOwnProperty(n)&&["json","find","remove"].indexOf(n.trim().toLowerCase())<0&&"function"!=typeof e[n]&&(t[n]=e.keys[n])}),t}}})};var parser=new DOMParser;window.NGN.HTTP={},Object.defineProperties(window.NGN.HTTP,{xhr:NGN.define(!1,!1,!1,function(e){var t;return window.XMLHttpRequest&&(t=new XMLHttpRequest),t.onreadystatechange=function(){4===t.readyState&&e&&e(t)},t}),run:NGN.define(!1,!1,!1,function(e,t,n){var i=NGN.HTTP.xhr(n);i.open(e,t,!0),i.send()}),applyRequestSettings:NGN.define(!1,!1,!1,function(e,t){if(!e||!t)throw new Error("No XHR or configuration object defined.");if(t.params){var n=Object.keys(t.params).map(function(e){return e+"="+encodeURIComponent(t.params[e])});t.url+="?"+n.join("&")}e.open(t.method||"POST",t.url,!0),t.header=t.header||t.headers||{},Object.keys(t.header).forEach(function(n){e.setRequestHeader(n,t.header[n])});var i=null;return t.json?((!t.header||t.header&&!t.header["Content-Type"])&&e.setRequestHeader("Content-Type","application/jsoncharset=UTF-8"),i=JSON.stringify(t.json).trim()):t.body?((!t.header||t.header&&!t.header["Content-Type"])&&e.setRequestHeader("Content-Type","application/text"),i=t.body):t.form&&(i=new FormData,Object.keys(t.form).forEach(function(e){i.append(e,t.form[e])})),t.withCredentials&&(e.withCredentials=t.withCredentials),t.username&&t.password?e.setRequestHeader("Authorization","Basic "+btoa(t.username+":"+t.password)):t.accessToken&&e.setRequestHeader("Authorization","Bearer "+t.accessToken),i}),send:NGN.define(!0,!1,!1,function(e,t){e=e||{};var n=this.xhr(t),i=this.applyRequestSettings(n,e);n.send(i)}),prepend:NGN.define(!1,!1,!1,function(e,t){return e=NGN._slice(e),e.unshift(t),e}),get:NGN.define(!0,!1,!1,function(){if("object"==typeof arguments[0]){var e=arguments[0];return e.method="GET",e.url="string"==typeof arguments[1]?arguments[1]:e.url,e.url.substr(0,4)&&NGN.nodelike?arguments[arguments.length-1](this.getFile(e.url)):this.send(e,arguments[arguments.length-1])}return arguments[0].substr(0,4)&&NGN.nodelike?arguments[arguments.length-1](this.getFile(arguments[0])):void this.run.apply(this.run,this.prepend(arguments,"GET"))}),getFile:NGN.define(!1,!1,!1,function(e){var t={status:require("fs").existsSync(e.replace("file://",""))?200:400};return t.responseText=200===t.status?require("fs").readFileSync(e.replace("file://","")).toString():"File could not be found.",t}),head:NGN.define(!0,!1,!1,function(e,t){if("object"==typeof arguments[0]){var n=arguments[0];return n.method="HEAD",n.url="string"==typeof arguments[1]?arguments[1]:n.url,this.send(n,arguments[arguments.length-1])}this.run.apply(this.run,this.prepend(arguments,"HEAD"))}),put:NGN.define(!0,!1,!1,function(e,t){e=e||{},e.method="PUT",e.url=e.url||window.location,this.send(e,t)}),post:NGN.define(!0,!1,!1,function(e,t){e=e||{},e.method="POST",e.url=e.url||window.location,this.send(e,t)}),"delete":NGN.define(!0,!1,!1,function(){this.run.apply(this.run,this.prepent(arguments,"DELETE"))}),json:NGN.define(!0,!1,!1,function(e,t,n){"string"==typeof e&&(n=t,t=e,e=null),null===e?this.run("GET",t,function(e){if(200!==e.status)throw Error("Could not retrieve JSON data from "+t+" (Status Code: "+e.status+").");try{e.json=JSON.parse(e.responseText)}catch(i){e.json=null}n&&n(e.json)}):(e.url=t,this.get(e,function(e){if(200!==e.status)throw Error("Could not retrieve JSON data from "+t+" (Status Code: "+e.status+").");try{e.json=JSON.parse(e.responseText)}catch(i){e.json=null}n&&n(e.json)}))}),normalizeUrl:NGN.define(!1,!1,!1,function(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/")}),"import":NGN.define(!0,!1,!1,function(e,t,n){if(Array.isArray(e)){var i=this,r=new Array(e.length),o=0;if(e.forEach(function(e,t){i["import"](e,function(e){r[t]=e,o++},n)}),t)var a=setInterval(function(){o===e.length&&(clearInterval(a),t(r))},5)}else{var s=null;try{s=e.split("/").pop().split("?")[0].split(".").pop().toLowerCase();var d;"js"===s?(d=document.createElement("script"),d.setAttribute("type","text/javascript"),d.setAttribute("src",e)):"css"===s&&(d=document.createElement("link"),d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",e)),d.onload="function"==typeof t?function(){t(d)}:function(){},document.getElementsByTagName("head")[0].appendChild(d)}catch(f){}if(!(["js","css"].indexOf((s||"").trim().toLowerCase())>=0)){if(n="boolean"==typeof n?n:!1,"http"!==e.substr(0,4)){var c=window.location.href.split("/");c.pop(),e=c.join("/")+"/"+e}if(!n&&this.importCache.hasOwnProperty(e)){var u=this.createElement(this.importCache[e]);return t&&t(1===u.length?u[0]:u),void(window.NGN.BUS&&window.NGN.BUS.emit("html.import",1===u.length?u[0]:u))}var l=this;this.get(e,function(n){if(200!==n.status)return console.warn("Check the file path of the snippet that needs to be imported. "+e+" could not be found ("+n.status+")");var i=l.createElement(n.responseText);if(l.importCache[e]=n.responseText,0===i.length)console.warn(l.normalizeUrl(e)+" import has no HTML tags."),t&&t(n.responseText),window.NGN.BUS&&window.NGN.BUS.emit("html.import",n.responseText);else{var r=1===i.length?i[0]:i;t&&t(r),window.NGN.BUS&&window.NGN.BUS.emit("html.import",r)}})}}}),processImport:NGN.define(!1,!1,!1,function(e,t,n,i){i=void 0!==i?i:!1,this["import"](e,function(e){if("string"==typeof e)e=document.createTextNode(e);else if(e.length){var r=[];return NGN._slice(e).forEach(function(e){i?(r.push(t.parentNode.insertBefore(e,t)),t=e):r.push(t.appendChild(e))}),void(n&&n(r))}i?t.parentNode.insertBefore(e,t):t.appendChild(e),n&&n(e)})}),importTo:NGN.define(!0,!1,!1,function(e,t,n){this.processImport(e,t,n)}),importBefore:NGN.define(!0,!1,!1,function(e,t,n){this.processImport(e,t,n,!0)}),domainRoot:NGN.define(!1,!1,!1,function(e){var t=-1!==e.search(/^https?\:\/\//)?e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i,""):e.match(/^([^\/?#]+)(?:[\/?#]|$)/i,"");return null===t||t[1].length<3?window.location.host:t[1]}),isCrossOrigin:NGN.define(!1,!1,!1,function(e){return this.domainRoot(e)!==window.location.host}),prelink:NGN.define(!1,!1,!1,function(e,t,n){var i=document.createElement("link");i.rel=t,i.href="http"!==e.substr(0,4)?this.normalizeUrl(window.location.origin+window.location.pathname+e):e,NGN.coalesce(n,this.isCrossOrigin(e))&&i.setAttribute("crossorigin","true"),document.head.appendChild(i),NGN.emit("network."+t)}),predns:NGN.define(!0,!1,!1,function(e,t){this.prelink(window.location.protocol+"//"+e,"dns-prefetch",t)}),preconnect:NGN.define(!0,!1,!1,function(e,t){this.prelink(e,"preconnect",t)}),prefetch:NGN.define(!0,!1,!1,function(e,t){this.prelink(e,"prefetch",t)}),subresource:NGN.define(!0,!1,!1,function(e,t){this.prelink(e,"subresource",t)}),prerender:NGN.define(!0,!1,!1,function(e,t){this.prelink(e,"prerender",t)}),template:NGN.define(!0,!1,!1,function(e,t,n){e=this.normalizeUrl(e),"function"==typeof t&&(n=t,t={}),t=t||{};var i,r=this;return this.importCache.hasOwnProperty(e)?(i=this.importCache[e],this.applyData(i,t,n)):void this.get(e,function(i){var o=null;try{o=e.split("/").pop().split("?")[0].split(".").pop().toLowerCase()}catch(a){}return["js","css"].indexOf((o||"").trim().toLowerCase())>=0?void console.warn("Cannot use a ."+o+" file as a template. Only HTML templates are supported."):(r.importCache[e]=i.responseText,void r.applyData(i.responseText,t,n))})}),importCache:NGN.define(!1,!0,!1,{}),createElement:NGN.define(!1,!1,!1,function(e){return parser.parseFromString(e,"text/html").querySelector("body").children}),applyData:NGN.define(!1,!1,!1,function(e,t,n){if(void 0===e)return console.warn("Empty template."),void(n&&n());Object.keys(t).forEach(function(n){var i=new RegExp("{{"+n+"}}","gm");e=e.replace(i,t[n])}),e=e.replace(/(\{\{.*\}\})/gm,"");var i=this.createElement(e);n&&n(i[0])})});var __preventfouc=function(){var e=document.createElement("style"),t=document.createTextNode("svg[src]{display:none}svg.loading{height:0px !important;width:0px !important}");e.appendChild(t),document.head.appendChild(e)};__preventfouc();var _nodeish_env=!1;try{_nodeish_env=void 0!==require}catch(e){}if(window.NGN=window.NGN||{},window.NGN.DOM=window.NGN.DOM||{},window.NGN.DOM.svg={},Object.defineProperties(window.NGN.DOM.svg,{_cache:NGN.define(!1,!1,!0,{}),swap:NGN.define(!1,!1,!1,function(e,t){for(var n=this,i=0;i<e.length;i++){var r=e[i].attributes,o=n._cache[e[i].getAttribute("src")],a=[];try{a=/<svg(\s.*=[\"\'].*?[\"\'])?>/i.exec(o)[1].trim();var s=/[\"\']\s/i.exec(a)[0];a=a.replace(new RegExp(s,"gi"),s.replace(/\s/gi,",")).split(",")}catch(d){}for(var f=a.map(function(e){return e.split("=")[0].trim().toLowerCase()}),c=0;c<r.length;c++){var u=f.indexOf(r[c].name.toLowerCase());0>u?a.push(r[c].name+'="'+r[c].value+'"'):a[u]=r[c].name+'="'+r[c].value+'"'}a=a.filter(function(e){return"src"!==e.split("=")[0].toLowerCase()});var l="<svg "+a.join(" ")+">";e[i].outerHTML=o.replace(/<svg.*?>/i,l)}t&&t()}),id:NGN.define(!1,!1,!1,function(e){return e.replace(/.*\:\/\/|[^A-Za-z0-9]|www/gi,"")}),cleanCode:NGN.define(!1,!1,!1,function(e){try{return e.toString().trim().replace(/(\r\n|\n|\r)/gm,"").replace(/\s+/g," ").match(/\<svg.*\<\/svg\>/gim,"")[0]}catch(t){return""}}),viewbox:NGN.define(!1,!1,!1,function(e){return/(viewbox=["'])(.*?)(["'])/gim.exec(e.toString().trim())[2]||"0 0 100 100"}),cache:NGN.define(!1,!1,!1,function(e,t){this._cache[e]=t}),fetchFile:NGN.define(!1,!1,!1,function(e,t){if(_nodeish_env)t&&t(require("fs").readFileSync(e.replace("file://","")).toString());else{var n=this;NGN.HTTP.get(e,function(e){t&&t(200!==e.status?new Error(e.responseText):n.cleanCode(e.responseText))})}}),update:NGN.define(!0,!1,!1,function(e,t){if("function"==typeof e?(t=e,e=document.body):e=e||document.body,"#text"!==e.nodeName){var n=this;e=e.hasOwnProperty("length")===!0?NGN._splice(e):[e],e.forEach(function(e){for(var i=e.querySelectorAll("svg[src]"),r=0;r<i.length;r++)n._cache[i[r].getAttribute("src")]=n._cache[i[r].getAttribute("src")]||null;var o=Object.keys(n._cache).filter(function(e){return null===n._cache[e]}),a=o.length;o.forEach(function(e){n.fetchFile(e,function(t){t instanceof Error||n.cache(e,t),a--})});var s=setInterval(function(){0===a&&(clearInterval(s),n.swap(i,t))},5)})}})}),window.NGN=window.NGN||{},window.NGN.DATA=window.NGN.DATA||{},window.NGN.DATA.util={},Object.defineProperties(window.NGN.DATA.util,{crcTable:NGN.define(!1,!0,!1,null),makeCRCTable:NGN.define(!1,!1,!1,function(){for(var e,t=[],n=0;256>n;n++){e=n;for(var i=0;8>i;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}),checksum:NGN.define(!0,!1,!1,function(e){for(var t=this.crcTable||(this.crcTable=this.makeCRCTable()),n=-1,i=0;i<e.length;i++)n=n>>>8^t[255&(n^e.charCodeAt(i))];return(-1^n)>>>0}),inherit:NGN.define(!0,!1,!1,function(e,t){e="function"==typeof e?e.prototype:e,t="function"==typeof t?t.prototype:t,Object.getOwnPropertyNames(e).forEach(function(n){var i=e[n];t[n]=i})}),EventEmitter:NGN.define(!0,!1,!1,{})}),Object.defineProperties(NGN.DATA.util.EventEmitter,{_events:NGN.define(!1,!0,!1,{}),on:NGN.define(!1,!1,!1,function(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)}),off:NGN.define(!1,!1,!1,function(e,t){var n=this._events[e].indexOf(t);0>n||(this._events[e].splice(n,1),0===this._events[e].length&&delete this._events[e])}),emit:NGN.define(!1,!1,!1,function(e,t){this._events.hasOwnProperty(e)&&this._events[e].forEach(function(e){e(t)}),NGN.emit(e,t)})}),window.NGN=window.NGN||{},window.NGN.DATA=window.NGN.DATA||{},window.NGN.DATA.Entity=function(e){e=e||{};var t=this;Object.defineProperties(this,{idAttribute:NGN.define(!1,!1,!1,e.idAttribute||"id"),fields:NGN.define(!1,!0,!0,e.fields||{id:{required:!0,type:String,"default":e.id||null}}),virtuals:NGN.define(!1,!0,!0,e.virtuals||{}),validators:NGN.define(!1,!0,!1,{}),validation:NGN.define(!0,!0,!1,NGN.coalesce(e.validation,!0)),isNew:NGN.define(!1,!0,!1,!0),isDestroyed:NGN.define(!1,!0,!1,!1),modified:NGN._get(function(){return this.checksum!==this.benchmark}),oid:NGN.define(!1,!0,!0,e[this.idAttribute]||null),id:{enumerable:!0,get:function(){return this.oid},set:function(e){this.oid=e}},checksum:NGN._get(function(){return NGN.DATA.util.checksum(JSON.stringify(this.data))}),benchmark:NGN.define(!1,!0,!1,null),setUnmodified:NGN.define(!1,!1,!1,function(){this.benchmark=this.checksum,this.changelog=[]}),allowInvalidSave:NGN.define(!1,!0,!1,NGN.coalesce(e.allowInvalidSave,!1)),disableDataValidation:NGN.define(!1,!0,!1,NGN.coalesce(e.disableDataValidation,!1)),invalidDataAttributes:NGN.define(!1,!0,!1,[]),initialDataAttributes:NGN.define(!1,!0,!1,[]),changelog:NGN.define(!1,!0,!1,[]),_nativeValidators:NGN.define(!1,!1,!1,{min:function(e,t){return t instanceof Array?t.length>=e:t instanceof Number?t>=e:t instanceof String?t.trim().length>=e:t instanceof Date?t.parse()>=e.parse():!1},max:function(e,t){return t instanceof Array?t.length<=e:t instanceof Number?e>=t:t instanceof String?t.trim().length<=e:t instanceof Date?t.parse()<=e.parse():!1},"enum":function(e,t){return e.indexOf(t)>=0},required:function(e){return this.hasOwnProperty(e)}}),_dataMap:NGN.define(!0,!0,!1,e.dataMap||null),_reverseDataMap:NGN.define(!0,!0,!1,null),dataMap:{get:function(){return this._dataMap},set:function(e){this._dataMap=e,this._reverseDataMap=null}},reverseMap:NGN._get(function(){if(null!==this.dataMap){if(null!==this._reverseDataMap)return this._reverseDataMap;var e={};return Object.keys(this._dataMap).forEach(function(n){e[t._dataMap[n]]=n}),this._reverseDataMap=e,e}return null}),raw:NGN.define(!1,!0,!1,{}),_store:NGN.define(!1,!0,!1,null),datastore:NGN._get(function(){return this._store}),addValidator:NGN.define(!0,!1,!1,function(e,t){if(!this.hasOwnProperty(e))return void console.warn("No validator could be create for "+e.toUpperCase()+". It is not an attribute of "+this.type.toUpperCase()+".");switch(typeof t){case"function":this.validators[e]=this.validators[e]||[],this.validators[e].push(t),this.emit("validator.add",e);break;case"object":Array.isArray(t)?(this.validators[e]=this.validators[e]||[],this.validators[e].push(function(e){return t.indexOf(e)>=0}),this.emit("validator.add",e)):t.test?(this.validators[e]=this.validators[e]||[],this.validators[e].push(function(e){return t.test(e)}),this.emit("validator.add",e)):console.warn("No validator could be created for "+e.toUpperCase()+". The validator appears to be invalid.");break;case"string":case"number":case"date":this.validators[e]=this.validators[e]||[],this.validators[e].push(function(e){return e===t}),this.emit("validator.add",e);break;default:console.warn("No validator could be create for "+e.toUpperCase()+". The validator appears to be invalid.")}}),removeValidator:NGN.define(!0,!1,!1,function(e){this.validators.hasOwnProperty(e)&&(delete this.validators[e],this.emit("validator.remove",e))}),validate:NGN.define(!0,!1,!1,function(e){var n=!0;if(e&&this.validators.hasOwnProperty(e)){for(o=0;o<this.validators[e].length;o++)if(!t.validators[e][o](t[e]))return t.invalidDataAttributes.indexOf(e)<0&&t.invalidDataAttributes.push(e),!1;return!0}for(var i in this.validators)if(this[i]&&this.validators.hasOwnProperty(i)){for(var r=!0,o=0;o<this.validators[i].length&&(r=this.validators[i][o](this[i]),r);o++);!r&&this.invalidDataAttributes.indexOf(i)<0&&this.invalidDataAttributes.push(i),n&&!r&&(n=!1)}return!0}),valid:NGN._get(function(){return 0===this.invalidDataAttributes.length}),datafields:NGN._get(function(){return Object.keys(this.fields)}),getDataField:NGN.define(!0,!1,!1,function(e){return this.fields[e]}),hasDataField:NGN.define(!0,!1,!1,function(e){return this.fields.hasOwnProperty(e)}),data:NGN._get(function(){var e=this.serialize();return this.dataMap&&Object.keys(this.dataMap).forEach(function(n){e.hasOwnProperty(n)&&(e[t.dataMap[n]]=e[n],delete e[n])}),e}),serialize:NGN.define(!1,!1,!1,function(e){var t=e||this.raw,n={};for(var i in t)if(t.nonEnumerableProperties=t.nonEnumerableProperties||"",this.fields.hasOwnProperty(i)&&(i="id"===i?this.idAttribute:i,t.hasOwnProperty(i)&&t.nonEnumerableProperties.indexOf(i)<0&&/^[a-z0-9 ]$/.test(i.substr(0,1))||void 0!==t[i]&&t.enumerableProperties.indexOf(i)>=0)){var r=Object.getOwnPropertyDescriptor(t,i);if(!r.set)switch(typeof r.value){case"function":"Date"===r.value.name?n[i]=t[i].refs.toJSON():"RegExp"===r.value.name&&(n[i]=r.value());break;case"object":t[i]instanceof Array&&!Array.isArray(t[i])&&(t[i]=t[i].slice(0)),n[i]=t[i];break;default:n[i]=t[i]}}return n}),addField:NGN.define(!0,!1,!1,function(e,n){if(n=void 0!==n?n:!1,"id"!==e.toLowerCase()){if("object"==typeof e){if(!e.name)throw new Error("Cannot create data field. The supplied configuration does not contain a unique data field name.");var i=e;e=i.name,delete i.name}if(void 0!==t[e]&&(console.warn(e+" data field defined multiple times. Only the last defintion will be used."),delete t[e]),t.fields[e]=i||t.fields[e]||{},t.fields[e].required=NGN.coalesce(t.fields[e].required,!1),t.fields[e].type=NGN.coalesce(t.fields[e].type,String),t.fields[e]["default"]=NGN.coalesce(t.fields[e]["default"],null),t.raw[e]=t.fields[e]["default"],t[e]=t.raw[e],Object.defineProperty(t,e,{get:function(){return t.raw[e]},set:function(n){var i=t.raw[e];t.raw[e]=n;var r={action:"update",field:e,old:i,"new":t.raw[e]};this.changelog.push(r),this.emit("field.update",r),t.validate(e)||t.emit("field.invalid",{field:e})}}),!n){var r={action:"create",field:e};this.changelog.push(r),this.emit("field.create",r)}t.fields.hasOwnProperty(e)&&(t.fields[e].hasOwnProperty("pattern")&&t.addValidator(e,t.fields[e].pattern),["min","max","enum"].forEach(function(n){t.fields[e].hasOwnProperty(n)&&t.addValidator(e,function(i){return t._nativeValidators[n](t.fields[e],i)})}),t.fields[e].hasOwnProperty("required")&&t.fields[e].required&&t.addValidator(e,function(e){return t._nativeValidators.required(e)}),t.fields[e].hasOwnProperty("validate")&&("function"==typeof t.fields[e]?t.addValidator(e,function(n){return t.fields[e](n)}):console.warn("Invalid custom validation function. The value passed to the validate attribute must be a function.")))}}),addVirtual:NGN.define(!0,!1,!1,function(e,n){Object.defineProperty(this,e,NGN._get(function(){return n.apply(t)}))}),removeField:NGN.define(!0,!1,!1,function(e){if(this.raw.hasOwnProperty(e)){var t=this.raw[e];delete this[e],delete this.fields[e],delete this.raw[e],this.invalidDataAttributes.indexOf(e)>=0&&this.invalidDataAttributes.splice(this.invalidDataAttributes.indexOf(e),1);var n={action:"delete",field:e,value:t};this.emit("field.remove",n),this.changelog.push(n)}}),removeVirtual:NGN.define(!0,!1,!1,function(e){delete this[e]}),history:NGN._get(function(){return this.changelog.reverse()}),undo:NGN.define(!0,!1,!1,function(e){e=e||1;var n=this.changelog.splice(this.changelog.length-e,e);n.reverse().forEach(function(e){switch(e.action){case"update":t[e.field]=e.old;break;case"create":t.removeField(e.field);break;case"delete":t.addField(e.field),t[e.field]=t.old}})}),load:NGN.define(!0,!1,!1,function(e){e=e||{},null!==this._dataMap&&Object.keys(this.reverseMap).forEach(function(n){e.hasOwnProperty(n)&&(e[t.reverseMap[n]]=e[n],delete e[n])}),Object.keys(e).forEach(function(n){t.raw.hasOwnProperty(n)?t.raw[n]=e[n]:n===t.idAttribute?t.id=e[n]:console.warn(n+" was specified as a data field but is not defined in the model.")}),this.setUnmodified()})}),this.fields.hasOwnProperty("id")||(e.fields.id={required:!0,type:String,"default":e.id||null}),Object.keys(this.fields).forEach(function(e){t.addField(e,!0)}),Object.keys(this.virtuals).forEach(function(e){Object.defineProperty(t,e,NGN._get(function(){return t.virtuals[e].apply(t)}))})},window.NGN.DATA.Model=function(e){var t=function(t){this.constructor(e),t&&this.load(t)};return NGN.DATA.util.inherit(NGN.DATA.Entity,t),t},NGN.DATA.util.inherit(NGN.DATA.util.EventEmitter,NGN.DATA.Entity),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;i>o;o++)if(t=n[o],e.call(r,t,o,n))return o;return-1}),window.NGN=window.NGN||{},window.NGN.DATA=window.NGN.DATA||{},window.NGN.DATA.Store=function(e){e=e||{};var t=this;Object.defineProperties(this,{model:NGN.define(!0,!1,!1,e.model||null),_data:NGN.define(!1,!0,!1,[]),_filters:NGN.define(!1,!0,!1,[]),_index:NGN.define(!1,!0,!1,e.index||[]),_created:NGN.define(!1,!0,!1,[]),_deleted:NGN.define(!1,!0,!1,[]),_loading:NGN.define(!1,!0,!1,!1),proxy:NGN.define(!1,!0,!1,null),allowDuplicates:NGN.define(!0,!0,!1,NGN.coalesce(e.allowDuplicates,!0)),errorOnDuplicate:NGN.define(!0,!1,!1,NGN.coalesce(e.errorOnDuplicate,e.allowDuplicates,!0)),eventListener:NGN.define(!1,!1,!1,function(e){return function(n){n.datastore&&n.datastore===t&&e(n)}}),on:NGN.define(!0,!1,!1,function(e,t){return NGN.BUS?void(["record.create","record.delete","index.create","index.delete","record.duplicate","record.update"].indexOf(e)>=0?NGN.BUS.on(e,this.eventListener(t)):console.warn(e+" is not a supported NGN.DATA.Store event.")):void console.warn("NGN.DATA.Model.on('"+e+"', ...) will not work because NGN.BUS is not available.")}),add:NGN.define(!0,!1,!1,function(e,n){var i;if(e instanceof NGN.DATA.Entity)i=e;else{try{e=JSON.parse(e)}catch(r){}if("object"!=typeof e)throw new Error("Cannot add a non-object record.");i=this.model?new this.model(e):e}i.hasOwnProperty("_store")&&(i._store=t);var o=this.isDuplicate(i);if(!o||(NGN.emit("record.duplicate",i),this.allowDuplicates))this.listen(i),this.applyIndices(i,this._data.length),this._data.push(i),!this._loading&&this._created.indexOf(i)<0&&this._created.push(i),!NGN.coalesce(n,!1)&&NGN.emit("record.create",i);else if(this.errorOnDuplicate)throw new Error("Cannot add duplicate record (allowDuplicates = false).")}),isDuplicate:NGN.define(!1,!1,!1,function(e){return this._data.indexOf(e)>=0?!1:this._data.filter(function(t){return t.checksum===e.checksum}).length>0}),listen:NGN.define(!1,!1,!1,function(e){e.on("field.update",function(n){t.updateIndice(n.field,n.old,n["new"],t._data.indexOf(e)),NGN.emit("record.update",e)}),e.on("field.delete",function(n){t.updateIndice(n.field,n.old,void 0,t._data.indexOf(e)),NGN.emit("record.update",e)})}),bulk:NGN.define(!0,!1,!1,function(e,n){this._loading=!0,n.forEach(function(e){t.add(e,!0)}),this._loading=!1,this._deleted=[],this._created=[],NGN.emit(e||"load")}),load:NGN.define(!0,!1,!1,function(){var e=Array.isArray(arguments[0])?arguments[0]:NGN._slice(arguments);this.bulk("load",e)}),reload:NGN.define(!0,!1,!1,function(e){this.clear();var t=Array.isArray(arguments[0])?arguments[0]:NGN._slice(arguments);
this.bulk("reload",t)}),indexOf:NGN.define(!0,!1,!1,function(e){return"object"==typeof e&&(e instanceof NGN.DATA.Model||e.checksum)?this._data.findIndex(function(t){return t.checksum===e.checksum}):-1}),contains:NGN.define(!0,!1,!1,function(e){return this.indexOf(e)>=0}),remove:NGN.define(!0,!1,!1,function(e,t){var n,i=[];if("number"==typeof e)n=e;else if(e&&e.checksum&&null!==e.checksum||e instanceof NGN.DATA.Model)n=this.indexOf(e);else{var r=new this.model(e,!0);n=this._data.findIndex(function(e){return e.checksum===r.checksum})}if(0>n)throw new Error("Record removal failed (record not found at index "+(n||"").toString()+").");if(i=this._data.splice(n,1),i.length>0){if(i=i[0],this.unapplyIndices(n),!this._loading){var o=this._created.indexOf(i);o>=0?o>=0&&this._created.splice(o,1):this._deleted.indexOf(i)<0&&this._deleted.push(i)}!NGN.coalesce(t,!1)&&NGN.emit("record.delete",i)}}),clear:NGN.define(!0,!1,!1,function(){this._data=[],Object.keys(this._index).forEach(function(e){t._index[e]=[]}),NGN.emit("clear")}),data:NGN._get(function(){return this._data.map(function(e){return e.data})}),records:NGN._get(function(){return this.applyFilters(this._data)}),recordCount:NGN._get(function(){return this.applyFilters(this._data).length}),find:NGN.define(!0,!1,!1,function(e,n){if(0===this._data.length)return[];var i=[];switch(typeof e){case"function":i=this._data.filter(e);break;case"number":i=0>e||e>=this._data.length?null:this._data[e];break;case"string":var r=this.getIndices(this._data[0].idAttribute,e.trim());if(null!==r&&r.length>0)return r.forEach(function(e){i.push(t._data[e])}),i;var o=this._data.filter(function(t){return(t[t.idAttribute]||"").toString().trim()===e.trim()});i=0===o.length?null:o[0];break;case"object":if(e instanceof NGN.DATA.Model)return this.contains(e)?e:null;var a=[],s=[],d=Object.keys(e);d.forEach(function(n){var i=t.getIndices(n,e[n]);i?a=a.concat(i||[]):null!==n&&s.push(n)}),a.filter(function(e,t){return a.indexOf(e)===t}),s.length>0&&(i=this._data.filter(function(t,n){if(a.indexOf(n)>=0)return!1;for(var i=0;i<s.length;i++)if(t[s[i]]!==e[s[i]])return!1;return!0})),i=i.concat(a.map(function(e){return t._data[e]})).filter(function(t){for(var n=0;n<d.length;n++)if(e[d[n]]!==t[d[n]])return!1;return!0});break;default:i=this._data}return null===i?null:(!NGN.coalesce(n,!1)&&this.applyFilters(i instanceof Array?i:[i]),i)}),applyFilters:NGN.define(!1,!1,!1,function(e){return 0===this._filters.length?e:(this._filters.forEach(function(t){e=e.filter(t)}),e)}),addFilter:NGN.define(!0,!1,!1,function(e){this._filters.push(e),NGN.emit("filter.create",e)}),removeFilter:NGN.define(!0,!1,!1,function(e,t){t=NGN.coalesce(t,!1);var n=[];n="number"==typeof e?this._filters.splice(e,1):this._filters.splice(this._filters.indexOf(e),1),n.length>0&&!t&&NGN.emit("filter.delete",n[0])}),clearFilters:NGN.define(!0,!1,!1,function(e){if(e=NGN.coalesce(e,!1))return void(this._filters=[]);for(;this._filters.length>0;)NGN.emit("filter.delete",this._filters.pop())}),deduplicate:NGN.define(!0,!1,!1,function(e){e=NGN.coalesce(e,!0);var n=this.data.map(function(e){return JSON.stringify(e)}),i=[];n.forEach(function(e,r){n.indexOf(e)<r&&i.push(t.find(r))}),i.forEach(function(e){t.remove(e)})}),sort:NGN.define(!0,!1,!1,function(e){if("function"==typeof e)this.records.sort(e);else if("object"==typeof e){var t=Object.keys(e);this.records.sort(function(n,i){for(var r=0;r<t.length;r++){if(n.hasOwnProperty(t[r])&&!i.hasOwnProperty(t[r]))return 1;if(!n.hasOwnProperty(t[r])&&i.hasOwnProperty(t[r]))return-1;if(n[t[r]]!==i[t[r]])switch(e[t[r]].toString().trim().toLowerCase()){case"asc":return n[t[r]]>i[t[r]]?1:-1;case"desc":return n[t[r]]<i[t[r]]?1:-1;default:return"function"==typeof e[t[r]]?e[t[r]](n,i):0}}return 0})}this.reindex()}),createIndex:NGN.define(!0,!1,!1,function(e,n){this.model.hasOwnProperty(e)||console.warn("The store's model does not contain a data field called "+e+".");var i=this._index.hasOwnProperty(e);this._index[e]=this._index[e]||[],!NGN.coalesce(n,!1)&&!i&&NGN.emit("index.created",{field:e,store:t})}),deleteIndex:NGN.define(!0,!1,!1,function(e,n){this._index.hasOwnProperty(e)&&(delete this._index[e],!NGN.coalesce(n,!1)&&NGN.emit("index.created",{field:e,store:t}))}),clearIndices:NGN.define(!1,!1,!1,function(){Object.keys(this._index).forEach(function(e){t._index[e]=[]})}),deleteIndexes:NGN.define(!0,!1,!1,function(e){e=NGN.coalesce(e,!0),Object.keys(this._index).forEach(function(n){t.deleteIndex(n,e)})}),applyIndices:NGN.define(!1,!1,!1,function(e,n){var i=Object.keys(this._index);0!==i.length&&i.forEach(function(i){if(e.hasOwnProperty(i)){for(var r=t._index[i],o=0;o<r.length;o++)if(r[o][0]===e[i])return void t._index[i][o].push(n);t._index[i].push([e[i],n])}})}),unapplyIndices:NGN.define(!1,!1,!1,function(e){Object.keys(this._index).forEach(function(n){var i=t._index[n].indexOf(e);i>=0&&t._index[n].splice(i,1)})}),updateIndice:NGN.define(!1,!1,!1,function(e,n,i,r){if(this._index.hasOwnProperty(e)&&n!==i)for(var o=0,a=0;a<t._index[e].length;a++){var s=t._index[e][a][0];if(s===n?(t._index[e][a].splice(t._index[e][a].indexOf(r),1),o++):void 0===i?o++:s===i&&(t._index[e][a].push(r),t._index[e][a].shift(),t._index[e][a].sort(),t._index[e][a].unshift(s),o++),2===o)return}}),getIndices:NGN.define(!1,!1,!1,function(e,t){if(!this._index.hasOwnProperty(e))return null;var n=this._index[e].filter(function(e){return e.length>0&&e[0]===t});return 1===n.length?(n[0].shift(),n[0]):[]}),reindex:NGN.define(!1,!1,!1,function(){this.clearIndices(),this._data.forEach(function(e,n){t.applyIndices(e,n)})})}),!NGN.BUS&&this._index.length>0&&console.warn("Indexing will not work for record updates because NGN.BUS cannot be found.");var n={};this._index.forEach(function(e){n[e]=[]}),this._index=n},NGN.DATA.util.inherit(NGN.DATA.util.EventEmitter,NGN.DATA.Store),window.NGN=window.NGN||{},window.NGN.DATA=window.NGN.DATA||{},!NGN.HTTP)throw new Error("NGN.DATA.Proxy requires NGN.HTTP.");window.NGN.DATA.Proxy=function(e){if(e=e||{},!e.store)throw new Error("NGN.DATA.Proxy requires a NGN.DATA.Store.");e.store.proxy=this,Object.defineProperties(this,{store:NGN.define(!0,!1,!1,e.store),url:NGN.define(!0,!0,!1,e.url||"http://localhost"),username:NGN.define(!0,!0,!1,e.username||null),password:NGN.define(!0,!0,!1,e.password||null),token:NGN.define(!0,!0,!1,e.token||null),actions:NGN._get(function(){return{create:e.store._created,update:e.store.records.filter(function(t){return e.store._created.indexOf(t)<0&&e.store._deleted.indexOf(t)<0?!1:t.modified}).map(function(e){return e}),"delete":e.store._deleted}}),save:NGN.define(!0,!1,!0,function(){}),fetch:NGN.define(!0,!1,!0,function(){})})},NGN.DATA.util.inherit(NGN.DATA.util.EventEmitter,NGN.DATA.Proxy);