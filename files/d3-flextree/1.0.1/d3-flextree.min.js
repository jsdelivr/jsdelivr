!function(){function n(n,e){return n.parent==e.parent?1:2}function e(n,e){return d3.rebind(n,e,"sort","children","value"),n.nodes=n,n.links=r,n}function r(n){return d3.merge(n.map(function(n){return(n.children||[]).map(function(e){return{source:n,target:e}})}))}d3.layout.flextree=function(){function r(n,e){var r=w.call(this,n,e),t=r[0],d=l(t);return N=d,i(d,0),c(d),p(d,0),g(d),r}function l(n){var e={t:n,prelim:0,mod:0,shift:0,change:0,msel:0,mser:0};if(n.x=0,n.y=0,b)e.x_size=1,e.y_size=1;else if("object"==typeof j)e.x_size=j[0],e.y_size=j[1];else{var r=j(n);e.x_size=r[0],e.y_size=r[1]}k&&(n.x_size=e.x_size,n.y_size=e.y_size);for(var i=[],t=n.children?n.children.length:0,c=0;t>c;++c)i.push(l(n.children[c]));return e.children=i,e.num_children=t,e}function i(n,e){n.t.y=e,n.t.depth=0,t(n)}function t(n){var e,r=n.t.y+n.y_size,l=n.t.depth+1;for(e=0;e<n.children.length;++e){var i=n.children[e];i.t.y=r,i.t.parent=n.t,i.t.depth=l,t(n.children[e])}}function c(n){if(0==n.num_children)return void d(n);c(n.children[0]);for(var e=z(s(n.children[0].el),0,null),r=1;r<n.num_children;++r){c(n.children[r]);var l=s(n.children[r].er);u(n,r,e),e=z(l,r,e)}_(n),d(n)}function d(n){0==n.num_children?(n.el=n,n.er=n,n.msel=n.mser=0):(n.el=n.children[0].el,n.msel=n.children[0].msel,n.er=n.children[n.num_children-1].er,n.mser=n.children[n.num_children-1].mser)}function u(n,e,r){for(var l=n.children[e-1],i=l.mod,t=n.children[e],c=t.mod;null!=l&&null!=t;){s(l)>r.lowY&&(r=r.nxt);var d=i+l.prelim-(c+t.prelim);null!=S?d+=S(l.t,t.t)*N.x_size:null!=Y&&(d+=l.x_size/2+t.x_size/2+Y(l.t,t.t)),d>0&&(c+=d,h(n,e,r.index,d));var u=s(l),_=s(t);_>=u&&(l=m(l),null!=l&&(i+=l.mod)),u>=_&&(t=o(t),null!=t&&(c+=t.mod))}null==l&&null!=t?f(n,e,t,c):null!=l&&null==t&&a(n,e,l,i)}function h(n,e,r,l){n.children[e].mod+=l,n.children[e].msel+=l,n.children[e].mser+=l,x(n,e,r,l)}function o(n){return 0==n.num_children?n.tl:n.children[0]}function m(n){return 0==n.num_children?n.tr:n.children[n.num_children-1]}function s(n){return n.t.y+n.y_size}function f(n,e,r,l){var i=n.children[0].el;i.tl=r;var t=l-r.mod-n.children[0].msel;i.mod+=t,i.prelim-=t,n.children[0].el=n.children[e].el,n.children[0].msel=n.children[e].msel}function a(n,e,r,l){var i=n.children[e].er;i.tr=r;var t=l-r.mod-n.children[e].mser;i.mod+=t,i.prelim-=t,n.children[e].er=n.children[e-1].er,n.children[e].mser=n.children[e-1].mser}function _(n){n.prelim=(n.children[0].prelim+n.children[0].mod-n.children[0].x_size/2+n.children[n.num_children-1].mod+n.children[n.num_children-1].prelim+n.children[n.num_children-1].x_size/2)/2}function p(n,e){e+=n.mod,n.t.x=n.prelim+e,v(n);for(var r=0;r<n.num_children;r++)p(n.children[r],e)}function x(n,e,r,l){if(r!=e-1){var i=e-r;n.children[r+1].shift+=l/i,n.children[e].shift-=l/i,n.children[e].change-=l-l/i}}function v(n){for(var e=0,r=0,l=0;l<n.num_children;l++)e+=n.children[l].shift,r+=e+n.children[l].change,n.children[l].mod+=r}function z(n,e,r){for(;null!=r&&n>=r.lowY;)r=r.nxt;return{lowY:n,index:e,nxt:r}}function g(n){if(null!=b){for(var e,r=n,l=n,i=n,t=[n];e=t.pop();){var c=e.t;c.x<r.t.x&&(r=e),c.x>l.t.x&&(l=e),c.depth>i.t.depth&&(i=e),e.children&&(t=t.concat(e.children))}var d=null==S?.5:S(r.t,l.t)/2,u=d-r.t.x,h=b[0]/(l.t.x+d+u),o=b[1]/(i.t.depth>0?i.t.depth:1);for(t=[n];e=t.pop();){var c=e.t;c.x=(c.x+u)*h,c.y=c.depth*o,k&&(c.x_size*=h,c.y_size*=o),e.children&&(t=t.concat(e.children))}}else{var m=n.t.x;y(n,-m)}}function y(n,e){n.t.x+=e;for(var r=0;r<n.num_children;++r)y(n.children[r],e)}var w=d3.layout.hierarchy().sort(null).value(null),S=n,Y=null,b=[1,1],j=null,k=!1,N=null;return r.separation=function(n){return arguments.length?(S=n,Y=null,r):S},r.spacing=function(n){return arguments.length?(Y=n,S=null,r):Y},r.size=function(n){return arguments.length?(b=n,j=null,r):b},r.nodeSize=function(n){return arguments.length?(j=n,b=null,r):j},r.setNodeSizes=function(n){return arguments.length?(k=n,r):k},r.rootXSize=function(){return N?N.x_size:null},e(r,w)}}();