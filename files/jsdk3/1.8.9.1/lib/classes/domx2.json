/* @created: Mon Jul 23 15:03:11 2012*/
{
manifest : {
"name" : "domx2","file" : "domx2.json","version" : "1.4.5","description" : "","author" : "liu denggao","created" : "2012-6-1","modified" : "2012-6-28"
},
entity : {
"js.domx.DOM" : "$package(\"js.domx\");js.domx.DOM=function(){};var _$class=js.domx.DOM;var _$proto=_$class.prototype;_$class.$name=\"DOM\";_$class.$virtual=true;_$class.NODETYPE_ELEMENT=1\n_$class.NODETYPE_ATTRIBUTE=2\n_$class.NODETYPE_TEXT=3\n_$class.NODETYPE_COMMENT=8\n_$class.NODETYPE_DOCUMENT=9\n_$class._instance=new _$class();_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$class.obj=function(vNode,vClazz){return this._instance._$getObj(vNode,vClazz);}\n_$proto.getClass=function(){return this.$class;}\n_$proto._$getClassFor=function(sName){var clazz=this.getClass();for(var i=0,clazz1;i<3&&!!clazz;i++){clazz1=js.domx[clazz.getName()+sName];if(clazz1)return clazz1;else if(clazz.getName()==\"DOM\")return;else clazz=clazz.$super;}}\n_$proto._$getObj=function(vNode,vClazz){var obj,DOM=js.domx.DOM;if(!vNode){return vNode;}else if(vClazz){if(typeof(vClazz)==\"string\"){return this._$getClassFor(vClazz).newInstanceFrom(vNode);}else{return vClazz.newInstanceFrom(vNode);}}else if(!vNode.constructor){if(vNode.length>=0){return this._$getClassFor(\"NodeList\").newInstanceFrom(vNode);}}else if(Global.isArray(vNode)){return this._$getClassFor(\"NodeList\").newInstanceFrom(vNode);}else if(typeof(NodeList)!=\"undefined\"&&(vNode instanceof NodeList)){return this._$getClassFor(\"NodeList\").newInstanceFrom(vNode);}else if(vNode instanceof this._$getClassFor(\"Object\")){return vNode;}else if(vNode instanceof js.domx.DOMObject){return this._$getClassFor(\"Node\").newInstanceFrom(vNode.valueOf());}\nswitch(vNode.nodeType){case DOM.NODETYPE_ELEMENT:obj=this._$getClassFor(\"Element\").newInstanceFrom(vNode);break;case DOM.NODETYPE_ATTRIBUTE:obj=this._$getClassFor(\"Attribute\").newInstanceFrom(vNode);case DOM.NODETYPE_TEXT:obj=this._$getClassFor(\"Text\").newInstanceFrom(vNode);break;case DOM.NODETYPE_COMMENT:obj=this._$getClassFor(\"Comment\").newInstanceFrom(vNode);break;case DOM.NODETYPE_DOCUMENT:obj=this._$getClassFor(\"Document\").newInstanceFrom(vNode);break;}\nreturn obj;}",
"js.domx.DOMObject" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMObject=function(){this.__original=null;};var _$class=js.domx.DOMObject;var _$proto=_$class.prototype;_$class.$name=\"DOMObject\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$proto.$class=_$class;_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$proto.getClass=function(){return this.$class;}\n_$proto.getOriginal=function(){return this.__original;}\n_$proto.toString=function(){return(\"[object \"+this.getClass().getName()+\"]\");}\n_$proto.valueOf=function(){return this.__original;}\n_$proto.instanceOf=function(clazz){return this instanceof clazz;}\n_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMNode" : "$package(\"js.domx\");$import(\"js.domx.DOM\");$import(\"js.domx.DOMObject\");js.domx.DOMNode=function(){};var _$class=js.domx.DOMNode;_$class.$name=\"DOMNode\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMObject);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getNodeType=function(){return this.__original.nodeType;}\n_$proto.getNodeName=function(){return this.__original.nodeName;}\n_$proto.getNodeValue=function(){return this.__original.nodeValue;}\n_$proto.getOwnerDocument=function(){return this.getClass().getContainer().obj(this.__original.ownerDocument);}\n_$proto.getParentNode=function(){return this.getClass().getContext().obj(this.__original.parentNode);}\n_$proto.getChildNodes=function(){return this.getClass().getContext().obj(this.__original.childNodes,\"NodeList\");}\n_$proto.getFirstChild=function(){return this.getClass().getContext().obj(this.__original.firstChild);}\n_$proto.getNextSibling=function(){return this.getClass().getContext().obj(this.__original.nextSibling);}\n_$proto.getPreviousSibling=function(){return this.getClass().getContext().obj(this.__original.previousSibling);}\n_$proto.getLastChild=function(){return this.getClass().getContext().obj(this.__original.lastChild);}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.hasAttributes=function(){return this.__original.hasAttributes();}\n_$proto.hasChildNodes=function(){return this.__original.hasChildNodes();}\n_$proto.appendChild=function(node){var el=this.getClass().getContext().obj(node);this.__original.appendChild(el.valueOf());return el;}\n_$proto.cloneNode=function(cloneAll){var el=this.__original.cloneNode(!!cloneAll);return this.getClass().getContext().obj(el);}\n_$proto.insertBefore=function(oNewNode,oChildNode){var el=this.getClass().getContext().obj(oNewNode);if(!oChildNode){this.__original.insertBefore(el.valueOf());}else{var el1=this.getClass().getContext().obj(oChildNode);this.__original.insertBefore(el.valueOf(),el1.valueOf());}\nreturn el;}\n_$proto.removeChild=function(el){var el=this.getClass().getContext().obj(el);var el1=this.__original.removeChild(el.valueOf());return el1?el:ell;}\n_$proto.replaceChild=function(newNode,oldNode){var el1=this.getClass().getContext().obj(newNode);var el2=this.getClass().getContext().obj(oldNode);var el3=this.__original.replaceChild(el1.valueOf(),el2.valueOf());return el3?el2:el3;}",
"js.domx.DOMText" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMText=function(){};var _$class=js.domx.DOMText;_$class.$name=\"DOMText\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this.__original.data;}\n_$proto.getLength=function(){return this.__original.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMAttribute" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMAttribute=function(){};var _$class=js.domx.DOMAttribute;_$class.$name=\"DOMAttribute\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getName=function(){return this.__original.name;}\n_$proto.getValue=function(){return this.__original.value;}\n_$proto.getOwnerElement=function(){return this.getClass().getContext().obj(this.__original.ownerElement);}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMComment" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMComment=function(){};var _$class=js.domx.DOMComment;_$class.$name=\"DOMComment\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this.__original.data;}\n_$proto.getLength=function(){return this.__original.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMElement" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMElement=function(){};var _$class=js.domx.DOMElement;_$class.$name=\"DOMElement\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTagName=function(){return this.__original.tagName;}\n_$proto.getAttributes=function(){return this.__original.attributes;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.getAttribute=function(name){return this.__original.getAttribute(name);}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"Element\");}\n_$proto.hasAttribute=function(name){if(this.__original.hasAttribute)return this.__original.hasAttribute(name);else return typeof(this.__origibal.getAttribute(name))!=\"undefined\";}\n_$proto.setAttribute=function(name,value){this.__original.setAttribute(name,value);}",
"js.domx.DOMDocument" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMDocument=function(){};var _$class=js.domx.DOMDocument;_$class.$name=\"DOMDocument\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getDoctype=function(){return this.__original.doctype;}\n_$proto.getDocumentElement=function(){return this.getClass().getContext().obj(this.__original.documentElement,\"Element\");}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.createElement=function(tagName){return this.getClass().getContext().obj(this.__original.createElement(tagName),\"Element\");}\n_$proto.createTextNode=function(text){return this.getClass().getContext().obj(this.__original.createTextNode(text),\"Text\");}\n_$proto.getElementById=function(id){return this.getClass().getContext().obj(this.__original.getElementById(id),\"Element\");}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"ElementList\");}",
"js.domx.DOMNodeList" : "$package(\"js.domx\");$import(\"js.domx.DOM\");$import(\"js.domx.DOMObject\");js.domx.DOMNodeList=function(){this._isArray=false;};var _$class=js.domx.DOMNodeList;_$class.$name=\"DOMNodeList\";_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMObject);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getLength=function(){return this.__original.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}\n_$proto.getItem=function(index){var node=this._isArray?this._original[index]:this.__original.item(index);return this.getClass().getContext().obj(node);}\n_$proto.toArray=function(){if(this._isArray){return this.__original.concat();}else{var array=[];for(var i=0;i<this.__original.length;i++){array.push(this.__original.item(i));}\nreturn array;}}",
"js.domx.XML" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.XML=function(){};var _$class=js.domx.XML;_$class.$name=\"XML\";_$class.$extends(js.domx.DOM);var _$proto=_$class.prototype;_$class._instance=new _$class();_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$class.obj=function(vNode,vClazz){return this._instance._$getObj(vNode,vClazz);}",
"js.domx.XMLNode" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLNode=function(){};var _$class=js.domx.XMLNode;_$class.$name=\"XMLNode\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getChildNodes=function(){var retValues=[];var childNodes=this.__original.childNodes;for(var i=0,iLen=childNodes.length;i<iLen;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;retValues[retValues.length]=childNodes[i];}\nreturn this.getClass().getContext().obj(retValues,\"NodeList\");}\n_$proto.getFirstChild=function(){var childNodes=this.__original.childNodes;for(var i=0,len=childNodes.length;i<len;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getNextSibling=function(){var el=this.__original.nextSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.nextSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getPreviousSibling=function(){var el=this.__original.previousSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.previousSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getLastChild=function(){var childNodes=this.__original.childNodes;for(var i=childNodes.length-1;i>=0;i--){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.getText=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.selectSingleNode=function(xpath){var node;if(typeof(this.__original.selectSingleNode)!=\"undefined\"){node=this.__original.selectSingleNode();}else{var x=this.selectNodes(xpath);if(!x.length)return null;node=x[0];}\nreturn this.getClass().getContext().obj(node);}\n_$proto.selectNodes=function(xpath){var nodes;if(typeof(this.__original.selectNodes)!=\"undefined\"){nodes=this.__original.selectNodes(xpath);}else if(typeof(XPathEvaluator)!=\"undefined\"){var xpe=new XPathEvaluator();var nsResolver=xpe.createNSResolver(this.__original.ownerDocument==null?this.__original.documentElement:this.__original.ownerDocument.documentElement);var result=xpe.evaluate(xpath,this.__original,nsResolver,0,null);var found=[];var res;while(res=result.iterateNext())found.push(res);nodes=found;}\nreturn this.getClass().getContext().obj(nodes,\"NodeList\");}",
"js.domx.XMLText" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLText=function(){this._data=\"\";};var _$class=js.domx.XMLText;_$class.$name=\"XMLText\";_$class.$abstract=true;_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');obj.__original=original;obj._data=text;return obj;}",
"js.domx.XMLAttribute" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLAttribute=function(){};var _$class=js.domx.XMLAttribute;_$class.$name=\"XMLAttribute\";_$class.$abstract=true;_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getName=function(){return this.__original.name;}\n_$proto.getValue=function(){return this.__original.value;}\n_$proto.getOwnerElement=function(){return this.getClass().getContext().obj(this.__original.ownerElement);}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.XMLComment" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLComment=function(){this._data=\"\";};var _$class=js.domx.XMLComment;_$class.$name=\"XMLComment\";_$class.$abstract=true;_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');obj.__original=original;obj._data=text;return obj;}",
"js.domx.XMLElement" : "$package(\"js.domx\");$import(\"js.domx.DOMElement\");$import(\"js.domx.XML\");js.domx.XMLElement=function(){};var _$class=js.domx.XMLElement;_$class.$name=\"XMLElement\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTagName=function(){return this.__original.tagName;}\n_$proto.getAttributes=function(){return this.__original.attributes;}\n_$proto.getChildNodes=function(){var retValues=[];var childNodes=this.__original.childNodes;for(var i=0,iLen=childNodes.length;i<iLen;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;retValues[retValues.length]=childNodes[i];}\nreturn this.getClass().getContext().obj(retValues,\"NodeList\");}\n_$proto.getFirstChild=function(){var childNodes=this.__original.childNodes;for(var i=0,len=childNodes.length;i<len;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getNextSibling=function(){var el=this.__original.nextSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.nextSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getPreviousSibling=function(){var el=this.__original.previousSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.previousSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getLastChild=function(){var childNodes=this.__original.childNodes;for(var i=childNodes.length-1;i>=0;i--){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.getText=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.getAttribute=function(name){return this.__original.getAttribute(name);}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"Element\");}\n_$proto.hasAttribute=function(name){if(this.__original.hasAttribute)return this.__original.hasAttribute(name);else return typeof(this.__origibal.getAttribute(name))!=\"undefined\";}\n_$proto.setAttribute=function(name,value){this.__original.setAttribute(name,value);}",
"js.domx.XMLDocument" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLDocument=function(){};var _$class=js.domx.XMLDocument;_$class.$name=\"XMLDocument\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getDoctype=function(){return this.__original.doctype;}\n_$proto.getDocumentElement=function(){return this.getClass().getContext().obj(this.__original.documentElement,\"Element\");}\n_$proto.getText=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.createElement=function(tagName){return this.getClass().getContext().obj(this.__original.createElement(tagName),\"Element\");}\n_$proto.createTextNode=function(text){return this.getClass().getContext().obj(this.__original.createTextNode(text),\"Text\");}\n_$proto.getElementById=function(id){return this.getClass().getContext().obj(this.__original.getElementById(id),\"Element\");}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"ElementList\");}",
"js.domx.XMLNodeList" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLNodeList=function(){};var _$class=js.domx.XMLNodeList;_$class.$name=\"XMLNodeList\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.DOMNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.XMLElementList" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLElementList=function(){}\nvar _$class=js.domx.XMLElementList;_$class.$name=\"XMLElementList\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.HTML" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.HTML=function(){};var _$class=js.domx.HTML;_$class.$name=\"HTML\";_$class.$extends(js.domx.DOM);var _$proto=_$class.prototype;_$class._instance=new _$class();_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$class.obj=function(vNode,vClazz){return this._instance._$getObj(vNode,vClazz);}",
"js.domx.HTMLNode" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLNode=function(){};var _$class=js.domx.HTMLNode;_$class.$name=\"HTMLNode\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";var text1=text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');return text1||(text?\" \":\"\");}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.HTMLText" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLText=function(){this._data=\"\";};var _$class=js.domx.HTMLText;_$class.$name=\"HTMLText\";_$class.$abstract=true;_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');text=text||(original.data==\"\"?\"\":\" \");obj.__original=original;obj._data=text;return obj;}",
"js.domx.HTMLAttribute" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLAttribute=function(){};var _$class=js.domx.HTMLAttribute;_$class.$name=\"HTMLAttribute\";_$class.$abstract=true;_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getName=function(){return this.__original.name;}\n_$proto.getValue=function(){return this.__original.value;}\n_$proto.getOwnerElement=function(){return this.getClass().getContext().obj(this.__original.ownerElement);}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.HTMLComment" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLComment=function(){this._data=\"\";};var _$class=js.domx.HTMLComment;_$class.$name=\"HTMLComment\";_$class.$abstract=true;_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');text=text||(original.data==\"\"?\"\":\" \");obj.__original=original;obj._data=text;return obj;}",
"js.domx.HTMLElement" : "$package(\"js.domx\");$import(\"js.domx.DOMElement\");$import(\"js.domx.HTML\");js.domx.HTMLElement=function(){};var _$class=js.domx.HTMLElement;_$class.$name=\"HTMLElement\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTagName=function(){return this.__original.tagName;}\n_$proto.getAttributes=function(){return this.__original.attributes;}\n_$proto.getTextContent=function(){var text=this.__original.innerText||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.getInnerText=function(){var text=this.__original.innerText||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.setInnerText=function(sText){this.__original.innerText=sText;}\n_$proto.getInnerHTML=function(){return this.__original.innerHTML;}\n_$proto.setInnerHTML=function(sHtml){this.__original.innerHTML=sHtml;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.getAttribute=function(name){return this.__original.getAttribute(name);}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"Element\");}\n_$proto.hasAttribute=function(name){if(this.__original.hasAttribute)return this.__original.hasAttribute(name);else return typeof(this.__origibal.getAttribute(name))!=\"undefined\";}\n_$proto.setAttribute=function(name,value){this.__original.setAttribute(name,value);}\n_$proto.addEventListener=function(sEventName,fnListener){if(/$on[A-Z]{1}/.test(sEventName)){if(typeof(fnListener)==\"function\")this[sEventName]=fnListener;}else if(this.__original.addEventLister){this.__original.addEventLister(sEventName,fnListener);}else if(this.__original.attachEvent){this.__original.attachEvent(sEventName,fnListener);}else{throw new Error(1000,\"add event listener occur error!\");}}\n_$proto.fireEvent=function(sEventName,oEvent){if(/^_?on[A-Z]{1}/.test(sEventName)){if(typeof(this[sEventName])!=\"function\")return;try{return this[sEventName].apply(this,Array.from(arguments).slice(1));}catch(e){throw new Error(1000,\"Event '\"+sEventName+\"' of object '\"+this.getClass().getName()+\"' has been runned error!\\nSource: \"\n+e.description);}}else if(this.__original.fireEvent){if(!oEvent)this.__original.fireEvent(sEventName);else this.__original.fireEvent(sEventName,oEvent);}else if(this.__original.ownerDocument.createEvent){var doc=this.__original.ownerDocument;if(!oEvent)oEvent=doc.createEvent(\"Events\");var evt=null;if(oEvent.constructor==Event){evt=doc.createEvent(\"Events\");evt.initEvent(sEventName.replace(/^on/,\"\"),oEvent.bubbles,oEvent.cancelable);}else if(oEvent.constructor==MouseEvent){evt=doc.createEvent(\"MouseEvents\");evt.initMouseEvent(sEventName.replace(/^on/,\"\"),oEvent.bubbles,oEvent.cancelable,oEvent.view,oEvent.detail,oEvent.screenX,oEvent.screenY,oEvent.clientX,oEvent.clientY,oEvent.ctrlKey,oEvent.altKey,oEvent.shiftKey,oEvent.metaKey,oEvent.button,oEvent.relatedTarget\n);}else if(oEvent.constructor==UIEvent){evt=doc.createEvent(\"UIEvents\");evt.initUIEvent(sEventName.replace(/^on/,\"\"),oEvent.bubbles,oEvent.view,oEvent.detail);}else{return;}\nthis.__original.dispatchEvent(evt);}else{throw new Error(1000,\"fire event '\"+sEventName+\"' occur error!\");}}",
"js.domx.HTMLDocument" : "$package(\"js.domx\");js.domx.HTMLDocument=function(){};var _$class=js.domx.HTMLDocument;_$class.$name=\"HTMLDocument\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getDoctype=function(){return this.__original.doctype;}\n_$proto.getDocumentElement=function(){return this.getClass().getContext().obj(this.__original.documentElement,\"Element\");}\n_$proto.getBody=function(){return this.getClass().getContext().obj(this.__original.body,\"Element\");}\n_$proto.getCookie=function(){return this.__original.cookie;}\n_$proto.getDomain=function(){return this.__original.domain;}\n_$proto.setDomain=function(name){this.__original.domain=name;}\n_$proto.getReferrer=function(){return this.__original.referrer;}\n_$proto.getTitle=function(){return this.__original.title;}\n_$proto.setTitle=function(text){this.__original.title=text;}\n_$proto.getURL=function(){return this.__original.URL;}\n_$proto.getCharset=function(){return this.__original.charset;}\n_$proto.setCharset=function(sCharset){this.__original.charset=sCharset;}\n_$proto.getAll=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.all,\"ElementList\");else return this.getClass().getContext().obj(this.__original.all[index],\"Element\");}\n_$proto.getFrames=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.frames,\"ElementList\");else return this.getClass().getContext().obj(this.__original.frames[index],\"Element\");}\n_$proto.getScripts=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.scripts,\"ElementList\");else return this.getClass().getContext().obj(this.__original.scripts[index],\"Element\");}\n_$proto.getForms=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.forms,\"ElementList\");else return this.getClass().getContext().obj(this.__original.forms[index],\"Element\");}\n_$proto.getImages=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.images,\"ElementList\");else return this.getClass().getContext().obj(this.__original.images[index],\"Element\");}\n_$proto.getLinks=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.links,\"ElementList\");else return this.getClass().getContext().obj(this.__original.links[index],\"Element\");}\n_$proto.getAnchors=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.anchors,\"ElementList\");else return this.getClass().getContext().obj(this.__original.anchors[index],\"Element\");}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.createElement=function(tagName){return this.getClass().getContext().obj(this.__original.createElement(tagName),\"Element\");}\n_$proto.createTextNode=function(text){return this.getClass().getContext().obj(this.__original.createTextNode(text),\"Text\");}\n_$proto.getElementById=function(id){return this.getClass().getContext().obj(this.__original.getElementById(id),\"Element\");}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"ElementList\");}\n_$proto.getElementsByName=function(name){return this.getClass().getContext().obj(this.__original.getElementsByName(name),\"ElementList\");}\n_$proto.open=function(){this.__original.open();}\n_$proto.write=function(text){this.__original.write(text);}\n_$proto.writeln=function(text){this.__original.writeln(text);}\n_$proto.close=function(){this.__original.close();}",
"js.domx.HTMLNodeList" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLNodeList=function(){};var _$class=js.domx.HTMLNodeList;_$class.$name=\"HTMLNodeList\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.DOMNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.HTMLElementList" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLElementList=function(){}\nvar _$class=js.domx.HTMLElementList;_$class.$name=\"HTMLElementList\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.HTMLForm" : "$package(\"js.domx\");$import(\"js.domx.HTMLElement\");js.domx.HTMLForm=function(){this._fields=[];this._adjustHandles=[];};var _$class=js.domx.HTMLForm;_$class.$name=\"HTMLForm\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLElement);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getFields=function(index){return index==undefined?this._fields:this._fields[index];}\n_$proto.getFieldsCount=function(){return this._fields.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.addFieldFrom=function(vField,vOptions){var field;switch(vOptions&&vOptions.dataType){case\"Text\":var field=js.domx.HTMLTextField.newInstanceFrom(this,vField,vOptions);break;case\"Select\":var field=js.domx.HTMLSelectField.newInstanceFrom(this,vField,vOptions);break;case\"Number\":var field=js.domx.HTMLNumberField.newInstanceFrom(this,vField,vOptions);break;case\"Date\":var field=js.domx.HTMLDateField.newInstanceFrom(this,vField,vOptions);break;default:return null;}\nthis._fields.push(field);return field;}\n_$proto.addAdjustHandle=function(vFields,fnHandle){this._adjustHandles.push([vFields,fnHandle]);}\n_$proto.getElementsByName=function(sName){return Global.dom(\"#\"+sName+\"#\",this.__original);}\n_$proto.hasField=function(sName){return this._fields.some(function(field){return field.getName()==sName;});}\n_$proto.getFieldByName=function(sName){for(var i=0;i<this._fields.length;i++){if(this._fields[i].getName()==sName){return this._fields[i];}}\nreturn null;}\n_$proto.getAllRequiredFields=function(iOptions){return this._fields.select(function(field){switch(iOptions){case 0:return!field.getAllowEmpty();case 1:if(!field.getAllowEmpty()){return field.isEmpty();}\nbreak;case 2:if(!field.getAllowEmpty()){return!field.isEmpty();}\nbreak;}\nreturn false;});}\n_$proto.getAllOptionalFields=function(iOptions){return this._fields.select(function(field){switch(iOptions){case 0:return field.getAllowEmpty();case 1:if(field.getAllowEmpty()){return field.isEmpty();}\nbreak;case 2:if(field.getAllowEmpty()){return!field.isEmpty();}\nbreak;}\nreturn false;});}\n_$proto.getFieldDataText=function(sName){var field=this.getFieldByName(sName);if(field)return field.getDataText();}\n_$proto.getFieldDataValue=function(sName){var field=this.getFieldByName(sName);if(field)return field.getDataValue();}\n_$proto.setFieldDataValue=function(sName,vValue){var field=this.getFieldByName(sName);if(field)field.setDataValue(vValue);}\n_$proto.removeField=function(oField){var origFields=oField.valueOf();if(Global.isArray(origFields)){for(var i=0;i<origFields.length;i++){try{origFields[i].parentNode.removeChild(origFields[i]);}catch(e){}}}else{try{origFields.parentNode.removeChild(origFields);}catch(e){}}\nthis._fields.earse(oField);}\n_$proto.adjust=function(){var handles=[],paras=[];for(var i=0;i<this._adjustHandles.length;i++){var vHandle=this._adjustHandles[i];var vFields=vHandle[0];var aFields=[];if(!Global.isArray(vFields))vFields=[vFields];for(var j=0;j<vFields.length;j++){var vField=vFields[j];if(typeof(vField)==\"string\"){aFields.push(this.getFieldByName(vField));}else{aFields.push(vField);}}\nhandles.push(vHandle[1]);paras.push(aFields);}\nhandles.forEach(function(handle,index){try{handle.apply(this,paras[index]);}catch(e){}});}\n_$proto.adjustByField=function(vField){var handles=[],paras=[];for(var i=0;i<this._adjustHandles.length;i++){var vHandle=this._adjustHandles[i];var vFields1=vHandle[0];var aFields1=[];var flag=false;if(!Global.isArray(vFields1)){vFields1=[vFields1];}\nfor(var j=0;j<vFields1.length;j++){var vField1=vFields1[j];if(typeof(vField)==typeof(vField1)&&typeof(vField)==\"string\"){if(vField.toLowerCase()==vField1.toLowerCase()){flag=true;break;}}else if(vField instanceof Global.js.domx.HTMLFormField\n&&vField1 instanceof Global.js.domx.HTMLFormField){if(vField.getOriginal()==vField1.getOriginal()){flag=true;break;}}else if(typeof(vField)==\"string\"){if(vField1.getName()==vField){flag=true;break;}}else if(typeof(vField1)==\"string\"){if(vField.getName()==vField1){flag=true;break;}}}\nif(!flag)continue;for(var j=0;j<vFields1.length;j++){var vField=vFields1[j];if(typeof(vField)==\"string\"){aFields1.push(this.getFieldByName(vField));}else{aFields1.push(vField);}}\nhandles.push(vHandle[1]);paras.push(aFields1);}\nhandles.forEach(function(handle,index){try{handle.apply(this,paras[index]);}catch(e){}});}\n_$proto.validate=function(){return![0,1,2].some(function(mode){return this._fields.some(function(field){return!this.validateField(field,mode);},this);},this);}\n_$proto.validateField=function(vField,iOptions){var oField;if(!vField){return true;}else if(typeof(vField)==\"string\"){oField=this.getFieldByName(vField);}else{oField=vField;}\nreturn oField.validate(iOptions,true);}\n_$proto.submit=function(){this.__original.submit();}\n_$proto._onFieldValueChanged=function(oField){this.fireEvent(\"onFieldValueChanged\",oField);this.adjustByField(oField);}",
"js.domx.HTMLFormField" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.HTMLFormField=function(){this._parentForm=null;this._name=\"\";this._dataType=\"\";this._allowEmpty=true;this._isReadOnly=false;this._unfilledPrompt=\"\";this._unmatchedPrompt=\"\";};var _$class=js.domx.HTMLFormField;_$class.$name=\"HTMLFormField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.DOMObject);var _$proto=_$class.prototype;_$proto._HTMLFormField=function(){}\n_$class.getContext=function(){return this.$context;}\n_$proto.getParentForm=function(){return this._parentForm;}\n_$proto.getName=function(){return this._name;}\n_$proto.getDataType=function(){return this._dataType;}\n_$proto.getLabel=function(){return this._label;}\n_$proto.setLabel=function(value){this._label=value;}\n_$proto.getAllowEmpty=function(){return this._allowEmpty;}\n_$proto.setAllowEmpty=function(value){this._allowEmpty=value;}\n_$proto.getIsReadOnly=function(){return this._isReadOnly;}\n_$proto.getAllowMultiple=function(){return false;}\n_$proto.getStoreValues=function(index){var values=[this.__original.value].concat(this._dataField?this._dataField.value:[]);if(index!=undefined)return values[index];else return values;}\n_$proto.setStoreValues=function(){this.__original.value=arguments[0];if(arguments.length>=2&&this._dataField)this._dataField.value=arguments[1];}\n_$proto.getStoreFields=function(index){var field=[this.__original].concat(this._dataField?this._dataField:[]);if(index!=undefined)return fields[index];else return fields;}\n_$proto.getDataField=function(){return this._dataField;}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(original==null)return null;var obj=new this();this._parentForm=parentForm;obj.__original=original;return obj;}\n_$proto.isEmpty=function(){return!this.__original.value;}\n_$proto.clearEmpty=function(){this.__original.value=\"\";}\n_$proto.validate=function(iOptions,isSubmiting){}\n_$proto.hasEvent=function(sEvent){if(typeof(this[sEvent])!=\"function\")return false;return true;}\n_$proto.addEventListener=function(sName,fnListener){if(typeof(fnListener)==\"function\")this[sName]=fnListener;}\n_$proto.fireEvent=function(sEvent){if(typeof(this[sEvent])!=\"function\")return;try{return this[sEvent].apply(this,Array.from(arguments).slice(1));}catch(e){throw new Error(1000,\"Event '\"+sEvent+\"' of object '\"+this.getClass().getName()+\"' has been runned error!\\nSource: \"\n+e.description);}}\n_$proto._onValidate=function(isSubmiting){if(this.hasEvent(\"onValidate\"))return this.fireEvent(\"onValidate\",isSubmiting);else\nreturn true;}\n_$proto._onValueChanged=function(event){var flag=this.fireEvent(\"onValueChanged\",this.getDataValue());if(flag||flag==undefined)this._parentForm.fireEvent(\"_onFieldValueChanged\",this);}",
"js.domx.HTMLTextField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLTextField=function(){this._dataType=\"Text\";this._separator=\"\";this._allowMultiple=false;this._allowKeywordSyno=false;this._allowNotInList=true;this._allowMultipleLine=false;this._optionalValues=null;this._minValue=undefined;this._maxValue=undefined;this._dataValue=undefined;this._dataField=undefined;this._isSelecting=false;this._isAutoHeight=false;this._minRows=0;this._maxRows=0;};var _$class=js.domx.HTMLTextField;_$class.$name=\"HTMLTextField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getMinValue=function(){return this._minValue;}\n_$proto.setMinValue=function(value){if(value===this._minValue)return;this._minValue=value;this.fireEvent(\"_onPropertyChanged\",\"minValue\");}\n_$proto.getMaxValue=function(){return this._maxValue;}\n_$proto.setMaxValue=function(value){if(value===this._maxValue)return;this._maxValue=value;this.fireEvent(\"_onPropertyChanged\",\"maxValue\");}\n_$proto.getSeparator=function(){return this._separator;}\n_$proto.setSeparator=function(value){this._separator=value;switch(value.toLowerCase()){case\"_newline\":this._separator=Global.STR_NewLine;break;case\"_blankline\":this._separator=Global.STR_NewLine+Global.STR_NewLine;break;default:this._separator=value;}}\n_$proto.getAllowMultiple=function(){return this._allowMultiple;}\n_$proto.setAllowMultiple=function(value){this._allowMultiple=value;}\n_$proto.getAllowKeywordSyno=function(){return this._allowKeywordSyno;}\n_$proto.getAllowNotInList=function(){return this._allowNotInList;}\n_$proto.getIsAutoHeight=function(){return this._isAutoHeight;}\n_$proto.getIsReadOnly=function(){return this._isReadOnly;}\n_$proto.setIsReadOnly=function(value){if(this._isReadOnly===value)return;this._isReadOnly=value;this.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");}\n_$proto.getOptionalValues=function(){return this._optionalValues;}\n_$proto.setOptionalValues=function(value){this._optionalValues=value;}\n_$proto.getDataText=function(){return this._allowMultiple?this.__original.value.split(this._separator||\";\"):this.__original.value;}\n_$proto.getDataValue=function(){if(!this._allowKeywordSyno){var field=this.__original;if(!this._allowMultiple){return field.value;}else if(!field.value){return[];}else{return field.value.split(this._separator||\";\");}}else if(this._dataField){var field=this._dataField;if(!this._allowMultiple){return field.value;}else if(!field.value){return[];}else{return field.value.split(this._separator||\";\");}}else if(this._dataValue){return this._dataValue;}else{return this._allowMultiple?[]:\"\";}}\n_$proto.setDataValue=function(vValue){var element=this.__original;if(this._allowKeywordSyno)vValue=this._setDataValue(vValue);vValue=Global.isArray(vValue)?vValue:[vValue];if(!this._allowKeywordSyno){var sValue=vValue.join(this._separator||\";\");}else if(!this._optionalValues||!this._optionalValues.length){var sValue=vValue.join(this._separator||\";\");}else{var sValue=this._optionalValues.select(function(item){return vValue.contains(item.getLast());}).map(function(item){return item.getFirst();}).join(this._separator||\";\");}\nif(element.value!=sValue)element.value=sValue;this.fireEvent(\"_onValueChanged\");}\n_$proto._setDataValue=function(vValue){if(Global.isArray(vValue)){if(this._dataField){this._dataField.value=vValue.join(this._separator||\";\");}else{this._dataValue=vValue.join(this._separator||\";\");}}else{if(this._dataField){this._dataField.value=vValue;}else{this._dataValue=vValue;}}\nreturn this.getDataValue();}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();obj._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField).getFirst();}else{obj.__original=vField;}\nobj._name=obj.__original.name||obj.__original.id||\"\";if(vOptions){obj._separator=vOptions.separator||\"\";obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;if(vOptions.unfilledPrompt!=undefined)obj._unfilledPrompt=vOptions.unfilledPrompt;if(vOptions.unmatchedPrompt!=undefined)obj._unmatchedPrompt=vOptions.unmatchedPrompt;if(vOptions.allowMultiple!=undefined)obj._allowMultiple=vOptions.allowMultiple;if(vOptions.allowKeywordSyno!=undefined)obj._allowKeywordSyno=vOptions.allowKeywordSyno;if(vOptions.allowNotInList!=undefined)obj._allowNotInList=vOptions.allowNotInList;if(vOptions.isReadOnly!=undefined)obj._isReadOnly=vOptions.isReadOnly;obj._allowMultipleLine=obj.__original.tagName==\"TEXTAREA\";if(obj._allowMultipleLine){obj._isAutoHeight=vOptions.isAutoHeight||false;obj._minRows=vOptions.minRows||obj.__original.rows||2;obj._maxRows=vOptions.maxRows||0;obj._maxRows=obj._maxRows>0?Math.max(obj._minRows,obj._maxRows):0;}\nif(vOptions.dataField!=undefined){if(typeof(vOptions.dataField)!=\"string\"){obj._dataField=vOptions.dataField;}else{obj._dataField=parentForm.getElementsByName(vOptions.dataField).getFirst();}}\nif(vOptions.optionalValues!=undefined){if(typeof(vOptions.optionalValues)!=\"string\"){obj._optionalValues=vOptions.optionalValues;}else if(vOptions.optionalValues.indexOf(\"->#\")==0){obj._optionalValues=parentForm.getElementsByName(vOptions.optionalValues.right(\"->#\")).getFirst().value.split(obj._separator||\";\");}else{obj._optionalValues=vOptions.optionalValues.split(obj._separator||\";\");}\nfor(var i=0;i<obj._optionalValues.length;i++){var vValue=obj._optionalValues[i];if(Global.isArray(vValue)){}else if(typeof(vValue)==\"string\"){if(!obj._allowKeywordSyno){obj._optionalValues[i]=[vValue];}else{obj._optionalValues[i]=[vValue.split(\"|\")[0],vValue.split(\"|\").pop()];}}else{obj._optionalValues[i]=obj._allowKeywordSyno?[vValue.text,vValue.value]:[vValue.text];}}}\nif(vOptions.minValue!=undefined){if(typeof(vOptions.minValue)!=\"string\"){obj._minValue=vOptions.minValue;}else{obj._minValue=parseFloat(vOptions.minValue);}}\nif(vOptions.maxValue!=undefined){if(typeof(vOptions.maxValue)!=\"string\"){obj._maxValue=vOptions.maxValue;}else{obj._maxValue=parseFloat(vOptions.maxValue);}}\nif(vOptions.onEvents){[\"onValidate\",\"onSelect\",\"onReadStateChanged\",\"onValueChanged\"].forEach(function(sEvent){var func=vOptions.onEvents[sEvent];if(func)obj.addEventListener(sEvent,func);});}}\nif(obj.__original.type!=\"file\"){obj.__original.attachEvent(\"onchange\",function(event){obj.fireEvent(\"_onValueChanged\",event);});obj.__original.attachEvent(\"onblur\",function(event){obj.fireEvent(\"_onBlur\",event);});}else{obj.__original.attachEvent(\"onchange\",function(event){obj.fireEvent(\"_onValueChanged\",event);obj.fireEvent(\"_onBlur\",event);});}\nobj.fireEvent(\"_onPropertyChanged\",\"allowKeywordSyno\");obj.fireEvent(\"_onPropertyChanged\",\"allowNotInList\");obj.fireEvent(\"_onPropertyChanged\",\"minValue\");obj.fireEvent(\"_onPropertyChanged\",\"maxValue\");obj.fireEvent(\"_onPropertyChanged\",\"isAutoHeight\");obj.fireEvent(\"_onPropertyChanged\",\"minRows\");obj.adjustHeight();obj.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");return obj;}\n_$proto.selectValues=function(event){this.fireEvent(\"_onSelect\",event);}\n_$proto.clearEmpty=function(){this.__original.value=\"\";if(this._dataValue)this._dataValue=\"\";if(this._dataField)this._dataField.value=\"\";}\n_$proto.validate=function(iOptions,isSubmiting){var field=this.__original;switch(iOptions){case 0:if(!field.value){if(!this._allowEmpty&&isSubmiting){if(this._unfilledPrompt)alert(this._unfilledPrompt);else alert(\"\\u8bf7\\u9009\\u62e9\\u6216\\u8f93\\u5165\\\"\"+this._label+\"\\\"!\");try{field.focus();}catch(e){}}\nreturn this._allowEmpty;}\nbreak;case 1:var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(this._allowMultiple){var length=this.getDataValue().length;if(maxValue!=undefined){if(length>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u9009\\u62e9\\u7684\\\"\"+this._label+\"\\\"\\u7684\\u6761\\u76ee\\u6570\\u4e0d\\u80fd\\u8d85\\u8fc7\"+maxValue+\"\\u6761!\");try{field.focus();}catch(e){}\nreturn false;}}else if(minValue!=undefined){if(length<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u9009\\u62e9\\u7684\\\"\"+this._label+\"\\\"\\u7684\\u6761\\u76ee\\u6570\\u4e0d\\u80fd\\u5c11\\u4e8e\"+minValue+\"\\u6761!\");try{field.focus();}catch(e){}\nreturn false;}}}else if(this._allowNotInList){var length=field.value.length;if(maxValue!=undefined){if(length>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u7684\\u5b57\\u6570\\u4e0d\\u80fd\\u8d85\\u8fc7\"+maxValue+\"\\u5b57!\");try{field.focus();}catch(e){}\nreturn false;}}else if(minValue!=undefined){if(length<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u7684\\u5b57\\u6570\\u4e0d\\u80fd\\u5c11\\u4e8e\"+minValue+\"\\u5b57!\");try{field.focus();}catch(e){}\nreturn false;}}}\nbreak;case 2:return this.fireEvent(\"_onValidate\",isSubmiting);}\nreturn true;}\n_$proto.adjustHeight=function(){var field=this.__original;if(this._isAutoHeight){if(Global.Browser.Engine.trident){if(document.compatMode!=\"CSS1Compat\")return;while(field.scrollHeight<=field.clientHeight){if(field.rows>this._minRows)field.rows--;else\nbreak;if(this._maxRows==0||field.rows<this._maxRows)field.style.overflowY=\"hidden\";if(field.scrollHeight>field.clientHeight){field.rows++;break;}}\nwhile(field.scrollHeight>field.clientHeight){if(this._maxRows==0||field.rows<this._maxRows){field.rows++;}else{field.style.overflowY=\"auto\";break;}}}else{if(field.scrollTop==0)field.scrollTop=1;while(field.scrollTop==0){if(field.rows>this._minRows)field.rows--;else\nbreak;field.scrollTop=1;if(this._maxRows==0||field.rows<this._maxRows)field.style.overflowY=\"hidden\";if(field.scrollTop>0){field.rows++;break;}}\nwhile(field.scrollTop>0){if(this._maxRows==0||field.rows<this._maxRows){field.rows++;if(field.scrollTop==0)field.scrollTop=1;}else{field.style.overflowY=\"auto\";break;}}}}}\n_$proto._onPropertyChanged=function(sName){var _this=this;var field=this.__original;switch(sName){case\"isAutoHeight\":if(!this._allowMultipleLine){return;}else if(this._isAutoHeight){if(Global.Browser.Engine.trident){if(document.compatMode!=\"CSS1Compat\"){field.style.overflowY=\"visible\";}else{field.style.overflowY=\"hidden\";field.attachEvent(\"onkeyup\",function(event){event=event||window.event;if(!_this._isReadOnly)_this.adjustHeight();});}}else{field.style.overflowY=\"hidden\";field.attachEvent(\"oninput\",function(event){event=event||window.event;if(!_this._isReadOnly)_this.adjustHeight();});}}else{this.__original.style.overflowY=\"auto\";}\nbreak;case\"minRows\":if(this._allowMultipleLine){if(field.rows<this._minRows)field.rows=this._minRows;}\nbreak;case\"isReadOnly\":if(this._isReadOnly){this.__original.readOnly=this._isReadOnly;}else{this.__original.readOnly=!this._allowNotInList;}\nthis.fireEvent(\"onReadStateChanged\",this._isReadOnly);break;case\"allowKeywordSyno\":case\"allowNotInList\":if(this._allowKeywordSyno){this._allowNotInList=false;}\nif(this._allowKeywordSyno){this.__original.readOnly=true;}else if(this._allowNotInList){this.__original.readOnly=false;}else{this.__original.readOnly=true;}\nbreak;case\"minValue\":case\"maxValue\":var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(this._allowMultiple){if(minValue!=undefined&&maxValue!=undefined){this.__original.title=\"\\u5143\\u7d20\\u4e2a\\u6570\\u9650\\u5236: \"+minValue+\" - \"+maxValue;}else if(minValue!=undefined){this.__original.title=\"\\u81f3\\u5c11\"+minValue+\"\\u4e2a!\";}else if(maxValue!=undefined){this.__original.title=\"\\u6700\\u591a\"+maxValue+\"\\u4e2a!\";}}else{if(minValue!=undefined&&maxValue!=undefined){this.__original.title=\"\\u957f\\u5ea6\\u9650\\u5236: \"+minValue+\" - \"+maxValue;}else if(minValue!=undefined){this.__original.title=\"\\u81f3\\u5c11\"+minValue+\"\\u5b57!\";}else if(maxValue!=undefined){this.__original.title=\"\\u6700\\u591a\"+maxValue+\"\\u5b57!\";}}\nbreak;}}\n_$proto._onSelect=function(event){var _this=this;if(this.hasEvent(\"onSelect\")){this._isSelecting=true;this.fireEvent(\"onSelect\",event,this._optionalValues,function(action,value){switch(action){case 1:_this.fireEvent(\"_onSelectingOK\",value);break;case 0:_this.fireEvent(\"_onSelectingCancel\",value);break;}});}}\n_$proto._onSelectingOK=function(value){this.fireEvent(\"_onSelectingFinished\");this.setDataValue(value);}\n_$proto._onSelectingCancel=function(){this.fireEvent(\"_onSelectingFinished\");}\n_$proto._onSelectingFinished=function(){this._isSelecting=false;}\n_$proto._onValueChanged=function(event){this.adjustHeight();var flag=this.fireEvent(\"onValueChanged\",this.getDataValue());if(flag||flag==undefined)this._parentForm.fireEvent(\"_onFieldValueChanged\",this);}\n_$proto._onBlur=function(event){var value=this.__original.value;var flag=![0,1,2].some(function(mode){return!this.validate(mode);},this);return flag;}",
"js.domx.HTMLSelectField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLSelectField=function(){this._dataType=\"Select\";this._separator=\"\";this._allowMultiple=false;this._allowKeywordSyno=false;this._optionalValues=null;};var _$class=js.domx.HTMLSelectField;_$class.$name=\"HTMLSelectField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getSeparator=function(){return this._separator;}\n_$proto.setSeparator=function(value){this._separator=value;switch(value.toLowerCase()){case\"_newline\":this._separator=Global.STR_NewLine;break;case\"_blankline\":this._separator=Global.STR_NewLine+Global.STR_NewLine;break;default:this._separator=value;}}\n_$proto.getAllowMultiple=function(){return this._allowMultiple;}\n_$proto.setAllowMultiple=function(value){this._allowMultiple=value;}\n_$proto.getOptionalValues=function(){return this._optionalValues;}\n_$proto.setOptionalValues=function(value){this._optionalValues=value;}\n_$proto.getDataValue=function(){if(this._allowKeywordSyno){if(this._dataField){return this._allowMultiple?this._dataField.value.split(this._separator||\";\"):this._dataField.value;}else if(this._dataValue){return this._allowMultiple?this._dataValue.split(this._separator||\";\"):this._dataValue;}else{this._allowMultiple?[]:\"\";}}else{return this._allowMultiple?this._original.value.split(this._separator||\";\"):this._original.value;}}\n_$proto.setDataValue=function(vValue){}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();this._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField);}else{obj.__original=vField;}\nif(vOptions){obj._separator=vOptions.separator||\"\";obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;}\nreturn obj;}\n_$proto.validate=function(iOptions){}",
"js.domx.HTMLNumberField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLNumberField=function(){this._dataType=\"Number\";this._minValue=undefined;this._minValueBy=\"\";this._maxValue=undefined;this._maxValueBy=\"\";this._decimalOptions=0;this._isFocusing=false;this._pageSize=undefined;};var _$class=js.domx.HTMLNumberField;_$class.$name=\"HTMLNumberField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.setIsReadOnly=function(value){if(this._isReadOnly===value)return;this._isReadOnly=value;this.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");}\n_$proto.getMinValue=function(){if(!this._minValueBy){return this._minValue;}else if(typeof(this._minValueBy)!=\"string\"){return this._minValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._minValueBy);if(field){this._minValueBy=field;return field.getDataValue();}}}\n_$proto.setMinValue=function(value){if(value===this._minValue)return;this._minValue=value;this._minValueBy=\"\";}\n_$proto.getMaxValue=function(){if(!this._maxValueBy){return this._maxValue;}else if(typeof(this._maxValueBy)!=\"string\"){return this._maxValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._maxValueBy);if(field){this._maxValueBy=field;return field.getDataValue();}}}\n_$proto.setMaxValue=function(value){if(value===this._maxValue)return;this._maxValue=value;this._maxValueBy=\"\";}\n_$proto.getPageSize=function(){return this._pageSize;}\n_$proto.setPageSize=function(value){this._pageSize=value;}\n_$proto.getDecimalOptions=function(){return this._decimalOptions;}\n_$proto.setDecimalOptions=function(value){this._decimalOptions=value;}\n_$proto.getDataText=function(){return this.__original.value;}\n_$proto.getDataValue=function(){var value=this.__original.value;return value&&parseFloat(\"0\"+value)||undefined;}\n_$proto.setDataValue=function(vValue){if(!this.isValidValueFor(vValue))return;this.__original.value=\"\"+vValue;this.fireEvent(\"_onValueChanged\");}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();obj._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField).getFirst();}else{obj.__original=vField;}\nobj._name=obj.__original.name||obj.__original.id||\"\";if(vOptions){obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;if(vOptions.isReadOnly!=undefined)obj._isReadOnly=vOptions.isReadOnly;if(vOptions.unfilledPrompt!=undefined)obj._unfilledPrompt=vOptions.unfilledPrompt;if(vOptions.unmatchedPrompt!=undefined)obj._unmatchedPrompt=vOptions.unmatchedPrompt;if(vOptions.decimalOptions!=undefined)obj._decimalOptions=vOptions.decimalOptions;if(vOptions.pageSize!=undefined)obj._pageSize=vOptions.pageSize;if(vOptions.minValue!=undefined){if(typeof(vOptions.minValue)!=\"string\"){obj._minValue=vOptions.minValue;}else if(vOptions.minValue.indexOf(\"->#\")==0){obj._minValueBy=vOptions.minValue.right(\"->#\");}else{obj._minValue=parseFloat(vOptions.minValue);}}\nif(vOptions.maxValue!=undefined){if(typeof(vOptions.maxValue)!=\"string\"){obj._maxValue=vOptions.maxValue;}else if(vOptions.maxValue.indexOf(\"->#\")==0){obj._maxValueBy=vOptions.maxValue.right(\"->#\");}else{obj._maxValue=parseFloat(vOptions.maxValue);}}\nif(vOptions.onEvents){[\"onValidate\",\"onReadStateChanged\",\"onValueChanged\"].forEach(function(sEvent){var func=vOptions.onEvents[sEvent];if(func)obj.addEventListener(sEvent,func);});}}\nobj.__original.attachEvent(\"onmouseover\",function(){obj.fireEvent(\"_onTips\");});obj.__original.attachEvent(\"onchange\",function(event){var flag=![0,1,2].some(function(mode){return!obj.validate(mode);});if(!flag)obj._isFocusing=true;obj.fireEvent(\"_onValueChanged\",event);});obj.__original.attachEvent(\"onblur\",function(){return obj.fireEvent(\"_onBlur\");});obj.fireEvent(\"_onPropertyChanged\",\"minValue\");obj.fireEvent(\"_onPropertyChanged\",\"maxValue\");obj.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");return obj;}\n_$proto.isValidValueFor=function(value){if(typeof(value)!=\"number\")return false;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&value<minValue){return false;}else if(maxValue!=undefined&&value>maxValue){return false;}else{return true;}}\n_$proto.validate=function(iOptions,isSubmiting){var field=this.__original;switch(iOptions){case 0:if(!field.value){if(!this._allowEmpty&&isSubmiting){if(this._unfilledPrompt)alert(this._unfilledPrompt);else alert(\"\\u8bf7\\u9009\\u62e9\\u6216\\u8f93\\u5165\\\"\"+this._label+\"\\\"!\");try{field.focus();}catch(e){}}\nreturn this._allowEmpty;}\nif(isNaN(field.value)){alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u4e0d\\u662f\\u6570\\u5b57\\uff01\");field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}else if(field.value!=\"0\"&&field.value.slice(0,1)==\"0\"){this.__original.value=parseFloat(field.value);}\nbreak;case 1:var minValue=this.getMinValue();var maxValue=this.getMaxValue();var iValue=parseFloat(\"0\"+field.value);if(maxValue!=undefined){if(Global.isNumber(maxValue)&&iValue>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u4e0d\\u80fd\\u5927\\u4e8e\"+maxValue+\"!\");field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}}else if(minValue!=undefined){if(Global.isNumber(minValue)&&iValue<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u4e0d\\u80fd\\u5c0f\\u4e8e\"+minValue+\"!\");field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}}\nif(field.value.slice(-1)==\".\"){field.value+=this._decimalOptions<=0?\"00\":Global.obj(\"0\").repeat(this._decimalOptions).valueOf();}\nif(this._decimalOptions==0&&field.value.indexOf(\".\")>0){field.value=field.value.word(\".\",0);}else if(this._decimalOptions>0&&field.value.indexOf(\".\")>0){var bits=field.value.length-field.value.indexOf(\".\")-1;if(bits>this._decimalOptions){alert(\"\\u8bf7\\u6700\\u591a\\u8f93\\u5165\"+this._decimalOptions+\"\\u4f4d\\u5c0f\\u6570!\");field.value=field.value.slice(0,field.value.indexOf(\".\")+this._decimalOptions+1);field.focus();return false;}}\nbreak;case 2:return this.fireEvent(\"_onValidate\",isSubmiting);}\nreturn true;}\n_$proto._onPropertyChanged=function(sName){switch(sName){case\"isReadOnly\":this.__original.readOnly=this._isReadOnly;this.fireEvent(\"onReadStateChanged\",this._isReadOnly);break;case\"minValue\":case\"maxValue\":var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&maxValue!=undefined){this.__original.title=\"\\u6709\\u6548\\u8303\\u56f4: \"+minValue+\" - \"+maxValue;}else if(minValue!=undefined){this.__original.title=\"\\u6709\\u6548\\u8303\\u56f4: \"+minValue+\" - ~\";}else if(maxValue!=undefined){this.__original.title=\"\\u6709\\u6548\\u8303\\u56f4: ~ - \"+maxValue;}\nbreak;}}\n_$proto._onValueChanged=function(event){var flag=this.fireEvent(\"onValueChanged\",this.getDataValue());if(flag||flag==undefined)this._parentForm.fireEvent(\"_onFieldValueChanged\",this);}\n_$proto._onKeyDown=function(event){var field=this.__original;var intValue=field.value==\"\"?-1:parseFloat(\"0\"+field.value);var at=field.value.indexOf(\".\");var precision=at<0?0:(field.value.length-at-1);field.style.imeMode=\"disabled\";switch(event.keyCode){case Global.KEY_Up:var value=this.getDataValue().adjust(1);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value;}\nbreak;case Global.KEY_Down:var value=this.getDataValue().adjust(-1);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value<0?0:value;}\nbreak;case Global.KEY_Left:break;case Global.KEY_Right:break;case Global.KEY_Home:break;case Global.KEY_End:break;case Global.KEY_PageUp:if(this._pageSize){var value=this.getDataValue().adjust(this._pageSize);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value;}}\nreturn event.returnValue=false;break;case Global.KEY_PageDown:if(this._pageSize){var value=this.getDataValue().adjust(-this._pageSize);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value;}}\nreturn event.returnValue=false;break;case Global.KEY_Enter:field.blur();break;case Global.KEY_Backspace:break;case Global.KEY_Delete:break;default:if(event.keyCode>=Global.KEY_NUM_Min&&event.keyCode<=Global.KEY_NUM_Max){if(intValue==0&&at<0)return event.returnValue=false;if(this._maxValue!=undefined){}\nif(this._decimalOptions>0&&field.value.indexOf(\".\")>0){var bits=field.value.length-field.value.indexOf(\".\")-1;}}else if(event.keyCode>=Global.KEY_MIN_Min&&event.keyCode<=Global.KEY_MIN_Max){if(intValue==0&&at<0)return event.returnValue=false;if(this._maxValue!=undefined){}\nif(this._decimalOptions>0&&field.value.indexOf(\".\")>0){var bits=field.value.length-field.value.indexOf(\".\")-1;}}else if(event.keyCode==190||event.keyCode==110){if(this._decimalOptions==0)return event.returnValue=false;if(field.value==\"\")return event.returnValue=false;if(field.value.indexOf(\".\")>=0)return event.returnValue=false;}else{return event.returnValue=false;}}}\n_$proto._onTips=function(){if(!this._minValueBy&&!this._maxValueBy)return;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&maxValue!=undefined){this.__original.title=\"\\u6709\\u6548\\u8303\\u56f4: \"+minValue+\" - \"+maxValue;}else if(minValue!=undefined){this.__original.title=\"\\u6709\\u6548\\u8303\\u56f4: \"+minValue+\" - ~\";}else if(maxValue!=undefined){this.__original.title=\"\\u6709\\u6548\\u8303\\u56f4: ~ - \"+maxValue;}}\n_$proto._onBlur=function(){var _this=this;if(this._isFocusing){this._isFocusing=false;try{window.setTimeout(function(){_this.__original.focus();},2);}catch(e){}\nreturn false;}}",
"js.domx.HTMLDateField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLDateField=function(){this._dataType=\"Date\";this._allowKeyInput=true;this._minValue=undefined;this._minValueBy=\"\";this._maxValue=undefined;this._maxValueBy=\"\";this._pageSize=undefined;this._dateOptions=\"date\";this._isSelecting=false;};var _$class=js.domx.HTMLDateField;_$class.$name=\"HTMLDateField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.setIsReadOnly=function(value){if(this._isReadOnly===value)return;this._isReadOnly=value;this.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");}\n_$proto.getAllowKeyInput=function(){return this._allowKeyInput;}\n_$proto.getMinValue=function(){if(!this._minValueBy){return this._minValue;}else if(typeof(this._minValueBy)!=\"string\"){return this._minValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._minValueBy);if(field){this._minValueBy=field;return field.getDataValue();}}}\n_$proto.setMinValue=function(value){if(value===this._minValue)return;this._minValue=value;this._minValueBy=\"\";}\n_$proto.getMaxValue=function(){if(!this._maxValueBy){return this._maxValue;}else if(typeof(this._maxValueBy)!=\"string\"){return this._maxValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._maxValueBy);if(field){this._maxValueBy=field;return field.getDataValue();}}}\n_$proto.setMaxValue=function(value){if(value===this._maxValue)return;this._maxValue=value;this._maxValueBy=\"\";}\n_$proto.getPageSize=function(){return this._pageSize;}\n_$proto.setPageSize=function(value){this._pageSize=value;}\n_$proto.getDateOptions=function(){return this._dateOptions;}\n_$proto.setDateOptions=function(value){if(value===this._dateOptions)return;this._dateOptions=value;this.fireEvent(\"_onPropertyChanged\",\"dateOptions\");}\n_$proto.getDataText=function(){return this.__original.value;}\n_$proto.getDataValue=function(){return this._convertToDate(this.__original.value);}\n_$proto.setDataValue=function(vDate){var field=this.__original;if(!Global.is(vDate,\"Date\")){vDate=this._convertToDate(vDate);}\nfield.value=vDate.toSTDString(this._dateOptions);this.fireEvent(\"_onValueChanged\");}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();obj._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField).getFirst();}else{obj.__original=vField;}\nobj._name=obj.__original.name||obj.__original.id||\"\";if(vOptions){obj._separator=vOptions.separator||\"\";obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;if(vOptions.allowKeyInput!=undefined)obj._allowKeyInput=vOptions.allowKeyInput;if(vOptions.isReadOnly!=undefined)obj._isReadOnly=vOptions.isReadOnly;if(vOptions.unfilledPrompt!=undefined)obj._unfilledPrompt=vOptions.unfilledPrompt;if(vOptions.unmatchedPrompt!=undefined)obj._unmatchedPrompt=vOptions.unmatchedPrompt;if(vOptions.dateOptions!=undefined)obj._dateOptions=vOptions.dateOptions;if(vOptions.pageSize!=undefined)obj._pageSize=vOptions.pageSize;if(vOptions.minValue!=undefined){if(typeof(vOptions.minValue)!=\"string\"){obj._minValue=vOptions.minValue;}else if(vOptions.minValue.indexOf(\"->#\")==0){obj._minValueBy=vOptions.minValue.right(\"->#\");}else{obj._minValue=parseFloat(vOptions.minValue);}}\nif(vOptions.maxValue!=undefined){if(typeof(vOptions.maxValue)!=\"string\"){obj._maxValue=vOptions.maxValue;}else if(vOptions.maxValue.indexOf(\"->#\")==0){obj._maxValueBy=vOptions.maxValue.right(\"->#\");}else{obj._maxValue=parseFloat(vOptions.maxValue);}}\nif(vOptions.onEvents){[\"onValidate\",\"onSelect\",\"onReadStateChanged\",\"onValueChanged\"].forEach(function(sEvent){var func=vOptions.onEvents[sEvent];if(func)obj.addEventListener(sEvent,func);});}}\nobj.__original.attachEvent(\"ondblclick\",function(event){obj.selectValues(event);});obj.__original.attachEvent(\"onchange\",function(event){obj.fireEvent(\"_onValueChanged\",event);});obj.__original.attachEvent(\"onblur\",function(event){obj.fireEvent(\"_onBlur\",event);});obj.fireEvent(\"_onPropertyChanged\",\"allowKeyInput\");obj.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");return obj;}\n_$proto.selectValues=function(event){this.fireEvent(\"_onSelect\",event);}\n_$proto.isValidValueFor=function(date){if(!Global.is(date,\"Date\"))return false;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&value<minValue){return false;}else if(maxValue!=undefined&&value>maxValue){return false;}else{return true;}}\n_$proto._convertToDate=function(vValue){if(!vValue)return;else if(Global.is(vValue,\"Date\"))return vValue;vValue=vValue.replace(/-|\\./g,\"/\");switch(this._dateOptions){case\"date\":var date=new js.lang.natives.Date(vValue);date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);return date;case\"time\":return new js.lang.natives.Date(\"1900/1/1 \"+vValue);case\"datetime\":return new js.lang.natives.Date(vValue);}}\n_$proto._getHelpInfo=function(){switch(this._dateOptions){case\"date\":return\"\\u65e5\\u671f\\u683c\\u5f0f\\u4e3a: YYYY-MM-DD \\n \\u4f8b\\u5982: 2012-05-30\";case\"time\":return\"\\u65e5\\u671f\\u683c\\u5f0f\\u4e3a: HH:MM:SS \\n \\u4f8b\\u5982: 23:59:59\";case\"datetime\":return\"\\u65e5\\u671f\\u683c\\u5f0f\\u4e3a: YYYY-MM-DD HH:MM:SS \\n \\u4f8b\\u5982: 2012-05-30 23:59:59\";}}\n_$proto.validate=function(iOptions,isSubmiting){var field=this.__original;switch(iOptions){case 0:if(!field.value){if(!this._allowEmpty&&isSubmiting){if(this._unfilledPrompt)alert(this._unfilledPrompt);else alert(\"\\u8bf7\\u9009\\u62e9\\u6216\\u8f93\\u5165\\\"\"+this._label+\"\\\"!\");try{field.focus();}catch(e){}}\nreturn this._allowEmpty;}\nif(!this._validateDataType(field.value)){alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u4e0d\\u662f\\u65e5\\u671f\\uff01\\u8bf7\\u6ce8\\u610f\\u683c\\u5f0f\\uff1a\\n\\n\"+this._getHelpInfo());field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}\nbreak;case 1:var minValue=this.getMinValue();var maxValue=this.getMaxValue();var dtValue=this._convertToDate(field.value);if(maxValue!=undefined){if(Global.isDate(maxValue)&&dtValue>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u5fc5\\u987b\\u5c0f\\u4e8e(\\u7b49\\u4e8e)\\\"\"+maxValue.toSTDString(this._dateOptions)+\"\\\"!\");try{field.focus();}catch(e){}\nreturn false;}}\nif(minValue!=undefined){if(Global.isDate(minValue)&&dtValue<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(\"\\u60a8\\u8f93\\u5165\\u7684\\\"\"+this._label+\"\\\"\\u5fc5\\u987b\\u5927\\u4e8e(\\u7b49\\u4e8e)\\\"\"+minValue.toSTDString(this._dateOptions)+\"\\\"!\");try{field.focus();}catch(e){}\nreturn false;}}\nbreak;case 2:return this.fireEvent(\"_onValidate\",isSubmiting);}\nreturn true;}\n_$proto._validateDataType=function(sValue){switch(this._dateOptions){case\"date\":return/^[0-9]{4}([.\\/-])[0-9]{1,2}\\1[0-9]{1,2}$/.test(sValue.trim());case\"time\":return/^[0-9]{1,2}:[0-9]{1,2}(:[0-9]{1,2})?$/.test(sValue.trim());case\"datetime\":return/^[0-9]{4}([.\\/-])[0-9]{1,2}\\1[0-9]{1,2}[0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}$/.test(sValue.trim());}}\n_$proto._onPropertyChanged=function(sName){switch(sName){case\"isReadOnly\":if(this._isReadOnly){this.__original.readOnly=this._isReadOnly;}else{this.__original.readOnly=!this._allowKeyInput;}\nthis.fireEvent(\"onReadStateChanged\",this._isReadOnly);break;case\"allowKeyInput\":this.__original.readOnly=!this._allowKeyInput;break;}}\n_$proto._onSelect=function(event){var _this=this;if(this.hasEvent(\"onSelect\")){this._isSelecting=true;this.fireEvent(\"onSelect\",event,this._dateOptions,function(action,value){switch(action){case 1:_this.fireEvent(\"_onSelectingOK\",value);break;case 0:_this.fireEvent(\"_onSelectingCancel\",value);break;}});}}\n_$proto._onSelectingOK=function(value){this.fireEvent(\"_onSelectingFinished\");this.setDataValue(value);}\n_$proto._onSelectingCancel=function(){this.fireEvent(\"_onSelectingFinished\");}\n_$proto._onSelectingFinished=function(){this._isSelecting=false;}\n_$proto._onBlur=function(event){if(this._isSelecting)return;var value=this.__original.value;var flag=![0,1,2].some(function(mode){return!this.validate(mode);},this);if(flag){if(value.trim()!=value){this.__original.value=value.trim();}}\nif(!flag&&this.__original.value)this.selectValues(event);}"
}
}
