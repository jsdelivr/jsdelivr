/*
 *  embed-js - v3.5.0
 *  A JavaScript plugin that analyses the string and embeds emojis, media, tweets, code and services.
 *  http://riteshkr.com/embed.js
 *
 *  Made by Ritesh Kumar
 *  Under MIT License
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b():"function"==typeof define&&define.amd?define(b):b()}(this,function(){"use strict";function a(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a}function b(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(i){return void c(i)}g.done?a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}d("next")})}}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b,c,d){var e=Object.create((b||h).prototype),f=new q(d||[]);return e._invoke=n(a,c,f),e}function g(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(d){return{type:"throw",arg:d}}}function h(){}function i(){}function j(){}function k(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function l(a){this.arg=a}function m(b){function c(a,d,e,f){var h=g(b[a],b,d);if("throw"!==h.type){var i=h.arg,j=i.value;return j instanceof l?Promise.resolve(j.arg).then(function(a){c("next",a,e,f)},function(a){c("throw",a,e,f)}):Promise.resolve(j).then(function(a){i.value=a,e(i)},f)}f(h.arg)}function d(a,b){function d(){return new Promise(function(d,e){c(a,b,d,e)})}return e=e?e.then(d,d):d()}"object"===("undefined"==typeof process?"undefined":a(process))&&process.domain&&(c=process.domain.bind(c));var e;this._invoke=d}function n(a,b,c){var d=F;return function(e,f){if(d===H)throw new Error("Generator is already running");if(d===I){if("throw"===e)throw f;return s()}for(;;){var h=c.delegate;if(h){if("return"===e||"throw"===e&&h.iterator[e]===A){c.delegate=null;var i=h.iterator["return"];if(i){var j=g(i,h.iterator,f);if("throw"===j.type){e="throw",f=j.arg;continue}}if("return"===e)continue}var j=g(h.iterator[e],h.iterator,f);if("throw"===j.type){c.delegate=null,e="throw",f=j.arg;continue}e="next",f=A;var k=j.arg;if(!k.done)return d=G,k;c[h.resultName]=k.value,c.next=h.nextLoc,c.delegate=null}if("next"===e)d===G?c.sent=f:c.sent=A;else if("throw"===e){if(d===F)throw d=I,f;c.dispatchException(f)&&(e="next",f=A)}else"return"===e&&c.abrupt("return",f);d=H;var j=g(a,b,c);if("normal"===j.type){d=c.done?I:G;var k={value:j.arg,done:c.done};if(j.arg!==J)return k;c.delegate&&"next"===e&&(f=A)}else"throw"===j.type&&(d=I,e="throw",f=j.arg)}}}function o(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function p(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function q(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(o,this),this.reset(!0)}function r(a){if(a){var b=a[C];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function e(){for(;++c<a.length;)if(z.call(a,c))return e.value=a[c],e.done=!1,e;return e.value=A,e.done=!0,e};return d.next=d}}return{next:s}}function s(){return{value:A,done:!0}}function t(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function u(a){try{delete window[a]}catch(b){window[a]=void 0}}function v(a){var b=document.getElementById(a);document.getElementsByTagName("head")[0].removeChild(b)}var w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y={truncate:function(a,b){return a.substr(0,b-1)+(a.length>b?"...":"")},getUnique:function(a){var b={},c=[];return a.forEach(function(a){b.hasOwnProperty(a)||(c.push(a),b[a]=1)}),c},toUrl:function(a){return-1===a.indexOf("//")?"//"+a:a},deepExtend:function(a,b){for(var c in b)b[c]&&b[c].constructor===Object?(a[c]=a[c]||{},this.deepExtend(a[c],b[c])):a[c]=b[c];return a},escapeRegExp:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},sortObject:function(a){return a.sort(function(a,b){return a.index-b.index})},createText:function(a,b){for(var c=this.sortObject(b),d=0;d<c.length;d++)a+=" "+c[d].text;return a},matches:function(a,b){return a.exec(b)},ifEmbed:function(a,b){return-1==a.excludeEmbed.indexOf(b)&&"all"!==a.excludeEmbed},ifInline:function(a,b){return-1==a.inlineEmbed.indexOf(b)&&"all"!==a.inlineEmbed},dimensions:function qa(a){var qa={width:a.videoWidth,height:a.videoHeight};if(a.videoHeight&&a.videoWidth)return qa;if(a.videoHeight)return qa.width=a.videoHeight/3*4,qa;if(a.videoWidth)return qa.height=qa.width/4*3,qa;var b=[800,600];return qa.width=b[0],qa.height=b[1],qa},cloneObject:function(b){if(null===b||"object"!==("undefined"==typeof b?"undefined":a(b)))return b;var c=b.constructor();for(var d in b)c[d]=this.cloneObject(b[d]);return c},urlRegex:function(){return/((href|src)=["']|)(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(?:https?:\/\/)?(?:(?:0rz\.tw)|(?:1link\.in)|(?:1url\.com)|(?:2\.gp)|(?:2big\.at)|(?:2tu\.us)|(?:3\.ly)|(?:307\.to)|(?:4ms\.me)|(?:4sq\.com)|(?:4url\.cc)|(?:6url\.com)|(?:7\.ly)|(?:a\.gg)|(?:a\.nf)|(?:aa\.cx)|(?:abcurl\.net)|(?:ad\.vu)|(?:adf\.ly)|(?:adjix\.com)|(?:afx\.cc)|(?:all\.fuseurl.com)|(?:alturl\.com)|(?:amzn\.to)|(?:ar\.gy)|(?:arst\.ch)|(?:atu\.ca)|(?:azc\.cc)|(?:b23\.ru)|(?:b2l\.me)|(?:bacn\.me)|(?:bcool\.bz)|(?:binged\.it)|(?:bit\.ly)|(?:buff\.ly)|(?:bizj\.us)|(?:bloat\.me)|(?:bravo\.ly)|(?:bsa\.ly)|(?:budurl\.com)|(?:canurl\.com)|(?:chilp\.it)|(?:chzb\.gr)|(?:cl\.lk)|(?:cl\.ly)|(?:clck\.ru)|(?:cli\.gs)|(?:cliccami\.info)|(?:clickthru\.ca)|(?:clop\.in)|(?:conta\.cc)|(?:cort\.as)|(?:cot\.ag)|(?:crks\.me)|(?:ctvr\.us)|(?:cutt\.us)|(?:dai\.ly)|(?:decenturl\.com)|(?:dfl8\.me)|(?:digbig\.com)|(?:digg\.com)|(?:disq\.us)|(?:dld\.bz)|(?:dlvr\.it)|(?:do\.my)|(?:doiop\.com)|(?:dopen\.us)|(?:easyuri\.com)|(?:easyurl\.net)|(?:eepurl\.com)|(?:eweri\.com)|(?:fa\.by)|(?:fav\.me)|(?:fb\.me)|(?:fbshare\.me)|(?:ff\.im)|(?:fff\.to)|(?:fire\.to)|(?:firsturl\.de)|(?:firsturl\.net)|(?:flic\.kr)|(?:flq\.us)|(?:fly2\.ws)|(?:fon\.gs)|(?:freak\.to)|(?:fuseurl\.com)|(?:fuzzy\.to)|(?:fwd4\.me)|(?:fwib\.net)|(?:g\.ro.lt)|(?:gizmo\.do)|(?:gl\.am)|(?:go\.9nl.com)|(?:go\.ign.com)|(?:go\.usa.gov)|(?:goo\.gl)|(?:goshrink\.com)|(?:gurl\.es)|(?:hex\.io)|(?:hiderefer\.com)|(?:hmm\.ph)|(?:href\.in)|(?:hsblinks\.com)|(?:htxt\.it)|(?:huff\.to)|(?:hulu\.com)|(?:hurl\.me)|(?:hurl\.ws)|(?:icanhaz\.com)|(?:idek\.net)|(?:ilix\.in)|(?:is\.gd)|(?:its\.my)|(?:ix\.lt)|(?:j\.mp)|(?:jijr\.com)|(?:kl\.am)|(?:klck\.me)|(?:korta\.nu)|(?:krunchd\.com)|(?:l9k\.net)|(?:lat\.ms)|(?:liip\.to)|(?:liltext\.com)|(?:linkbee\.com)|(?:linkbun\.ch)|(?:liurl\.cn)|(?:ln-s\.net)|(?:ln-s\.ru)|(?:lnk\.gd)|(?:lnk\.ms)|(?:lnkd\.in)|(?:lnkurl\.com)|(?:lru\.jp)|(?:lt\.tl)|(?:lurl\.no)|(?:macte\.ch)|(?:mash\.to)|(?:merky\.de)|(?:migre\.me)|(?:miniurl\.com)|(?:minurl\.fr)|(?:mke\.me)|(?:moby\.to)|(?:moourl\.com)|(?:mrte\.ch)|(?:myloc\.me)|(?:myurl\.in)|(?:n\.pr)|(?:nbc\.co)|(?:nblo\.gs)|(?:nn\.nf)|(?:not\.my)|(?:notlong\.com)|(?:nsfw\.in)|(?:nutshellurl\.com)|(?:nxy\.in)|(?:nyti\.ms)|(?:o-x\.fr)|(?:oc1\.us)|(?:om\.ly)|(?:omf\.gd)|(?:omoikane\.net)|(?:on\.cnn.com)|(?:on\.mktw.net)|(?:onforb\.es)|(?:orz\.se)|(?:ow\.ly)|(?:ping\.fm)|(?:pli\.gs)|(?:pnt\.me)|(?:politi\.co)|(?:post\.ly)|(?:pp\.gg)|(?:profile\.to)|(?:ptiturl\.com)|(?:pub\.vitrue.com)|(?:qlnk\.net)|(?:qte\.me)|(?:qu\.tc)|(?:qy\.fi)|(?:r\.im)|(?:rb6\.me)|(?:read\.bi)|(?:readthis\.ca)|(?:reallytinyurl\.com)|(?:redir\.ec)|(?:redirects\.ca)|(?:redirx\.com)|(?:retwt\.me)|(?:ri\.ms)|(?:rickroll\.it)|(?:riz\.gd)|(?:rt\.nu)|(?:ru\.ly)|(?:rubyurl\.com)|(?:rurl\.org)|(?:rww\.tw)|(?:s4c\.in)|(?:s7y\.us)|(?:safe\.mn)|(?:sameurl\.com)|(?:sdut\.us)|(?:shar\.es)|(?:shink\.de)|(?:shorl\.com)|(?:short\.ie)|(?:short\.to)|(?:shortlinks\.co.uk)|(?:shorturl\.com)|(?:shout\.to)|(?:show\.my)|(?:shrinkify\.com)|(?:shrinkr\.com)|(?:shrt\.fr)|(?:shrt\.st)|(?:shrten\.com)|(?:shrunkin\.com)|(?:simurl\.com)|(?:slate\.me)|(?:smallr\.com)|(?:smsh\.me)|(?:smurl\.name)|(?:sn\.im)|(?:snipr\.com)|(?:snipurl\.com)|(?:snurl\.com)|(?:sp2\.ro)|(?:spedr\.com)|(?:srnk\.net)|(?:srs\.li)|(?:starturl\.com)|(?:su\.pr)|(?:surl\.co.uk)|(?:surl\.hu)|(?:t\.cn)|(?:t\.co)|(?:t\.lh.com)|(?:ta\.gd)|(?:tbd\.ly)|(?:tcrn\.ch)|(?:tgr\.me)|(?:tgr\.ph)|(?:tighturl\.com)|(?:tiniuri\.com)|(?:tiny\.cc)|(?:tiny\.ly)|(?:tiny\.pl)|(?:tinylink\.in)|(?:tinyuri\.ca)|(?:tinyurl\.com)|(?:tl\.gd)|(?:tmi\.me)|(?:tnij\.org)|(?:tnw\.to)|(?:tny\.com)|(?:to\.ly)|(?:togoto\.us)|(?:totc\.us)|(?:toysr\.us)|(?:tpm\.ly)|(?:tr\.im)|(?:tra\.kz)|(?:trunc\.it)|(?:twhub\.com)|(?:twirl\.at)|(?:twitclicks\.com)|(?:twitterurl\.net)|(?:twitterurl\.org)|(?:twiturl\.de)|(?:twurl\.cc)|(?:twurl\.nl)|(?:u\.mavrev.com)|(?:u\.nu)|(?:u76\.org)|(?:ub0\.cc)|(?:ulu\.lu)|(?:updating\.me)|(?:ur1\.ca)|(?:url\.az)|(?:url\.co.uk)|(?:url\.ie)|(?:url360\.me)|(?:url4\.eu)|(?:urlborg\.com)|(?:urlbrief\.com)|(?:urlcover\.com)|(?:urlcut\.com)|(?:urlenco\.de)|(?:urli\.nl)|(?:urls\.im)|(?:urlshorteningservicefortwitter\.com)|(?:urlx\.ie)|(?:urlzen\.com)|(?:usat\.ly)|(?:use\.my)|(?:vb\.ly)|(?:vgn\.am)|(?:vl\.am)|(?:vm\.lc)|(?:w55\.de)|(?:wapo\.st)|(?:wapurl\.co.uk)|(?:wipi\.es)|(?:wp\.me)|(?:x\.vu)|(?:xr\.com)|(?:xrl\.in)|(?:xrl\.us)|(?:xurl\.es)|(?:xurl\.jp)|(?:y\.ahoo.it)|(?:yatuc\.com)|(?:ye\.pe)|(?:yep\.it)|(?:yfrog\.com)|(?:yhoo\.it)|(?:yiyd\.com)|(?:youtu\.be)|(?:yuarel\.com)|(?:z0p\.de)|(?:zi\.ma)|(?:zi\.mu)|(?:zipmyurl\.com)|(?:zud\.me)|(?:zurl\.ws)|(?:zz\.gd)|(?:zzang\.kr)|(?:›\.ws)|(?:✩\.ws)|(?:✿\.ws)|(?:❥\.ws)|(?:➔\.ws)|(?:➞\.ws)|(?:➡\.ws)|(?:➨\.ws)|(?:➯\.ws)|(?:➹\.ws)|(?:➽\.ws))\/[a-z0-9]*/gi}},z=Object.prototype.hasOwnProperty,A=void 0,B="function"==typeof Symbol?Symbol:{},C=B.iterator||"@@iterator",D=B.toStringTag||"@@toStringTag",E={};E.wrap=f;var F="suspendedStart",G="suspendedYield",H="executing",I="completed",J={},K=j.prototype=h.prototype;i.prototype=K.constructor=j,j.constructor=i,j[D]=i.displayName="GeneratorFunction",E.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return b?b===i||"GeneratorFunction"===(b.displayName||b.name):!1},E.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,j):(a.__proto__=j,D in a||(a[D]="GeneratorFunction")),a.prototype=Object.create(K),a},E.awrap=function(a){return new l(a)},k(m.prototype),E.async=function(a,b,c,d){var e=new m(f(a,b,c,d));return E.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})},k(K),K[C]=function(){return this},K[D]="Generator",K.toString=function(){return"[object Generator]"},E.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function d(){for(;b.length;){var c=b.pop();if(c in a)return d.value=c,d.done=!1,d}return d.done=!0,d}},E.values=r,q.prototype={constructor:q,reset:function(a){if(this.prev=0,this.next=0,this.sent=A,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!a)for(var b in this)"t"===b.charAt(0)&&z.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=A)},stop:function(){this.done=!0;var a=this.tryEntries[0],b=a.completion;if("throw"===b.type)throw b.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=z.call(e,"catchLoc"),h=z.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&z.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?this.next=e.finallyLoc:this.complete(f),J},complete:function(a,b){if("throw"===a.type)throw a.arg;"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=a.arg,this.next="end"):"normal"===a.type&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),p(c),J}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;p(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:r(a),resultName:b,nextLoc:c},J}},window.regeneratorRuntime=E;var L={play:function(a){if(a.customVideoClickHandler)return a.videoClickHandler(a,this.template);for(var b=document.getElementsByClassName(a.videoClickClass),c=this,d=0;d<b.length;d++)b[d].onclick=function(){a.onVideoShow();var b=this.getAttribute("data-ejs-url")+"?autoplay=true";this.parentNode.parentNode.innerHTML=c.template(b,a)}},template:function(a,b){var c=y.dimensions(b);return ejs.template.vimeo(a,c,b)||ejs.template.youtube(a,c,b)||'<div class="ejs-video-player ejs-embed">\n        <iframe src="'+a+'" frameBorder="0" width="'+c.width+'" height="'+c.height+'"></iframe>\n        </div>'},detailsTemplate:function(a,b){return'<div class="ejs-video ejs-embed">\n        <div class="ejs-video-preview">\n        <div class="ejs-video-thumb" data-ejs-url="'+b+'">\n        <div class="ejs-thumb" style="background-image:url('+a.thumbnail+')"></div>\n        <i class="fa fa-play-circle-o"></i>\n        </div>\n        <div class="ejs-video-detail">\n        <div class="ejs-video-title">\n        <a href="'+a.url+'">\n        '+a.title+'\n        </a>\n        </div>\n        <div class="ejs-video-desc">\n        '+a.description+'\n        </div>\n        <div class="ejs-video-stats">\n        <span>\n        <i class="fa fa-eye"></i>'+a.views+'\n        </span>\n        <span>\n        <i class="fa fa-heart"></i>'+a.likes+"\n        </span>\n        </div>\n        </div>\n        </div>\n        </div>"},getDetailsTemplate:function(a,b,c){return"vimeo"===a.host?ejs.template.detailsVimeo(a,b,c)||this.detailsTemplate(a,c):"youtube"===a.host?ejs.template.detailsYoutube(a,b,c)||this.detailsTemplate(a,c):void 0},applyVideoJS:function(a){var b=y.dimensions(a);if(a.videojsOptions.width=b.width,a.videojsOptions.height=b.height,a.videoJS){if(!window.videojs)throw new ReferenceError("You have enabled videojs but you haven't loaded the library.Find it at http://videojs.com/");for(var c=a.element.getElementsByClassName("ejs-video-js"),d=0;d<c.length;d++)videojs(c[d],a.videojsOptions,function(){return a.videojsCallback()})}},destroy:function(a){for(var b=document.getElementsByClassName(a),c=0;c<b.length;c++)b[c].onclick=null},inlineEmbed:function(a,c){var d=this;return b(E.mark(function e(){var b,f,g,h;return E.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(E){d.next=2;break}return d.abrupt("return",a.output);case 2:b=a.options.link?new RegExp("([^>]*"+a.regex.source+")</a>","gi"):new RegExp("([^\\s]*"+a.regex.source+")","gi"),f=void 0;case 4:if(null===(f=y.matches(b,a.output))){d.next=21;break}if(g=(a.options.link?f[0].slice(0,-4):f[0])||f[1],-1===a.options.served.indexOf(g)){d.next=8;break}return d.abrupt("continue",4);case 8:return d.next=10,c(a,f,g);case 10:if(h=d.sent){d.next=13;break}return d.abrupt("continue",4);case 13:if(a.options.served.push(g),!a.options.link){d.next=18;break}return d.abrupt("return",a.options.inlineText?a.output.replace(f[0],f[0]+h):a.output.replace(f[0],h+"</a>"));case 18:return d.abrupt("return",a.options.inlineText?a.output.replace(f[0],f[0]+h):a.output.replace(f[0],h));case 19:d.next=4;break;case 21:return d.abrupt("return",a.output);case 22:case"end":return d.stop()}},e,d)}))()}},M={timeout:5e3,jsonpCallback:"callback"},N=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=null!=b.timeout?b.timeout:M.timeout,d=null!=b.jsonpCallback?b.jsonpCallback:M.jsonpCallback,e=void 0;return new Promise(function(b,f){var g=t();window[g]=function(a){b({ok:!0,json:function(){return Promise.resolve(a)}}),e&&clearTimeout(e),v(d+"_"+g),u(g)},a+=-1===a.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",a+d+"="+g),h.id=d+"_"+g,document.getElementsByTagName("head")[0].appendChild(h),e=setTimeout(function(){f(new Error("JSONP request to "+a+" timed out")),u(g),v(d+"_"+g)},c)})};window.fetchJsonp=N,function(){function a(a){if("string"!=typeof a&&(a=a.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function b(a){return"string"!=typeof a&&(a=a.toString()),a}function c(a){this.map={},a instanceof c?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function d(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function e(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function f(a){var b=new FileReader;return b.readAsArrayBuffer(a),e(b)}function g(a){var b=new FileReader;return b.readAsText(a),e(b)}function h(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,"string"==typeof a)this._bodyText=a;else if(n.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(n.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else{if(a)throw new Error("unsupported BodyInit type");this._bodyText=""}},n.blob?(this.blob=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(f)},this.text=function(){var a=d(this);if(a)return a;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var a=d(this);return a?a:Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function i(a){var b=a.toUpperCase();return o.indexOf(b)>-1?b:a}function j(a,b){if(b=b||{},this.url=a,this.credentials=b.credentials||"omit",this.headers=new c(b.headers),this.method=i(b.method||"GET"),this.mode=b.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&b.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b.body)}function k(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function l(a){var b=new c,d=a.getAllResponseHeaders().trim().split("\n");return d.forEach(function(a){var c=a.trim().split(":"),d=c.shift().trim(),e=c.join(":").trim();b.append(d,e)}),b}function m(a,b){b||(b={}),this._initBody(a),this.type="default",this.url=null,this.status=b.status,this.ok=this.status>=200&&this.status<300,this.statusText=b.statusText,this.headers=b.headers instanceof c?b.headers:new c(b.headers),this.url=b.url||""}if(!self.fetch){c.prototype.append=function(c,d){c=a(c),d=b(d);var e=this.map[c];e||(e=[],this.map[c]=e),e.push(d)},c.prototype["delete"]=function(b){delete this.map[a(b)]},c.prototype.get=function(b){var c=this.map[a(b)];return c?c[0]:null},c.prototype.getAll=function(b){return this.map[a(b)]||[]},c.prototype.has=function(b){return this.map.hasOwnProperty(a(b))},c.prototype.set=function(c,d){this.map[a(c)]=[b(d)]},c.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,d,c,this)},this)},this)};var n={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in self},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.call(j.prototype),h.call(m.prototype),self.Headers=c,self.Request=j,self.Response=m,self.fetch=function(a,b){var c;return c=j.prototype.isPrototypeOf(a)&&!b?a:new j(a,b),new Promise(function(a,b){function d(){return"responseURL"in e?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):void 0}var e=new XMLHttpRequest;e.onload=function(){var c=1223===e.status?204:e.status;if(100>c||c>599)return void b(new TypeError("Network request failed"));var f={status:c,statusText:e.statusText,headers:l(e),url:d()},g="response"in e?e.response:e.responseText;a(new m(g,f))},e.onerror=function(){b(new TypeError("Network request failed"))},e.open(c.method,c.url,!0),"include"===c.credentials&&(e.withCredentials=!0),"responseType"in e&&n.blob&&(e.responseType="blob"),c.headers.forEach(function(a,b){e.setRequestHeader(b,a)}),e.send("undefined"==typeof c._bodyInit?null:c._bodyInit)})},self.fetch.polyfill=!0}}();var O=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f,this.regex=/https:\/\/twitter\.com\/\w+\/\w+\/\d+/gi,this.service="twitter",this.load=this.load.bind(this),this.options.element.addEventListener("rendered",this.load,!1)}return w(a,[{key:"tweetData",value:function(){var a=b(regeneratorRuntime.mark(function c(a){var b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b=this.options.tweetOptions,d="https://api.twitter.com/1/statuses/oembed.json?omit_script=true&url="+a+"&maxwidth="+b.maxWidth+"&hide_media="+b.hideMedia+"&hide_thread="+b.hideThread+"&align="+b.align+"&lang="+b.lang,c.next=4,N(d,{credentials:"include"});case 4:return e=c.sent,c.next=7,e.json();case 7:return c.abrupt("return",c.sent);case 8:case"end":return c.stop()}},c,this)}));return function(b){return a.apply(this,arguments)}}()},{key:"load",value:function(){var a=this;twttr.widgets.load(this.options.element),twttr.events.bind("loaded",function(){a.options.onTweetsLoad()})}},{key:"process",value:function(){var c=b(regeneratorRuntime.mark(function d(){var b,c;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,y.ifInline(this.options,this.service)){d.next=7;break}return d.next=4,L.inlineEmbed(this,a.urlToText);case 4:this.output=d.sent,d.next=17;break;case 7:b=void 0;case 8:if(null===(b=y.matches(this.regex,this.input))){d.next=17;break}if(-1===this.options.served.indexOf(b[0])){d.next=11;break}return d.abrupt("continue",8);case 11:return d.next=13,this.tweetData(b[0]);case 13:c=d.sent,this.embeds.push({text:c.html,index:b.index}),d.next=8;break;case 17:return d.abrupt("return",[this.output,this.embeds]);case 20:d.prev=20,d.t0=d["catch"](0);case 23:case"end":return d.stop()}},d,this,[[0,20]])}));return function(){return c.apply(this,arguments)}}()}],[{key:"urlToText",value:function(){var a=b(regeneratorRuntime.mark(function c(a,b,d){var e;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,a.tweetData(d);case 2:return e=b.sent,b.abrupt("return",e.html);case 4:case"end":return b.stop()}},c,this)}));return function(b,c,d){return a.apply(this,arguments)}}()}]),a}(),P=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f}return w(a,[{key:"process",value:function(){var a=this;if(y.ifInline(this.options,this.service)){for(var b=void 0;null!==(b=y.matches(this.regex,this.input));)if(-1===this.options.served.indexOf(b[0])){var c=this.template(b[0]);this.embeds.push({text:c,index:b.index})}}else{var d=this.options.link?new RegExp("([^>]*"+this.regex.source+")</a>","gm"):new RegExp("([^\\s]*"+this.regex.source+")","gm");this.output=this.output.replace(d,function(b){var c=a.options.link?b.slice(0,-4):b;return-1===a.options.served.indexOf(c)?a.options.link?a.options.inlineText?b+a.template(b.slice(0,-4)):a.template(b.slice(0,-4))+"</a>":a.options.inlineText?b+a.template(b):a.template(b):c})}return[this.output,this.embeds]}}]),a}(),Q=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/((?:https?):\/\/\S*\.(?:gif|jpg|jpeg|tiff|png|svg|webp))/gi,h.service="image",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.basicImage(a,this.options)||'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+a+'"/></div></div>'}}]),b}(P),R=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/instagram.com\/p\/[a-zA-Z0-9_\/\?\-\=]+/gi,h.service="instagram",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=y.dimensions(this.options);return ejs.template.instagram(a,b,this.options)||'<div class="ejs-embed ejs-instagram"><iframe src="'+y.toUrl(a.split("/?")[0])+'/embed/" height="'+b.height+'"></iframe></div>'}}]),b}(P),S=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/flickr.com\/[a-z]+\/[a-zA-Z@_$!\d\-\]+\/[\d]+/gi,h.service="flickr",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=y.dimensions(this.options);return ejs.template.flickr(a,b,this.options)||'<div class="ejs-embed">\n			<div class="ne-image-wrapper">\n				<iframe src="'+y.toUrl(a.split("/?")[0])+'/player/" width="'+b.width+'" height="'+b.height+'"></iframe>\n			</div>\n		</div>'}}]),b}(P),T=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/((?:https?):\/\/\S*\.(?:wav|mp3|ogg))/gi,h.service="audio",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.basicAudio(a)||'<div class="ejs-audio ejs-embed"><audio src="'+a+'" controls class="video-js ejs-video-js"></audio></div>'}}]),b}(P),U=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/spotify.com\/track\/[a-zA-Z0-9_]+/gi,h.service="spotify",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=a.split("/"),c=b[b.length-1];return ejs.template.spotify(c)||'<div class="ejs-embed"><iframe src="https://embed.spotify.com/?uri=spotify:track:'+c+'" height="80"></iframe></div>'}}]),b}(P),V=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/(soundcloud.com)\/[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+/gi,h.service="soundcloud",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=this.options.soundCloudOptions;return ejs.template.soundCloud(a,b)||'<div class="ejs-embed">\n		<iframe height="160" scrolling="no" src="https://w.soundcloud.com/player/?url='+a+"\n		&auto_play     = "+b.autoPlay+"\n		&hide_related  = "+b.hideRelated+"\n		&show_comments = "+b.showComments+"\n		&show_user     = "+b.showUser+"\n		&show_reposts  = "+b.showReposts+"\n		&visual        = "+b.visual+"\n		&download      = "+b.download+"\n		&color         = "+b.themeColor+"\n		&theme_color   = "+b.themeColor+'"></iframe>\n		</div>'}}]),b}(P),W=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f,this.service="map",this.regex=/@\((.+)\)/gi}return w(a,[{key:"process",value:function(){var c=b(regeneratorRuntime.mark(function d(){var b,c,e=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:b=void 0,c=regeneratorRuntime.mark(function f(){var c,d,g,h,i;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if("place"===e.options.mapOptions.mode){f.next=6;break}return f.next=3,a.getCoordinate(b[0]);case 3:f.t0=f.sent,f.next=7;break;case 6:f.t0=[null,null];case 7:c=f.t0,d=x(c,2),g=d[0],h=d[1],i=a.template(b[0],g,h,e.options),y.ifInline(e.options,e.service)?(e.embeds.push({text:i,index:b.index}),e.output=e.output.replace(e.regex,function(b){return'<span class="ejs-location">'+a.locationText(b)+"</span>"})):e.output=e.output.replace(e.regex,function(b){return'<span class="ejs-location">'+a.locationText(b)+"</span>"+i});case 13:case"end":return f.stop()}},f,e)});case 2:if(null===(b=y.matches(this.regex,this.output))){d.next=6;break}return d.delegateYield(c(),"t0",4);case 4:d.next=2;break;case 6:return d.abrupt("return",[this.output,this.embeds]);case 7:case"end":return d.stop()}},d,this)}));return function(){return c.apply(this,arguments)}}()}],[{key:"getCoordinate",value:function(){var a=b(regeneratorRuntime.mark(function c(a){var b,d,e,f,g;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b="http://maps.googleapis.com/maps/api/geocode/json?address="+a+"&sensor=false",c.next=3,fetch(b);case 3:return d=c.sent,c.next=6,d.json();case 6:return e=c.sent,f=e.results[0].geometry.location.lat,g=e.results[0].geometry.location.lng,c.abrupt("return",[f,g]);case 10:case"end":return c.stop()}},c,this)}));return function(b){return a.apply(this,arguments)}}()},{key:"template",value:function(a,b,c,d){var e=a.split("(")[1].split(")")[0],f=d.mapOptions,g=y.dimensions(d);return"place"===f.mode?'<div class="ejs-embed ejs-map"><iframe width="'+g.width+'" height="'+g.height+'" src="https://www.google.com/maps/embed/v1/place?key='+d.googleAuthKey+"&q="+e+'"></iframe></div>':"streetview"===f.mode?'<div class="ejs-embed ejs-map"><iframe width="'+g.width+'" height="'+g.height+'" src="https://www.google.com/maps/embed/v1/streetview?key='+d.googleAuthKey+"&location="+b+","+c+'&heading=210&pitch=10&fov=35"></iframe></div>':"view"===f.mode?'<div class="ejs-embed ejs-map"><iframe width="'+g.width+'" height="'+g.height+'" src="https://www.google.com/maps/embed/v1/view?key='+d.googleAuthKey+"&center="+b+","+c+'&zoom=18&maptype=satellite"></iframe></div>':void 0}},{key:"locationText",value:function(a){return a.split("(")[1].split(")")[0]}}]),a}(),X=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f,this.service="github",this.regex=/github.com\/([a-zA-Z0-9\.-]+)\/([a-zA-Z0-9\.-]+)/gi}return w(a,[{key:"process",value:function(){var c=b(regeneratorRuntime.mark(function d(){var b,c,e,f,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(y.ifInline(this.options,this.service)){d.next=6;break}return d.next=3,L.inlineEmbed(this,a.urlToText);case 3:this.output=d.sent,d.next=20;break;case 6:b=void 0;case 7:if(!(b=y.matches(this.regex,this.input))){d.next=20;break}if(c=b[0],-1!=this.options.served.indexOf(c)){d.next=18;break}if(b[3]){d.next=12;break}return d.abrupt("continue",7);case 12:return e={user:b[2],repo:b[3]},d.next=15,a.fetchRepo(e);case 15:f=d.sent,g=a.template(f,this.options),this.embeds.push({text:g,index:b.index});case 18:d.next=7;break;case 20:return d.abrupt("return",[this.output,this.embeds]);case 21:case"end":return d.stop()}},d,this)}));return function(){return c.apply(this,arguments)}}()}],[{key:"template",value:function(a,b){return ejs.template.Github(a,b)||'<div class="ejs-embed ejs-github">\n		<div class="ejs-ogp-thumb" style="background-image:url('+a.owner.avatar_url+')"></div>\n		<div class="ejs-ogp-details">\n		<div class="ejs-ogp-title"><a href="'+a.html_url+'" target="'+b.linkOptions.target+'">'+a.full_name+'</a></div>\n		<div class="ejs-ogb-details">'+a.description+'</div><div class="ejs-github-stats">\n        <span>\n        <i class="fa fa-star"></i>'+a.stargazers_count+'\n        </span>\n        <span>\n        <i class="fa fa-code-fork"></i>'+a.network_count+"\n        </span>\n        </div></div></div>";
}},{key:"fetchRepo",value:function(){var a=b(regeneratorRuntime.mark(function c(a){var b,d;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b="https://api.github.com/repos/"+a.user+"/"+a.repo,c.next=3,fetch(b);case 3:return d=c.sent,c.next=6,d.json();case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}},c,this)}));return function(b){return a.apply(this,arguments)}}()},{key:"urlToText",value:function(){var c=b(regeneratorRuntime.mark(function d(b,c){var e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(e={user:c[2],repo:c[3]},e.repo){d.next=3;break}return d.abrupt("return");case 3:return d.next=5,a.fetchRepo(e);case 5:return f=d.sent,d.abrupt("return",a.template(f,b.options));case 7:case"end":return d.stop()}},d,this)}));return function(a,b){return c.apply(this,arguments)}}()}]),a}(),Y=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f,this.regex=/https?:\/\/(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)*/gi,this.service="vimeo"}return w(a,[{key:"data",value:function(){var a=b(regeneratorRuntime.mark(function c(a){var b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,b="https://vimeo.com/api/v2/video/"+a+".json",c.next=4,fetch(b);case 4:return d=c.sent,c.next=7,d.json();case 7:return e=c.sent,c.abrupt("return",e[0]);case 11:c.prev=11,c.t0=c["catch"](0);case 14:case"end":return c.stop()}},c,this,[[0,11]])}));return function(b){return a.apply(this,arguments)}}()},{key:"process",value:function(){var c=b(regeneratorRuntime.mark(function d(){var b,c,e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,y.ifInline(this.options,this.service)){d.next=7;break}return d.next=4,L.inlineEmbed(this,a.urlToText);case 4:this.output=d.sent,d.next=24;break;case 7:b=void 0;case 8:if(null===(b=y.matches(this.regex,this.input))){d.next=24;break}if(-1===this.options.served.indexOf(b[0])){d.next=11;break}return d.abrupt("continue",8);case 11:if(c="https://player.vimeo.com/video/"+b[3],e=void 0,f=void 0,!this.options.videoDetails){d.next=20;break}return d.next=16,this.data(b[3]);case 16:e=d.sent,f=L.getDetailsTemplate(a.formatData(e,y),e,c),d.next=21;break;case 20:f=L.template(c,this.options);case 21:this.embeds.push({text:f,index:b.index}),d.next=8;break;case 24:return d.abrupt("return",[this.output,this.embeds]);case 27:d.prev=27,d.t0=d["catch"](0);case 30:case"end":return d.stop()}},d,this,[[0,27]])}));return function(){return c.apply(this,arguments)}}()}],[{key:"formatData",value:function(a,b){return{title:a.title,thumbnail:a.thumbnail_medium,rawDescription:a.description.replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>"),views:a.stats_number_of_plays,likes:a.stats_number_of_likes,description:b.truncate(a.description.replace(/((<|&lt;)br\s*\/*(>|&gt;)\r\n)/g," "),150),url:a.url,id:a.id,host:"vimeo"}}},{key:"urlToText",value:function(){var c=b(regeneratorRuntime.mark(function d(b,c){var e,f,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(e=b.options.link?c[0].slice(0,-4).split("/").slice(-1).pop():c[0].split("/").slice(-1).pop()){d.next=3;break}return d.abrupt("return");case 3:if(f="https://player.vimeo.com/video/"+e,g=void 0,!b.options.videoDetails){d.next=12;break}return d.next=8,b.data(e);case 8:return g=d.sent,d.abrupt("return",L.getDetailsTemplate(a.formatData(g,y),g,f));case 12:return d.abrupt("return",L.template(f,b.options));case 13:case"end":return d.stop()}},d,this)}));return function(a,b){return c.apply(this,arguments)}}()}]),a}(),Z=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f,this.regex=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/gi,this.service="youtube"}return w(a,[{key:"data",value:function(){var a=b(regeneratorRuntime.mark(function c(a){var b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,b="https://www.googleapis.com/youtube/v3/videos?id="+a+"&key="+this.options.googleAuthKey+"&part=snippet,statistics",c.next=4,fetch(b);case 4:return d=c.sent,c.next=7,d.json();case 7:return e=c.sent,c.abrupt("return",e.items[0]);case 11:c.prev=11,c.t0=c["catch"](0);case 14:case"end":return c.stop()}},c,this,[[0,11]])}));return function(b){return a.apply(this,arguments)}}()},{key:"process",value:function(){var c=b(regeneratorRuntime.mark(function d(){var b,c,e,f,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,y.ifInline(this.options,this.service)){d.next=7;break}return d.next=4,L.inlineEmbed(this,a.urlToText);case 4:this.output=d.sent,d.next=25;break;case 7:b=void 0;case 8:if(null===(b=y.matches(this.regex,this.input))){d.next=25;break}if(-1===this.options.served.indexOf(b[0])){d.next=11;break}return d.abrupt("continue",8);case 11:if(c=b[1],e="https://www.youtube.com/embed/"+c,f=void 0,g=void 0,!this.options.videoDetails){d.next=21;break}return d.next=17,this.data(c);case 17:f=d.sent,g=L.getDetailsTemplate(a.formatData(f,y),f,e),d.next=22;break;case 21:g=L.template(e,this.options);case 22:this.embeds.push({text:g,index:b.index}),d.next=8;break;case 25:d.next=30;break;case 27:d.prev=27,d.t0=d["catch"](0);case 30:return d.abrupt("return",[this.output,this.embeds]);case 31:case"end":return d.stop()}},d,this,[[0,27]])}));return function(){return c.apply(this,arguments)}}()}],[{key:"formatData",value:function(a,b){return{title:a.snippet.title,thumbnail:a.snippet.thumbnails.medium.url,rawDescription:a.snippet.description,views:a.statistics.viewCount,likes:a.statistics.likeCount,description:b.truncate(a.snippet.description,150),url:"https://www.youtube.com/watch?v="+a.id,id:a.id,host:"youtube"}}},{key:"urlToText",value:function(){var c=b(regeneratorRuntime.mark(function d(b,c){var e,f,g;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(e=c[2],f="https://www.youtube.com/embed/"+e,g=void 0,!b.options.videoDetails){d.next=10;break}return d.next=6,b.data(e);case 6:return g=d.sent,d.abrupt("return",L.getDetailsTemplate(a.formatData(g,y),g,f));case 10:return d.abrupt("return",L.template(f,b.options));case 11:case"end":return d.stop()}},d,this)}));return function(a,b){return c.apply(this,arguments)}}()}]),a}(),$=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/vine.co\/v\/[a-zA-Z0-9]+/gi,h.service="vine",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=this.options.vineOptions,c=a.split("/"),d=c[c.length-1];return ejs.template.vine(d,this.options)||'<div class="ejs-vine">\n		<iframe class="ejs-vine-iframe" src="https://vine.co/v/'+d+"/embed/"+b.type+'" height="'+b.height+'" width="'+b.width+'"></iframe>\n		</div>'}}]),b}(P),_=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/(?:https?):\/\/\S*\.(?:ogv|webm|mp4)/gi,h.service="video",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.basicVideo(a,this.options)||'<div class="ejs-video ejs-embed">\n		<div class="ejs-video-player">\n		<div class="ejs-player">\n		<video src="'+a+'" class="ejs-video-js video-js" controls></video>\n		</div>\n		</div>\n		</div>'}}]),b}(P),aa=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/liveleak.com\/view\?i=[a-zA-Z0-9_]+/gi,h.service="liveleak",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=y.dimensions(this.options);return ejs.template.liveLeak(a,b,this.options)||'<div class="ejs-video ejs-embed"><iframe src="http://www.liveleak.com/e/'+a.split("=")[1]+'" height="'+b.height+'" width="'+b.width+'"></iframe></div>'}}]),b}(P),ba=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/ustream.tv\/[a-z\/0-9]*/gi,h.service="ustream",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=a.split("/");b.splice(1,0,"embed");var c=y.dimensions(this.options);return ejs.template.ustream(b,c,this.options)||'<div class="ejs-embed ejs-ustream"><iframe src="//www.'+b.join("/")+'" height="'+c.height+'" width="'+c.width+'"></iframe></div>'}}]),b}(P),ca=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/dailymotion.com\/video\/[a-zA-Z0-9-_]+/gi,h.service="dailymotion",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=y.dimensions(this.options),c=a.split("/"),d=c[c.length-1];return ejs.template.dailymotion(d,b,this.options)||'<div class="ejs-video ejs-embed">\n		<iframe src="http://www.dailymotion.com/embed/video/'+d+'" height="'+b.height+'" width="'+b.width+'"></iframe>\n		</div>'}}]),b}(P),da=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/ted.com\/talks\/[a-zA-Z0-9_]+/gi,h.service="ted",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=y.dimensions(this.options),c=a.split("/"),d=c[c.length-1];return ejs.template.ted(d,b,this.options)||'<div class="ejs-embed ejs-ted"><iframe src="http://embed.ted.com/talks/'+d+'.html" height="'+b.height+'" width="'+b.width+'"></iframe></div>'}}]),b}(P),ea=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/gist.github.com\/[a-zA-Z0-9_-]+\/([a-zA-Z0-9]+)/g,h.service="gist",h.options.element.addEventListener("rendered",function(){h.load()}),h}return d(b,a),w(b,[{key:"template",value:function(a){return'<div class="ejs-gist" data-src="'+a+'"></div>'}},{key:"load",value:function(){for(var a=this.options.element.getElementsByClassName("ejs-gist"),b=0;b<a.length;b++){var c=document.createElement("iframe");c.setAttribute("width","100%"),c.id="ejs-gist-"+b;var d=a[b];d.innerHTML="",d.appendChild(c);var e=a[b].getAttribute("data-src");e=-1===e.indexOf("http")?"https://"+e:e;var f='<html><base target="_parent"/><body onload="parent.document.getElementById(\'ejs-gist-'+b+'\').style.height=parseInt(document.body.scrollHeight)+20+\'px\'"><script type="text/javascript" src="'+e+'.js"></script></body></html>',g=c.document;c.contentDocument?g=c.contentDocument:c.contentWindow&&(g=c.contentWindow.document),g.open(),g.writeln(f),g.close()}}}]),b}(P),fa=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/jsfiddle.net\/[a-zA-Z0-9_]+\/[a-zA-Z0-9_]+/gi,h.service="jsfiddle",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.jsFiddle(a,this.options)||'<div class="ejs-embed ejs-jsfiddle"><iframe height="'+this.options.codeEmbedHeight+'" src="http://'+a+'/embedded"></iframe></div>'}}]),b}(P),ga=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/http:\/\/codepen.io\/([A-Za-z0-9_]+)\/pen\/([A-Za-z0-9_]+)/gi,h.service="codepen",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.codePen(a,this.options)||'<div class="ejs-embed ejs-codepen">\n			<iframe scrolling="no" height="'+this.options.codeEmbedHeight+'" src="'+a.replace(/\/pen\//,"/embed/")+"/?height="+this.options.codeEmbedHeight+"\"></iframe>'\n		</div>"}}]),b}(P),ha=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/jsbin.com\/[a-zA-Z0-9_]+\/[0-9_]+/gi,h.service="jsbin",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.jsBin(a,this.options)||'<div class="ejs-jsbin ejs-embed">\n		<iframe height="'+this.options.codeEmbedHeight+'" class="jsbin-embed foo" src="http://'+a+'/embed?html,js,output"></iframe>\n		</div>'}}]),b}(P),ia=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/plnkr.co\/edit\/[a-zA-Z0-9\?=]+/gi,h.service="plunker",h}return d(b,a),w(b,[{key:"template",value:function(a){var b=a.split("?")[0].split("/"),c=b[b.length-1];return ejs.template.plunker(c,this.options)||'<div class="ejs-embed ejs-plunker">\n		<iframe class="ne-plunker" src="http://embed.plnkr.co/'+c+'" height="'+this.options.codeEmbedHeight+'"></iframe>\n		</div>'}}]),b}(P),ja=function(a){function b(a,d,f,g){c(this,b);var h=e(this,Object.getPrototypeOf(b).call(this,a,d,f,g));return h.regex=/ideone.com\/[a-zA-Z0-9]{6}/gi,h.service="ideone",h}return d(b,a),w(b,[{key:"template",value:function(a){return ejs.template.ideone(a,this.options)||'<div class="ejs-ideone ejs-embed"><iframe src="http://ideone.com/embed/'+a.split("/")+'" frameborder="0" height="'+this.options.codeEmbedHeight+'"></iframe></div>'}}]),b}(P),ka=function(){function a(b,d){if(c(this,a),!hljs)throw new ReferenceError("'hljs is not defined. HighlightJS library is needed to highlight code. Visit https://highlightjs.org/'");this.output=b,this.options=d,this.regex=/(`{3})(\s|[a-z]+)\s*([\s\S]*?[^`])\s*\1(?!`)/gm,this.inlineCodeRegex=/(`)\s*([\s\S]*?[^`])\s*\1(?!`)/gm}return w(a,[{key:"process",value:function(){return this.output=this.output.replace(this.inlineCodeRegex,function(a,b,c){return"<code>"+c+"</code>"}),this.output.replace(this.regex,function(b,c,d,e){var f=e;f=a.trimSpace(f),f=a.encode(f),f=f.replace(/:\/\//g,"~P");var g=d.split("\n")[0],h=void 0;return g?h=hljs.highlightAuto(f,[g]):(h=hljs.highlightAuto(f),g=h.language),a.addTemplate(h,g)})}}],[{key:"encode",value:function(a){return a=a.replace(/&amp;/gm,""),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">")}},{key:"trimSpace",value:function(a){return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,"")}},{key:"addTemplate",value:function(a,b){return'<pre><code class="ejs-code hljs '+b+'">'+a.value+"</code></pre>"}}]),a}(),la=function(){function a(b,d){c(this,a),this.input=" "+b+" ";var e=[{text:" :) ",code:"&#xe60a"},{text:" :D ",code:"&#xe608"},{text:" :d ",code:"&#xe608"},{text:" :( ",code:"&#xe60e"},{text:" :/ ",code:"&#xe620"},{text:" :P ",code:"&#xe60c"},{text:" :p ",code:"&#xe60c"},{text:" 3:) ",code:"&#xe618"},{text:" (^) ",code:"&#xe607"},{text:" ;) ",code:"&#xe610"},{text:" :o ",code:"&#xe61a"},{text:" -_- ",code:"&#xe61e"},{text:" (y) ",code:"&#xe606"},{text:" :* ",code:"&#xe604"},{text:" &lt;3 ",code:"&#xe604"},{text:" <3 ",code:"&#xe604"},{text:" &lt;/3 ",code:"&#xe605"},{text:" </3 ",code:"&#xe605"},{text:" ^_^ ",code:"&#xe612"},{text:" 8-) ",code:"&#xe614"},{text:" 8| ",code:"&#xe614"},{text:" :S ",code:"&#xe61c"},{text:" :s ",code:"&#xe61c"}];this.icons=d.customFontIcons.length?d.customFontIcons:e,this.EscapedSymbols=this.icons.map(function(a){return""+y.escapeRegExp(a.text)}),this.smileyRegex=new RegExp("("+this.EscapedSymbols.join("|")+")","g")}return w(a,[{key:"process",value:function(){var a=this,b=this.input.replace(this.smileyRegex,function(b,c){var d=a.EscapedSymbols.indexOf(y.escapeRegExp(c)),e=a.icons[d].code;return ejs.template.smiley(c,e,a.options)||' <span class="icon-emoticon" title="'+c+'">'+e+"</span> "});return b.substring(1,b.length-1)}}]),a}(),ma=function(){function a(b,d){c(this,a),this.output=b,this.options=d,this.emojiList=["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","winky_face","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","wow","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","\\+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","themoreyouknow","tmyk","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"],this.allEmojiList=this.emojiList.concat(this.options.customEmoji),this.emojiRegex=new RegExp(":("+this.allEmojiList.join("|")+"):","g")}return w(a,[{key:"process",value:function(){var a=this;return this.output.replace(this.emojiRegex,function(b,c){return ejs.template.emoji(c,a.options)||'<span class="emoticon emoticon-'+c+'" title=":'+c+':"></span>'})}}]),a}(),na=function(){function a(b,d){if(c(this,a),!window.marked)throw new ReferenceError("marked.js is not loaded.");this.output=b,this.options=d,this.process()}return w(a,[{key:"process",value:function(){var a=this,b=new marked.Renderer;return b.code=function(a){var b=window.hljs?hljs.highlightAuto(a):{value:a},c=window.hljs?b.language:"";return'<pre><code class="ejs-code hljs '+c+'">'+b.value+"</code></pre>"},b.link=function(b,c,d){return-1===b.indexOf("&lt;/a")?b:b.match(/&gt;(.+)&lt;\/a/gi)?(c||(c=""),'<a href="'+RegExp.$1+'" rel='+a.options.linkOptions.rel+'" target="'+a.options.linkOptions.target+'" title="'+c+'">'+d+"</a>"):void 0},b.image=function(a,b,c){return-1===a.indexOf("&lt;/a")?a:a.match(/&gt;(.+)&lt;\/a/gi)?(b||(b=""),'<div class="ejs-image ejs-embed"><div class="ne-image-wrapper"><img src="'+RegExp.$1+'" title="'+b+'" alt="'+c+'"/></div></div>'):void 0},b.paragraph=function(a){return"<p> "+a+" </p>"},marked.Lexer.rules.gfm.heading=marked.Lexer.rules.normal.heading,marked.Lexer.rules.tables.heading=marked.Lexer.rules.normal.heading,this.options.markedOptions.renderer=b,marked(this.output,this.options.markedOptions)}}]),a}(),oa=function(){function a(b,d,e,f){c(this,a),this.input=b,this.output=d,this.options=e,this.embeds=f,this.service="opengraph",this.excludeRegex=new RegExp([".mp4|.mp3|.gif|.pdf|.doc|.ppt|.docx|.jpg|.jpeg|.ogg"].concat(e.openGraphExclude).join("|"),"gi")}return w(a,[{key:"template",value:function(a){return ejs.template.openGraph(a,this.options)||'<div class="ejs-embed ejs-ogp">\n		<div class="ejs-ogp-thumb" style="background-image:url('+a.image+')"></div>\n		<div class="ejs-ogp-details">\n		<div class="ejs-ogp-title"><a href="'+a.url+'" target="'+this.options.linkOptions.target+'">'+a.title+'</a></div>\n		<div class="ejs-ogb-details">'+a.description+"</div></div></div>"}},{key:"fetchData",value:function(){var a=b(regeneratorRuntime.mark(function c(a){var b,d,e;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a=encodeURIComponent(a),b=new Function("url","return `"+this.options.openGraphEndpoint+"`")(a),c.next=5,fetch(b);case 5:return d=c.sent,c.next=8,d.json();case 8:return e=c.sent,c.abrupt("return",this.options.onOpenGraphFetch(e)||e);case 12:c.prev=12,c.t0=c["catch"](0),this.options.onOpenGraphFail(c.t0);case 15:case"end":return c.stop()}},c,this,[[0,12]])}));return function(b){return a.apply(this,arguments)}}()},{key:"process",value:function(){var c=b(regeneratorRuntime.mark(function d(){var b,c,e,f;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,b=void 0,this.regex=y.urlRegex(),y.ifInline(this.options,this.service)){d.next=9;break}return d.next=6,L.inlineEmbed(this,a.urlToText);case 6:this.output=d.sent,d.next=19;break;case 9:if(null===(b=y.matches(this.regex,this.input))){d.next=19;break}if(c=b[0],a.ifProcessOGC(c,this.excludeRegex)){d.next=13;break}return d.abrupt("continue",9);case 13:return d.next=15,this.fetchData(c);case 15:e=d.sent,e&&e.success&&(f=this.template(e),this.embeds.push({text:f,index:b.index}),this.options.served.push(c)),d.next=9;break;case 19:return d.abrupt("return",[this.output,this.embeds]);case 22:d.prev=22,d.t0=d["catch"](0);case 25:case"end":return d.stop()}},d,this,[[0,22]])}));return function(){return c.apply(this,arguments)}}()}],[{key:"ifProcessOGC",value:function(a,b){return a.match(b)?!1:!0}},{key:"urlToText",value:function(){var c=b(regeneratorRuntime.mark(function d(b,c,e){var f;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a.ifProcessOGC(e,b.excludeRegex)){c.next=2;break}return c.abrupt("return");case 2:return c.next=4,b.fetchData(e);case 4:return f=c.sent,c.abrupt("return",f&&f.success?b.template(f):null);case 6:case"end":return c.stop()}},d,this)}));return function(a,b,d){return c.apply(this,arguments)}}()}]),a}(),pa=function(){function a(b,d){c(this,a),this.input=b,this.options=d,this.urlRegex=y.urlRegex()}return w(a,[{key:"process",value:function(){var a=this,b=this.options.linkOptions;return this.input.replace(this.urlRegex,function(c){var d=c.split(".")[c.split(".").length-1];return-1===b.exclude.indexOf(d)?ejs.template.url(c,a.options)||'<a href="'+y.toUrl(c)+'" rel="'+b.rel+'" target="'+b.target+'">'+c+"</a>":c})}}]),a}();!function(a){var d={},e={marked:!1,markedOptions:{},link:!0,linkOptions:{target:"self",exclude:["pdf"],rel:""},emoji:!0,customEmoji:[],fontIcons:!0,customFontIcons:[],highlightCode:!1,videoJS:!1,videojsOptions:{fluid:!0,preload:"metadata"},locationEmbed:!0,mapOptions:{mode:"place"},tweetsEmbed:!1,tweetOptions:{maxWidth:550,hideMedia:!1,hideThread:!1,align:"none",lang:"en"},openGraphEndpoint:null,openGraphExclude:[],videoEmbed:!0,videoHeight:null,videoWidth:null,videoDetails:!0,audioEmbed:!0,excludeEmbed:[],inlineEmbed:[],inlineText:!0,codeEmbedHeight:500,vineOptions:{maxWidth:null,type:"postcard",responsive:!0,width:350,height:460},googleAuthKey:"",soundCloudOptions:{height:160,themeColor:"f50000",autoPlay:!1,hideRelated:!1,showComments:!0,showUser:!0,showReposts:!1,visual:!1,download:!1},videoClickClass:"ejs-video-thumb",customVideoClickHandler:!1,beforeEmbedJSApply:function(){},afterEmbedJSApply:function(){},onVideoShow:function(){},onTweetsLoad:function(){},videojsCallback:function(){},onOpenGraphFetch:function(){},onOpenGraphFail:function(){},videoClickHandler:function(){},served:[]},f=function(){function a(b,f){c(this,a);var g=y.cloneObject(e),h=y.cloneObject(d),i=y.deepExtend(g,h);if(this.options=y.deepExtend(i,b),!this.options.element&&!f)throw ReferenceError("You need to pass an element or the string that needs to be processed");this.options.element?(this.element=this.options.element,this.input=this.element.innerHTML):this.input=f}return w(a,[{key:"process",value:function(){var a=b(E.mark(function c(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,z,A,B,C,D,F,G,H,I,J,K,L,M,N,P,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea;
return E.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=this.input,b=this.options,d=[],e="",this.options.beforeEmbedJSApply(),b.link&&(e=new pa(a,b).process()),!b.openGraphEndpoint){c.next=13;break}return c.next=9,new oa(a,e,b,d).process();case 9:f=c.sent,g=x(f,2),e=g[0],d=g[1];case 13:if(b.marked&&(e=new na(e,b).process()),b.emoji&&(e=new ma(e,b).process()),b.fontIcons&&(e=new la(e,b).process()),b.highlightCode&&!b.marked&&(e=new ka(e,b).process()),y.ifEmbed(b,"ideone")&&(h=new ja(a,e,b,d).process(),i=x(h,2),e=i[0],d=i[1]),y.ifEmbed(b,"plunker")&&(j=new ia(a,e,b,d).process(),k=x(j,2),e=k[0],d=k[1]),y.ifEmbed(b,"jsbin")&&(l=new ha(a,e,b,d).process(),m=x(l,2),e=m[0],d=m[1]),y.ifEmbed(b,"codepen")&&(n=new ga(a,e,b,d).process(),o=x(n,2),e=o[0],d=o[1]),y.ifEmbed(b,"jsfiddle")&&(p=new fa(a,e,b,d).process(),q=x(p,2),e=q[0],d=q[1]),y.ifEmbed(b,"gist")&&(r=new ea(a,e,b,d).process(),s=x(r,2),e=s[0],d=s[1]),y.ifEmbed(b,"ted")&&(t=new da(a,e,b,d).process(),u=x(t,2),e=u[0],d=u[1]),y.ifEmbed(b,"dailymotion")&&(v=new ca(a,e,b,d).process(),w=x(v,2),e=w[0],d=w[1]),y.ifEmbed(b,"ustream")&&(z=new ba(a,e,b,d).process(),A=x(z,2),e=A[0],d=A[1]),y.ifEmbed(b,"liveleak")&&(B=new aa(a,e,b,d).process(),C=x(B,2),e=C[0],d=C[1]),b.videoEmbed&&(D=new _(a,e,b,d).process(),F=x(D,2),e=F[0],d=F[1]),y.ifEmbed(b,"vine")&&(G=new $(a,e,b,d).process(),H=x(G,2),e=H[0],d=H[1]),!y.ifEmbed(b,"youtube")||!E){c.next=36;break}return c.next=32,new Z(a,e,b,d).process();case 32:I=c.sent,J=x(I,2),e=J[0],d=J[1];case 36:if(!y.ifEmbed(b,"vimeo")){c.next=43;break}return c.next=39,new Y(a,e,b,d).process();case 39:K=c.sent,L=x(K,2),e=L[0],d=L[1];case 43:if(!y.ifEmbed(b,"opengraph")){c.next=50;break}return c.next=46,new X(a,e,b,d).process();case 46:M=c.sent,N=x(M,2),e=N[0],d=N[1];case 50:if(!b.locationEmbed){c.next=57;break}return c.next=53,new W(a,e,b,d).process();case 53:P=c.sent,qa=x(P,2),e=qa[0],d=qa[1];case 57:if(y.ifEmbed(b,"soundcloud")&&(ra=new V(a,e,b,d).process(),sa=x(ra,2),e=sa[0],d=sa[1]),y.ifEmbed(b,"spotify")&&(ta=new U(a,e,b,d).process(),ua=x(ta,2),e=ua[0],d=ua[1]),b.audioEmbed&&(va=new T(a,e,b,d).process(),wa=x(va,2),e=wa[0],d=wa[1]),y.ifEmbed(b,"flickr")&&(xa=new S(a,e,b,d).process(),ya=x(xa,2),e=ya[0],d=ya[1]),y.ifEmbed(b,"instagram")&&(za=new R(a,e,b,d).process(),Aa=x(za,2),e=Aa[0],d=Aa[1]),b.imageEmbed&&(Ba=new Q(a,e,b,d).process(),Ca=x(Ba,2),e=Ca[0],d=Ca[1]),!b.tweetsEmbed){c.next=71;break}return this.twitter=new O(a,e,b,d),c.next=67,this.twitter.process();case 67:Da=c.sent,Ea=x(Da,2),e=Ea[0],d=Ea[1];case 71:return c.abrupt("return",y.createText(e,d));case 72:case"end":return c.stop()}},c,this)}));return function(){return a.apply(this,arguments)}}()},{key:"render",value:function(){var a=b(E.mark(function c(){var a;return E.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(this.element){b.next=2;break}throw new Error("You didn't pass an element while creating this instance. render() method can't work without an element");case 2:return b.next=4,this.process();case 4:this.element.innerHTML=b.sent,L.applyVideoJS(this.options),L.play(this.options),a=new Event("rendered"),this.element.dispatchEvent(a),this.options.afterEmbedJSApply();case 10:case"end":return b.stop()}},c,this)}));return function(){return a.apply(this,arguments)}}()},{key:"text",value:function(){var a=b(E.mark(function c(a){var b;return E.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.process();case 2:b=c.sent,a(b,this.input);case 4:case"end":return c.stop()}},c,this)}));return function(b){return a.apply(this,arguments)}}()},{key:"destroy",value:function(){if(!this.element)throw new Error("destroy() method only if an element had been passed in the options object");L.destroy("ejs-video-thumb"),this.element.removeEventListener("rendered",this.twitter.load(),!1),this.element.innerHTML=this.input}}]),a}();a.ejs={instances:[],elements:[],setOptions:function(a){d=y.deepExtend(e,a)},applyEmbedJS:function(a){"."===a.charAt(0)&&(a=a.substr(1)),this.elements=document.getElementsByClassName(a);for(var b=0;b<this.elements.length;b++){var c={element:this.elements[b]};this.instances[b]=new f(c),this.instances[b].render()}},destroyEmbedJS:function(){for(var a=0;a<this.elements.length;a++)this.instances[a].destroy()},template:{url:function(){},smiley:function(){},emoji:function(){},basicAudio:function(){},soundCloud:function(){},spotify:function(){},codePen:function(){},ideone:function(){},jsBin:function(){},jsFiddle:function(){},plunker:function(){},basicImage:function(){},flickr:function(){},instagram:function(){},basicVideo:function(){},dailymotion:function(){},liveLeak:function(){},ted:function(){},ustream:function(){},detailsVimeo:function(){},detailsYoutube:function(){},vine:function(){},vimeo:function(){},youtube:function(){},openGraph:function(){},Github:function(){}}},a.EmbedJS=f}(window)});