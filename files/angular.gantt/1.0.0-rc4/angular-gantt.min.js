/*
Project: angular-gantt v1.0.0-rc4 - Gantt chart component for AngularJS
Authors: Marco Schweighauser, RÃ©mi Alvergnat
License: MIT
Homepage: http://www.angular-gantt.com
Github: https://github.com/angular-gantt/angular-gantt.git
*/

!function(){"use strict";angular.module("gantt",["gantt.templates","angularMoment"]).directive("gantt",["Gantt","ganttOptions","GanttCalendar","moment","ganttMouseOffset","ganttDebounce","ganttEnableNgAnimate","$timeout","$templateCache",function(a,b,c,d,e,f,g,h,i){return{restrict:"EA",transclude:!0,templateUrl:function(a,b){var c;return c=void 0===b.templateUrl?"template/gantt.tmpl.html":b.templateUrl,void 0!==b.template&&i.put(c,b.template),c},scope:{sortMode:"=?",filterTask:"=?",filterTaskComparator:"=?",filterRow:"=?",filterRowComparator:"=?",viewScale:"=?",columnWidth:"=?",allowLabelsResizing:"=?",fromDate:"=?",toDate:"=?",currentDateValue:"=?",currentDate:"=?",autoExpand:"=?",taskOutOfRange:"=?",maxHeight:"=?",showLabelsColumn:"=?",showTooltips:"=?",headers:"=?",headersFormats:"=?",timeFrames:"=?",dateFrames:"=?",timeFramesWorkingMode:"=?",timeFramesNonWorkingMode:"=?",timespans:"=?",columnMagnet:"=?",shiftColumnMagnet:"=?",data:"=?",api:"=?",options:"=?"},controller:["$scope","$element",function(c,d){for(var e in c.options)c[e]=c.options[e];b.initialize(c),g(!1,d),c.gantt=new a(c,d),this.gantt=c.gantt}],link:function(a,b){a.gantt.api.directives.raise.new("gantt",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("gantt",a,b)}),h(function(){a.gantt.api.core.raise.ready(a.gantt.api),a.gantt.rendered=!0,a.gantt.columnsManager.generateColumns(),a.gantt.api.core.raise.rendered(a.gantt.api)})}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttApi",["$q","$rootScope","ganttUtils",function(a,b,c){function d(a,b,c,d){return a.$on(b,function(){var a=Array.prototype.slice.call(arguments);a.splice(0,1),c.apply(d.api,a)})}var e=function(a){this.gantt=a,this.listeners=[],this.apiId=c.newId()};return e.prototype.suppressEvents=function(a,b){var c=this,e=angular.isArray(a)?a:[a],f=[];e.forEach(function(a){f=c.listeners.filter(function(b){return a===b.handler})}),f.forEach(function(a){a.dereg()}),b(),f.forEach(function(a){a.dereg=d(a.scope,a.eventId,a.handler,c.gantt)})},e.prototype.registerEvent=function(a,c){var e=this;e[a]||(e[a]={});var f=e[a];f.on||(f.on={},f.raise={});var g="event:gantt:"+this.apiId+":"+a+":"+c;f.raise[c]=function(){b.$broadcast.apply(b,[g].concat(Array.prototype.slice.call(arguments)))},f.on[c]=function(a,b){var c=d(a,g,b,e.gantt),f={handler:b,dereg:c,eventId:g,scope:a};e.listeners.push(f),a.$on("$destroy",function(){f.dereg=null,f.handler=null,f.eventId=null,f.scope=null})}},e.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},e.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={});var f=this[a];f[b]=c.createBoundedWrapper(e||this.gantt,d)},e.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},e}])}(),function(){"use strict";angular.module("gantt").factory("ganttOptions",["moment",function(a){return{initialize:function(b){return b.api=b.api||angular.noop(),b.data=b.data||[],b.timespans=b.timespans||[],b.sortMode=b.sortMode||void 0,b.filterTask=b.filterTask||void 0,b.filterTaskComparator=b.filterTaskComparator||void 0,b.filterRow=b.filterRow||void 0,b.filterRowComparator=b.filterRowComparator||void 0,b.viewScale=b.viewScale||"day",b.columnMagnet=b.columnMagnet||"15 minutes",b.columnWidth=b.columnWidth||void 0,b.fromDate=b.fromDate||void 0,b.toDate=b.toDate||void 0,b.allowLabelsResizing=void 0!==b.allowLabelsResizing?!!b.allowLabelsResizing:!0,b.currentDate=b.currentDate||"line",b.currentDateValue=b.currentDateValue||a(),b.autoExpand=b.autoExpand||"none",b.taskOutOfRange=b.taskOutOfRange||"truncate",b.maxHeight=b.maxHeight||0,b.showLabelsColumn=void 0!==b.showLabelsColumn?!!b.showLabelsColumn:!0,b.showTooltips=void 0!==b.showTooltips?!!b.showTooltips:!0,b.headers=b.headers||void 0,b.headersFormats=b.headersFormats||void 0,b.timeFrames=b.timeFrames||[],b.dateFrames=b.dateFrames||[],b.timeFramesWorkingMode=b.timeFramesWorkingMode||"hidden",b.timeFramesNonWorkingMode=b.timeFramesNonWorkingMode||"visible",b}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttCalendar",["$filter","moment",function(a,b){var c=function(a){void 0===a&&(a={}),this.start=a.start,this.end=a.end,this.working=a.working,this.default=a.default,this.color=a.color,this.classes=a.classes};c.prototype.updateView=function(){if(this.$element){void 0!==this.left?this.$element.css("left",this.left+"px"):this.$element.css("left",""),void 0!==this.width?this.$element.css("width",this.width+"px"):this.$element.css("width",""),void 0!==this.color?this.$element.css("background-color",this.color):this.$element.css("background-color","");var a=["gantt-timeframe"+(this.working?"":"-non")+"-working"];this.classes&&(a=a.concat(this.classes));for(var b=0,c=a.length;c>b;b++)this.$element.toggleClass(a[b],!0)}},c.prototype.getDuration=function(){return this.end.diff(this.start,"milliseconds")},c.prototype.clone=function(){return new c(this)};var d=function(a){this.func=a};d.prototype.getTimeFrames=function(a){var b=this.func(a);return b instanceof Array||(b=[b]),b},d.prototype.clone=function(){return new d(this.func)};var e=function(a){this.evaluator=a.evaluator,a.date?(this.start=b(a.date).startOf("day"),this.end=b(a.date).endOf("day")):(this.start=a.start,this.end=a.end),this.targets=a.targets instanceof Array?a.targets:[a.targets],this.default=a.default};e.prototype.dateMatch=function(a){return this.evaluator?this.evaluator(a):this.start&&this.end?a>=this.start&&a<=this.end:!1},e.prototype.clone=function(){return new e(this)};var f=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}};f.prototype.clear=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}},f.prototype.registerTimeFrames=function(a){angular.forEach(a,function(a,b){this.timeFrames[b]=new c(a)},this)},f.prototype.removeTimeFrames=function(a){angular.forEach(a,function(a){delete this.timeFrames[a]},this)},f.prototype.clearTimeFrames=function(){this.timeFrames={}},f.prototype.registerTimeFrameMappings=function(a){angular.forEach(a,function(a,b){this.timeFrameMappings[b]=new d(a)},this)},f.prototype.removeTimeFrameMappings=function(a){angular.forEach(a,function(a){delete this.timeFrameMappings[a]},this)},f.prototype.clearTimeFrameMappings=function(){this.timeFrameMappings={}},f.prototype.registerDateFrames=function(a){angular.forEach(a,function(a,b){this.dateFrames[b]=new e(a)},this)},f.prototype.removeDateFrames=function(a){angular.forEach(a,function(a){delete this.dateFrames[a]},this)},f.prototype.clearDateFrames=function(){this.dateFrames={}};var g=function(a,b){var c=[];return angular.forEach(a,function(a){a.dateMatch(b)&&c.push(a)}),0===c.length&&angular.forEach(a,function(a){a.default&&c.push(a)}),c};return f.prototype.getTimeFrames=function(a){var c=[],d=g(this.dateFrames,a);angular.forEach(d,function(a){void 0!==a&&angular.forEach(a.targets,function(a){var b=this.timeFrameMappings[a];if(void 0!==b)c.push(b.getTimeFrames());else{var d=this.timeFrames[a];void 0!==d&&c.push(d)}},this)},this);var e=a.year(),f=a.month(),h=a.date(),i=[];return 0===c.length&&angular.forEach(this.timeFrames,function(a){a.default&&c.push(a)}),angular.forEach(c,function(a){a=a.clone(),void 0!==a.start&&(a.start.year(e),a.start.month(f),a.start.date(h)),void 0!==a.end&&(a.end.year(e),a.end.month(f),a.end.date(h),b(a.end).startOf("day")===a.end&&a.end.add(1,"day")),i.push(a)}),i},f.prototype.solve=function(d,e,f){var g,h,i,j,k=0===d.length;angular.forEach(d,function(a){(void 0===i||i>a.start)&&(i=a.start),(void 0===j||j<a.end)&&(j=a.end),void 0===g&&a.color&&(g=a.color),void 0!==a.classes&&(void 0===h&&(h=[]),h=h.concat(a.classes))}),void 0===e&&(e=i),void 0===f&&(f=j);var l=[new c({start:e,end:f,working:k,color:g,classes:h})];d=a("filter")(d,function(a){return(void 0===a.start||a.start<f)&&(void 0===a.end||a.end>e)});var m=a("orderBy")(d,function(a){return-a.getDuration()});return angular.forEach(m,function(a){var c=l.slice(),d=0,e=!1,f=!1;angular.forEach(l,function(g){if(!f){if(a.end>g.start&&a.start<g.end){var h=g.clone();g.end=b(a.start),h.start=b(a.end),c.splice(d+1,0,a.clone(),h),f=!0,e=!1}else!e&&a.start<g.end?(g.end=b(a.start),c.splice(d+1,0,a.clone()),e=!0):e&&a.end>g.start&&(g.start=b(a.end),e=!1,f=!0);d++}}),l=c}),l=a("filter")(l,function(a){return(void 0===a.start||a.start<f)&&(void 0===a.end||a.end>e)})},f}])}(),function(){"use strict";angular.module("gantt").factory("GanttCurrentDateManager",["moment",function(a){var b=function(b){var c=this;this.gantt=b,this.date=void 0,this.position=void 0,this.currentDateColumn=void 0,this.gantt.$scope.simplifyMoment=function(b){return a.isMoment(b)?b.unix():b},this.gantt.$scope.$watchGroup(["currentDate","simplifyMoment(currentDateValue)"],function(){c.setCurrentDate(c.gantt.$scope.currentDateValue)})};return b.prototype.setCurrentDate=function(a){if(this.date=a,void 0!==this.currentDateColumn&&(void 0!==this.currentDateColumn.$element&&this.currentDateColumn.$element.removeClass("gantt-foreground-col-current-date"),delete this.currentDateColumn),void 0!==this.date){var b=this.gantt.columnsManager.getColumnByDate(this.date);void 0!==b&&(this.currentDateColumn=b,"column"===this.gantt.$scope.currentDate&&void 0!==this.currentDateColumn.$element&&this.currentDateColumn.$element.addClass("gantt-foreground-col-current-date"))}this.position=this.gantt.getPositionByDate(this.date)},b}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumn",["moment",function(a){var b=function(a,b,c,d,e,f,g){this.date=a,this.endDate=b,this.left=c,this.width=d,this.calendar=e,this.duration=this.endDate.diff(this.date,"milliseconds"),this.timeFramesWorkingMode=f,this.timeFramesNonWorkingMode=g,this.timeFrames=[],this.visibleTimeFrames=[],this.daysTimeFrames={},this.cropped=!1,this.originalSize={left:this.left,width:this.width},this.updateTimeFrames()},c=function(a){return a.year()+"-"+a.month()+"-"+a.date()};return b.prototype.updateView=function(){if(this.$element){this.$element.css("left",this.left+"px"),this.$element.css("width",this.width+"px");for(var a=0,b=this.timeFrames.length;b>a;a++)this.timeFrames[a].updateView()}},b.prototype.updateTimeFrames=function(){var b=this;if(void 0!==b.calendar&&("hidden"!==b.timeFramesNonWorkingMode||"hidden"!==b.timeFramesWorkingMode)){for(var d=function(c,d,e){return function(f){var g=f.start;void 0===g&&(g=d);var h=f.end;void 0===h&&(h=e),g<b.date&&(g=b.date),h>b.endDate&&(h=b.endDate),f=f.clone(),f.start=a(g),f.end=a(h),c.push(f)}},e=b.date,f=a(e).startOf("day"),g=f.add(1,"day");e<b.endDate;){var h=b.calendar.getTimeFrames(e),i=a.min(g,b.endDate);h=b.calendar.solve(h,e,i);var j=[];angular.forEach(h,d(j,e,i)),b.timeFrames=b.timeFrames.concat(j);var k=c(e);b.daysTimeFrames[k]=j,e=i,f=a(e).startOf("day"),g=f.add(1,"day")}if(angular.forEach(b.timeFrames,function(a){var c=a.start.diff(b.date,"milliseconds"),d=c/b.duration*b.width,e=a.end.diff(a.start,"milliseconds"),f=e/b.duration*b.width,g=!1;a.working&&"visible"!==b.timeFramesWorkingMode?g=!0:a.working||"visible"===b.timeFramesNonWorkingMode||(g=!0),g||b.visibleTimeFrames.push(a),a.hidden=g,a.left=d,a.width=f,a.originalSize={left:a.left,width:a.width}}),"cropped"===b.timeFramesNonWorkingMode||"cropped"===b.timeFramesWorkingMode){var l=0;if(angular.forEach(b.timeFrames,function(a){(!a.working&&"cropped"!==b.timeFramesNonWorkingMode||a.working&&"cropped"!==b.timeFramesWorkingMode)&&(l+=a.width)}),l!==b.width){var m=b.width/l,n=0,o=0,p=!0;angular.forEach(b.timeFrames,function(a){!a.working&&"cropped"!==b.timeFramesNonWorkingMode||a.working&&"cropped"!==b.timeFramesWorkingMode?(a.left=(a.left-n)*m,a.width=a.width*m,a.originalSize.left=(a.originalSize.left-o)*m,a.originalSize.width=a.originalSize.width*m,a.cropped=!1,p=!1):(n+=a.width,o+=a.originalSize.width,a.left=void 0,a.width=0,a.originalSize={left:void 0,width:0},a.cropped=!0)}),b.cropped=p}else b.cropped=!1}}},b.prototype.clone=function(){return new b(a(this.date),a(this.endDate),this.left,this.width,this.calendar)},b.prototype.containsDate=function(a){return a>this.date&&a<=this.endDate},b.prototype.equals=function(a){return this.date===a.date},b.prototype.getMagnetDate=function(b,c,d){if(c>0&&void 0!==d){var e=b;b=a(b);var f,g,h;1>c?(b.startOf(d),f=e.diff(b,"milliseconds"),h=a.duration(c,d).asMilliseconds(),g=Math.round(f/h)*h,b.set("milliseconds",g)):(f=b.get(d),g=Math.round(f/c)*c,b.startOf(d),b.set(d,g));for(var i=0,j=this.timeFrames.length;j>i;i++){var k,l=this.timeFrames[i];if(l.cropped&&b>=l.start&&b<=l.end&&(k=!0),!l.cropped&&(k||b>=l.start&&b<=l.end)){k&&(k=!1,b<l.start?e=l.start:b>l.end&&(e=l.end));var m=Math.abs(e.diff(b,"milliseconds"));e.diff(l.start,"milliseconds")<m?b=l.start:l.end.diff(e,"milliseconds")<m&&(b=l.end);break}}}return b},b.prototype.getDateByPositionUsingTimeFrames=function(b){for(var c=0,d=this.timeFrames.length;d>c;c++){var e=this.timeFrames[c];if(!e.cropped&&b>=e.left&&b<=e.left+e.width){var f=e.getDuration()/e.width*(b-e.left),g=a(e.start).add(f,"milliseconds");return g}}},b.prototype.getDateByPosition=function(b,c,d){var e,f;return 0>b&&(b=0),b>this.width&&(b=this.width),("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode)&&(f=this.getDateByPositionUsingTimeFrames(b)),void 0===f&&(e=this.duration/this.width*b,f=a(this.date).add(e,"milliseconds")),f=this.getMagnetDate(f,c,d)},b.prototype.getDayTimeFrame=function(a){var b=this.daysTimeFrames[c(a)];return void 0===b?[]:b},b.prototype.getPositionByDate=function(a){var b,c;if("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode)for(var d=a,e=this.getDayTimeFrame(d),f=0;f<e.length;f++){var g=e[f];if(d>=g.start&&d<=g.end){if(!g.cropped)return b=d.diff(g.start,"milliseconds"),c=b/g.getDuration()*g.width,this.left+g.left+c;d=e.length>f+1?e[f+1].start:g.end}}return b=a.diff(this.date,"milliseconds"),c=b/this.duration*this.width,0>c&&(c=0),c>this.width&&(c=this.width),this.left+c},b}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnGenerator",["GanttColumn","moment",function(a,b){var c=function(c){var d=this,e=c.gantt.$scope.columnWidth;void 0===e&&(e=20);var f=c.gantt.$scope.viewScale,g=c.gantt.calendar,h=c.gantt.$scope.timeFramesWorkingMode,i=c.gantt.$scope.timeFramesNonWorkingMode;d.generate=function(c,d,k,l,m){if(!d&&!k)throw"to or maximumWidth must be defined";var n=!1;c=b(c).startOf(f),d&&(n=j(d),d=b(d).startOf(f));for(var o=b(c).startOf(f),p=[],q=0;;){if(k&&Math.abs(q)>k+e)break;var r=b(o),s=b(r).add(1,f),t=new a(r,s,l?q+l:q,e,g,h,i);if(!t.cropped&&(p.push(t),m?q-=e:q+=e,d))if(m){if(n&&d>o||!n&&d>=o)break}else if(n&&o>d||!n&&o>=d)break;o.add(m?-1:1,f)}return m&&(j(c)&&p.shift(),p.reverse()),p};var j=function(a){return b(a).add(1,f).startOf(f)===a}};return c}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnHeader",["moment","GanttColumn",function(a,b){var c=function(c,d,e,f,g){var h=a(c),i=a(h).add(1,d),j=new b(h,i,e,f);return j.unit=d,j.label=angular.isFunction(g)?g(j):h.format(g),j};return c}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnsManager",["GanttColumnGenerator","GanttHeaderGenerator","$filter","$timeout","ganttLayout","ganttBinarySearch",function(a,b,c,d,e,f){var g=function(a){var b=this;this.gantt=a,this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders=[],this.scrollAnchor=void 0,this.gantt.$scope.$watchGroup(["viewScale","columnWidth","timeFramesWorkingMode","timeFramesNonWorkingMode","fromDate","toDate","autoExpand","taskOutOfRange"],function(a,c){a!==c&&b.gantt.rendered&&b.generateColumns()}),this.gantt.$scope.$watchCollection("headers",function(a,c){a!==c&&b.gantt.rendered&&b.generateColumns()}),this.gantt.$scope.$watchCollection("headersFormats",function(a,c){a!==c&&b.gantt.rendered&&b.generateColumns()}),this.gantt.$scope.$watchGroup(["bodyRowsWidth","labelsWidth","showLabelsColumn","maxHeight"],function(a,c){a!==c&&b.gantt.rendered&&b.updateColumnsMeta()}),this.gantt.api.data.on.load(this.gantt.$scope,function(){(void 0===b.from||void 0===b.to||b.from>b.gantt.rowsManager.getDefaultFrom()||b.to<b.gantt.rowsManager.getDefaultTo())&&b.gantt.rendered&&b.generateColumns(),b.gantt.rowsManager.sortRows()}),this.gantt.api.data.on.remove(this.gantt.$scope,function(){b.gantt.rowsManager.sortRows()}),this.gantt.api.registerMethod("columns","clear",this.clearColumns,this),this.gantt.api.registerMethod("columns","generate",this.generateColumns,this),this.gantt.api.registerMethod("columns","refresh",this.updateColumnsMeta,this),this.gantt.api.registerEvent("columns","generate")};g.prototype.setScrollAnchor=function(){if(this.gantt.scroll.$element&&this.columns.length>0){var a=this.gantt.scroll.$element[0],b=a.scrollLeft+a.offsetWidth/2;this.scrollAnchor=this.gantt.getDateByPosition(b)}},g.prototype.scrollToScrollAnchor=function(){var a=this;this.columns.length>0&&void 0!==this.scrollAnchor&&this.gantt.$scope.$$postDigest(function(){a.gantt.api.scroll.toDate(a.scrollAnchor)})},g.prototype.clearColumns=function(){this.setScrollAnchor(),this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders=[],this.gantt.api.columns.raise.clear()},g.prototype.generateColumns=function(c,d){if(c||(c=this.gantt.$scope.fromDate),d||(d=this.gantt.$scope.toDate),!c&&(c=this.gantt.rowsManager.getDefaultFrom(),!c))return!1;if(!d&&(d=this.gantt.rowsManager.getDefaultTo(),!d))return!1;"expand"===this.gantt.$scope.taskOutOfRange&&(c=this.gantt.rowsManager.getExpandedFrom(c),d=this.gantt.rowsManager.getExpandedTo(d)),this.setScrollAnchor(),this.from=c,this.to=d;var e=new a(this),f=new b(this);this.columns=e.generate(c,d),this.headers=f.generate(this.columns),this.previousColumns=[],this.nextColumns=[],this.updateColumnsMeta(),this.scrollToScrollAnchor(),this.gantt.api.columns.raise.generate(this.columns,this.headers)},g.prototype.updateColumnsMeta=function(){var a=this.getLastColumn();this.gantt.originalWidth=void 0!==a?a.originalSize.left+a.originalSize.width:0;var b=void 0===this.gantt.$scope.columnWidth;if(b){var c=this.gantt.getElementWidth()-(this.gantt.$scope.showLabelsColumn?this.gantt.labels.getWidth():0);this.gantt.$scope.maxHeight>0&&(c-=e.getScrollBarWidth()),e.setColumnsWidth(c,this.gantt.originalWidth,this.previousColumns),e.setColumnsWidth(c,this.gantt.originalWidth,this.columns),e.setColumnsWidth(c,this.gantt.originalWidth,this.nextColumns),angular.forEach(this.headers,function(a){e.setColumnsWidth(c,this.gantt.originalWidth,a)},this)}this.gantt.width=void 0!==a?a.left+a.width:0,this.gantt.rowsManager.updateTasksPosAndSize(),this.gantt.timespansManager.updateTimespansPosAndSize(),this.updateVisibleColumns(b),this.gantt.rowsManager.updateVisibleObjects(),this.gantt.currentDateManager.setCurrentDate(this.gantt.$scope.currentDateValue)},g.prototype.getLastColumn=function(a){var b=this.columns;return a&&(b=this.nextColumns),b&&b.length>0?b[b.length-1]:void 0},g.prototype.getFirstColumn=function(a){var b=this.columns;return a&&(b=this.previousColumns),b&&b.length>0?b[0]:void 0},g.prototype.getColumnByDate=function(a){this.expandExtendedColumnsForDate(a);var b=this.previousColumns.concat(this.columns,this.nextColumns),c=f.get(b,a,function(a){return a.date},!0);return void 0!==c[0]?c[0]:c[1]},g.prototype.getColumnByPosition=function(a){this.expandExtendedColumnsForPosition(a);var b=this.previousColumns.concat(this.columns,this.nextColumns);return f.get(b,a,function(a){return a.left},!0)[0]},g.prototype.expandExtendedColumnsForPosition=function(b){if(0>b){var c=this.getFirstColumn(),d=c.date,e=this.getFirstColumn(!0);return(!e||e.left>b)&&(this.previousColumns=new a(this).generate(d,void 0,-b,0,!0)),!0}if(b>this.gantt.width){var f=this.getLastColumn(),g=f.getDateByPosition(f.width),h=this.getLastColumn(!0);return(!h||h.left+h.width<b)&&(this.nextColumns=new a(this).generate(g,void 0,b-this.gantt.width,this.gantt.width,!1)),!0}return!1},g.prototype.expandExtendedColumnsForDate=function(b){var c,d=this.getFirstColumn();d&&(c=d.date);var e,f=this.getLastColumn();if(f&&(e=f.getDateByPosition(f.width)),c&&c>b){var g=this.getFirstColumn(!0);return(!g||g.date>b)&&(this.previousColumns=new a(this).generate(c,b,void 0,0,!0)),!0}if(e&&b>e){var h=this.getLastColumn(!0);return(!h||h>e)&&(this.nextColumns=new a(this).generate(e,b,void 0,this.gantt.width,!1)),!0}return!1},g.prototype.getActiveHeadersCount=function(){return this.headers.length},g.prototype.updateVisibleColumns=function(a){this.visibleColumns=c("ganttColumnLimit")(this.columns,this.gantt),this.visibleHeaders=[],angular.forEach(this.headers,function(a){this.visibleHeaders.push(c("ganttColumnLimit")(a,this.gantt))},this),a&&(angular.forEach(this.visibleColumns,function(a){a.updateView()}),angular.forEach(this.visibleHeaders,function(a){angular.forEach(a,function(a){a.updateView()})}))};var h={year:"YYYY",quarter:"[Q]Q YYYY",month:"MMMM YYYY",week:"w",day:"D",hour:"H",minute:"HH:mm"},i={day:"LL",hour:"H",minute:"HH:mm"},j={year:"YYYY",quarter:"[Q]Q",month:"MMMM"};return g.prototype.getHeaderFormat=function(a){var b;return void 0!==this.gantt.$scope.headersFormats&&(b=this.gantt.$scope.headersFormats[a]),void 0===b&&(["millisecond","second","minute","hour"].indexOf(this.gantt.$scope.viewScale)>-1?b=i[a]:["month","quarter","year"].indexOf(this.gantt.$scope.viewScale)>-1&&(b=j[a]),void 0===b&&(b=h[a])),b},g}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeaderGenerator",["GanttColumnHeader",function(a){var b=function(b,c,d){for(var e,f,g=[],h=0,i=c.length;i>h;h++){var j=c[h],k=j.date.get(d);if(0===h||f!==k){f=k;var l=b.getHeaderFormat(d);e=new a(j.date,d,j.originalSize.left,j.originalSize.width,l),e.left=j.left,e.width=j.width,g.push(e)}else e.originalSize.width+=j.originalSize.width,e.width+=j.width}return g};return function(a){this.generate=function(c){var d=[];void 0===a.gantt.$scope.headers?(d=[],["year","quarter","month"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("year"),["quarter"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("quarter"),["day","week","month"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("month"),["day","week"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("week"),["hour","day"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("day"),["hour","minute","second"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("hour"),["minute","second"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("minute"),["second"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("second"),0===d.length&&d.push(a.gantt.$scope.viewScale)):d=a.gantt.$scope.headers;var e=[];return angular.forEach(d,function(d){e.push(b(a,c,d))}),e}}}])}(),function(){"use strict";angular.module("gantt").factory("Gantt",["GanttApi","GanttCalendar","GanttScroll","GanttBody","GanttRowHeader","GanttHeader","GanttLabels","GanttObjectModel","GanttRowsManager","GanttColumnsManager","GanttTimespansManager","GanttCurrentDateManager","ganttArrays","moment","$document",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=function(n,p){var q=this;this.$scope=n,this.$element=p,this.api=new a(this),this.api.registerEvent("core","ready"),this.api.registerEvent("core","rendered"),this.api.registerEvent("directives","preLink"),this.api.registerEvent("directives","postLink"),this.api.registerEvent("directives","new"),this.api.registerEvent("directives","destroy"),this.api.registerEvent("data","load"),this.api.registerEvent("data","remove"),this.api.registerEvent("data","clear"),this.api.registerMethod("core","getDateByPosition",this.getDateByPosition,this),this.api.registerMethod("core","getPositionByDate",this.getPositionByDate,this),this.api.registerMethod("data","load",this.loadData,this),this.api.registerMethod("data","remove",this.removeData,this),this.api.registerMethod("data","clear",this.clearData,this),this.api.registerMethod("data","get",this.getData,this),this.calendar=new b(this),this.calendar.registerTimeFrames(this.$scope.timeFrames),this.calendar.registerDateFrames(this.$scope.dateFrames),this.api.registerMethod("timeframes","registerTimeFrames",this.calendar.registerTimeFrames,this.calendar),this.api.registerMethod("timeframes","clearTimeframes",this.calendar.clearTimeFrames,this.calendar),this.api.registerMethod("timeframes","registerDateFrames",this.calendar.registerDateFrames,this.calendar),this.api.registerMethod("timeframes","clearDateFrames",this.calendar.clearDateFrames,this.calendar),this.api.registerMethod("timeframes","registerTimeFrameMappings",this.calendar.registerTimeFrameMappings,this.calendar),this.api.registerMethod("timeframes","clearTimeFrameMappings",this.calendar.clearTimeFrameMappings,this.calendar),n.$watchGroup(["timeFrames","dateFrames"],function(a,b){if(a!==b){var c=a[0],d=a[1],e=b[0],f=b[1];angular.equals(c,e)||(q.calendar.clearTimeFrames(),q.calendar.registerTimeFrames(c)),angular.equals(d,f)||(q.calendar.clearDateFrames(),q.calendar.registerDateFrames(d)),q.columnsManager.generateColumns()}}),n.$watch("columnMagnet",function(){var a;n.columnMagnet&&(a=n.columnMagnet.trim().split(" ")),a&&a.length>1?(q.columnMagnetValue=parseFloat(a[0]),q.columnMagnetUnit=a[a.length-1]):(q.columnMagnetValue=void 0,q.columnMagnetUnit=void 0)}),n.$watchGroup(["shiftColumnMagnet","viewScale"],function(){var a;n.shiftColumnMagnet&&(a=n.shiftColumnMagnet.trim().split(" ")),void 0!==a&&a.length>1?(q.shiftColumnMagnetValue=parseFloat(a[0]),q.shiftColumnMagnetUnit=a[a.length-1]):(q.shiftColumnMagnetValue=void 0,q.shiftColumnMagnetUnit=void 0)}),o.on("keyup keydown",function(a){return q.shiftKey=a.shiftKey,!0}),this.scroll=new c(this),this.body=new d(this),this.rowHeader=new e(this),this.header=new f(this),this.labels=new g(this),this.objectModel=new h(this.api),this.rowsManager=new i(this),this.columnsManager=new j(this),this.timespansManager=new k(this),this.currentDateManager=new l(this),this.originalWidth=0,this.width=0,angular.isFunction(this.$scope.api)&&this.$scope.api(this.api),this.$scope.$watchCollection("data",function(a,b){for(var c=m.getRemovedIds(a,b),d=0,e=c.length;e>d;d++){var f=c[d];q.rowsManager.removeRow(f)}void 0!==a&&q.loadData(a)})};return p.prototype.getDateByPosition=function(a,b){var c=this.columnsManager.getColumnByPosition(a);if(void 0!==c){var d,e;return b&&(this.shiftKey?void 0!==this.shiftColumnMagnetValue&&void 0!==this.shiftColumnMagnetUnit?(d=this.shiftColumnMagnetValue,e=this.shiftColumnMagnetUnit):(d=.25,e=this.$scope.viewScale):(d=this.columnMagnetValue,e=this.columnMagnetUnit)),c.getDateByPosition(a-c.left,d,e)}return void 0},p.prototype.getPositionByDate=function(a){if(void 0===a)return void 0;n.isMoment(n)||(a=n(a));var b=this.columnsManager.getColumnByDate(a);return void 0!==b?b.getPositionByDate(a):void 0},p.prototype.loadData=function(a){angular.isArray(a)||(a=void 0!==a?[a]:[]),(void 0===this.$scope.data||this.$scope.data!==a)&&(this.$scope.data=[]);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.rowsManager.addRow(d)}this.api.data.raise.load(this.$scope,a)},p.prototype.getData=function(){return this.$scope.data},p.prototype.removeData=function(a){angular.isArray(a)||(a=void 0!==a?[a]:[]),this.rowsManager.removeData(a),this.api.data.raise.remove(this.$scope,a)},p.prototype.clearData=function(){this.rowsManager.removeAll(),this.api.data.raise.clear(this.$scope)},p.prototype.getElementWidth=function(){return this.$element[0].offsetWidth},p}])}(),function(){"use strict";angular.module("gantt").factory("GanttObjectModel",["ganttUtils","moment",function(a,b){var c=function(a){this.api=a,this.api.registerEvent("tasks","clean"),this.api.registerEvent("rows","clean"),this.api.registerEvent("timespans","clean")};return c.prototype.cleanTask=function(c){void 0===c.id&&(c.id=a.randomUuid()),void 0===c.from||b.isMoment(c.from)||(c.from=b(c.from)),void 0===c.to||b.isMoment(c.to)||(c.to=b(c.to)),this.api.tasks.raise.clean(c)},c.prototype.cleanRow=function(c){void 0===c.id&&(c.id=a.randomUuid()),void 0===c.from||b.isMoment(c.from)||(c.from=b(c.from)),void 0===c.to||b.isMoment(c.to)||(c.to=b(c.to)),this.api.rows.raise.clean(c)},c.prototype.cleanTimespan=function(c){void 0===c.id&&(c.id=a.randomUuid()),void 0===c.from||b.isMoment(c.from)||(c.from=b(c.from)),void 0===c.to||b.isMoment(c.to)||(c.to=b(c.to)),this.api.timespans.raise.clean(c)},c}])}(),function(){"use strict";angular.module("gantt").factory("GanttRow",["GanttTask","moment","$filter",function(a,b,c){var d=function(a,b){this.rowsManager=a,this.model=b,this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[]};return d.prototype.addTaskImpl=function(a,b){this.tasksMap[a.model.id]=a,this.tasks.push(a),this.filteredTasks.push(a),this.visibleTasks.push(a),b||(void 0===this.model.tasks&&(this.model.tasks=[]),-1===this.model.tasks.indexOf(a.model)&&this.model.tasks.push(a.model))},d.prototype.addTask=function(b,c){var d,e=!1;if(this.rowsManager.gantt.objectModel.cleanTask(b),b.id in this.tasksMap){if(d=this.tasksMap[b.id],d.model===b)return d;d.model=b,e=!0}else d=new a(this,b),this.addTaskImpl(d,c);return this.sortTasks(),this.setFromToByTask(d),c||(e?this.rowsManager.gantt.api.tasks.raise.change(d):this.rowsManager.gantt.api.tasks.raise.add(d)),d},d.prototype.moveTaskToRow=function(a,b){var c=a.row;c.removeTask(a.model.id,b,!0),a.row=this,this.addTaskImpl(a,b),this.sortTasks(),this.setFromToByTask(a),a.updatePosAndSize(),b||this.rowsManager.gantt.api.tasks.raise.rowChange(a,c)},d.prototype.updateVisibleTasks=function(){if(this.rowsManager.gantt.$scope.filterTask){var a=this.rowsManager.gantt.$scope.filterTask;"object"==typeof a&&(a={model:a});var b=this.rowsManager.gantt.$scope.filterTaskComparator;"function"==typeof b&&(b=function(a,b){return this.rowsManager.gantt.$scope.filterRowComparator(a.model,b.model)}),this.filteredTasks=c("filter")(this.tasks,a,b)}else this.filteredTasks=this.tasks.slice(0);this.visibleTasks=c("ganttTaskLimit")(this.filteredTasks,this.rowsManager.gantt)},d.prototype.updateTasksPosAndSize=function(){for(var a=0,b=this.tasks.length;b>a;a++)this.tasks[a].updatePosAndSize()},d.prototype.removeTask=function(a,b,c){if(a in this.tasksMap){var d,e,f=this.tasksMap[a];for(e=this.tasks.length-1;e>=0;e--)if(d=this.tasks[e],d.model.id===a){this.tasks.splice(e,1),(this.from-d.model.from===0||this.to-d.model.to===0)&&this.setFromTo();break}for(e=this.filteredTasks.length-1;e>=0;e--)if(d=this.filteredTasks[e],d.model.id===a){this.filteredTasks.splice(e,1);break}for(e=this.visibleTasks.length-1;e>=0;e--)if(d=this.visibleTasks[e],d.model.id===a){this.visibleTasks.splice(e,1);break}if(!b){if(delete this.tasksMap[a],void 0!==this.model.tasks){var g=this.model.tasks.indexOf(f.model);g>-1&&this.model.tasks.splice(g,1)}c||this.rowsManager.gantt.api.tasks.raise.remove(f)}return f}},d.prototype.removeAllTasks=function(){this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[]},d.prototype.setFromTo=function(){this.from=void 0,this.to=void 0;for(var a=0,b=this.tasks.length;b>a;a++)this.setFromToByTask(this.tasks[a])},d.prototype.setFromToByTask=function(a){void 0===this.from?this.from=b(a.model.from):a.model.from<this.from&&(this.from=b(a.model.from)),void 0===this.to?this.to=b(a.model.to):a.model.to>this.to&&(this.to=b(a.model.to))},d.prototype.sortTasks=function(){this.tasks.sort(function(a,b){return a.left-b.left})},d.prototype.clone=function(){for(var a=new d(this.rowsManager,angular.copy(this)),b=0,c=this.tasks.length;c>b;b++)a.addTask(this.tasks[b].model);
return a},d}])}(),function(){"use strict";angular.module("gantt").factory("GanttRowHeader",[function(){var a=function(a){this.gantt=a};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttRowsManager",["GanttRow","ganttArrays","$filter","moment",function(a,b,c,d){var e=function(a){var b=this;this.gantt=a,this.rowsMap={},this.rows=[],this.sortedRows=[],this.filteredRows=[],this.visibleRows=[],this.rowsTaskWatchers=[],this.gantt.$scope.$watchGroup(["filterTask","filterTaskComparator"],function(a,c){a!==c&&b.updateVisibleTasks()}),this.gantt.$scope.$watchGroup(["filterRow","filterRowComparator"],function(a,c){a!==c&&b.updateVisibleRows()}),this.gantt.$scope.$watch("sortMode",function(a,c){a!==c&&b.sortRows()}),this.gantt.api.registerMethod("rows","sort",e.prototype.sortRows,this),this.gantt.api.registerMethod("rows","applySort",e.prototype.applySort,this),this.gantt.api.registerMethod("rows","refresh",e.prototype.updateVisibleObjects,this),this.gantt.api.registerEvent("tasks","add"),this.gantt.api.registerEvent("tasks","change"),this.gantt.api.registerEvent("tasks","rowChange"),this.gantt.api.registerEvent("tasks","remove"),this.gantt.api.registerEvent("tasks","filter"),this.gantt.api.registerEvent("rows","add"),this.gantt.api.registerEvent("rows","change"),this.gantt.api.registerEvent("rows","remove"),this.gantt.api.registerEvent("rows","move"),this.gantt.api.registerEvent("rows","filter"),this.updateVisibleObjects()};return e.prototype.addRow=function(c){var d,e,f,g=!1;if(this.gantt.objectModel.cleanRow(c),c.id in this.rowsMap){if(d=this.rowsMap[c.id],d.model===c)return;var h=b.getRemovedIds(c.tasks,d.model.tasks);for(e=0,f=h.length;f>e;e++){var i=h[e];d.removeTask(i)}d.model=c,g=!0}else d=new a(this,c),this.rowsMap[c.id]=d,this.rows.push(d),this.sortedRows.push(d),this.filteredRows.push(d),this.visibleRows.push(d),-1===this.gantt.$scope.data.indexOf(c)&&this.gantt.$scope.data.push(c);if(void 0!==c.tasks&&c.tasks.length>0)for(e=0,f=c.tasks.length;f>e;e++){var j=c.tasks[e];d.addTask(j)}if(g?this.gantt.api.rows.raise.change(d):this.gantt.api.rows.raise.add(d),!g){var k=this.gantt.$scope.$watchCollection(function(){return c.tasks},function(a,c){if(a!==c){var e,f,g=b.getRemovedIds(a,c);for(e=0,f=g.length;f>e;e++){var h=g[e];d.removeTask(h)}if(void 0!==a)for(e=0,f=a.length;f>e;e++){var i=a[e];d.addTask(i)}}});this.rowsTaskWatchers.push(k)}return g},e.prototype.removeRow=function(a){if(a in this.rowsMap){delete this.rowsMap[a];var c,d,e=b.indexOfId(this.rows,a,["model","id"]);if(e>-1){c=this.rows.splice(e,1)[0];var f=this.rowsTaskWatchers.splice(e,1)[0];f()}return b.removeId(this.sortedRows,a,["model","id"]),b.removeId(this.filteredRows,a,["model","id"]),b.removeId(this.visibleRows,a,["model","id"]),b.remove(this.gantt.$scope.data,c.model),this.gantt.api.rows.raise.remove(c),d}return void 0},e.prototype.removeData=function(a){for(var b=0,c=a.length;c>b;b++){var d,e=a[b];if(void 0!==e.tasks&&e.tasks.length>0){if(e.id in this.rowsMap){d=this.rowsMap[e.id];for(var f=0,g=e.tasks.length;g>f;f++)d.removeTask(e.tasks[f].id);this.gantt.api.rows.raise.change(d)}}else d=this.removeRow(e.id)}this.updateVisibleObjects()},e.prototype.removeAll=function(){this.rowsMap={},this.rows=[],this.sortedRows=[],this.filteredRows=[],this.visibleRows=[];for(var a=this.gantt.$scope.data;a>0;)a.pop();for(var b=0,c=this.rowsTaskWatchers.length;c>b;b++){var d=this.rowsTaskWatchers[b];d()}this.rowsTaskWatchers=[]},e.prototype.sortRows=function(){var a=this.gantt.$scope.sortMode;if(void 0!==a){var b=!1;"-"===a.charAt(0)&&(b=!0,a=a.substr(1));var d=c("orderBy");this.sortedRows=d(this.rows,a,b)}else this.sortedRows=this.rows.slice();this.updateVisibleRows()},e.prototype.applySort=function(){for(var a=this.gantt.$scope.data;a>0;)a.pop();for(var b=[],c=0,d=this.sortedRows.length;d>c;c++)a.push(this.sortedRows[c].model),b.push(this.sortedRows[c]);this.rows=b},e.prototype.moveRow=function(a,c){void 0!==this.gantt.$scope.sortMode&&(this.applySort(),this.gantt.$scope.sortMode=void 0);var d=this.rows.indexOf(c),e=this.rows.indexOf(a);d>-1&&e>-1&&d!==e&&(b.moveToIndex(this.rows,e,d),b.moveToIndex(this.rowsTaskWatchers,e,d),b.moveToIndex(this.gantt.$scope.data,e,d),this.gantt.api.rows.raise.change(a),this.gantt.api.rows.raise.move(a,e,d),this.updateVisibleObjects(),this.sortRows())},e.prototype.updateVisibleObjects=function(){this.updateVisibleRows(),this.updateVisibleTasks()},e.prototype.updateVisibleRows=function(){var a=this.filteredRows;if(this.gantt.$scope.filterRow){var b=this.gantt.$scope.filterRow;"object"==typeof b&&(b={model:b});var d=this.gantt.$scope.filterRowComparator;"function"==typeof d&&(d=function(a,b){return this.gantt.$scope.filterRowComparator(a.model,b.model)}),this.filteredRows=c("filter")(this.sortedRows,b,d)}else this.filteredRows=this.sortedRows.slice(0);var e=!angular.equals(a,this.filteredRows);this.visibleRows=this.filteredRows,e&&this.gantt.api.rows.raise.filter(this.sortedRows,this.filteredRows)},e.prototype.updateVisibleTasks=function(){var a=[],b=[],c=[];angular.forEach(this.rows,function(d){a=a.concat(d.filteredTasks),d.updateVisibleTasks(),b=b.concat(d.filteredTasks),c=c.concat(d.tasks)});var d=!angular.equals(a,b);d&&this.gantt.api.tasks.raise.filter(c,b)},e.prototype.updateTasksPosAndSize=function(){for(var a=0,b=this.rows.length;b>a;a++)this.rows[a].updateTasksPosAndSize()},e.prototype.getExpandedFrom=function(a){a=a?d(a):a;var b=a;return angular.forEach(this.rows,function(a){(void 0===b||b>a.from)&&(b=a.from)}),b&&(!a||a>b)?b:a},e.prototype.getExpandedTo=function(a){a=a?d(a):a;var b=a;return angular.forEach(this.rows,function(a){(void 0===b||b<a.to)&&(b=a.to)}),b&&(!this.gantt.$scope.toDate||b>this.gantt.$scope.toDate)?b:a},e.prototype.getDefaultFrom=function(){var a;return angular.forEach(this.rows,function(b){(void 0===a||b.from<a)&&(a=b.from)}),a},e.prototype.getDefaultTo=function(){var a;return angular.forEach(this.rows,function(b){(void 0===a||b.to>a)&&(a=b.to)}),a},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttTask",[function(){var a=function(a,b){this.rowsManager=a.rowsManager,this.row=a,this.model=b,this.truncatedLeft=!1,this.truncatedRight=!1};return a.prototype.isMilestone=function(){return!this.model.to||this.model.from-this.model.to===0},a.prototype.updatePosAndSize=function(){this.modelLeft=this.rowsManager.gantt.getPositionByDate(this.model.from),this.modelWidth=this.rowsManager.gantt.getPositionByDate(this.model.to)-this.modelLeft,this.left=Math.min(Math.max(this.modelLeft,0),this.rowsManager.gantt.width),this.modelLeft<0?(this.truncatedLeft=!0,this.modelWidth+this.modelLeft>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.width=this.rowsManager.gantt.width):(this.truncatedRight=!1,this.width=this.modelWidth+this.modelLeft)):this.modelWidth+this.modelLeft>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.truncatedLeft=!1,this.width=this.rowsManager.gantt.width-this.modelLeft):(this.truncatedLeft=!1,this.truncatedRight=!1,this.width=this.modelWidth),this.width<0&&(this.left=this.left+this.width,this.width=-this.width),this.updateView()},a.prototype.updateView=function(){if(this.$element){this.$element.css("left",this.left+"px"),this.$element.css("width",this.width+"px"),this.$element.css("background-color",this.model.color),this.$element.css("z-index",this.model.priority),this.$element.toggleClass("gantt-task-milestone",this.isMilestone()),this.$element.toggleClass("gantt-task",!this.isMilestone());for(var a=0;a<this.model.classes;a++)this.$element.toggleClass(this.model.classes[a],!0);this.$element.toggleClass("gantt-task",!this.isMilestone())}},a.prototype.setFrom=function(a){this.model.from=this.rowsManager.gantt.getDateByPosition(a,!0),this.row.setFromToByTask(this),this.updatePosAndSize()},a.prototype.setTo=function(a){this.model.to=this.rowsManager.gantt.getDateByPosition(a,!0),this.row.setFromToByTask(this),this.updatePosAndSize()},a.prototype.moveTo=function(a){this.model.from=this.rowsManager.gantt.getDateByPosition(a,!0);var b=this.rowsManager.gantt.getPositionByDate(this.model.from);this.model.to=this.rowsManager.gantt.getDateByPosition(b+this.modelWidth,!0),this.row.setFromToByTask(this),this.updatePosAndSize()},a.prototype.clone=function(){return new a(this.row,angular.copy(this.model))},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttBody",["GanttBodyColumns","GanttBodyRows","GanttBodyBackground","GanttBodyForeground",function(a,b,c,d){var e=function(e){this.gantt=e,this.background=new c(this),this.foreground=new d(this),this.columns=new a(this),this.rows=new b(this)};return e.prototype.getWidth=function(){return void 0===this.$element?void 0:this.$element[0].offsetWidth},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyBackground",[function(){var a=function(a){this.body=a};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyColumns",[function(){var a=function(a){this.body=a};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyForeground",[function(){var a=function(a){this.body=a};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyRows",[function(){var a=function(a){this.body=a};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeader",["GanttHeaderColumns",function(a){var b=function(b){this.gantt=b,this.columns=new a(this),this.getHeight=function(){return this.$element[0].offsetHeight}};return b}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeaderColumns",[function(){var a=function(a){this.$element=a};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttLabels",[function(){var a=function(a){this.gantt=a};return a.prototype.getWidth=function(){return void 0===this.$element?void 0:this.$element[0].offsetWidth},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttScroll",[function(){var a=function(b){this.gantt=b,this.gantt.api.registerEvent("scroll","scroll"),this.gantt.api.registerMethod("scroll","to",a.prototype.scrollTo,this),this.gantt.api.registerMethod("scroll","toDate",a.prototype.scrollToDate,this),this.gantt.api.registerMethod("scroll","left",a.prototype.scrollToLeft,this),this.gantt.api.registerMethod("scroll","right",a.prototype.scrollToRight,this)};return a.prototype.getScrollLeft=function(){return void 0===this.$element?void 0:this.$element[0].scrollLeft},a.prototype.getScrollWidth=function(){return void 0===this.$element?void 0:this.$element[0].scrollWidth},a.prototype.getScrollContainerWidth=function(){return void 0===this.$element?void 0:this.$element[0].offsetWidth},a.prototype.scrollTo=function(a){this.$element[0].scrollLeft=a,this.$element.triggerHandler("scroll")},a.prototype.scrollToLeft=function(a){this.$element[0].scrollLeft-=a,this.$element.triggerHandler("scroll")},a.prototype.scrollToRight=function(a){this.$element[0].scrollLeft+=a,this.$element.triggerHandler("scroll")},a.prototype.scrollToDate=function(a){var b=this.gantt.getPositionByDate(a);void 0!==b&&(this.$element[0].scrollLeft=b-this.$element[0].offsetWidth/2)},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttTimespan",[function(){var a=function(a,b){this.gantt=a,this.model=b};return a.prototype.updatePosAndSize=function(){this.left=this.gantt.getPositionByDate(this.model.from),this.width=this.gantt.getPositionByDate(this.model.to)-this.left,this.updateView()},a.prototype.updateView=function(){this.$element&&(this.$element.css("left",this.left+"px"),this.$element.css("width",this.width+"px"))},a.prototype.setFrom=function(a){this.from=this.gantt.getDateByPosition(a),this.updatePosAndSize()},a.prototype.setTo=function(a){this.to=this.gantt.getDateByPosition(a),this.updatePosAndSize()},a.prototype.moveTo=function(a){this.from=this.gantt.getDateByPosition(a),this.to=this.gantt.getDateByPosition(a+this.width),this.updatePosAndSize()},a.prototype.clone=function(){return new a(this.gantt,angular.copy(this.model))},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttTimespansManager",["GanttTimespan",function(a){var b=function(a){var b=this;this.gantt=a,this.timespansMap={},this.timespans=[],this.gantt.$scope.$watchCollection("timespans",function(a){b.clearTimespans(),b.loadTimespans(a)}),this.gantt.api.registerMethod("timespans","load",this.loadTimespans,this),this.gantt.api.registerMethod("timespans","remove",this.removeTimespans,this),this.gantt.api.registerMethod("timespans","clear",this.clearTimespans,this),this.gantt.api.registerEvent("timespans","add"),this.gantt.api.registerEvent("timespans","remove"),this.gantt.api.registerEvent("timespans","change")};return b.prototype.loadTimespans=function(a){angular.isArray(a)||(a=void 0!==a?[a]:[]),this.gantt.$scope.timespans=a;for(var b=0,c=a.length;c>b;b++){var d=a[b];this.gantt.objectModel.cleanTimespan(d),this.loadTimespan(d)}},b.prototype.loadTimespan=function(b){var c,d=!1;return b.id in this.timespansMap?(c=this.timespansMap[b.id],c.model=b,d=!0,this.gantt.api.timespans.raise.change(c)):(c=new a(this.gantt,b),this.timespansMap[b.id]=c,this.timespans.push(c),this.gantt.api.timespans.raise.add(c)),c.updatePosAndSize(),d},b.prototype.removeTimespans=function(a){angular.isArray(a)||(a=[a]);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.removeTimespan(d.id)}this.updateVisibleObjects()},b.prototype.removeTimespan=function(a){if(a in this.timespansMap){delete this.timespansMap[a];for(var b,c,d=this.timespans.length-1;d>=0;d--)if(c=this.timespans[d],c.model.id===a){b=c,this.timespans.splice(d,1);break}return this.gantt.api.timespans.raise.remove(b),b}return void 0},b.prototype.clearTimespans=function(){this.timespansMap={},this.timespans=[]},b.prototype.updateTimespansPosAndSize=function(){for(var a=0,b=this.timespans.length;b>a;a++)this.timespans[a].updatePosAndSize()},b}])}(),function(){"use strict";angular.module("gantt").service("ganttArrays",[function(){return{moveToIndex:function(a,b,c){if(c>=a.length)for(var d=c-a.length;d--+1;)a.push(void 0);return a.splice(c,0,a.splice(b,1)[0]),a},getRemovedIds:function(a,b,c){void 0===c&&(c="id");var d,e,f=[];if(void 0!==b)for(d=0,e=b.length;e>d;d++)f.push(b[d][c]);if(void 0!==a)for(d=0,e=a.length;e>d;d++){var g=a[d];if(void 0!==g[c]){var h=f.indexOf(g[c]);h>-1&&f.splice(h,1)}}return f},indexOfId:function(a,b,c){var d;if(void 0===c)c="id";else if(c instanceof Array){for(d=a.length-1;d>=0;d--){for(var e=a[d],f=0,g=c.length;g>f;f++)e=e[c[f]];if(e===b)return d}return-1}for(d=a.length-1;d>=0;d--)if(a[d][c]===b)return d;return-1},removeId:function(a,b,c){var d=this.indexOfId(a,b,c);return d>-1?a.splice(d,1)[0]:void 0},remove:function(a,b){var c=a.indexOf(b);return c>-1?(a.splice(c,1),!0):!1}}}])}(),function(){"use strict";angular.module("gantt").service("ganttBinarySearch",[function(){return{getIndicesOnly:function(a,b,c,d){for(var e=-1,f=a.length;f-e>1;){var g=Math.floor((e+f)/2);(d?c(a[g])<b:c(a[g])<=b)?e=g:f=g}return d||void 0===a[e]||c(a[e])!==b||(f=e),[e,f]},get:function(a,b,c,d){var e=this.getIndicesOnly(a,b,c,d);return[a[e[0]],a[e[1]]]}}}])}(),function(){"use strict";angular.module("gantt").service("ganttUtils",["$document",function(a){return{createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},firstProperty:function(a,b,c){for(var d=0,e=a.length;e>d;d++){var f=a[d];if(void 0!==f&&b in f&&void 0!==f[b])return f[b]}return c},elementFromPoint:function(b,c){return a[0].elementFromPoint(b,c)},elementsFromPoint:function(a,b,c){for(var d,e,f,g,h=[],i=[],j=0;(d=this.elementFromPoint(a,b))&&-1===h.indexOf(d)&&null!==d&&(void 0===c||c>j);)h.push(d),i.push({value:d.style.getPropertyValue("pointer-events"),priority:d.style.getPropertyPriority("pointer-events")}),d.style.setProperty("pointer-events","none","important"),j++;for(e=0,f=i.length;f>e;e++)g=i[e],h[e].style.setProperty("pointer-events",g.value?g.value:"",g.priority);return h},findElementFromPoint:function(a,b,c){for(var d,e,f,g,h,i=[],j=[],k=0;(d=this.elementFromPoint(a,b))&&-1===i.indexOf(d)&&null!==d;)if(i.push(d),j.push({value:d.style.getPropertyValue("pointer-events"),priority:d.style.getPropertyPriority("pointer-events")}),d.style.setProperty("pointer-events","none","important"),k++,c(d)){e=d;break}for(f=0,g=j.length;g>f;f++)h=j[f],i[f].style.setProperty("pointer-events",h.value?h.value:"",h.priority);return e},random4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},randomUuid:function(){return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}()}}])}(),function(){"use strict";angular.module("gantt").filter("ganttColumnLimit",["ganttBinarySearch",function(a){var b=function(a){return a.left};return function(c,d){var e=d.scroll.getScrollLeft(),f=d.scroll.getScrollContainerWidth();if(f>0){var g=a.getIndicesOnly(c,e,b)[0],h=a.getIndicesOnly(c,e+f,b)[1];return c.slice(g,h)}return c.slice()}}])}(),function(){"use strict";angular.module("gantt").filter("ganttTaskLimit",[function(){return function(a,b){var c=b.columnsManager.getFirstColumn(),d=b.columnsManager.getLastColumn();if(void 0!==c&&void 0!==d){for(var e=[],f=b.scroll.getScrollLeft(),g=b.scroll.getScrollContainerWidth(),h=0,i=a.length;i>h;h++){var j=a[h];j.active?e.push(j):(!g||j.left>=f&&j.left<=f+g||j.left+j.width>=f&&j.left+j.width<=f+g||j.left<f&&j.left+j.width>f+g)&&e.push(j)}return e}return a.splice()}}])}(),function(){"use strict";angular.module("gantt").directive("ganttResizer",["$document","ganttMouseOffset",function(a,b){return{restrict:"A",require:"^gantt",scope:{targetElement:"=ganttResizer",enabled:"=?ganttResizerEnabled"},link:function(c,d,e,f){function g(b){b.preventDefault(),void 0!==m&&l[m].raise.resizeBegin(k()),a.on("mousemove",h),a.on("mouseup",i)}function h(a){var d=b.getOffsetForElement(c.targetElement[0],a),e=d.x;void 0!==e&&j(e)}function i(){void 0!==m&&l[m].raise.resizeEnd(k()),a.unbind("mousemove",h),a.unbind("mouseup",i)}function j(a){var b=k();b!==a&&(c.targetElement[0].style.width=a+"px",e.resizerWidth&&(c.$eval(e.resizerWidth+" =  $$xValue",{$$xValue:a}),f.gantt.$scope.$digest()),void 0!==m&&l[m].raise.resize(a))}function k(){return c.targetElement[0].offsetWidth}var l=f.gantt.api,m=e.ganttResizerEventTopic;void 0===c.enabled&&(c.enabled=!0),c.$watch("enabled",function(a){void 0===a&&(a=!0),d.toggleClass("gantt-resizer-enabled",a),a?d.on("mousedown",g):d.off("mousedown",g)}),m&&(l.registerEvent(m,"resize"),l.registerEvent(m,"resizeBegin"),l.registerEvent(m,"resizeEnd"),l.registerMethod(m,"setWidth",j,this),l.registerMethod(m,"getWidth",k,this))}}}])}(),function(){"use strict";angular.module("gantt").directive("ganttHorizontalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",link:function(a,b,c,d){d.registerHorizontalReceiver(b)}}})}(),function(){"use strict";angular.module("gantt").directive("ganttScrollManager",function(){return{restrict:"A",scope:{},controller:["$scope",function(a){a.horizontal=[],a.vertical=[],this.registerVerticalReceiver=function(b){b.css("position","relative"),a.vertical.push(b[0])},this.registerHorizontalReceiver=function(b){b.css("position","relative"),a.horizontal.push(b[0])},this.getHorizontalRecievers=function(){return a.horizontal},this.getVerticalRecievers=function(){return a.vertical}}]}})}(),function(){"use strict";angular.module("gantt").directive("ganttScrollSender",[function(){return{restrict:"A",require:["^gantt","^ganttScrollManager"],link:function(a,b,c,d){var e=b[0],f=function(){var a,b,c=d[1].getVerticalRecievers();for(a=0,b=c.length;b>a;a++){var f=c[a];f.parentNode.scrollTop!==e.scrollTop&&(f.parentNode.scrollTop=e.scrollTop)}var g=d[1].getHorizontalRecievers();for(a=0,b=g.length;b>a;a++){var h=g[a];h.parentNode.scrollLeft!==e.scrollLeft&&(h.parentNode.scrollLeft=e.scrollLeft)}};b.bind("scroll",f),a.oldBodyWidth=void 0,a.$watch(function(){var b=d[0].gantt.body.getWidth();if(a.oldBodyWidth!==b){a.oldBodyWidth=b;for(var c=d[1].getHorizontalRecievers(),e=0,f=c.length;f>e;e++){var g=c[e];g.style.width=b+"px"}}})}}}])}(),function(){"use strict";angular.module("gantt").directive("ganttScrollable",["GanttDirectiveBuilder","ganttDebounce","ganttLayout","moment",function(a,b,c,d){var e=new a("ganttScrollable");return e.controller=function(a,e){a.gantt.scroll.$element=e;var f,g,h=c.getScrollBarWidth(),i=500,j=function(b,c,e){if(!("both"!==a.autoExpand&&a.autoExpand!==!0&&a.autoExpand!==e||Date.now()-g<i)){var f,h,j=1,k=31;"left"===e?(f="hour"===a.viewScale?d(c).add(-j,"day"):d(c).add(-k,"day"),h=c):(f=c,h="hour"===a.viewScale?d(c).add(j,"day"):d(c).add(k,"day")),a.fromDate=f,a.toDate=h,g=Date.now()}};e.bind("scroll",b(function(){var b,c,d=e[0];d.scrollLeft<f&&0===d.scrollLeft?(b="left",c=a.gantt.columnsManager.from):d.scrollLeft>f&&d.offsetWidth+d.scrollLeft>=d.scrollWidth-1&&(b="right",c=a.gantt.columnsManager.to),f=d.scrollLeft,a.gantt.columnsManager.updateVisibleColumns(),a.gantt.rowsManager.updateVisibleTasks(),void 0!==c?(j(d,c,b),a.gantt.api.scroll.raise.scroll(d.scrollLeft,c,b)):a.gantt.api.scroll.raise.scroll(d.scrollLeft)},5)),a.getScrollableCss=function(){var b={};return a.gantt.width>0&&a.gantt.width-(a.showLabelsColumn?a.gantt.labels.getWidth():0)>a.gantt.width+h&&(b.width=a.gantt.width+h+"px"),a.maxHeight>0?(b["max-height"]=a.maxHeight-a.gantt.header.getHeight()+"px",b["overflow-y"]="auto"):b["overflow-y"]="hidden",b}},e.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttVerticalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",link:function(a,b,c,d){d.registerVerticalReceiver(b)}}})}(),function(){"use strict";angular.module("gantt").directive("ganttElementWidthListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(a,b,c){var d=c.ganttElementWidthListener;""===d&&(d="ganttElementWidth");for(var e=a;0===d.indexOf("$parent.");)d=d.substring("$parent.".length),e=e.$parent;e.$watch(function(){b[0].offsetWidth>0&&(e[d]=b[0].offsetWidth)})}]}}])}(),function(){"use strict";angular.module("gantt").directive("ganttBody",["GanttDirectiveBuilder",function(a){var b=new a("ganttBody");return b.controller=function(a,b){a.gantt.body.$element=b,a.gantt.body.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyBackground",["GanttDirectiveBuilder",function(a){var b=new a("ganttBodyBackground");return b.controller=function(a,b){a.gantt.body.background.$element=b,a.gantt.body.background.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyColumns",["GanttDirectiveBuilder",function(a){var b=new a("ganttBodyColumns");return b.controller=function(a,b){a.gantt.body.columns.$element=b,a.gantt.body.background.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyForeground",["GanttDirectiveBuilder",function(a){var b=new a("ganttBodyForeground");return b.controller=function(a,b){a.gantt.body.foreground.$element=b,a.gantt.body.foreground.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyRows",["GanttDirectiveBuilder",function(a){var b=new a("ganttBodyRows");return b.controller=function(a,b){a.gantt.body.rows.$element=b,a.gantt.body.rows.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttColumn",["GanttDirectiveBuilder",function(a){var b=new a("ganttColumn");return b.controller=function(a,b){a.column.$element=b,a.column.$scope=a,a.column.updateView()},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttColumnHeader",["GanttDirectiveBuilder",function(a){var b=new a("ganttColumnHeader");return b.controller=function(a,b){a.column.$element=b,a.column.$scope=a,a.column.updateView()},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttHeader",["GanttDirectiveBuilder",function(a){var b=new a("ganttHeader");return b.controller=function(a,b){a.gantt.header.$element=b,a.gantt.header.$scope=a,a.getHeaderCss=function(){var b={};return a.gantt.width-(a.showLabelsColumn?a.gantt.labels.getWidth():0)>a.gantt.width&&(b.width=a.gantt.width+"px"),b}},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttHeaderColumns",["GanttDirectiveBuilder",function(a){var b=new a("ganttHeaderColumns");return b.controller=function(a,b){a.gantt.header.columns.$element=b,a.gantt.header.columns.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttLabels",["GanttDirectiveBuilder",function(a){var b=new a("ganttLabels");return b.controller=function(a,b){a.gantt.labels.$element=b,a.gantt.labels.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttLabelsBody",["GanttDirectiveBuilder",function(a){var b=new a("ganttLabelsBody");return b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttLabelsHeader",["GanttDirectiveBuilder",function(a){var b=new a("ganttLabelsHeader");return b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRow",["GanttDirectiveBuilder",function(a){var b=new a("ganttRow");return b.controller=function(a,b){a.row.$element=b,a.row.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowBackground",["GanttDirectiveBuilder",function(a){var b=new a("ganttRowBackground");return b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowHeader",["GanttDirectiveBuilder",function(a){var b=new a("ganttRowHeader");return b.controller=function(a,b){a.gantt.rowHeader.$element=b,a.gantt.rowHeader.$scope=a},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowLabel",["GanttDirectiveBuilder",function(a){var b=new a("ganttRowLabel");return b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTask",["GanttDirectiveBuilder","moment",function(a,b){var c=new a("ganttTask");return c.controller=function(a,c){a.task.$element=c,a.task.$scope=a,a.simplifyMoment=function(a){return b.isMoment(a)?a.unix():a},a.$watchGroup(["simplifyMoment(task.model.from)","simplifyMoment(task.model.to)"],function(){a.task.updatePosAndSize()})},c.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskContent",["GanttDirectiveBuilder",function(a){var b=new a("ganttTaskContent");return b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTimeFrame",["GanttDirectiveBuilder",function(a){var b=new a("ganttTimeFrame");return b.controller=function(a,b){a.timeFrame.$element=b,a.timeFrame.$scope=a,a.timeFrame.updateView()},b.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTimespan",["GanttDirectiveBuilder",function(a){var b=new a("ganttTimespan");return b.controller=function(a,b){a.timespan.$element=b,a.timespan.$scope=a,a.timespan.updateView()},b.build()}])}(),function(){"use strict";angular.module("gantt").factory("ganttDebounce",["$timeout",function(a){function b(b,c,d){var e=0;return function(){var f=this,g=arguments;e++;var h=function(a){return function(){return a===e?b.apply(f,g):void 0}}(e);return a(h,c,void 0===d?!0:d)}}return b}])}(),function(){"use strict";angular.module("gantt").service("GanttDirectiveBuilder",[function(){var a=function(a,b,c,d){var e=this;this.directiveName=a,this.templateUrl=void 0===b?"template/"+a+".tmpl.html":b,this.require=void 0===c?"^gantt":c,this.restrict=void 0===d?"E":d,this.transclude=!0,this.replace=!0,this.build=function(){var a=e.directiveName,b=e.templateUrl,c=e.controller;return{restrict:e.restrict,require:e.require,transclude:e.transclude,replace:e.replace,templateUrl:function(a,c){return void 0===c.templateUrl?b:c.templateUrl},compile:function(){return{pre:function(b,c,d,e){b.gantt.api.directives.raise.preLink(a,b,c,d,e)},post:function(b,c,d,e){b.gantt.api.directives.raise.postLink(a,b,c,d,e)}}},controller:["$scope","$element","$attrs",function(b,d,e){var f=this;void 0!==c&&c(b,d,e,f),b.gantt.api.directives.raise.new(a,b,d,e,f),b.$on("$destroy",function(){b.gantt.api.directives.raise.destroy(a,b,d,e,f)})}]}}};return a}])}(),function(){"use strict";angular.module("gantt").service("ganttEnableNgAnimate",["$injector",function(a){var b;try{b=a.get("$animate")}catch(c){}return void 0!==b?function(a,c){b.enabled(!1,c)}:function(){}}])}(),function(){"use strict";angular.module("gantt").service("ganttLayout",["$document",function(a){return{getScrollBarWidth:function(){var b=a[0].createElement("p");b.style.width="100%",b.style.height="200px";var c=a[0].createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.visibility="hidden",c.style.width="200px",c.style.height="150px",c.style.overflow="hidden",c.appendChild(b),a[0].body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";var e=b.offsetWidth;return d===e&&(e=c.clientWidth),a[0].body.removeChild(c),d-e},setColumnsWidth:function(a,b,c){if(a&&b&&c){var d=Math.abs(a/b);angular.forEach(c,function(a){a.left=d*a.originalSize.left,a.width=d*a.originalSize.width,angular.forEach(a.timeFrames,function(a){a.left=d*a.originalSize.left,a.width=d*a.originalSize.width})})}}}}])}(),function(){"use strict";angular.module("gantt").service("ganttMouseButton",[function(){return{getButton:function(a){return a=a||window.event,a.which?a.which:void 0===a.button?1:a.button<2?1:4===a.button?2:3}}}])}(),function(){"use strict";angular.module("gantt").service("ganttMouseOffset",[function(){return{getTouch:function(a){return void 0!==a.touches?a.touches[0]:a},getOffset:function(a){return a.offsetX&&a.offsetY?{x:a.offsetX,y:a.offsetY}:a.layerX&&a.layerY?{x:a.layerX,y:a.layerY}:this.getOffsetForElement(a.target,a)},getOffsetForElement:function(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}}}])}(),function(){"use strict";angular.module("gantt").factory("ganttSmartEvent",[function(){function a(a,b,c,d){return a.$on("$destroy",function(){b.unbind(c,d)}),{bindOnce:function(){b.one(c,d)},bind:function(){b.bind(c,d)},unbind:function(){b.unbind(c,d)}}}return a}])}(),angular.module("gantt.templates",[]).run(["$templateCache",function(a){a.put("template/gantt.tmpl.html",'<div class="gantt unselectable" ng-cloak gantt-scroll-manager>\n    <gantt-labels>\n        <gantt-labels-header>\n            <gantt-row-header></gantt-row-header>\n        </gantt-labels-header>\n        <gantt-labels-body>\n            <div ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n                <gantt-row-label></gantt-row-label>\n            </div>\n        </gantt-labels-body>\n        <div gantt-resizer="gantt.labels.$element" gantt-resizer-event-topic="labels" gantt-resizer-enabled="$parent.allowLabelsResizing" resizer-width="$parent.$parent.labelsWidth" class="gantt-resizer">\n            <div ng-show="$parent.allowLabelsResizing" class="gantt-resizer-display"></div>\n        </div>\n    </gantt-labels>\n    <gantt-header>\n        <gantt-header-columns>\n            <div ng-repeat="header in gantt.columnsManager.visibleHeaders">\n                <div class="gantt-header-row" ng-class="{\'gantt-header-row-last\': $last, \'gantt-header-row-first\': $first}">\n                    <div ng-repeat="column in header">\n                        <gantt-column-header ></gantt-column-header>\n                    </div>\n                </div>\n            </div>\n        </gantt-header-columns>\n    </gantt-header>\n    <gantt-scrollable>\n        <gantt-body>\n            <gantt-body-background>\n                <div ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n                    <gantt-row-background></gantt-row-background>\n                </div>\n            </gantt-body-background>\n            <gantt-body-foreground>\n                <div class="gantt-current-date-line" ng-show="currentDate === \'line\' && gantt.currentDateManager.position >= 0 && gantt.currentDateManager.position <= gantt.width" ng-style="{\'left\': gantt.currentDateManager.position + \'px\' }"></div>\n            </gantt-body-foreground>\n            <gantt-body-columns>\n                <div ng-repeat="column in gantt.columnsManager.visibleColumns">\n                    <gantt-column>\n                        <div ng-repeat="timeFrame in column.visibleTimeFrames">\n                            <gantt-time-frame></gantt-time-frame>\n                        </div>\n                    </gantt-column>\n                </div>\n            </gantt-body-columns>\n            <gantt-body-rows gantt-element-width-listener="$parent.$parent.bodyRowsWidth">\n                <div ng-repeat="timespan in gantt.timespansManager.timespans track by timespan.model.id">\n                    <gantt-timespan></gantt-timespan>\n                </div>\n                <div ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n                    <gantt-row>\n                        <div ng-repeat="task in row.visibleTasks track by task.model.id">\n                            <gantt-task></gantt-task>\n                        </div>\n                    </gantt-row>\n                </div>\n            </gantt-body-rows>\n        </gantt-body>\n    </gantt-scrollable>\n\n    <!-- Plugins -->\n    <ng-transclude></ng-transclude>\n\n    <!--\n    ******* Inline templates *******\n    You can specify your own templates by either changing the default ones below or by\n    adding an attribute template-url="<url to your template>" on the specific element.\n    -->\n\n    <!-- Body template -->\n    <script type="text/ng-template" id="template/ganttBody.tmpl.html">\n        <div ng-transclude class="gantt-body" ng-style="{\'width\': gantt.width +\'px\'}"></div>\n    </script>\n\n    <!-- Header template -->\n    <script type="text/ng-template" id="template/ganttHeader.tmpl.html">\n        <div ng-transclude class="gantt-header"\n             ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0"></div>\n    </script>\n\n    <!-- Row label template -->\n    <script type="text/ng-template" id="template/ganttRowLabel.tmpl.html">\n        <div class="gantt-labels-row gantt-row-height"\n             ng-class-odd="\'gantt-background-row\'"\n             ng-class-even="\'gantt-background-row-alt\'"\n             ng-class="::row.model.classes" ng-style="::{\'background-color\': row.model.color, \'height\': row.model.height}">\n                <span class="gantt-labels-text">{{row.model.name}}</span>\n        </div>\n    </script>\n\n    <!-- Row header template -->\n    <script type="text/ng-template" id="template/ganttRowHeader.tmpl.html">\n        <div class="gantt-labels-header-row gantt-labels-header-row-last"\n             ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0"\n             ng-style="{\'margin-top\': ((gantt.columnsManager.headers.length-1)*2)+\'em\'}">\n            <span>Name</span>\n        </div>\n    </script>\n\n    <!-- Labels header template-->\n    <script type="text/ng-template" id="template/ganttLabelsHeader.tmpl.html">\n        <div ng-transclude= class="gantt-labels-header">\n        </div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttLabelsBody.tmpl.html">\n    <div class="gantt-labels-body"\n         ng-style="(maxHeight > 0 && {\'max-height\': (maxHeight - gantt.header.getHeight())+\'px\'} || {})">\n        <div ng-transclude gantt-vertical-scroll-receiver>\n        </div>\n    </div>\n    </script>\n\n    <!-- Labels template -->\n    <script type="text/ng-template" id="template/ganttLabels.tmpl.html">\n        <div ng-transclude ng-show="showLabelsColumn" class="gantt-labels"></div>\n    </script>\n\n    <!-- Header columns template -->\n    <script type="text/ng-template" id="template/ganttHeaderColumns.tmpl.html">\n        <div ng-transclude class="gantt-header-columns"\n              gantt-horizontal-scroll-receiver></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttColumnHeader.tmpl.html">\n        <div class="gantt-column-header">{{::column.label}}</div>\n    </script>\n\n    <!-- Body background template -->\n    <script type="text/ng-template" id="template/ganttBodyBackground.tmpl.html">\n        <div ng-transclude class="gantt-body-background"></div>\n    </script>\n\n    <!-- Row background template -->\n    <script type="text/ng-template" id="template/ganttRowBackground.tmpl.html">\n        <div class="gantt-row-height"\n             ng-class-odd="\'gantt-background-row\'"\n             ng-class-even="\'gantt-background-row-alt\'"\n             ng-class="::row.model.classes"\n             ng-style="::{\'background-color\': row.model.color, \'height\': row.model.height}">\n        </div>\n    </script>\n\n    <!-- Body foreground template -->\n    <script type="text/ng-template" id="template/ganttBodyForeground.tmpl.html">\n        <div ng-transclude class="gantt-body-foreground"></div>\n    </script>\n\n    <!-- Body columns template -->\n    <script type="text/ng-template" id="template/ganttBodyColumns.tmpl.html">\n        <div ng-transclude class="gantt-body-columns"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttColumn.tmpl.html">\n        <div ng-transclude class="gantt-column gantt-foreground-col"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttTimeFrame.tmpl.html">\n        <div class="gantt-timeframe"></div>\n    </script>\n\n    <!-- Scrollable template -->\n    <script type="text/ng-template" id="template/ganttScrollable.tmpl.html">\n        <div ng-transclude class="gantt-scrollable" gantt-scroll-sender ng-style="getScrollableCss()"></div>\n    </script>\n\n    <!-- Rows template -->\n    <script type="text/ng-template" id="template/ganttBodyRows.tmpl.html">\n        <div ng-transclude class="gantt-body-rows"></div>\n    </script>\n\n    <!-- Timespan template -->\n    <script type="text/ng-template" id="template/ganttTimespan.tmpl.html">\n        <div class="gantt-timespan" ng-class="::timespan.classes">\n        </div>\n    </script>\n\n    <!-- Task template -->\n    <script type="text/ng-template" id="template/ganttTask.tmpl.html">\n        <div>\n            <div ng-if="task.truncatedLeft" class="gantt-task-truncated-left"><span>&lt;</span></div>\n            <gantt-task-content></gantt-task-content>\n            <div ng-if="task.truncatedRight" class="gantt-task-truncated-right"><span>&gt;</span></div>\n        </div>\n    </script>\n\n    <!-- Task content template -->\n    <script type="text/ng-template" id="template/ganttTaskContent.tmpl.html">\n        <div class="gantt-task-content-container">\n            <div class="gantt-task-content"><span>{{task.model.name}}</span></div>\n        </div>\n    </script>\n\n    <!-- Row template -->\n    <script type="text/ng-template" id="template/ganttRow.tmpl.html">\n        <div ng-transclude class="gantt-row gantt-row-height" ng-style="::{\'height\': row.model.height}"></div>\n    </script>\n\n</div>\n')
}]);
//# sourceMappingURL=angular-gantt.min.js.map