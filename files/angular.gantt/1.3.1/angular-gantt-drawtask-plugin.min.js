/*
Project: angular-gantt v1.3.1 - Gantt chart component for AngularJS
Authors: Marco Schweighauser, RÃ©mi Alvergnat
License: MIT
Homepage: https://www.angular-gantt.com
Github: https://github.com/angular-gantt/angular-gantt.git
*/

!function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["$document","ganttMouseOffset","ganttUtils","moment",function(a,b,c,d){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",moveThreshold:"=?",taskFactory:"=?"},link:function(e,f,g,h){var i=h.gantt.api;if(e.options&&"object"==typeof e.options.drawtask)for(var j in e.options.drawtask)e[j]=e.options.drawtask[j];void 0===e.enabled&&(e.enabled=!0),void 0===e.moveThreshold&&(e.moveThreshold=0),void 0===e.taskFactory&&(e.taskFactory=function(){return{}}),i.registerEvent("tasks","draw"),i.registerEvent("tasks","drawBegin"),i.registerEvent("tasks","drawEnd");var k=function(a){return a.model.drawTask&&angular.isFunction(a.model.drawTask.taskFactory)?a.model.drawTask.taskFactory():e.taskFactory()};i.directives.on.new(e,function(f,g,h){if("ganttRow"===f){var j=function(a){var b=i.core.getDateByPosition(a,!0),c=d(b),e=k(g.row);e.from=b,e.to=c;var f=g.row.addTask(e);return f.isResizing=!0,f.updatePosAndSize(),g.row.updateVisibleTasks(),g.row.$scope.$digest(),f},l=function(b){var c=function(){g.row.rowsManager.gantt.api.tasks.raise.draw(b)};g.row.rowsManager.gantt.api.tasks.raise.drawBegin(b),a.on("mousemove",c),a.one("mouseup",function(){g.row.rowsManager.gantt.api.tasks.raise.drawEnd(b),a.off("mousemove",c)})},m=function(c){var d=function(a){var f=b.getOffset(a).x;if(Math.abs(c-f)>=e.moveThreshold){h.off("mousemove",d);var g=j(c);l(g)}};h.on("mousemove",d),a.one("mouseup",function(){h.off("mousemove",d)})},n=function(a){var d=a.target?a.target:a.srcElement,f=g.row.model.drawTask;("boolean"==typeof f||angular.isFunction(f))&&(f={enabled:f});var h=c.firstProperty([f],"enabled",e.enabled),i=angular.isFunction(h)?h(a,g.row):h;if(i&&d.className.indexOf("gantt-row")>-1){var k=b.getOffset(a).x;if(0===e.moveThreshold){var n=j(k);l(n)}else m(k)}};h.on("mousedown",n),g.drawTaskHandler=n}}),i.directives.on.destroy(e,function(a,b,c){"ganttRow"===a&&(c.off("mousedown",b.drawTaskHandler),delete b.drawTaskHandler)})}}}])}(),angular.module("gantt.drawtask.templates",[]).run(["$templateCache",function(a){}]);
//# sourceMappingURL=angular-gantt-drawtask-plugin.min.js.map