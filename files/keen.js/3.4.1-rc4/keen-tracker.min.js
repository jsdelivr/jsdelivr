(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(c,d,b){d.exports=f;function f(g){if(g){return a(g)}}function a(h){for(var g in f.prototype){h[g]=f.prototype[g]}return h}f.prototype.on=f.prototype.addEventListener=function(h,g){this._callbacks=this._callbacks||{};(this._callbacks["$"+h]=this._callbacks["$"+h]||[]).push(g);return this};f.prototype.once=function(i,h){function g(){this.off(i,g);h.apply(this,arguments)}g.fn=h;this.on(i,g);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(l,j){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var k=this._callbacks["$"+l];if(!k){return this}if(1==arguments.length){delete this._callbacks["$"+l];return this}var g;for(var h=0;h<k.length;h++){g=k[h];if(g===j||g.fn===j){k.splice(h,1);break}}return this};f.prototype.emit=function(l){this._callbacks=this._callbacks||{};var h=[].slice.call(arguments,1),k=this._callbacks["$"+l];if(k){k=k.slice(0);for(var j=0,g=k.length;j<g;++j){k[j].apply(this,h)}}return this};f.prototype.listeners=function(g){this._callbacks=this._callbacks||{};return this._callbacks["$"+g]||[]};f.prototype.hasListeners=function(g){return !!this.listeners(g).length}},{}],2:[function(b,c,a){
/*!
  * domready (c) Dustin Diaz 2012 - License MIT
  */
!function(d,f){if(typeof c!="undefined"){c.exports=f()}else{if(typeof define=="function"&&typeof define.amd=="object"){}else{this[d]=f()}}}("domready",function(m){var r=[],l,k=false,n=document,g=n.documentElement,q=g.doScroll,d="DOMContentLoaded",h="addEventListener",p="onreadystatechange",j="readyState",s=q?/^loaded|^c/:/^loaded|c/,i=s.test(n[j]);function o(t){i=1;while(t=r.shift()){t()}}n[h]&&n[h](d,l=function(){n.removeEventListener(d,l,k);o()},k);q&&n.attachEvent(p,l=function(){if(/^c/.test(n[j])){n.detachEvent(p,l);o()}});return(m=q?function(f){self!=top?i?f():r.push(f):function(){try{g.doScroll("left")}catch(t){return setTimeout(function(){m(f)},50)}f()}()}:function(f){i?f():r.push(f)})})},{}],3:[function(b,c,a){(function(d){
/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */
(function(){var g=typeof define==="function"&&define.amd;var i={"function":true,object:true};var l=i[typeof a]&&a&&!a.nodeType&&a;var m=i[typeof window]&&window||this,f=l&&i[typeof c]&&c&&!c.nodeType&&typeof d=="object"&&d;if(f&&(f.global===f||f.window===f||f.self===f)){m=f}function n(af,Z){af||(af=m.Object());Z||(Z=m.Object());var O=af.Number||m.Number,V=af.String||m.String,B=af.Object||m.Object,W=af.Date||m.Date,X=af.SyntaxError||m.SyntaxError,ae=af.TypeError||m.TypeError,N=af.Math||m.Math,ac=af.JSON||m.JSON;if(typeof ac=="object"&&ac){Z.stringify=ac.stringify;Z.parse=ac.parse}var r=B.prototype,y=r.toString,v,q,P;var F=new W(-3509827334573292);try{F=F.getUTCFullYear()==-109252&&F.getUTCMonth()===0&&F.getUTCDate()===1&&F.getUTCHours()==10&&F.getUTCMinutes()==37&&F.getUTCSeconds()==6&&F.getUTCMilliseconds()==708}catch(z){}function s(ag){if(s[ag]!==P){return s[ag]}var ah;if(ag=="bug-string-char-index"){ah="a"[0]!="a"}else{if(ag=="json"){ah=s("json-stringify")&&s("json-parse")}else{var ao,al='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(ag=="json-stringify"){var am=Z.stringify,an=typeof am=="function"&&F;if(an){(ao=function(){return 1}).toJSON=ao;try{an=am(0)==="0"&&am(new O())==="0"&&am(new V())=='""'&&am(y)===P&&am(P)===P&&am()===P&&am(ao)==="1"&&am([ao])=="[1]"&&am([P])=="[null]"&&am(null)=="null"&&am([P,y,null])=="[null,null,null]"&&am({a:[ao,true,false,null,"\x00\b\n\f\r\t"]})==al&&am(null,ao)==="1"&&am([1,2],null,1)=="[\n 1,\n 2\n]"&&am(new W(-8640000000000000))=='"-271821-04-20T00:00:00.000Z"'&&am(new W(8640000000000000))=='"+275760-09-13T00:00:00.000Z"'&&am(new W(-62198755200000))=='"-000001-01-01T00:00:00.000Z"'&&am(new W(-1))=='"1969-12-31T23:59:59.999Z"'}catch(ai){an=false}}ah=an}if(ag=="json-parse"){var ak=Z.parse;if(typeof ak=="function"){try{if(ak("0")===0&&!ak(false)){ao=ak(al);var aj=ao.a.length==5&&ao.a[0]===1;if(aj){try{aj=!ak('"\t"')}catch(ai){}if(aj){try{aj=ak("01")!==1}catch(ai){}}if(aj){try{aj=ak("1.")!==1}catch(ai){}}}}}catch(ai){aj=false}}ah=aj}}}return s[ag]=!!ah}if(!s("json")){var Y="[object Function]",U="[object Date]",R="[object Number]",S="[object String]",I="[object Array]",E="[object Boolean]";var J=s("bug-string-char-index");if(!F){var w=N.floor;var ad=[0,31,59,90,120,151,181,212,243,273,304,334];var H=function(ag,ah){return ad[ah]+365*(ag-1970)+w((ag-1969+(ah=+(ah>1)))/4)-w((ag-1901+ah)/100)+w((ag-1601+ah)/400)}}if(!(v=r.hasOwnProperty)){v=function(ai){var ag={},ah;if((ag.__proto__=null,ag.__proto__={toString:1},ag).toString!=y){v=function(al){var ak=this.__proto__,aj=al in (this.__proto__=null,this);this.__proto__=ak;return aj}}else{ah=ag.constructor;v=function(ak){var aj=(this.constructor||ah).prototype;return ak in this&&!(ak in aj&&this[ak]===aj[ak])}}ag=null;return v.call(this,ai)}}q=function(ai,al){var aj=0,ag,ah,ak;(ag=function(){this.valueOf=0}).prototype.valueOf=0;ah=new ag();for(ak in ah){if(v.call(ah,ak)){aj++}}ag=ah=null;if(!aj){ah=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];q=function(an,ar){var aq=y.call(an)==Y,ap,ao;var am=!aq&&typeof an.constructor!="function"&&i[typeof an.hasOwnProperty]&&an.hasOwnProperty||v;for(ap in an){if(!(aq&&ap=="prototype")&&am.call(an,ap)){ar(ap)}}for(ao=ah.length;ap=ah[--ao];am.call(an,ap)&&ar(ap)){}}}else{if(aj==2){q=function(an,aq){var am={},ap=y.call(an)==Y,ao;for(ao in an){if(!(ap&&ao=="prototype")&&!v.call(am,ao)&&(am[ao]=1)&&v.call(an,ao)){aq(ao)}}}}else{q=function(an,aq){var ap=y.call(an)==Y,ao,am;for(ao in an){if(!(ap&&ao=="prototype")&&v.call(an,ao)&&!(am=ao==="constructor")){aq(ao)}}if(am||v.call(an,(ao="constructor"))){aq(ao)}}}}return q(ai,al)};if(!s("json-stringify")){var u={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var M="000000";var x=function(ag,ah){return(M+(ah||0)).slice(-ag)};var D="\\u00";var G=function(am){var ah='"',ak=0,al=am.length,ag=!J||al>10;var aj=ag&&(J?am.split(""):am);for(;ak<al;ak++){var ai=am.charCodeAt(ak);switch(ai){case 8:case 9:case 10:case 12:case 13:case 34:case 92:ah+=u[ai];break;default:if(ai<32){ah+=D+x(2,ai.toString(16));break}ah+=ag?aj[ak]:am.charAt(ak)}}return ah+'"'};var t=function(am,aE,ak,ap,aB,ag,an){var ax,ai,au,aD,aC,ao,aA,ay,av,ar,aw,ah,al,aj,az,at;try{ax=aE[am]}catch(aq){}if(typeof ax=="object"&&ax){ai=y.call(ax);if(ai==U&&!v.call(ax,"toJSON")){if(ax>-1/0&&ax<1/0){if(H){aC=w(ax/86400000);for(au=w(aC/365.2425)+1970-1;H(au+1,0)<=aC;au++){}for(aD=w((aC-H(au,0))/30.42);H(au,aD+1)<=aC;aD++){}aC=1+aC-H(au,aD);ao=(ax%86400000+86400000)%86400000;aA=w(ao/3600000)%24;ay=w(ao/60000)%60;av=w(ao/1000)%60;ar=ao%1000}else{au=ax.getUTCFullYear();aD=ax.getUTCMonth();aC=ax.getUTCDate();aA=ax.getUTCHours();ay=ax.getUTCMinutes();av=ax.getUTCSeconds();ar=ax.getUTCMilliseconds()}ax=(au<=0||au>=10000?(au<0?"-":"+")+x(6,au<0?-au:au):x(4,au))+"-"+x(2,aD+1)+"-"+x(2,aC)+"T"+x(2,aA)+":"+x(2,ay)+":"+x(2,av)+"."+x(3,ar)+"Z"}else{ax=null}}else{if(typeof ax.toJSON=="function"&&((ai!=R&&ai!=S&&ai!=I)||v.call(ax,"toJSON"))){ax=ax.toJSON(am)}}}if(ak){ax=ak.call(aE,am,ax)}if(ax===null){return"null"}ai=y.call(ax);if(ai==E){return""+ax}else{if(ai==R){return ax>-1/0&&ax<1/0?""+ax:"null"}else{if(ai==S){return G(""+ax)}}}if(typeof ax=="object"){for(aj=an.length;aj--;){if(an[aj]===ax){throw ae()}}an.push(ax);aw=[];az=ag;ag+=aB;if(ai==I){for(al=0,aj=ax.length;al<aj;al++){ah=t(al,ax,ak,ap,aB,ag,an);aw.push(ah===P?"null":ah)}at=aw.length?(aB?"[\n"+ag+aw.join(",\n"+ag)+"\n"+az+"]":("["+aw.join(",")+"]")):"[]"}else{q(ap||ax,function(aG){var aF=t(aG,ax,ak,ap,aB,ag,an);if(aF!==P){aw.push(G(aG)+":"+(aB?" ":"")+aF)}});at=aw.length?(aB?"{\n"+ag+aw.join(",\n"+ag)+"\n"+az+"}":("{"+aw.join(",")+"}")):"{}"}an.pop();return at}};Z.stringify=function(ag,ai,aj){var ah,ap,an,am;if(i[typeof ai]&&ai){if((am=y.call(ai))==Y){ap=ai}else{if(am==I){an={};for(var al=0,ak=ai.length,ao;al<ak;ao=ai[al++],((am=y.call(ao)),am==S||am==R)&&(an[ao]=1)){}}}}if(aj){if((am=y.call(aj))==R){if((aj-=aj%1)>0){for(ah="",aj>10&&(aj=10);ah.length<aj;ah+=" "){}}}else{if(am==S){ah=aj.length<=10?aj:aj.slice(0,10)}}}return t("",(ao={},ao[""]=ag,ao),ap,an,ah,"",[])}}if(!s("json-parse")){var Q=V.fromCharCode;var p={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var K,ab;var L=function(){K=ab=null;throw X()};var C=function(){var al=ab,aj=al.length,ak,ai,ag,am,ah;while(K<aj){ah=al.charCodeAt(K);switch(ah){case 9:case 10:case 13:case 32:K++;break;case 123:case 125:case 91:case 93:case 58:case 44:ak=J?al.charAt(K):al[K];K++;return ak;case 34:for(ak="@",K++;K<aj;){ah=al.charCodeAt(K);if(ah<32){L()}else{if(ah==92){ah=al.charCodeAt(++K);switch(ah){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:ak+=p[ah];K++;break;case 117:ai=++K;for(ag=K+4;K<ag;K++){ah=al.charCodeAt(K);if(!(ah>=48&&ah<=57||ah>=97&&ah<=102||ah>=65&&ah<=70)){L()}}ak+=Q("0x"+al.slice(ai,K));break;default:L()}}else{if(ah==34){break}ah=al.charCodeAt(K);ai=K;while(ah>=32&&ah!=92&&ah!=34){ah=al.charCodeAt(++K)}ak+=al.slice(ai,K)}}}if(al.charCodeAt(K)==34){K++;return ak}L();default:ai=K;if(ah==45){am=true;ah=al.charCodeAt(++K)}if(ah>=48&&ah<=57){if(ah==48&&((ah=al.charCodeAt(K+1)),ah>=48&&ah<=57)){L()}am=false;for(;K<aj&&((ah=al.charCodeAt(K)),ah>=48&&ah<=57);K++){}if(al.charCodeAt(K)==46){ag=++K;for(;ag<aj&&((ah=al.charCodeAt(ag)),ah>=48&&ah<=57);ag++){}if(ag==K){L()}K=ag}ah=al.charCodeAt(K);if(ah==101||ah==69){ah=al.charCodeAt(++K);if(ah==43||ah==45){K++}for(ag=K;ag<aj&&((ah=al.charCodeAt(ag)),ah>=48&&ah<=57);ag++){}if(ag==K){L()}K=ag}return +al.slice(ai,K)}if(am){L()}if(al.slice(K,K+4)=="true"){K+=4;return true}else{if(al.slice(K,K+5)=="false"){K+=5;return false}else{if(al.slice(K,K+4)=="null"){K+=4;return null}}}L()}}return"$"};var aa=function(ah){var ag,ai;if(ah=="$"){L()}if(typeof ah=="string"){if((J?ah.charAt(0):ah[0])=="@"){return ah.slice(1)}if(ah=="["){ag=[];for(;;ai||(ai=true)){ah=C();if(ah=="]"){break}if(ai){if(ah==","){ah=C();if(ah=="]"){L()}}else{L()}}if(ah==","){L()}ag.push(aa(ah))}return ag}else{if(ah=="{"){ag={};for(;;ai||(ai=true)){ah=C();if(ah=="}"){break}if(ai){if(ah==","){ah=C();if(ah=="}"){L()}}else{L()}}if(ah==","||typeof ah!="string"||(J?ah.charAt(0):ah[0])!="@"||C()!=":"){L()}ag[ah.slice(1)]=aa(C())}return ag}}L()}return ah};var T=function(ai,ah,aj){var ag=A(ai,ah,aj);if(ag===P){delete ai[ah]}else{ai[ah]=ag}};var A=function(aj,ai,ak){var ah=aj[ai],ag;if(typeof ah=="object"&&ah){if(y.call(ah)==I){for(ag=ah.length;ag--;){T(ah,ag,ak)}}else{q(ah,function(al){T(ah,al,ak)})}}return ak.call(aj,ai,ah)};Z.parse=function(ai,aj){var ag,ah;K=0;ab=""+ai;ag=aa(C());if(C()!="$"){L()}K=ab=null;return aj&&y.call(aj)==Y?A((ah={},ah[""]=ag,ah),"",aj):ag}}}Z.runInContext=n;return Z}if(l&&!g){n(m,l)}else{var j=m.JSON,o=m.JSON3,h=false;var k=n(m,(m.JSON3={noConflict:function(){if(!h){h=true;m.JSON=j;m.JSON3=o;j=o=null}return k}}));m.JSON={parse:k.parse,stringify:k.stringify}}if(false){(function(){return k})}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],4:[function(b,c,a){c.exports=function(g,i,h){var f=0;var d=g.length;var j=arguments.length==3?h:g[f++];while(f<d){j=i.call(null,j,g[f],++f,g)}return j}},{}],5:[function(k,b,v){var o=k("emitter");var n=k("reduce");var c=k("./request-base");var m=k("./is-object");var r;if(typeof window!=="undefined"){r=window}else{if(typeof self!=="undefined"){r=self}else{r=this}}function h(){}function p(y){var z={}.toString.call(y);switch(z){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}var i=b.exports=k("./request").bind(null,s);i.getXHR=function(){if(r.XMLHttpRequest&&(!r.location||"file:"!=r.location.protocol||!r.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(y){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(y){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(y){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(y){}}return false};var t="".trim?function(y){return y.trim()}:function(y){return y.replace(/(^\s*|\s*$)/g,"")};function q(A){if(!m(A)){return A}var z=[];for(var y in A){if(null!=A[y]){f(z,y,A[y])}}return z.join("&")}function f(z,y,A){if(Array.isArray(A)){return A.forEach(function(B){f(z,y,B)})}z.push(encodeURIComponent(y)+"="+encodeURIComponent(A))}i.serializeObject=q;function j(E){var C={};var A=E.split("&");var B;var D;for(var z=0,y=A.length;z<y;++z){D=A[z];B=D.split("=");C[decodeURIComponent(B[0])]=decodeURIComponent(B[1])}return C}i.parseString=j;i.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};i.serialize={"application/x-www-form-urlencoded":q,"application/json":JSON.stringify};i.parse={"application/x-www-form-urlencoded":j,"application/json":JSON.parse};function d(D){var F=D.split(/\r?\n/);var A={};var C;var G;var E;var y;F.pop();for(var z=0,B=F.length;z<B;++z){G=F[z];C=G.indexOf(":");E=G.slice(0,C).toLowerCase();y=t(G.slice(C+1));A[E]=y}return A}function w(y){return/[\/+]json\b/.test(y)}function g(y){return y.split(/ *; */).shift()}function u(y){return n(y.split(/ *; */),function(B,D){var A=D.split(/ *= */),z=A.shift(),C=A.shift();if(z&&C){B[z]=C}return B},{})}function a(z,y){y=y||{};this.req=z;this.xhr=this.req.xhr;this.text=((this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text"))||typeof this.xhr.responseType==="undefined")?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this.setStatusProperties(this.xhr.status);this.header=this.headers=d(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text?this.text:this.xhr.response):null}a.prototype.get=function(y){return this.header[y.toLowerCase()]};a.prototype.setHeaderProperties=function(B){var z=this.header["content-type"]||"";this.type=g(z);var A=u(z);for(var y in A){this[y]=A[y]}};a.prototype.parseBody=function(z){var y=i.parse[this.type];if(!y&&w(this.type)){y=i.parse["application/json"]}return y&&z&&(z.length||z instanceof Object)?y(z):null};a.prototype.setStatusProperties=function(y){if(y===1223){y=204}var z=y/100|0;this.status=this.statusCode=y;this.statusType=z;this.info=1==z;this.ok=2==z;this.clientError=4==z;this.serverError=5==z;this.error=(4==z||5==z)?this.toError():false;this.accepted=202==y;this.noContent=204==y;this.badRequest=400==y;this.unauthorized=401==y;this.notAcceptable=406==y;this.notFound=404==y;this.forbidden=403==y};a.prototype.toError=function(){var A=this.req;var C=A.method;var y=A.url;var B="cannot "+C+" "+y+" ("+this.status+")";var z=new Error(B);z.status=this.status;z.method=C;z.url=y;return z};i.Response=a;function s(A,z){var y=this;this._query=this._query||[];this.method=A;this.url=z;this.header={};this._header={};this.on("end",function(){var C=null;var B=null;try{B=new a(y)}catch(E){C=new Error("Parser is unable to parse the response");C.parse=true;C.original=E;C.rawResponse=y.xhr&&y.xhr.responseText?y.xhr.responseText:null;C.statusCode=y.xhr&&y.xhr.status?y.xhr.status:null;return y.callback(C)}y.emit("response",B);if(C){return y.callback(C,B)}if(B.status>=200&&B.status<300){return y.callback(C,B)}var D=new Error(B.statusText||"Unsuccessful HTTP response");D.original=C;D.response=B;D.status=B.status;y.callback(D,B)})}o(s.prototype);for(var x in c){s.prototype[x]=c[x]}s.prototype.abort=function(){if(this.aborted){return}this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};s.prototype.type=function(y){this.set("Content-Type",i.types[y]||y);return this};s.prototype.responseType=function(y){this._responseType=y;return this};s.prototype.accept=function(y){this.set("Accept",i.types[y]||y);return this};s.prototype.auth=function(y,A,z){if(!z){z={type:"basic"}}switch(z.type){case"basic":var B=btoa(y+":"+A);this.set("Authorization","Basic "+B);break;case"auto":this.username=y;this.password=A;break}return this};s.prototype.query=function(y){if("string"!=typeof y){y=q(y)}if(y){this._query.push(y)}return this};s.prototype.attach=function(A,z,y){this._getFormData().append(A,z,y||z.name);return this};s.prototype._getFormData=function(){if(!this._formData){this._formData=new r.FormData()}return this._formData};s.prototype.send=function(A){var B=m(A);var z=this._header["content-type"];if(B&&m(this._data)){for(var y in A){this._data[y]=A[y]}}else{if("string"==typeof A){if(!z){this.type("form")}z=this._header["content-type"];if("application/x-www-form-urlencoded"==z){this._data=this._data?this._data+"&"+A:A}else{this._data=(this._data||"")+A}}else{this._data=A}}if(!B||p(A)){return this}if(!z){this.type("json")}return this};a.prototype.parse=function q(y){if(r.console){console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0")}this.serialize(y);return this};a.prototype.serialize=function q(y){this._parser=y;return this};s.prototype.callback=function(A,y){var z=this._callback;this.clearTimeout();z(A,y)};s.prototype.crossDomainError=function(){var y=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");y.crossDomain=true;y.status=this.status;y.method=this.method;y.url=this.url;this.callback(y)};s.prototype.timeoutError=function(){var z=this._timeout;var y=new Error("timeout of "+z+"ms exceeded");y.timeout=z;this.callback(y)};s.prototype.withCredentials=function(){this._withCredentials=true;return this};s.prototype.end=function(C){var H=this;var G=this.xhr=i.getXHR();var A=this._query.join("&");var B=this._timeout;var y=this._formData||this._data;this._callback=C||h;G.onreadystatechange=function(){if(4!=G.readyState){return}var J;try{J=G.status}catch(K){J=0}if(0==J){if(H.timedout){return H.timeoutError()}if(H.aborted){return}return H.crossDomainError()}H.emit("end")};var F=function(J){if(J.total>0){J.percent=J.loaded/J.total*100}J.direction="download";H.emit("progress",J)};if(this.hasListeners("progress")){G.onprogress=F}try{if(G.upload&&this.hasListeners("progress")){G.upload.onprogress=F}}catch(z){}if(B&&!this._timer){this._timer=setTimeout(function(){H.timedout=true;H.abort()},B)}if(A){A=i.serializeObject(A);this.url+=~this.url.indexOf("?")?"&"+A:"?"+A}if(this.username&&this.password){G.open(this.method,this.url,true,this.username,this.password)}else{G.open(this.method,this.url,true)}if(this._withCredentials){G.withCredentials=true}if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof y&&!p(y)){var E=this._header["content-type"];var I=this._parser||i.serialize[E?E.split(";")[0]:""];if(!I&&w(E)){I=i.serialize["application/json"]}if(I){y=I(y)}}for(var D in this.header){if(null==this.header[D]){continue}G.setRequestHeader(D,this.header[D])}if(this._responseType){G.responseType=this._responseType}this.emit("request",this);G.send(typeof y!=="undefined"?y:null);return this};i.Request=s;i.get=function(y,B,z){var A=i("GET",y);if("function"==typeof B){z=B,B=null}if(B){A.query(B)}if(z){A.end(z)}return A};i.head=function(y,B,z){var A=i("HEAD",y);if("function"==typeof B){z=B,B=null}if(B){A.send(B)}if(z){A.end(z)}return A};function l(y,z){var A=i("DELETE",y);if(z){A.end(z)}return A}i.del=l;i["delete"]=l;i.patch=function(y,B,z){var A=i("PATCH",y);if("function"==typeof B){z=B,B=null}if(B){A.send(B)}if(z){A.end(z)}return A};i.post=function(y,B,z){var A=i("POST",y);if("function"==typeof B){z=B,B=null}if(B){A.send(B)}if(z){A.end(z)}return A};i.put=function(y,B,z){var A=i("PUT",y);if("function"==typeof B){z=B,B=null}if(B){A.send(B)}if(z){A.end(z)}return A}},{"./is-object":6,"./request":8,"./request-base":7,emitter:1,reduce:4}],6:[function(c,d,b){function a(f){return null!=f&&"object"==typeof f}d.exports=a},{}],7:[function(c,b,f){var j=c("./is-object");f.clearTimeout=function i(){this._timeout=0;clearTimeout(this._timer);return this};f.parse=function d(k){this._parser=k;return this};f.timeout=function h(k){this._timeout=k;return this};f.then=function g(k,l){return this.end(function(n,m){n?l(n):k(m)})};f.use=function a(k){k(this);return this};f.get=function(k){return this._header[k.toLowerCase()]};f.getHeader=f.get;f.set=function(l,m){if(j(l)){for(var k in l){this.set(k,l[k])}return this}this._header[l.toLowerCase()]=m;this.header[l]=m;return this};f.unset=function(k){delete this._header[k.toLowerCase()];delete this.header[k];return this};f.field=function(k,l){this._getFormData().append(k,l);return this}},{"./is-object":6}],8:[function(b,c,a){function d(g,h,f){if("function"==typeof f){return new g("GET",h).end(f)}if(2==arguments.length){return new g("GET",h)}return new g(h,f)}c.exports=d},{}],9:[function(c,d,b){var a=c("./index"),f=c("./utils/each");d.exports=function(){var h=window.Keen||null,j=window._Keen||null,g,i;if(h&&j){g=j.clients||{},i=j.ready||[];f(g,function(l,n){f(a.prototype,function(p,o){h.prototype[o]=p});f(["Query","Request","Dataset","Dataviz"],function(o){h[o]=(a[o])?a[o]:function(){}});if(l._config){l.configure.call(l,l._config)}if(l._setGlobalProperties){f(l._setGlobalProperties,function(o){l.setGlobalProperties.apply(l,o)})}if(l._addEvent){f(l._addEvent,function(o){l.addEvent.apply(l,o)})}var m=l._on||[];if(l._on){f(l._on,function(o){l.on.apply(l,o)});l.trigger("ready")}f(["_config","_setGlobalProperties","_addEvent","_on"],function(o){if(l[o]){l[o]=undefined;try{delete l[o]}catch(p){}}})});f(i,function(l,m){a.once("ready",l)})}window._Keen=undefined;try{delete window._Keen}catch(k){}}},{"./index":16,"./utils/each":22}],10:[function(b,c,a){c.exports=function(){return"undefined"==typeof window?"server":"browser"}},{}],11:[function(b,d,a){var f=b("../utils/each"),c=b("../utils/json-shim");d.exports=function(h){var g=[];f(h,function(j,i){if("string"!==typeof j){j=c.stringify(j)}g.push(i+"="+encodeURIComponent(j))});return"?"+g.join("&")}},{"../utils/each":22,"../utils/json-shim":25}],12:[function(b,c,a){c.exports=function(){if("undefined"!==typeof window){if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){return 2000}}return 16000}},{}],13:[function(b,c,a){c.exports=function(){var d="undefined"==typeof window?this:window;if(d.XMLHttpRequest&&("file:"!=d.location.protocol||!d.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(f){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(f){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(f){}}return false}},{}],14:[function(b,c,a){c.exports=function(h,g,i){var f=i||function(){};if(g&&!g.ok){var d=g.body&&g.body.error_code;h=new Error(d?g.body.message:"Unknown error occurred");h.code=d?g.body.error_code:"UnknownError"}if(h){f(h,null)}else{f(null,g.body)}return}},{}],15:[function(f,b,g){var n=f("superagent");var l=f("../utils/each"),a=f("./get-xhr-object");b.exports=function(o,p){return function(q){var r=q.constructor.prototype.end;if(typeof window==="undefined"){return}q.requestType=q.requestType||{};q.requestType.type=o;q.requestType.options=q.requestType.options||{async:true,success:{responseText:'{ "created": true }',status:201},error:{responseText:'{ "error_code": "ERROR", "message": "Request failed" }',status:404}};if(p){if(typeof p.async==="boolean"){q.requestType.options.async=p.async}if(p.success){extend(q.requestType.options.success,p.success)}if(p.error){extend(q.requestType.options.error,p.error)}}q.end=function(u){var t=this,s=(this.requestType)?this.requestType.type:"xhr",w,v;if(("GET"!==t.method||s==="xhr")&&t.requestType.options.async){r.call(t,u);return}w=t._query.join("&");v=t._timeout;t._callback=u||noop;if(v&&!t._timer){t._timer=setTimeout(function(){h.call(t)},v)}if(w){w=n.serializeObject(w);t.url+=~t.url.indexOf("?")?"&"+w:"?"+w}t.emit("request",t);if(!t.requestType.options.async){k.call(t)}else{if(s==="jsonp"){j.call(t)}else{if(s==="beacon"){i.call(t)}}}return t};return q}};function k(){var o=a();if(o){o.open("GET",this.url,false);o.send(null)}return this}function j(){var p=this,t=new Date().getTime(),o=document.createElement("script"),s=document.getElementsByTagName("head")[0],u="keenJSONPCallback",q=false;u+=t;while(u in window){u+="a"}window[u]=function(v){if(q===true){return}q=true;d.call(p,v);r()};o.src=p.url+"&jsonp="+u;s.appendChild(o);o.onreadystatechange=function(){if(q===false&&p.readyState==="loaded"){q=true;c.call(p);r()}};o.onerror=function(){if(q===false){q=true;c.call(p);r()}};function r(){window[u]=undefined;try{delete window[u]}catch(v){}s.removeChild(o)}}function i(){var p=this,o=document.createElement("img"),q=false;o.onload=function(){q=true;if("naturalHeight" in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height===0){this.onerror();return}}d.call(p)};o.onerror=function(){q=true;c.call(p)};o.src=p.url+"&c=clv1"}function d(p){var q=this.requestType.options["success"],o="";m.call(this,q);if(p){try{o=JSON.stringify(p)}catch(r){}}else{o=q.responseText}this.xhr.responseText=o;this.xhr.status=q.status;this.emit("end")}function c(){var o=this.requestType.options["error"];m.call(this,o);this.xhr.responseText=o.responseText;this.xhr.status=o.status;this.emit("end")}function h(){this.aborted=true;this.clearTimeout();this.emit("abort")}function m(o){this.xhr={getAllResponseHeaders:function(){return""},getResponseHeader:function(){return"application/json"},responseText:o.responseText,status:o.status};return this}},{"../utils/each":22,"./get-xhr-object":13,superagent:5}],16:[function(d,f,c){var b="undefined"!==typeof window?window:this;var h=b.Keen;var g=d("./utils/emitter-shim");function a(i){this.configure(i||{});a.trigger("client",this)}a.debug=false;a.enabled=true;a.loaded=true;a.version="3.4.1-rc4";g(a);g(a.prototype);a.prototype.configure=function(i){var j=i||{};if(j.host){j.host.replace(/.*?:\/\//g,"")}if(j.protocol&&j.protocol==="auto"){j.protocol=location.protocol.replace(/:/g,"")}this.config={projectId:j.projectId,writeKey:j.writeKey,readKey:j.readKey,masterKey:j.masterKey,requestType:j.requestType||"jsonp",host:j.host||"api.keen.io/3.0",protocol:j.protocol||"https",globalProperties:null};if(a.debug){this.on("error",a.log)}this.trigger("ready")};a.prototype.projectId=function(i){if(!arguments.length){return this.config.projectId}this.config.projectId=(i?String(i):null);return this};a.prototype.masterKey=function(i){if(!arguments.length){return this.config.masterKey}this.config.masterKey=(i?String(i):null);return this};a.prototype.readKey=function(i){if(!arguments.length){return this.config.readKey}this.config.readKey=(i?String(i):null);return this};a.prototype.writeKey=function(i){if(!arguments.length){return this.config.writeKey}this.config.writeKey=(i?String(i):null);return this};a.prototype.url=function(i){if(!this.projectId()){this.trigger("error","Client is missing projectId property");return}return this.config.protocol+"://"+this.config.host+"/projects/"+this.projectId()+i};a.log=function(i){if(a.debug&&typeof console=="object"){console.log("[Keen IO]",i)}};a.noConflict=function(){b.Keen=h;return a};a.ready=function(i){if(a.loaded){i()}else{a.once("ready",i)}};f.exports=a},{"./utils/emitter-shim":23}],17:[function(f,c,h){var p=f("../utils/json-shim");var g=f("superagent");var i=f("../index");var j=f("../utils/base64"),m=f("../utils/each"),n=f("../helpers/get-context"),d=f("../helpers/get-query-string"),b=f("../helpers/get-url-max-length"),a=f("../helpers/get-xhr-object"),k=f("../helpers/superagent-request-types"),o=f("../helpers/superagent-handle-response");c.exports=function(x,A,B,t){var C=this,v=this.url("/events/"+encodeURIComponent(x)),q=this.config.requestType,u={},s=B,r,z;r=("boolean"===typeof t)?t:true;if(!i.enabled){y.call(C,"Keen.enabled = false");return}if(!C.projectId()){y.call(C,"Missing projectId property");return}if(!C.writeKey()){y.call(C,"Missing writeKey property");return}if(!x||typeof x!=="string"){y.call(C,"Collection name must be a string");return}if(C.config.globalProperties){u=C.config.globalProperties(x)}m(A,function(E,D){u[D]=E});if(!a()&&"xhr"===q){q="jsonp"}if("xhr"!==q||!r){z=l.call(C,v,u)}if(z&&n()==="browser"){g.get(z).use(k(q,{async:r})).end(w)}else{if(a()||n()==="server"){g.post(v).set("Content-Type","application/json").set("Authorization",C.writeKey()).send(u).end(w)}else{C.trigger("error","Request not sent: URL length exceeds current browser limit, and XHR (POST) is not supported.")}}function w(E,D){o(E,D,s);s=B=null}function y(E){var D="Event not recorded: "+E;C.trigger("error",D);if(s){s.call(C,D,null);s=B=null}}return};function l(q,r){q+=d({api_key:this.writeKey(),data:j.encode(p.stringify(r)),modified:new Date().getTime()});return(q.length<b())?q:false}},{"../helpers/get-context":10,"../helpers/get-query-string":11,"../helpers/get-url-max-length":12,"../helpers/get-xhr-object":13,"../helpers/superagent-handle-response":14,"../helpers/superagent-request-types":15,"../index":16,"../utils/base64":21,"../utils/each":22,"../utils/json-shim":25,superagent:5}],18:[function(c,b,f){var g=c("../index");var d=c("superagent");var i=c("../utils/each"),j=c("../helpers/get-context"),a=c("../helpers/get-xhr-object"),h=c("../helpers/superagent-request-types"),k=c("../helpers/superagent-handle-response");b.exports=function(p,r){var n=this,m=this.url("/events"),o={},l=r;if(!g.enabled){q.call(n,"Keen.enabled = false");return}if(!n.projectId()){q.call(n,"Missing projectId property");return}if(!n.writeKey()){q.call(n,"Missing writeKey property");return}if(arguments.length>2){q.call(n,"Incorrect arguments provided to #addEvents method");return}if(typeof p!=="object"||p instanceof Array){q.call(n,"Request payload must be an object");return}if(n.config.globalProperties){i(p,function(s,t){i(s,function(u,v){var w=n.config.globalProperties(t);i(u,function(y,x){w[x]=y});o[t].push(w)})})}else{o=p}if(a()||j()==="server"){d.post(m).set("Content-Type","application/json").set("Authorization",n.writeKey()).send(o).end(function(t,s){k(t,s,l);l=r=null})}else{n.trigger("error","Events not recorded: XHR support is required for batch upload")}function q(t){var s="Events not recorded: "+t;n.trigger("error",s);if(l){l.call(n,s,null);l=r=null}}return}},{"../helpers/get-context":10,"../helpers/get-xhr-object":13,"../helpers/superagent-handle-response":14,"../helpers/superagent-request-types":15,"../index":16,"../utils/each":22,superagent:5}],19:[function(b,c,a){c.exports=function(d){if(d&&typeof(d)=="function"){this.config.globalProperties=d}else{this.trigger("error","Invalid value for global properties: "+d)}}},{}],20:[function(b,c,a){var d=b("./addEvent");c.exports=function(k,f,n,l,m){var o=k,j=(o.currentTarget)?o.currentTarget:(o.srcElement||o.target),g=l||500,h=false,q="",p,i;if(j.getAttribute!==void 0){q=j.getAttribute("target")}else{if(j.target){q=j.target}}if((q=="_blank"||q=="blank")&&!o.metaKey){i=window.open("about:blank");i.document.location=j.href}if(j.nodeName==="A"){p=function(){if(!h&&!o.metaKey&&(q!=="_blank"&&q!=="blank")){h=true;window.location=j.href}}}else{if(j.nodeName==="FORM"){p=function(){if(!h){h=true;j.submit()}}}else{this.trigger("error","#trackExternalLink method not attached to an <a> or <form> DOM element")}}if(m){p=function(){if(!h){h=true;m()}}}d.call(this,f,n,p);setTimeout(p,g);if(!o.metaKey){return false}}},{"./addEvent":17}],21:[function(b,c,a){c.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(f){var d="",l=0,h=this.map,k,j,g,s,r,q,p;f=this.utf8.encode(f);while(l<f.length){k=f.charCodeAt(l++);j=f.charCodeAt(l++);g=f.charCodeAt(l++);s=(k>>2);r=(((k&3)<<4)|(j>>4));q=(isNaN(j)?64:((j&15)<<2)|(g>>6));p=(isNaN(j)||isNaN(g))?64:g&63;d=d+h.charAt(s)+h.charAt(r)+h.charAt(q)+h.charAt(p)}return d},decode:function(f){var d="",p=0,h=this.map,g=String.fromCharCode,t,s,r,q,l,k,j;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(p<f.length){t=h.indexOf(f.charAt(p++));s=h.indexOf(f.charAt(p++));r=h.indexOf(f.charAt(p++));q=h.indexOf(f.charAt(p++));l=(t<<2)|(s>>4);k=((s&15)<<4)|(r>>2);j=((r&3)<<6)|q;d=d+(g(l)+((r!=64)?g(k):""))+(((q!=64)?g(j):""))}return this.utf8.decode(d)},utf8:{encode:function(j){var f="",d=0,h=String.fromCharCode,g;while(d<j.length){g=j.charCodeAt(d++);f=f+((g<128)?h(g):((g>127)&&(g<2048))?(h((g>>6)|192)+h((g&63)|128)):(h((g>>12)|224)+h(((g>>6)&63)|128)+h((g&63)|128)))}return f},decode:function(k){var g="",f=0,j=String.fromCharCode,d,h;while(f<k.length){h=k.charCodeAt(f);g=g+((h<128)?[j(h),f++][0]:((h>191)&&(h<224))?[j(((h&31)<<6)|((d=k.charCodeAt(f+1))&63)),(f+=2)][0]:[j(((h&15)<<12)|(((d=k.charCodeAt(f+1))&63)<<6)|((c3=k.charCodeAt(f+2))&63)),(f+=3)][0])}return g}}}},{}],22:[function(b,c,a){c.exports=function(g,d,f){var h;if(!g){return 0}f=!f?g:f;if(g instanceof Array){for(h=0;h<g.length;h++){if(d.call(f,g[h],h,g)===false){return 0}}}else{for(h in g){if(g.hasOwnProperty(h)){if(d.call(f,g[h],h,g)===false){return 0}}}}return 1}},{}],23:[function(b,c,a){var d=b("component-emitter");d.prototype.trigger=d.prototype.emit;c.exports=d},{"component-emitter":1}],24:[function(b,c,a){c.exports=function(f){for(var d=1;d<arguments.length;d++){for(var g in arguments[d]){f[g]=arguments[d][g]}}return f}},{}],25:[function(b,c,a){c.exports=("undefined"!==typeof window&&window.JSON)?window.JSON:b("json3")},{json3:3}],26:[function(b,c,a){function d(l){var f={},g,i=/\+/g,h=/([^&=]+)=?([^&]*)/g,k=function(m){return decodeURIComponent(m.replace(i," "))},j=l.split("?")[1];while(!!(g=h.exec(j))){f[k(g[1])]=k(g[2])}return f}c.exports=d},{}],27:[function(b,c,a){(function(d){(function(i){if(typeof define==="function"&&define.amd){define("keen",[],function(){return i()})}if(typeof a==="object"&&typeof c!=="undefined"){c.exports=i()}var h=null;if(typeof window!=="undefined"){h=window}else{if(typeof d!=="undefined"){h=d}else{if(typeof self!=="undefined"){h=self}}}if(h){h.Keen=i()}})(function(){var f=b("./core"),g=b("./core/utils/extend");g(f.prototype,{addEvent:b("./core/lib/addEvent"),addEvents:b("./core/lib/addEvents"),setGlobalProperties:b("./core/lib/setGlobalProperties"),trackExternalLink:b("./core/lib/trackExternalLink")});f.Base64=b("./core/utils/base64");f.utils={domready:b("domready"),each:b("./core/utils/each"),extend:g,parseParams:b("./core/utils/parseParams")};if(f.loaded){setTimeout(function(){f.utils.domready(function(){f.emit("ready")})},0)}b("./core/async")();c.exports=f;return f})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core":16,"./core/async":9,"./core/lib/addEvent":17,"./core/lib/addEvents":18,"./core/lib/setGlobalProperties":19,"./core/lib/trackExternalLink":20,"./core/utils/base64":21,"./core/utils/each":22,"./core/utils/extend":24,"./core/utils/parseParams":26,domready:2}]},{},[27]);