(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(require,module,exports){(function(exports){if(typeof exports.decycle!=="function"){exports.decycle=function decycle(object){var objects=[],paths=[];return(function derez(value,path){var i,name,nu;switch(typeof value){case"object":if(!value){return null}for(i=0;i<objects.length;i+=1){if(objects[i]===value){return{$ref:paths[i]}}}objects.push(value);paths.push(path);if(Object.prototype.toString.apply(value)==="[object Array]"){nu=[];for(i=0;i<value.length;i+=1){nu[i]=derez(value[i],path+"["+i+"]")}}else{nu={};for(name in value){if(Object.prototype.hasOwnProperty.call(value,name)){nu[name]=derez(value[name],path+"["+JSON.stringify(name)+"]")}}}return nu;case"number":case"string":case"boolean":return value}}(object,"$"))}}if(typeof exports.retrocycle!=="function"){exports.retrocycle=function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;(function rez(value){var i,item,name,path;if(value&&typeof value==="object"){if(Object.prototype.toString.apply(value)==="[object Array]"){for(i=0;i<value.length;i+=1){item=value[i];if(item&&typeof item==="object"){path=item.$ref;if(typeof path==="string"&&px.test(path)){value[i]=eval(path)}else{rez(item)}}}}else{for(name in value){if(typeof value[name]==="object"){item=value[name];if(item){path=item.$ref;if(typeof path==="string"&&px.test(path)){value[name]=eval(path)}else{rez(item)}}}}}}}($));return $}}})((typeof exports!=="undefined")?exports:(window.JSON?(window.JSON):(window.JSON={})))},{}],2:[function(b,d,a){var f=b("./json2");var c=b("./cycle");f.decycle=c.decycle;f.retrocycle=c.retrocycle;d.exports=f},{"./cycle":1,"./json2":3}],3:[function(require,module,exports){(function(JSON){function f(n){return n<10?"0"+n:n}if(typeof exports==="undefined"){if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null}}if(typeof String.prototype.toJSON!=="function"){String.prototype.toJSON=function(key){return this.valueOf()}}if(typeof Number.prototype.toJSON!=="function"){Number.prototype.toJSON=function(key){return this.valueOf()}}if(typeof Boolean.prototype.toJSON!=="function"){Boolean.prototype.toJSON=function(key){return this.valueOf()}}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})((typeof exports!=="undefined")?exports:(window.JSON?(window.JSON):(window.JSON={})))},{}],4:[function(c,d,b){d.exports=f;function f(g){if(g){return a(g)}}function a(h){for(var g in f.prototype){h[g]=f.prototype[g]}return h}f.prototype.on=f.prototype.addEventListener=function(h,g){this._callbacks=this._callbacks||{};(this._callbacks["$"+h]=this._callbacks["$"+h]||[]).push(g);return this};f.prototype.once=function(i,h){function g(){this.off(i,g);h.apply(this,arguments)}g.fn=h;this.on(i,g);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(l,j){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var k=this._callbacks["$"+l];if(!k){return this}if(1==arguments.length){delete this._callbacks["$"+l];return this}var g;for(var h=0;h<k.length;h++){g=k[h];if(g===j||g.fn===j){k.splice(h,1);break}}return this};f.prototype.emit=function(l){this._callbacks=this._callbacks||{};var h=[].slice.call(arguments,1),k=this._callbacks["$"+l];if(k){k=k.slice(0);for(var j=0,g=k.length;j<g;++j){k[j].apply(this,h)}}return this};f.prototype.listeners=function(g){this._callbacks=this._callbacks||{};return this._callbacks["$"+g]||[]};f.prototype.hasListeners=function(g){return !!this.listeners(g).length}},{}],5:[function(i,b,t){var l=i("emitter");var k=i("reduce");var p="undefined"==typeof window?this:window;function f(){}function m(u){var v={}.toString.call(u);switch(v){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}function n(){if(p.XMLHttpRequest&&("file:"!=p.location.protocol||!p.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(u){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(u){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(u){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(u){}}return false}var r="".trim?function(u){return u.trim()}:function(u){return u.replace(/(^\s*|\s*$)/g,"")};function j(u){return u===Object(u)}function o(w){if(!j(w)){return w}var v=[];for(var u in w){if(null!=w[u]){v.push(encodeURIComponent(u)+"="+encodeURIComponent(w[u]))}}return v.join("&")}d.serializeObject=o;function h(A){var y={};var w=A.split("&");var x;var z;for(var v=0,u=w.length;v<u;++v){z=w[v];x=z.split("=");y[decodeURIComponent(x[0])]=decodeURIComponent(x[1])}return y}d.parseString=h;d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};d.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify};d.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse};function c(z){var B=z.split(/\r?\n/);var w={};var y;var C;var A;var u;B.pop();for(var v=0,x=B.length;v<x;++v){C=B[v];y=C.indexOf(":");A=C.slice(0,y).toLowerCase();u=r(C.slice(y+1));w[A]=u}return w}function g(u){return u.split(/ *; */).shift()}function s(u){return k(u.split(/ *; */),function(x,z){var w=z.split(/ *= */),v=w.shift(),y=w.shift();if(v&&y){x[v]=y}return x},{})}function a(v,u){u=u||{};this.req=v;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"?this.xhr.responseText:null;this.setStatusProperties(this.xhr.status);this.header=this.headers=c(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text):null}a.prototype.get=function(u){return this.header[u.toLowerCase()]};a.prototype.setHeaderProperties=function(x){var v=this.header["content-type"]||"";this.type=g(v);var w=s(v);for(var u in w){this[u]=w[u]}};a.prototype.parseBody=function(v){var u=d.parse[this.type];return u&&v&&v.length?u(v):null};a.prototype.setStatusProperties=function(u){var v=u/100|0;this.status=u;this.statusType=v;this.info=1==v;this.ok=2==v;this.clientError=4==v;this.serverError=5==v;this.error=(4==v||5==v)?this.toError():false;this.accepted=202==u;this.noContent=204==u||1223==u;this.badRequest=400==u;this.unauthorized=401==u;this.notAcceptable=406==u;this.notFound=404==u;this.forbidden=403==u};a.prototype.toError=function(){var w=this.req;var y=w.method;var u=w.url;var x="cannot "+y+" "+u+" ("+this.status+")";var v=new Error(x);v.status=this.status;v.method=y;v.url=u;return v};d.Response=a;function q(w,v){var u=this;l.call(this);this._query=this._query||[];this.method=w;this.url=v;this.header={};this._header={};this.on("end",function(){var y=null;var x=null;try{x=new a(u)}catch(z){y=new Error("Parser is unable to parse the response");y.parse=true;y.original=z}u.callback(y,x)})}l(q.prototype);q.prototype.use=function(u){u(this);return this};q.prototype.timeout=function(u){this._timeout=u;return this};q.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};q.prototype.abort=function(){if(this.aborted){return}this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};q.prototype.set=function(v,w){if(j(v)){for(var u in v){this.set(u,v[u])}return this}this._header[v.toLowerCase()]=w;this.header[v]=w;return this};q.prototype.unset=function(u){delete this._header[u.toLowerCase()];delete this.header[u];return this};q.prototype.getHeader=function(u){return this._header[u.toLowerCase()]};q.prototype.type=function(u){this.set("Content-Type",d.types[u]||u);return this};q.prototype.accept=function(u){this.set("Accept",d.types[u]||u);return this};q.prototype.auth=function(u,v){var w=btoa(u+":"+v);this.set("Authorization","Basic "+w);return this};q.prototype.query=function(u){if("string"!=typeof u){u=o(u)}if(u){this._query.push(u)}return this};q.prototype.field=function(u,v){if(!this._formData){this._formData=new FormData()}this._formData.append(u,v);return this};q.prototype.attach=function(w,v,u){if(!this._formData){this._formData=new FormData()}this._formData.append(w,v,u);return this};q.prototype.send=function(w){var x=j(w);var v=this.getHeader("Content-Type");if(x&&j(this._data)){for(var u in w){this._data[u]=w[u]}}else{if("string"==typeof w){if(!v){this.type("form")}v=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==v){this._data=this._data?this._data+"&"+w:w}else{this._data=(this._data||"")+w}}else{this._data=w}}if(!x){return this}if(!v){this.type("json")}return this};q.prototype.callback=function(w,u){var v=this._callback;this.clearTimeout();if(2==v.length){return v(w,u)}if(w){return this.emit("error",w)}v(u)};q.prototype.crossDomainError=function(){var u=new Error("Origin is not allowed by Access-Control-Allow-Origin");u.crossDomain=true;this.callback(u)};q.prototype.timeoutError=function(){var v=this._timeout;var u=new Error("timeout of "+v+"ms exceeded");u.timeout=v;this.callback(u)};q.prototype.withCredentials=function(){this._withCredentials=true;return this};q.prototype.end=function(w){var u=this;var B=this.xhr=n();var z=this._query.join("&");var y=this._timeout;var x=this._formData||this._data;this._callback=w||f;B.onreadystatechange=function(){if(4!=B.readyState){return}if(0==B.status){if(u.aborted){return u.timeoutError()}return u.crossDomainError()}u.emit("end")};if(B.upload){B.upload.onprogress=function(C){C.percent=C.loaded/C.total*100;u.emit("progress",C)}}if(y&&!this._timer){this._timer=setTimeout(function(){u.abort()},y)}if(z){z=d.serializeObject(z);this.url+=~this.url.indexOf("?")?"&"+z:"?"+z}B.open(this.method,this.url,true);if(this._withCredentials){B.withCredentials=true}if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof x&&!m(x)){var v=d.serialize[this.getHeader("Content-Type")];if(v){x=v(x)}}for(var A in this.header){if(null==this.header[A]){continue}B.setRequestHeader(A,this.header[A])}this.emit("request",this);B.send(x);return this};d.Request=q;function d(v,u){if("function"==typeof u){return new q("GET",v).end(u)}if(1==arguments.length){return new q("GET",v)}return new q(v,u)}d.get=function(u,x,v){var w=d("GET",u);if("function"==typeof x){v=x,x=null}if(x){w.query(x)}if(v){w.end(v)}return w};d.head=function(u,x,v){var w=d("HEAD",u);if("function"==typeof x){v=x,x=null}if(x){w.send(x)}if(v){w.end(v)}return w};d.del=function(u,v){var w=d("DELETE",u);if(v){w.end(v)}return w};d.patch=function(u,x,v){var w=d("PATCH",u);if("function"==typeof x){v=x,x=null}if(x){w.send(x)}if(v){w.end(v)}return w};d.post=function(u,x,v){var w=d("POST",u);if("function"==typeof x){v=x,x=null}if(x){w.send(x)}if(v){w.end(v)}return w};d.put=function(u,x,v){var w=d("PUT",u);if("function"==typeof x){v=x,x=null}if(x){w.send(x)}if(v){w.end(v)}return w};b.exports=d},{emitter:6,reduce:7}],6:[function(c,d,b){d.exports=f;function f(g){if(g){return a(g)}}function a(h){for(var g in f.prototype){h[g]=f.prototype[g]}return h}f.prototype.on=f.prototype.addEventListener=function(h,g){this._callbacks=this._callbacks||{};(this._callbacks[h]=this._callbacks[h]||[]).push(g);return this};f.prototype.once=function(j,i){var h=this;this._callbacks=this._callbacks||{};function g(){h.off(j,g);i.apply(this,arguments)}g.fn=i;this.on(j,g);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(l,j){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var k=this._callbacks[l];if(!k){return this}if(1==arguments.length){delete this._callbacks[l];return this}var g;for(var h=0;h<k.length;h++){g=k[h];if(g===j||g.fn===j){k.splice(h,1);break}}return this};f.prototype.emit=function(l){this._callbacks=this._callbacks||{};var h=[].slice.call(arguments,1),k=this._callbacks[l];if(k){k=k.slice(0);for(var j=0,g=k.length;j<g;++j){k[j].apply(this,h)}}return this};f.prototype.listeners=function(g){this._callbacks=this._callbacks||{};return this._callbacks[g]||[]};f.prototype.hasListeners=function(g){return !!this.listeners(g).length}},{}],7:[function(b,c,a){c.exports=function(g,i,h){var f=0;var d=g.length;var j=arguments.length==3?h:g[f++];while(f<d){j=i.call(null,j,g[f],++f,g)}return j}},{}],8:[function(b,c,a){var d=b("component-emitter");d.prototype.trigger=d.prototype.emit;c.exports=d},{"component-emitter":4}],9:[function(b,c,a){c.exports=function(){return"undefined"==typeof window?"server":"browser"}},{}],10:[function(b,c,a){var f=b("../utils/each"),d=b("JSON2");c.exports=function(h){var g=[];f(h,function(j,i){if("string"!==typeof j){j=d.stringify(j)}g.push(i+"="+encodeURIComponent(j))});return"?"+g.join("&")}},{"../utils/each":21,JSON2:2}],11:[function(b,c,a){c.exports=function(){return new Date().getTimezoneOffset()*-60}},{}],12:[function(b,c,a){c.exports=function(){if("undefined"!==typeof window){if(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0){return 2000}}return 16000}},{}],13:[function(b,c,a){c.exports=function(){var d="undefined"==typeof window?this:window;if(d.XMLHttpRequest&&("file:"!=d.location.protocol||!d.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(f){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(f){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(f){}}return false}},{}],14:[function(b,c,a){c.exports=function(h,g,i){var f=i||function(){};if(g&&!g.ok){var d=g.body&&g.body.error_code;h=new Error(d?g.body.message:"Unknown error occurred");h.code=d?g.body.error_code:"UnknownError"}if(h){f(h,null)}else{f(null,g.body)}return}},{}],15:[function(f,b,g){var n=f("superagent");var l=f("../utils/each"),a=f("./get-xhr-object");b.exports=function(o,p){return function(q){var r=q.constructor.prototype.end;if("undefined"===typeof window){return}q.requestType=q.requestType||{};q.requestType.type=o;q.requestType.options=q.requestType.options||{async:true,success:{responseText:'{ "created": true }',status:201},error:{responseText:'{ "error_code": "ERROR", "message": "Request failed" }',status:404}};if(p){if("boolean"===typeof p.async){q.requestType.options.async=p.async}if(p.success){extend(q.requestType.options.success,p.success)}if(p.error){extend(q.requestType.options.error,p.error)}}q.end=function(u){var t=this,s=(this.requestType)?this.requestType.type:"xhr",w,v;if(("GET"!==t.method||"xhr"===s)&&t.requestType.options.async){r.call(t,u);return}w=t._query.join("&");v=t._timeout;t._callback=u||noop;if(v&&!t._timer){t._timer=setTimeout(function(){h.call(t)},v)}if(w){w=n.serializeObject(w);t.url+=~t.url.indexOf("?")?"&"+w:"?"+w}t.emit("request",t);if(!t.requestType.options.async){k.call(t)}else{if("jsonp"===s){j.call(t)}else{if("beacon"===s){i.call(t)}}}return t};return q}};function k(){var o=a();if(o){o.open("GET",this.url,false);o.send(null)}return this}function j(){var p=this,t=new Date().getTime(),o=document.createElement("script"),s=document.getElementsByTagName("head")[0],u="keenJSONPCallback",q=false;u+=t;while(u in window){u+="a"}window[u]=function(v){if(q===true){return}q=true;d.call(p,v);r()};o.src=p.url+"&jsonp="+u;s.appendChild(o);o.onreadystatechange=function(){if(q===false&&p.readyState==="loaded"){q=true;c.call(p);r()}};o.onerror=function(){if(q===false){q=true;c.call(p);r()}};function r(){window[u]=undefined;try{delete window[u]}catch(v){}s.removeChild(o)}}function i(){var p=this,o=document.createElement("img"),q=false;o.onload=function(){q=true;if("naturalHeight" in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height===0){this.onerror();return}}d.call(p)};o.onerror=function(){q=true;c.call(p)};o.src=p.url+"&c=clv1"}function d(p){var q=this.requestType.options["success"],o="";m.call(this,q);if(p){try{o=JSON.stringify(p)}catch(r){}}else{o=q.responseText}this.xhr.responseText=o;this.xhr.status=q.status;this.emit("end")}function c(){var o=this.requestType.options["error"];m.call(this,o);this.xhr.responseText=o.responseText;this.xhr.status=o.status;this.emit("end")}function h(){this.aborted=true;this.clearTimeout();this.emit("abort")}function m(o){this.xhr={getAllResponseHeaders:function(){return""},getResponseHeader:function(){return"application/json"},responseText:o.responseText,status:o.status};return this}},{"../utils/each":21,"./get-xhr-object":13,superagent:5}],16:[function(d,f,c){var b="undefined"!==typeof window?window:this;var h=b.Keen;var g=d("./helpers/emitter-shim");function a(i){this.configure(i||{});a.trigger("client",this)}a.debug=false;a.enabled=true;a.loaded=true;a.version="3.2.6";g(a);g(a.prototype);a.prototype.configure=function(i){var j=i||{};if(j.host){j.host.replace(/.*?:\/\//g,"")}if(j.protocol&&j.protocol==="auto"){j.protocol=location.protocol.replace(/:/g,"")}this.config={projectId:j.projectId,writeKey:j.writeKey,readKey:j.readKey,masterKey:j.masterKey,requestType:j.requestType||"jsonp",host:j.host||"api.keen.io/3.0",protocol:j.protocol||"https",globalProperties:null};if(a.debug){this.on("error",a.log)}this.trigger("ready")};a.prototype.projectId=function(i){if(!arguments.length){return this.config.projectId}this.config.projectId=(i?String(i):null);return this};a.prototype.masterKey=function(i){if(!arguments.length){return this.config.masterKey}this.config.masterKey=(i?String(i):null);return this};a.prototype.readKey=function(i){if(!arguments.length){return this.config.readKey}this.config.readKey=(i?String(i):null);return this};a.prototype.writeKey=function(i){if(!arguments.length){return this.config.writeKey}this.config.writeKey=(i?String(i):null);return this};a.prototype.url=function(i){if(!this.projectId()){this.trigger("error","Client is missing projectId property");return}return this.config.protocol+"://"+this.config.host+"/projects/"+this.projectId()+i};a.log=function(i){if(a.debug&&typeof console=="object"){console.log("[Keen IO]",i)}};a.noConflict=function(){b.Keen=h;return a};a.ready=function(i){if(a.loaded){i()}else{a.once("ready",i)}};f.exports=a},{"./helpers/emitter-shim":8}],17:[function(d,f,c){var h=d("superagent");var b=d("../helpers/get-query-string"),g=d("../helpers/superagent-handle-response"),a=d("../helpers/superagent-request-types");f.exports=function(j,m,l,n){var i=this.config.requestType,k=m||{};if(i==="beacon"){i="jsonp"}k.api_key=k.api_key||l;h.get(j+b(k)).use(a(i)).end(function(p,o){g(p,o,n);n=null})}},{"../helpers/get-query-string":10,"../helpers/superagent-handle-response":14,"../helpers/superagent-request-types":15,superagent:5}],18:[function(b,d,a){var c=b("../request");d.exports=function(i,j){var g=[],f=j,h;if(i instanceof Array){g=i}else{g.push(i)}h=new c(this,g,f).refresh();f=j=null;return h}},{"../request":20}],19:[function(c,a,d){var j=c("./utils/each"),h=c("./utils/extend"),g=c("./helpers/get-timezone-offset"),b=c("./helpers/get-query-string");var i=c("./helpers/emitter-shim");function f(){this.configure.apply(this,arguments)}i(f.prototype);f.prototype.configure=function(k,l){this.analysis=k;this.params=this.params||{};this.set(l);if(this.params.timezone===void 0){this.params.timezone=g()}return this};f.prototype.set=function(l){var k=this;j(l,function(n,m){var o=m,p=n;if(m.match(new RegExp("[A-Z]"))){o=m.replace(/([A-Z])/g,function(q){return"_"+q.toLowerCase()})}k.params[o]=p;if(p instanceof Array){j(p,function(r,q){if(r instanceof Array==false&&typeof r==="object"){j(r,function(t,s){if(s.match(new RegExp("[A-Z]"))){var u=s.replace(/([A-Z])/g,function(v){return"_"+v.toLowerCase()});delete k.params[o][q][s];k.params[o][q][u]=t}})}})}});return k};f.prototype.get=function(l){var k=l;if(k.match(new RegExp("[A-Z]"))){k=k.replace(/([A-Z])/g,function(m){return"_"+m.toLowerCase()})}if(this.params){return this.params[k]||null}};f.prototype.addFilter=function(m,k,l){this.params.filters=this.params.filters||[];this.params.filters.push({property_name:m,operator:k,property_value:l});return this};a.exports=f},{"./helpers/emitter-shim":8,"./helpers/get-query-string":10,"./helpers/get-timezone-offset":11,"./utils/each":21,"./utils/extend":22}],20:[function(c,b,d){var j=c("./utils/each"),h=c("./utils/extend"),g=c("./utils/sendQuery");var f=c("./");var i=c("./helpers/emitter-shim");function a(l,m,n){var k=n;this.config={timeout:300*1000};this.configure(l,m,k);k=n=null}i(a.prototype);a.prototype.configure=function(l,m,n){var k=n;h(this,{client:l,queries:m,data:{},callback:k});k=n=null;return this};a.prototype.timeout=function(k){if(!arguments.length){return this.config.timeout}this.config.timeout=(!isNaN(parseInt(k))?parseInt(k):null);return this};a.prototype.refresh=function(){var m=this,k=0,l=[],o=false;var n=function(r,q,p){if(r){m.trigger("error",r);if(m.callback){m.callback(r,null)}o=true;return}l[p]=q;k++;if(k==m.queries.length&&!o){m.data=(m.queries.length==1)?l[0]:l;m.trigger("complete",null,m.data);if(m.callback){m.callback(null,m.data)}}};j(m.queries,function(s,q){var t;var p=function(v,u){n(v,u,q)};if(s instanceof f.Query){t="/queries/"+s.analysis;g.call(m,t,s.params,p)}else{if(Object.prototype.toString.call(s)==="[object String]"){t="/saved_queries/"+encodeURIComponent(s)+"/result";g.call(m,t,null,p)}else{var r={statusText:"Bad Request",responseText:{message:"Error: Query "+(+q+1)+" of "+m.queries.length+" for project "+m.client.projectId()+" is not a valid request"}};m.trigger("error",r.responseText.message);if(m.callback){m.callback(r.responseText.message,null)}}}});return this};b.exports=a},{"./":16,"./helpers/emitter-shim":8,"./utils/each":21,"./utils/extend":22,"./utils/sendQuery":24}],21:[function(b,c,a){c.exports=function(g,d,f){var h;if(!g){return 0}f=!f?g:f;if(g instanceof Array){for(h=0;h<g.length;h++){if(d.call(f,g[h],h,g)===false){return 0}}}else{for(h in g){if(g.hasOwnProperty(h)){if(d.call(f,g[h],h,g)===false){return 0}}}}return 1}},{}],22:[function(b,c,a){c.exports=function(f){for(var d=1;d<arguments.length;d++){for(var g in arguments[d]){f[g]=arguments[d][g]}}return f}},{}],23:[function(b,c,a){function d(l){var f={},g,i=/\+/g,h=/([^&=]+)=?([^&]*)/g,k=function(m){return decodeURIComponent(m.replace(i," "))},j=l.split("?")[1];while(!!(g=h.exec(j))){f[k(g[1])]=k(g[2])}return f}c.exports=d},{}],24:[function(f,c,h){var g=f("superagent");var j=f("../helpers/get-context"),d=f("../helpers/get-query-string"),b=f("../helpers/get-url-max-length"),a=f("../helpers/get-xhr-object"),i=f("../helpers/superagent-request-types"),k=f("../helpers/superagent-handle-response");c.exports=function(q,r,s){var o=this,n=this.client.url(q),m=this.client.config.requestType,l=s;s=null;if(!o.client.projectId()){o.client.trigger("error","Query not sent: Missing projectId property");return}if(!o.client.readKey()){o.client.trigger("error","Query not sent: Missing readKey property");return}if(a()||j()==="server"){g.post(n).set("Content-Type","application/json").set("Authorization",o.client.readKey()).timeout(o.timeout()).send(r||{}).end(p)}else{extend(r,{api_key:o.client.readKey()});n+=d(r);if(n.length<b()){g.get(n).timeout(o.timeout()).use(i("jsonp")).end(p)}else{o.client.trigger("error","Query not sent: URL length exceeds current browser limit, and XHR (POST) is not supported.")}}function p(u,t){k(u,t,l);l=s=null}return}},{"../helpers/get-context":9,"../helpers/get-query-string":10,"../helpers/get-url-max-length":12,"../helpers/get-xhr-object":13,"../helpers/superagent-handle-response":14,"../helpers/superagent-request-types":15,superagent:5}],25:[function(b,c,a){(function(d){(function(i){if(typeof define==="function"&&define.amd){define("keen",[],function(){return i()})}if(typeof a==="object"&&typeof c!=="undefined"){c.exports=i()}var h=null;if(typeof window!=="undefined"){h=window}else{if(typeof d!=="undefined"){h=d}else{if(typeof self!=="undefined"){h=self}}}if(h){h.Keen=i()}})(function(){var f=b("./core"),g=b("./core/utils/extend");g(f.prototype,{get:b("./core/lib/get"),run:b("./core/lib/run")});f.Query=b("./core/query");f.Request=b("./core/request");f.utils={each:b("./core/utils/each"),extend:g,parseParams:b("./core/utils/parseParams"),};f.emit("ready");c.exports=f;return f})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core":16,"./core/lib/get":17,"./core/lib/run":18,"./core/query":19,"./core/request":20,"./core/utils/each":21,"./core/utils/extend":22,"./core/utils/parseParams":23}]},{},[25]);