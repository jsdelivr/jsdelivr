"use strict";function Lightbox(){function v(){return window.innerHeight||document.documentElement.offsetHeight}function w(){return window.innerWidth||document.documentElement.offsetWidth}function x(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)}function y(a,b){return a&&b?new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className):void 0}function z(a,b){return a&&b?(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)"),""),a):void 0}function A(a,b){return a&&b?(y(a,b)||(a.className+=" "+b),a):void 0}function B(a){return"undefined"!=typeof a}function C(a,b){if(!a||!B(a))return!1;var c;return a.getAttribute?c=a.getAttribute(b):a.getAttributeNode&&(c=a.getAttributeNode(b).value),B(c)&&""!==c?c:!1}function D(a,b){if(!a||!B(a))return!1;var c;return a.getAttribute?c=a.getAttribute(b):a.getAttributeNode&&(c=a.getAttributeNode(b).value),"string"==typeof c}function E(a){x(a,"click",function(b){g=C(a,"data-jslghtbx-group")||!1,h=a,O(a,!1,!1,!1)},!1)}function F(a){a.stopPropagation?a.stopPropagation():a.returnValue=!1}function G(b){for(var c=[],d=0;d<a.thumbnails.length;d++)C(a.thumbnails[d],"data-jslghtbx-group")===b&&c.push(a.thumbnails[d]);return c}function H(a,b){for(var c=G(b),d=0;d<c.length;d++)if(C(a,"src")===C(c[d],"src")&&C(a,"data-jslghtbx")===C(c[d],"data-jslghtbx"))return d}function I(){if(g){var a=new Image,b=new Image,c=H(h,g);c===j.length-1?(a.src=j[j.length-1].src,b.src=j[0].src):0===c?(a.src=j[j.length-1].src,b.src=j[1].src):(a.src=j[c-1].src,b.src=j[c+1].src)}}function J(){if(!b){K();var d=function(){if(A(a.box,"jslghtbx-loading"),!c&&"number"==typeof a.opt.loadingAnimation){var b=0;m=setInterval(function(){A(n[b],"jslghtbx-active"),setTimeout(function(){z(n[b],"jslghtbx-active")},a.opt.loadingAnimation),b=b>=n.length?0:b+=1},a.opt.loadingAnimation)}};o=setTimeout(d,500)}}function K(){if(!b&&(z(a.box,"jslghtbx-loading"),!c&&"string"!=typeof a.opt.loadingAnimation&&a.opt.loadingAnimation)){clearInterval(m);for(var d=0;d<n.length;d++)z(n[d],"jslghtbx-active")}}function L(){if(!p){if(p=document.createElement("span"),A(p,"jslghtbx-next"),a.opt.nextImg){var b=document.createElement("img");b.setAttribute("src",a.opt.nextImg),p.appendChild(b)}else A(p,"jslghtbx-no-img");x(p,"click",function(b){F(b),a.next()},!1),a.box.appendChild(p)}if(A(p,"jslghtbx-active"),!q){if(q=document.createElement("span"),A(q,"jslghtbx-prev"),a.opt.prevImg){var c=document.createElement("img");c.setAttribute("src",a.opt.prevImg),q.appendChild(c)}else A(q,"jslghtbx-no-img");x(q,"click",function(b){F(b),a.prev()},!1),a.box.appendChild(q)}A(q,"jslghtbx-active")}function M(){if(a.opt.responsive&&p&&q){var b=v()/2-p.offsetHeight/2;p.style.top=b+"px",q.style.top=b+"px"}}function N(c){function f(a){return"boolean"==typeof a?a:!0}if(c||(c={}),a.opt={boxId:c.boxId||!1,controls:f(c.controls),dimensions:f(c.dimensions),captions:f(c.captions),prevImg:"string"==typeof c.prevImg?c.prevImg:!1,nextImg:"string"==typeof c.nextImg?c.nextImg:!1,hideCloseBtn:c.hideCloseBtn||!1,closeOnClick:"boolean"==typeof c.closeOnClick?c.closeOnClick:!0,loadingAnimation:void 0===c.loadingAnimation?!0:c.loadingAnimation,animElCount:c.animElCount||4,preload:f(c.preload),carousel:f(c.carousel),animation:c.animation||400,nextOnClick:f(c.nextOnClick),responsive:f(c.responsive),maxImgSize:c.maxImgSize||.8,keyControls:f(c.keyControls),hideOverflow:c.hideOverflow||!0,onopen:c.onopen||!1,onclose:c.onclose||!1,onload:c.onload||!1,onresize:c.onresize||!1,onloaderror:c.onloaderror||!1},a.opt.boxId)a.box=document.getElementById(a.opt);else if(!a.box&&!document.getElementById("jslghtbx")){var g=document.createElement("div");g.setAttribute("id","jslghtbx"),g.setAttribute("class","jslghtbx"),a.box=g,d.appendChild(a.box)}if(a.box.innerHTML=e,b&&A(a.box,"jslghtbx-ie8"),a.wrapper=document.getElementById("jslghtbx-contentwrapper"),!a.opt.hideCloseBtn){var h=document.createElement("span");h.setAttribute("id","jslghtbx-close"),h.setAttribute("class","jslghtbx-close"),h.innerHTML="X",a.box.appendChild(h),x(h,"click",function(b){F(b),a.close()},!1)}if(!b&&a.opt.closeOnClick&&x(a.box,"click",function(b){a.close()},!1),"string"==typeof a.opt.loadingAnimation)l=document.createElement("img"),l.setAttribute("src",a.opt.loadingAnimation),A(l,"jslghtbx-loading-animation"),a.box.appendChild(l);else if(a.opt.loadingAnimation){a.opt.loadingAnimation="number"==typeof a.opt.loadingAnimation?a.opt.loadingAnimation:200,l=document.createElement("div"),A(l,"jslghtbx-loading-animation");for(var i=0;i<a.opt.animElCount;)n.push(l.appendChild(document.createElement("span"))),i++;a.box.appendChild(l)}a.opt.responsive?(x(window,"resize",function(b){a.resize()},!1),A(a.box,"jslghtbx-nooverflow")):z(a.box,"jslghtbx-nooverflow"),a.opt.keyControls&&x(document,"keydown",function(b){k&&(F(b),39===b.keyCode?a.next():37===b.keyCode?a.prev():27===b.keyCode&&a.close())},!1)}function O(e,l,m,n){if(!e&&!l)return!1;g=l||g||C(e,"data-jslghtbx-group"),g&&(j=G(g),"boolean"!=typeof e||e||(e=j[0])),i.img=new Image,h=e;var p;p="string"==typeof e?e:C(e,"data-jslghtbx")?C(e,"data-jslghtbx"):C(e,"src"),f=!1,k||("number"==typeof a.opt.animation&&A(i.img,"jslghtbx-animate-transition jslghtbx-animate-init"),k=!0,a.opt.onopen&&a.opt.onopen()),a.opt&&B(a.opt.hideOverflow)&&!a.opt.hideOverflow||d.setAttribute("style","overflow: hidden"),a.box.setAttribute("style","padding-top: 0"),a.wrapper.innerHTML="",a.wrapper.appendChild(i.img),a.opt.animation&&A(a.wrapper,"jslghtbx-animate");var q=C(e,"data-jslghtbx-caption");if(q&&a.opt.captions){var r=document.createElement("p");r.setAttribute("class","jslghtbx-caption"),r.innerHTML=q,a.wrapper.appendChild(r)}A(a.box,"jslghtbx-active"),b&&A(a.wrapper,"jslghtbx-active"),a.opt.controls&&j.length>1&&(L(),M()),i.img.onerror=function(){a.opt.onloaderror&&a.opt.onloaderror(n)},i.img.onload=function(){if(i.originalWidth=this.naturalWidth||this.width,i.originalHeight=this.naturalHeight||this.height,b||c){var d=new Image;d.setAttribute("src",p),i.originalWidth=d.width,i.originalHeight=d.height}var e=setInterval(function(){y(a.box,"jslghtbx-active")&&(A(a.wrapper,"jslghtbx-wrapper-active"),"number"==typeof a.opt.animation&&A(i.img,"jslghtbx-animate-transition"),m&&m(),K(),clearTimeout(o),a.opt.preload&&I(),a.opt.nextOnClick&&(A(i.img,"jslghtbx-next-on-click"),x(i.img,"click",function(b){F(b),a.next()},!1)),a.opt.onload&&a.opt.onload(n),clearInterval(e),a.resize())},10)},i.img.setAttribute("src",p),J()}var l,m,o,r,s,t,u,a=this,b=!1,c=!1,d=document.getElementsByTagName("body")[0],e='<div class="jslghtbx-contentwrapper" id="jslghtbx-contentwrapper" ></div>',f=!1,g=!1,h=!1,i={},j=[],k=!1,n=[],p=!1,q=!1;a.opt={},a.box=!1,a.wrapper=!1,a.thumbnails=[],a.load=function(d){navigator.appVersion.indexOf("MSIE 8")>0&&(b=!0),navigator.appVersion.indexOf("MSIE 9")>0&&(c=!0),N(d);for(var e=document.getElementsByTagName("img"),f=0;f<e.length;f++)D(e[f],"data-jslghtbx")&&(a.thumbnails.push(e[f]),E(e[f]))},a.open=function(a,b){a&&b&&(b=!1),O(a,b,!1,!1)},a.resize=function(){if(i.img){r=w(),s=v();var b=a.box.offsetWidth,c=a.box.offsetHeight;!f&&i.img&&i.img.offsetWidth&&i.img.offsetHeight&&(f=i.img.offsetWidth/i.img.offsetHeight),Math.floor(b/f)>c?(t=c*f,u=c):(t=b,u=b/f),t=Math.floor(t*a.opt.maxImgSize),u=Math.floor(u*a.opt.maxImgSize),(a.opt.dimensions&&u>i.originalHeight||a.opt.dimensions&&t>i.originalWidth)&&(u=i.originalHeight,t=i.originalWidth),i.img.setAttribute("width",t),i.img.setAttribute("height",u),i.img.setAttribute("style","margin-top:"+(v()-u)/2+"px"),setTimeout(M,200),a.opt.onresize&&a.opt.onresize()}},a.next=function(){if(g){var b=H(h,g)+1;if(j[b])h=j[b];else{if(!a.opt.carousel)return;h=j[0]}"number"==typeof a.opt.animation?(z(i.img,"jslghtbx-animating-next"),setTimeout(function(){var b=function(){setTimeout(function(){A(i.img,"jslghtbx-animating-next")},a.opt.animation/2)};O(h,!1,b,"next")},a.opt.animation/2)):O(h,!1,!1,"next")}},a.prev=function(){if(g){var b=H(h,g)-1;if(j[b])h=j[b];else{if(!a.opt.carousel)return;h=j[j.length-1]}"number"==typeof a.opt.animation?(z(i.img,"jslghtbx-animating-prev"),setTimeout(function(){var b=function(){setTimeout(function(){A(i.img,"jslghtbx-animating-next")},a.opt.animation/2)};O(h,!1,b,"prev")},a.opt.animation/2)):O(h,!1,!1,"prev")}},a.close=function(){g=!1,h=!1,i={},j=[],k=!1,z(a.box,"jslghtbx-active"),z(a.wrapper,"jslghtbx-wrapper-active"),z(p,"jslghtbx-active"),z(q,"jslghtbx-active"),a.box.setAttribute("style","padding-top: 0px"),K(),b&&a.box.setAttribute("style","display: none"),a.opt&&B(a.opt.hideOverflow)&&!a.opt.hideOverflow||d.setAttribute("style","overflow: auto"),a.opt.onclose&&a.opt.onclose()}}
