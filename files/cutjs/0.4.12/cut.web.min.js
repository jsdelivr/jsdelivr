/*
 * CutJS 0.4.12
 * Copyright (c) 2015 Ali Shakiba, Piqnt LLC
 * Available under the MIT license
 * @license
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.Cut=t()}}(function(){return function t(i,e,n){function s(o,h){if(!e[o]){if(!i[o]){var a="function"==typeof require&&require;if(!h&&a)return a(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var _=e[o]={exports:{}};i[o][0].call(_.exports,function(t){var e=i[o][1][t];return s(e?e:t)},_,_.exports,t,i,e,n)}return e[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,i){i.exports=t("../lib/main"),i.exports.Mouse=t("../lib/mouse"),t("../lib/loader.web")},{"../lib/loader.web":4,"../lib/main":5,"../lib/mouse":6}],2:[function(t,i){function e(){if(!(this instanceof e)){if("function"==typeof arguments[0])return e.Root.add.apply(e.Root,arguments);if("object"==typeof arguments[0])return e.Texture.add.apply(e.Texture,arguments)}e._stats.create++,this._id="",this._visible=!0,this._parent=null,this._next=null,this._prev=null,this._first=null,this._last=null,this._pin=new e.Pin(this),this._cutouts=[],this._alpha=1,this._tickBefore=null,this._tickAfter=null,this._attrs=null,this._listeners=null,this._flags=null}"undefined"==typeof DEBUG&&(DEBUG=!0),e._create=function(){function t(){}return"function"==typeof Object.create?function(t,i){return Object.create.call(Object,t,i)}:function(i,e){if(e)throw Error("Second argument is not supported!");if(!i||"object"!=typeof i)throw Error("Invalid prototype!");return t.prototype=i,new t}}(),e._extend=function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t},e._ensure=function(t){if(t&&t instanceof e)return t;throw"Invalid node: "+t},e._now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return+new Date},e._isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},e._TS=0,e._stats={create:0,tick:0,node:0,cutout:0},e.create=function(){return new e},e.prototype.MAX_ELAPSE=1/0,e.prototype._tick=function(t,i,n){if(this._visible){t>this.MAX_ELAPSE&&(t=this.MAX_ELAPSE),this._pin.tick();var s=!1;if(null!==this._tickBefore)for(var r=0,o=this._tickBefore.length;o>r;r++)e._stats.tick++,s=this._tickBefore[r].call(this,t,i,n)===!0||s;for(var h,a=this._first;h=a;)a=h._next,s=h._tick(t,i,n)===!0?!0:s;if(null!==this._tickAfter)for(var r=0,o=this._tickAfter.length;o>r;r++)e._stats.tick++,s=this._tickAfter[r].call(this,t,i,n)===!0||s;return s}},e.prototype.tick=function(t,i){"function"==typeof t&&(i?(null===this._tickBefore&&(this._tickBefore=[]),this._tickBefore.push(t)):(null===this._tickAfter&&(this._tickAfter=[]),this._tickAfter.push(t)))},e.prototype.untick=function(t){if("function"==typeof t){var i;null!==this._tickBefore&&(i=this._tickBefore.indexOf(t))>=0&&this._tickBefore.splice(i,1),null!==this._tickAfter&&(i=this._tickAfter.indexOf(t))>=0&&this._tickAfter.splice(i,1)}},e.prototype.render=function(t){if(this._visible){e._stats.node++;var i=this._pin.absoluteMatrix();t.setTransform(i.a,i.b,i.c,i.d,i.e,i.f),this._alpha=this._pin._alpha*(this._parent?this._parent._alpha:1);var n=this._pin._textureAlpha*this._alpha;t.globalAlpha!=n&&(t.globalAlpha=n);for(var s=this._cutouts.length,r=0;s>r;r++)this._cutouts[r].render(t);t.globalAlpha!=this._alpha&&(t.globalAlpha=this._alpha);for(var o,h=this._first;o=h;)h=o._next,o.render(t)}},e.prototype.toString=function(){return"["+this._id+"]"},e.prototype.id=function(t){return"undefined"==typeof t?this._id:(this._id=t,this)},e.prototype.attr=function(t,i){return"undefined"==typeof i?null!==this._attrs?this._attrs[t]:void 0:((null!==this._attrs?this._attrs:this._attrs={})[t]=i,this)},e.prototype.on=e.prototype.listen=function(t,i){if(t=this._onoff(t,i,!0))for(var e=0;e<t.length;e++){var n=t[e];this._listeners[n]=this._listeners[n]||[],this._listeners[n].push(i),this._flag(n,!0)}return this},e.prototype.off=function(t,i){if(t=this._onoff(t,i,!1))for(var e=0;e<t.length;e++){var n,s=t[e],r=this._listeners[s];r&&(n=r.indexOf(i))>=0&&(r.splice(n,1),r.length||delete this._listeners[s],this._flag(s,!1))}return this},e.prototype._onoff=function(t,i,n){if(!t||!t.length||"function"!=typeof i)return!1;if(!(t=(e._isArray(t)?t.join(" "):t).match(/\S+/g)))return!1;if(null===this._listeners){if(!n)return!1;this._listeners={}}return t},e.prototype.listeners=function(t){return this._listeners&&this._listeners[t]},e.prototype.publish=function(t,i){var e=this.listeners(t);if(!e||!e.length)return 0;for(var n=0;n<e.length;n++)e[n].apply(this,i);return e.length},e.prototype.trigger=function(t,i){return this.publish(t,i),this},e.prototype.visit=function(t,i){var e=t.reverse,n=t.visible;if(!t.start||!t.start(this,i)){for(var s,r=e?this.last(n):this.first(n);s=r;)if(r=e?s.prev(n):s.next(n),s.visit(t,i))return!0;return t.end&&t.end(this,i)}},e.prototype.visible=function(t){return"undefined"==typeof t?this._visible:(this._visible=t,this._parent&&(this._parent._ts_children=e._TS++),this._ts_pin=e._TS++,this.touch(),this)},e.prototype.hide=function(){return this.visible(!1)},e.prototype.show=function(){return this.visible(!0)},e.prototype.parent=function(){return this._parent},e.prototype.next=function(t){for(var i=this._next;i&&t&&!i._visible;)i=i._next;return i},e.prototype.prev=function(t){for(var i=this._prev;i&&t&&!i._visible;)i=i._prev;return i},e.prototype.first=function(t){for(var i=this._first;i&&t&&!i._visible;)i=i._next;return i},e.prototype.last=function(t){for(var i=this._last;i&&t&&!i._visible;)i=i._prev;return i},e.prototype.append=function(){for(var t=0;t<arguments.length;t++)e._ensure(arguments[t]),arguments[t].appendTo(this);return this},e.prototype.prepend=function(){for(var t=0;t<arguments.length;t++)e._ensure(arguments[t]),arguments[t].prependTo(this);return this},e.prototype.appendTo=function(t){return e._ensure(t),this.remove(),t._last&&(t._last._next=this,this._prev=t._last),this._parent=t,t._last=this,t._first||(t._first=this),this._parent._flag(this,!0),this._ts_parent=e._TS++,t._ts_children=e._TS++,t.touch(),this},e.prototype.prependTo=function(t){return e._ensure(t),this.remove(),t._first&&(t._first._prev=this,this._next=t._first),this._parent=t,t._first=this,t._last||(t._last=this),this._parent._flag(this,!0),this._ts_parent=e._TS++,t._ts_children=e._TS++,t.touch(),this},e.prototype.insertNext=function(){if(arguments.length)for(var t=0;t<arguments.length;t++)e._ensure(arguments[t]),arguments[t]&&arguments[t].insertAfter(this);return this},e.prototype.insertPrev=function(){if(arguments.length)for(var t=0;t<arguments.length;t++)e._ensure(arguments[t]),arguments[t]&&arguments[t].insertBefore(this);return this},e.prototype.insertBefore=function(t){e._ensure(t),this.remove();var i=t._parent,n=t._prev;return t._prev=this,n&&(n._next=this)||i&&(i._first=this),this._parent=i,this._prev=n,this._next=t,this._parent._flag(this,!0),this._ts_parent=e._TS++,this.touch(),this},e.prototype.insertAfter=function(t){e._ensure(t),this.remove();var i=t._parent,n=t._next;return t._next=this,n&&(n._prev=this)||i&&(i._last=this),this._parent=i,this._prev=t,this._next=n,this._parent._flag(this,!0),this._ts_parent=e._TS++,this.touch(),this},e.prototype.remove=function(){if(arguments.length){for(var t=0;t<arguments.length;t++)e._ensure(arguments[t]),arguments[t]&&arguments[t].remove();return this}return this._prev&&(this._prev._next=this._next),this._next&&(this._next._prev=this._prev),this._parent&&(this._parent._first===this&&(this._parent._first=this._next),this._parent._last===this&&(this._parent._last=this._prev),this._parent._flag(this,!1),this._parent._ts_children=e._TS++,this._parent.touch()),this._prev=this._next=this._parent=null,this._ts_parent=e._TS++,this},e.prototype.empty=function(){for(var t,i=this._first;t=i;)i=t._next,t._prev=t._next=t._parent=null,this._flag(t,!1);return this._first=this._last=null,this._ts_children=e._TS++,this.touch(),this},e.prototype._flag=function(t,i){if("undefined"==typeof i)return null!==this._flags&&this._flags[t]||0;if("string"==typeof t&&(i?(this._flags=this._flags||{},!this._flags[t]&&this._parent&&this._parent._flag(t,!0),this._flags[t]=(this._flags[t]||0)+1):this._flags&&this._flags[t]>0&&(1==this._flags[t]&&this._parent&&this._parent._flag(t,!1),this._flags[t]=this._flags[t]-1)),"object"==typeof t&&t._flags)for(var e in t._flags)t._flags[e]>0&&this._flag(e,i);return this},e.prototype.touch=function(){return this._ts_touch=e._TS++,this._parent&&this._parent.touch(),this},e.prototype.pin=function(t,i){return"object"==typeof t?(this._pin.set(t),this):"string"==typeof t?"undefined"==typeof i?this._pin.get(t):(this._pin.set(t,i),this):"undefined"==typeof t?this._pin:void 0},e.prototype.matrix=function(){return this._pin.absoluteMatrix(this,this._parent?this._parent._pin:null)},e.image=function(t){var i=new e.Image;return t&&i.image(t),i},e.Image=function(){e.Image._super.call(this)},e.Image._super=e,e.Image.prototype=e._create(e.Image._super.prototype),e.Image.prototype.constructor=e.Image,e.Image.prototype.setImage=function(t,i,e){return this.image(t,i,e)},e.Image.prototype.image=function(t){return this._cutouts[0]=e.cutout(t),this._cutouts.length=1,this.pin("width",this._cutouts[0]?this._cutouts[0].dWidth():0),this.pin("height",this._cutouts[0]?this._cutouts[0].dHeight():0),this._cutout=this._cutouts[0].clone(),this},e.Image.prototype.cropX=function(t,i){return this._cutouts[0].sWidth(t),this._cutouts[0].sX(i),this.image(this._cutouts[0])},e.Image.prototype.cropY=function(t,i){return this._cutouts[0].sHeight(t),this._cutouts[0].sY(i),this.image(this._cutouts[0])},e.Image.prototype.tile=function(t){return this.untick(this._repeatTicker),this.tick(this._repeatTicker=function(){this._repeat(t,!1)}),this},e.Image.prototype.stretch=function(t){return this.untick(this._repeatTicker),this.tick(this._repeatTicker=function(){this._repeat(t,!0)}),this},e.Image.prototype._slice=function(t){return this._cutouts[t]||(this._cutouts[t]=this._cutout.clone())},e.Image.prototype._repeat=function(t,i){if(this._mo_stretch!=this._pin._ts_transform){this._mo_stretch=this._pin._ts_transform;var e=this._cutout._left,n=this._cutout._right,s=this._cutout._top,r=this._cutout._bottom,o=this._cutout._width-e-n,h=this._cutout._height-s-r,a=this.pin("width"),u=this.pin("height");a=t?a:Math.max(a-e-n,0),u=t?u:Math.max(u-s-r,0);var _=0;if(s&&e&&this._slice(_++).sWidth(e).sX(0).sHeight(s).sY(0).dX(0).dY(0),r&&e&&this._slice(_++).sWidth(e).sX(0).sHeight(r).sY(h+s).dX(0).dY(u+s),s&&n&&this._slice(_++).sWidth(n).sX(o+e).sHeight(s).sY(0).dX(a+e).dY(0),r&&n&&this._slice(_++).sWidth(n).sX(o+e).sHeight(r).sY(h+s).dX(a+e).dY(u+s),i)s&&this._slice(_++).sWidth(o).sX(e).sHeight(s).sY(0).dX(e).dY(0).dWidth(a),r&&this._slice(_++).sWidth(o).sX(e).sHeight(r).sY(h+s).dX(e).dY(u+s).dWidth(a),e&&this._slice(_++).sWidth(e).sX(0).sHeight(h).sY(s).dX(0).dY(s).dHeight(u),n&&this._slice(_++).sWidth(n).sX(o+e).sHeight(h).sY(s).dX(a+e).dY(s).dHeight(u),this._slice(_++).sWidth(o).sX(e).sHeight(h).sY(s).dX(e).dY(s).dWidth(a).dHeight(u);else for(var f=e,c=a;c>0;){var p=Math.min(o,c);c-=o;for(var l=s,d=u;d>0;){var g=Math.min(h,d);d-=h,this._slice(_++).sWidth(p).sX(e).sHeight(g).sY(s).dX(f).dY(l),0>=c&&(e&&this._slice(_++).sWidth(e).sX(0).sHeight(g).sY(s).dX(0).dY(l),n&&this._slice(_++).sWidth(n).sX(o+e).sHeight(g).sY(s).dX(f+p).dY(l)),l+=g}s&&this._slice(_++).sWidth(p).sX(e).sHeight(s).sY(0).dX(f).dY(0),r&&this._slice(_++).sWidth(p).sX(e).sHeight(r).sY(h+s).dX(f).dY(l),f+=p}this._cutouts.length=_}},e.anim=function(t,i){var n=(new e.Anim).frames(t).gotoFrame(0);return i&&n.fps(i),n},e.Anim=function(){e.Anim._super.call(this),this._fps=e.Anim.FPS,this._ft=1e3/this._fps,this._time=-1,this._repeat=0,this._frame=0,this._frames=[],this._labels={};var t=0;this.tick(function(i,e,n){if(!(this._time<0||this._frames.length<=1)){var s=t!=n;if(t=e,s)return!0;if(this._time+=i,this._time<this._ft)return!0;var r=this._time/this._ft|0;return this._time-=r*this._ft,this.moveFrame(r),this._repeat>0&&(this._repeat-=r)<=0?(this.stop(),this._callback&&this._callback(),!1):!0}},!1)},e.Anim._super=e,e.Anim.prototype=e._create(e.Anim._super.prototype),e.Anim.prototype.constructor=e.Anim,e.Anim.FPS=22,e.Anim.prototype.fps=function(t){return"undefined"==typeof t?this._fps:(this._fps=t||e.Anim.FPS,this._ft=1e3/this._fps,this)},e.Anim.prototype.setFrames=function(t,i,e){return this.frames(t,i,e)},e.Anim.prototype.frames=function(t){if(this._frame=0,this._frames=[],this._labels={},t=e.cutout(t,!0),t&&t.length)for(var i=0;i<t.length;i++){var n=t[i];this._frames.push(n),this._labels[n._name]=i}return this.touch(),this},e.Anim.prototype.length=function(){return this._frames?this._frames.length:0},e.Anim.prototype.gotoFrame=function(t,i){return t=0|e.Math.rotate(t,this._frames.length),this._frame=t,i=i||!this._cutouts[0],this._cutouts[0]=this._frames[this._frame],i&&(this.pin("width",this._cutouts[0].dWidth()),this.pin("height",this._cutouts[0].dHeight())),this._ts_frame=e._TS++,this.touch(),this},e.Anim.prototype.moveFrame=function(t){return this.gotoFrame(this._frame+t)},e.Anim.prototype.gotoLabel=function(t,i){return this.gotoFrame(this._labels[t]||0,i)},e.Anim.prototype.repeat=function(t,i){return this._repeat=t*this._frames.length-1,this._callback=i,this.play(),this},e.Anim.prototype.play=function(t){return"undefined"!=typeof t?(this.gotoFrame(t),this._time=0):this._time<0&&(this._time=0),this.touch(),this},e.Anim.prototype.stop=function(t){return this._time=-1,"undefined"!=typeof t&&this.gotoFrame(t),this},e.string=function(t){return(new e.String).frames(t)},e.String=function(){e.String._super.call(this),this.row()},e.String._super=e,e.String.prototype=e._create(e.String._super.prototype),e.String.prototype.constructor=e.String,e.String.prototype.setFont=function(t,i,e){return this.frames(t,i,e)},e.String.prototype.frames=function(t){return"string"==typeof t?this._frames=function(i){return t+i}:"function"==typeof t&&(this._frames=t),this},e.String.prototype.setValue=function(t,i,e){return this.value(t,i,e)},e.String.prototype.value=function(t){if("undefined"==typeof t)return this._value;if(this._value===t)return this;this._value=t,"string"==typeof t||e._isArray(t)||(t+="");for(var i=this._first,n=0;n<t.length;n++){var s=this._frames(t[n]);i?i.image(s).show():i=e.image(s).appendTo(this),i=i._next}for(;i;)i.hide(),i=i._next;return this},e.row=function(t){return e.create().row(t)},e.prototype.row=function(t){return this.sequence("row",t),this},e.column=function(t){return e.create().column(t)},e.prototype.column=function(t){return this.sequence("column",t),this},e.sequence=function(t,i){return(new e.create).sequence(t,i)},e.prototype.sequence=function(t,i){return this._padding=this._padding||0,this._spacing=this._spacing||0,this.untick(this._layoutTicker),this._layoutTicker=function(){if(this._mo_seq!=this._ts_touch){this._mo_seq=this._ts_touch;var e=this._mo_seqAlign!=this._ts_children;this._mo_seqAlign=this._ts_children;for(var n,s=0,r=0,o=this.first(!0),h=!0;n=o;){o=n.next(!0),n._pin.relativeMatrix();var a=n._pin._boxWidth,u=n._pin._boxHeight;"column"==t?(!h&&(r+=this._spacing),n.pin("offsetY")!=r&&n.pin("offsetY",r),s=Math.max(s,a),r+=u,e&&n.pin("alignX",i)):"row"==t&&(!h&&(s+=this._spacing),n.pin("offsetX")!=s&&n.pin("offsetX",s),s+=a,r=Math.max(r,u),e&&n.pin("alignY",i)),h=!1}s+=2*this._padding,r+=2*this._padding,this.pin("width")!=s&&this.pin("width",s),this.pin("height")!=r&&this.pin("height",r)}},this.tick(this._layoutTicker),this},e.box=function(){return(new e.create).box()},e.prototype.box=function(){return this._boxTicker?this:(this._padding=this._padding||0,this._boxTicker=function(){if(this._mo_box!=this._ts_touch){this._mo_box=this._ts_touch;for(var t,i=0,e=0,n=this.first(!0);t=n;){n=t.next(!0),t._pin.relativeMatrix();var s=t._pin._boxWidth,r=t._pin._boxHeight;i=Math.max(i,s),e=Math.max(e,r)}i+=2*this._padding,e+=2*this._padding,this.pin("width")!=i&&this.pin("width",i),this.pin("height")!=e&&this.pin("height",e)}},this.tick(this._boxTicker),this)},e.prototype.padding=function(t){return this._padding=t,this},e.prototype.spacing=function(t){return this._spacing=t,this},e._config={},e.config=function(){return 1===arguments.length&&"string"==typeof arguments[0]?e._config[arguments[0]]:(1===arguments.length&&"object"==typeof arguments[0]&&e._extend(e._config,arguments[0]),void(2===arguments.length&&"string"==typeof arguments[0]&&e._config[(arguments[0],arguments[1])]))},e.start=function(t){DEBUG&&console.log("Starting..."),t=e._extend({},e._config,t),e.Texture.start(t["image-loader"],function(){e.Root.start(t["app-loader"])})},e.pause=function(){e.Root.pause()},e.resume=function(){e.Root.resume()},e.cutout=function(t,i){return e.Texture.select(t,i)},e.Root=function(t,i){e.Root._super.call(this),this._paused=!0;var n=this,s=function(){if(n._paused!==!0){e._stats.tick=e._stats.node=e._stats.cutout=0;var t=e._now(),s=n._lastTime||t,r=t-s;n._lastTime=t;var o=n._tick(r,t,s);n._mo_touch!=n._ts_touch?(n._mo_touch=n._ts_touch,i.call(n),n.request()):o?n.request():n.pause(),e._stats.fps=1e3/(e._now()-t)}};this.request=function(){t(s)}},e.Root._super=e,e.Root.prototype=e._create(e.Root._super.prototype),e.Root.prototype.constructor=e.Root,e.Root.prototype.start=function(){return this.resume()},e.Root.prototype.resume=function(t){return(this._paused||t)&&(this._paused=!1,this.request()),this},e.Root.prototype.pause=function(){return this._paused=!0,this},e.Root.prototype.touch=function(){return this.resume(),e.Root._super.prototype.touch.call(this)},e.Root.prototype.background=function(){return this},e.Root.prototype.viewport=function(t,i,n){if("undefined"==typeof t)return e._extend({},this._viewport);this._viewport={width:t,height:i,ratio:n||1},this._updateViewbox();var s=e._extend({},this._viewport);return this.visit({start:function(t){return t._flag("viewport")?void t.publish("viewport",[s]):!0}}),this},e.Root.prototype.viewbox=function(t,i,e){return this._viewbox={width:t,height:i,mode:/^(in|out|in-pad|out-crop)$/.test(e)?e:"in-pad"},this._updateViewbox(),this},e.Root.prototype._updateViewbox=function(){var t=this._viewbox,i=this._viewport;i&&t?(this.pin({width:t.width,height:t.height}),this._pin._scaleTo(i.width,i.height,t.mode)):i&&this.pin({width:i.width,height:i.height})},e.Root._queue=[],e.Root._roots=[],e.Root._loader=null,e.Root.add=function(t,i){return e.Root._loader?(DEBUG&&console.log("Loading app..."),void this._loader(function(i,n){DEBUG&&console.log("Initing app..."),t(i,n),e.Root._roots.push(i),DEBUG&&console.log("Starting app..."),i.start()},i)):void e.Root._queue.push(arguments)},e.Root.start=function(t){DEBUG&&console.log("Loading apps..."),e.Root._loader=t;for(var i;i=e.Root._queue.shift();)e.Root.add.apply(e.Root,i)},e.Root.pause=function(){if(!e.Root._pause){e.Root._pause=!0;for(var t=e.Root._roots.length-1;t>=0;t--)e.Root._roots[t].pause()}},e.Root.resume=function(){if(e.Root._pause){e.Root._pause=!1;for(var t=e.Root._roots.length-1;t>=0;t--)e.Root._roots[t].resume()}},e.Texture=function(t){this.isTexture=!0,this._name=t.name||++e._TS+"",this._imagePath=t.imagePath,this._imageRatio=t.imageRatio||1,this._cutouts=t.cutouts||[],this._factory=t.factory,this._map=t.filter||t.map,this._ppu=t.ppu||t.ratio||1,this._trim=t.trim||0},e.Texture.prototype._wrap=function(t){if(!t||t.isCutout)return t;t=e._extend({},t),"function"==typeof this._map&&(t=this._map(t));var i=this._ppu;1!=i&&(t.x*=i,t.y*=i,t.width*=i,t.height*=i,t.top*=i,t.bottom*=i,t.left*=i,t.right*=i);var n=this._trim;n&&(t.x+=n,t.y+=n,t.width-=2*n,t.height-=2*n,t.top-=n,t.bottom-=n,t.left-=n,t.right-=n);var s=this;return t=new e.Out(t,function(){return e.Texture._images[s._imagePath]},this._imageRatio)},e.Texture.prototype.select=function(t,i){if(i){for(var e=[],n=t.length,s=0;s<this._cutouts.length;s++){var r=this._cutouts[s],o=r._name||r.name;o&&o.substring(0,n)==t&&e.push(this._wrap(r))}if(e.length)return e}else{for(var s=0;s<this._cutouts.length;s++){var r=this._cutouts[s],o=r._name||r.name;if(o==t)return this._wrap(r)}if(this._factory)return this._wrap(this._factory(t))}},e.Texture._cache={one:{},many:{}},e.Texture.select=function(t,i){if("function"==typeof t)return e.Texture.select(t(),i);if("string"!=typeof t)return t;var n=t.indexOf(":"),s=1>n?null:t.slice(0,n),r=0>n?t:t.slice(n+1),o=i?e.Texture._cache.many:e.Texture._cache.one,h=o[t];if(h)return e.Texture._clone(h,i);if(null===h)throw"Cutout not found: '"+t+"'";if(s){var a=e.Texture._list[s];if(!a)throw"Texture not found: '"+t+"'";h=a.select(r,i)}else{var u=e.Texture._list;for(s in u)if(u.hasOwnProperty(s)&&(h=u[s].select(r,i)),h)break}if(h)return o[t]=h,e.Texture._clone(h,i);throw o[t]=null,"Cutout not found: '"+t+"'"},e.Texture._clone=function(t,i){if(i){for(var e=[],n=0;n<t.length;n++)e[n]=t[n].clone();return e}return t.clone()},e.addTexture=function(){return e.Texture.add.apply(e.Texture,arguments)},e.Texture._list={},e.Texture.add=function(){for(var t=0;t<arguments.length;t++){var i=arguments[t];i=i.isTexture?i:new e.Texture(i),e.Texture._list[i._name]=i}return this},e.Texture._images={},e.Texture.start=function(t,i){function n(){DEBUG&&console.log("Image loaded."),r()}function s(t){DEBUG&&console.log("Error loading image: "+t),r()}function r(){--o<=0&&(DEBUG&&console.log("Images loaded."),i&&i())}DEBUG&&console.log("Loading images...");var o=0,h=!0,a=e.Texture._list;for(var u in a){var _=a[u]._imagePath;_&&(o++,e.Texture._images[_]=t(_,n,s),h=!1)}h&&(DEBUG&&console.log("No image to load."),i&&i())},e.Out=function(t,i,e){this.isCutout=!0,this._ratio=1,this._name=1e3*Math.random()|0,this._x=0,this._y=0,this._top=0,this._bottom=0,this._left=0,this._right=0,t&&(this.setup(t),i&&(this.image(i),this.ratio(e||1)))},e.Out.prototype.image=function(t){return"function"==typeof t?(this._imagefn=t,this._image=null):this._image=t,this},e.Out.prototype.ratio=function(t){return"undefined"==typeof t?this._ratio:(this._dirty=!0,this._ratio=t,this)},e.Out.prototype.name=function(t){return"undefined"==typeof t?this._name:(this._name=t,this)},e.Out.prototype.setup=function(t){return t&&(this._name=t.name||t.name,this._x=t.x||0,this._y=t.y||0,this._width=t.width||0,this._height=t.height||0,this._top=t.top||0,this._bottom=t.bottom||0,this._left=t.left||0,this._right=t.right||0),this._dx=0,this._dy=0,this._dw=this._width,this._dh=this._height,this._sx=this._x,this._sy=this._y,this._sw=this._width,this._sh=this._height,this._dirty=!0,this},e.Out.prototype._update=function(){this._dirty&&(this._dirty=!1,this._sx=e.Math.limit(this._sx,this._x,this._x+this._width),this._sy=e.Math.limit(this._sy,this._y,this._y+this._height),this._sw=e.Math.limit(this._sw,0,this._width+this._x-this._sx),this._sh=e.Math.limit(this._sh,0,this._height+this._y-this._sy),this._sxr=this._sx*this._ratio,this._syr=this._sy*this._ratio,this._swr=this._sw*this._ratio,this._shr=this._sh*this._ratio)},e.Out.prototype.sX=function(t){return this._dirty=!0,this._sx=this._x+t,this},e.Out.prototype.sY=function(t){return this._dirty=!0,this._sy=this._y+t,this},e.Out.prototype.sWidth=function(t){return this._dirty=!0,this._sw=t,this._dw=t,this},e.Out.prototype.sHeight=function(t){return this._dirty=!0,this._sh=t,this._dh=t,this},e.Out.prototype.dX=function(t){return this._dx=t,this},e.Out.prototype.dY=function(t){return this._dy=t,this},e.Out.prototype.dWidth=function(t){return"undefined"==typeof t?this._dw:(this._dw=t,this)},e.Out.prototype.dHeight=function(t){return"undefined"==typeof t?this._dh:(this._dh=t,this)},e.Out.prototype.render=function(t){if(e._stats.cutout++,!this._image&&this._imagefn&&(this._image=this._imagefn()),this._dirty&&this._update(),this._image)try{t.drawImage(this._image,this._sxr,this._syr,this._swr,this._shr,this._dx,this._dy,this._dw,this._dh)}catch(i){this._failed||(console.log("Unable to render cutout: "+this+" "+this._image),this._failed=!0)}},e.Out.prototype.clone=function(){var t=e._create(e.Out.prototype);for(var i in this)this.hasOwnProperty(i)&&(t[i]=this[i]);return t.setup(),t._update(),t},e.Out.prototype.toString=function(){return this._update(),"["+this._name+": "+this._sx+"x"+this._sy+"-"+this._sw+"x"+this._sh+this._dx+"x"+this._dy+"-"+this._dw+"x"+this._dh+"]"},e.drawing=function(){var t=e.Out.drawing.apply(null,arguments),i=new e.image;return i.drawing=function(e){return i.image(t.drawing(e))},i},e.Out.drawing=function(t){var i=document.createElement("canvas"),n=(new e.Out).image(i),s=i.getContext("2d");return n.drawing=function(t){return t.call(this,s),this},n.size=function(t,e,s){return s=s||1,i.width=t*s,i.height=e*s,n.ratio(s),n.setup({x:0,y:0,width:t,height:e}),this},"function"==typeof arguments[arguments.length-1]&&n.drawing(arguments[arguments.length-1]),t&&n.name(t),n},e.Pin=function(t){this._owner=t,this._parent=null,this._relativeMatrix=new e.Matrix,this._absoluteMatrix=new e.Matrix,this.reset()},e.Pin.prototype.reset=function(){this._textureAlpha=1,this._alpha=1,this._width=0,this._height=0,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._rotation=0,this._pivoted=!1,this._pivotX=null,this._pivotY=null,this._handled=!1,this._handleX=0,this._handleY=0,this._aligned=!1,this._alignX=0,this._alignY=0,this._offsetX=0,this._offsetY=0,this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height,this._ts_translate=e._TS++,this._ts_transform=e._TS++,this._ts_matrix=e._TS++},e.Pin.prototype.tick=function(){return this._parent=this._owner._parent&&this._owner._parent._pin,this._handled&&this._mo_handle!=this._ts_transform&&(this._mo_handle=this._ts_transform,this._ts_translate=e._TS++),this._aligned&&this._parent&&this._mo_align!=this._parent._ts_transform&&(this._mo_align=this._parent._ts_transform,this._ts_translate=e._TS++),this},e.Pin.prototype.toString=function(){return this._owner.id()+" ("+(this._parent?this._parent._owner.id():null)+")"},e.Pin.prototype.absoluteMatrix=function(){var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_matrix:0);if(this._mo_abs==t)return this._absoluteMatrix;this._mo_abs=t;var i=this._absoluteMatrix;return i.copyFrom(this.relativeMatrix()),this._parent&&i.concat(this._parent._absoluteMatrix),this._ts_matrix=e._TS++,i},e.Pin.prototype.relativeMatrix=function(){var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_transform:0);if(this._mo_rel==t)return this._relativeMatrix;this._mo_rel=t;var i=this._relativeMatrix;if(i.identity(),this._pivoted&&i.translate(-this._pivotX*this._width,-this._pivotY*this._height),i.scale(this._scaleX,this._scaleY),i.skew(this._skewX,this._skewY),i.rotate(this._rotation),this._pivoted&&i.translate(this._pivotX*this._width,this._pivotY*this._height),this._pivoted)this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height;else{var e,n,s=i;s.a>0&&s.c>0||s.a<0&&s.c<0?(e=0,n=s.a*this._width+s.c*this._height):(e=s.a*this._width,n=s.c*this._height),e>n?(this._boxX=n,this._boxWidth=e-n):(this._boxX=e,this._boxWidth=n-e),s.b>0&&s.d>0||s.b<0&&s.d<0?(e=0,n=s.b*this._width+s.d*this._height):(e=s.b*this._width,n=s.d*this._height),e>n?(this._boxY=n,this._boxHeight=e-n):(this._boxY=e,this._boxHeight=n-e)}return this._x=this._offsetX,this._y=this._offsetY,this._x-=this._boxX+this._handleX*this._boxWidth,this._y-=this._boxY+this._handleY*this._boxHeight,this._aligned&&this._parent&&(this._parent.relativeMatrix(),this._x+=this._alignX*this._parent._width,this._y+=this._alignY*this._parent._height),i.translate(this._x,this._y),this._relativeMatrix},e.Pin.prototype.get=function(t){return e.Pin._get(this,t)},e.Pin.prototype.set=function(t,i){if("string"==typeof t)e.Pin._set(this,t,i);else if("object"==typeof t)for(i in t)e.Pin._set(this,i,t[i],t);return this._owner&&(this._owner._ts_pin=e._TS++,this._owner.touch()),this},e.Pin._get=function(t,i){return"undefined"!=typeof(i=e.Pin._getters[i])?i.call(e.Pin._getters,t):void 0},e.Pin._set=function(t,i,n,s){"undefined"!=typeof(i=e.Pin._setters[i])&&"undefined"!=typeof n&&i.call(e.Pin._setters,t,n,s)},e.Pin._getters={alpha:function(t){return t._alpha},textureAlpha:function(t){return t._textureAlpha},width:function(t){return t._width},height:function(t){return t._height},scaleX:function(t){return t._scaleX},scaleY:function(t){return t._scaleY},skewX:function(t){return t._skewX},skewY:function(t){return t._skewY},rotation:function(t){return t._rotation},pivotX:function(t){return t._pivotX},pivotY:function(t){return t._pivotY},offsetX:function(t){return t._offsetX},offsetY:function(t){return t._offsetY},alignX:function(t){return t._alignX},alignY:function(t){return t._alignY},handleX:function(t){return t._handleX},handleY:function(t){return t._handleY}},e.Pin._setters={alpha:function(t,i){t._alpha=i},textureAlpha:function(t,i){t._textureAlpha=i},width:function(t,i){t._width_=i,t._width=i,t._ts_transform=e._TS++},height:function(t,i){t._height_=i,t._height=i,t._ts_transform=e._TS++},scale:function(t,i){t._scaleX=i,t._scaleY=i,t._ts_transform=e._TS++},scaleX:function(t,i){t._scaleX=i,t._ts_transform=e._TS++},scaleY:function(t,i){t._scaleY=i,t._ts_transform=e._TS++},skew:function(t,i){t._skewX=i,t._skewY=i,t._ts_transform=e._TS++},skewX:function(t,i){t._skewX=i,t._ts_transform=e._TS++},skewY:function(t,i){t._skewY=i,t._ts_transform=e._TS++},rotation:function(t,i){t._rotation=i,t._ts_transform=e._TS++},pivot:function(t,i){t._pivotX=i,t._pivotY=i,t._pivoted=!0,t._ts_transform=e._TS++},pivotX:function(t,i){t._pivotX=i,t._pivoted=!0,t._ts_transform=e._TS++},pivotY:function(t,i){t._pivotY=i,t._pivoted=!0,t._ts_transform=e._TS++},offset:function(t,i){t._offsetX=i,t._offsetY=i,t._ts_translate=e._TS++},offsetX:function(t,i){t._offsetX=i,t._ts_translate=e._TS++},offsetY:function(t,i){t._offsetY=i,t._ts_translate=e._TS++},align:function(t,i){this.alignX(t,i),this.alignY(t,i)},alignX:function(t,i){t._alignX=i,t._aligned=!0,t._ts_translate=e._TS++,this.handleX(t,i)},alignY:function(t,i){t._alignY=i,t._aligned=!0,t._ts_translate=e._TS++,this.handleY(t,i)},handle:function(t,i){this.handleX(t,i),this.handleY(t,i)},handleX:function(t,i){t._handleX=i,t._handled=!0,t._ts_translate=e._TS++},handleY:function(t,i){t._handleY=i,t._handled=!0,t._ts_translate=e._TS++},resizeMode:function(t,i,e){e&&("in"==i?i="in-pad":"out"==i&&(i="out-crop"),t._scaleTo(e.resizeWidth,e.resizeHeight,i))},resizeWidth:function(t,i,e){e&&e.resizeMode||t._scaleTo(i,null)},resizeHeight:function(t,i,e){e&&e.resizeMode||t._scaleTo(null,i)},scaleMode:function(t,i,e){e&&t._scaleTo(e.scaleWidth,e.scaleHeight,i)},scaleWidth:function(t,i,e){e&&e.scaleMode||t._scaleTo(i,null)},scaleHeight:function(t,i,e){e&&e.scaleMode||t._scaleTo(null,i)},matrix:function(t,i){this.scaleX(t,i.a),this.skewX(t,i.c/i.d),this.skewY(t,i.b/i.a),this.scaleY(t,i.d),this.offsetX(t,i.e),this.offsetY(t,i.f),this.rotation(t,0)}},e.Pin.prototype._scaleTo=function(t,i,n){var s="number"==typeof t,r="number"==typeof i,o="string"==typeof n,h=this;h._ts_transform=e._TS++,s&&(h._scaleX=t/h._width_,h._width=h._width_),r&&(h._scaleY=i/h._height_,h._height=h._height_),s&&r&&o&&("out"==n||"out-crop"==n?h._scaleX=h._scaleY=Math.max(h._scaleX,h._scaleY):("in"==n||"in-pad"==n)&&(h._scaleX=h._scaleY=Math.min(h._scaleX,h._scaleY)),("out-crop"==n||"in-pad"==n)&&(h._width=t/h._scaleX,h._height=i/h._scaleY))},e.Matrix=function(t,i,e,n,s,r){this.changed=!0,this.a=t||1,this.b=i||0,this.c=e||0,this.d=n||1,this.e=s||0,this.f=r||0},e.Matrix.prototype.toString=function(){return"["+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f+"]"},e.Matrix.prototype.clone=function(){return new e.Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},e.Matrix.prototype.copyTo=function(t){return t.copyFrom(this),this},e.Matrix.prototype.copyFrom=function(t){return this.changed=!0,this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,this.f=t.f,this
},e.Matrix.prototype.identity=function(){return this.changed=!0,this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this},e.Matrix.prototype.rotate=function(t){if(!t)return this;this.changed=!0;var i=t?Math.cos(t):1,e=t?Math.sin(t):0,n=i*this.a-e*this.b,s=i*this.b+e*this.a,r=i*this.c-e*this.d,o=i*this.d+e*this.c,h=i*this.e-e*this.f,a=i*this.f+e*this.e;return this.a=n,this.b=s,this.c=r,this.d=o,this.e=h,this.f=a,this},e.Matrix.prototype.translate=function(t,i){return t||i?(this.changed=!0,this.e+=t,this.f+=i,this):this},e.Matrix.prototype.scale=function(t,i){return t-1||i-1?(this.changed=!0,this.a*=t,this.b*=i,this.c*=t,this.d*=i,this.e*=t,this.f*=i,this):this},e.Matrix.prototype.skew=function(t,i){if(!t&&!i)return this;this.changed=!0;var e=this.a+this.b*t,n=this.b+this.a*i,s=this.c+this.d*t,r=this.d+this.c*i,o=this.e+this.f*t,h=this.f+this.e*i;return this.a=e,this.b=n,this.c=s,this.d=r,this.e=o,this.f=h,this},e.Matrix.prototype.concat=function(t){this.changed=!0;var i=this,e=i.a*t.a+i.b*t.c,n=i.b*t.d+i.a*t.b,s=i.c*t.a+i.d*t.c,r=i.d*t.d+i.c*t.b,o=i.e*t.a+t.e+i.f*t.c,h=i.f*t.d+t.f+i.e*t.b;return this.a=e,this.b=n,this.c=s,this.d=r,this.e=o,this.f=h,this},e.Matrix.prototype.reverse=function(){if(this.changed){this.changed=!1,this.reversed=this.reversed||new e.Matrix;var t=this.a*this.d-this.b*this.c;this.reversed.a=this.d/t,this.reversed.b=-this.b/t,this.reversed.c=-this.c/t,this.reversed.d=this.a/t,this.reversed.e=(this.c*this.f-this.e*this.d)/t,this.reversed.f=(this.e*this.b-this.a*this.f)/t}return this.reversed},e.Matrix.prototype.map=function(t,i){return i=i||{},i.x=this.a*t.x+this.c*t.y+this.e,i.y=this.b*t.x+this.d*t.y+this.f,i},e.Matrix.prototype.mapX=function(t,i){return this.a*t+this.c*i+this.e},e.Matrix.prototype.mapY=function(t,i){return this.b*t+this.d*i+this.f},e.Math={},e.Math.random=function(t,i){return"undefined"==typeof t?(i=1,t=0):"undefined"==typeof i&&(i=t,t=0),t==i?t:Math.random()*(i-t)+t},e.Math.rotate=function(t,i,e){return"undefined"==typeof i?(e=1,i=0):"undefined"==typeof e&&(e=i,i=0),e>i?(t=(t-i)%(e-i),t+(0>t?e:i)):(t=(t-e)%(i-e),t+(0>=t?i:e))},e.Math.length=function(t,i){return Math.sqrt(t*t+i*i)},e.Math.limit=function(t,i,e){return i>t?i:t>e?e:t},i.exports=e},{}],3:[function(t,i){function e(t){if("function"==typeof t)return t;if("string"!=typeof t)return e._identity;var i=e._cache[t];if(i)return i;var n=/^(\w+)(-(in|out|in-out|out-in))?(\((.*)\))?$/i.exec(t);return n&&n.length?(easing=e._easings[n[1]],mode=e._modes[n[3]],params=n[5],i=easing&&easing.fn?easing.fn:easing&&easing.fc?easing.fc.apply(easing.fc,params&&params.replace(/\s+/,"").split(",")):e._identity,mode&&(i=mode.fn(i)),e._cache[t]=i,i):e._identity}"undefined"==typeof DEBUG&&(DEBUG=!0),e._identity=function(t){return t},e._cache={},e._modes={},e._easings={},e.add=function(t){for(var i=(t.name||t.mode).split(/\s+/),n=0;n<i.length;n++){var s=i[n];s&&((t.name?e._easings:e._modes)[s]=t)}},e.add({mode:"in",fn:function(t){return t}}),e.add({mode:"out",fn:function(t){return function(i){return 1-t(1-i)}}}),e.add({mode:"in-out",fn:function(t){return function(i){return.5>i?t(2*i)/2:1-t(2*(1-i))/2}}}),e.add({mode:"out-in",fn:function(t){return function(i){return.5>i?1-t(2*(1-i))/2:t(2*i)/2}}}),e.add({name:"linear",fn:function(t){return t}}),e.add({name:"quad",fn:function(t){return t*t}}),e.add({name:"cubic",fn:function(t){return t*t*t}}),e.add({name:"quart",fn:function(t){return t*t*t*t}}),e.add({name:"quint",fn:function(t){return t*t*t*t*t}}),e.add({name:"sin sine",fn:function(t){return 1-Math.cos(t*Math.PI/2)}}),e.add({name:"exp",fn:function(t){return 0==t?0:Math.pow(2,10*(t-1))}}),e.add({name:"circle circ",fn:function(t){return 1-Math.sqrt(1-t*t)}}),e.add({name:"bounce",fn:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}}),e.add({name:"poly",fc:function(t){return function(i){return Math.pow(i,t)}}}),e.add({name:"elastic",fc:function(t,i){i=i||.45,t=t||1;var e=i/(2*Math.PI)*Math.asin(1/t);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin(2*(n-e)*Math.PI/i)}}}),e.add({name:"back",fc:function(t){return t="undefined"!=typeof t?t:1.70158,function(i){return i*i*((t+1)*i-t)}}}),i.exports=e},{}],4:[function(t){function i(t,i){function e(){o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a,u),d.render(o)}function s(){h?(a=window.innerWidth>0?window.innerWidth:screen.width,u=window.innerHeight>0?window.innerHeight:screen.height,r.style.width=a+"px",r.style.height=u+"px"):(a=r.clientWidth,u=r.clientHeight),a*=_,u*=_,(r.width!==a||r.height!==u)&&(r.width=a,r.height=u,DEBUG&&console.log("Resize: "+a+" x "+u+" / "+_),d.viewport(a,u,_),e())}i=i||{};var r=i.canvas,o=null,h=!1,a=0,u=0,_=1;if("string"==typeof r&&(r=document.getElementById(r)),r||(r=document.getElementById("cutjs")),!r){h=!0,DEBUG&&console.log("Creating element..."),r=document.createElement("canvas"),r.style.position="absolute";var f=document.body;f.insertBefore(r,f.firstChild)}o=r.getContext("2d");var c=window.devicePixelRatio||1,p=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1;_=c/p;var l=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};DEBUG&&console.log("Creating root...");var d=new n.Root(l,e);d.background=function(t){return r.style.backgroundColor=t,this},t(d,r),s(),window.addEventListener("resize",s,!1),window.addEventListener("orientationchange",s,!1)}function e(t,i,e){DEBUG&&console.log("Loading image: "+t);var n=new Image;return n.onload=i,n.onerror=e,n.src=t,n}var n=t("./core");"undefined"==typeof DEBUG&&(DEBUG=!0),window.addEventListener("load",function(){DEBUG&&console.log("On load."),n.start({"app-loader":i,"image-loader":e})},!1)},{"./core":2}],5:[function(t,i){var e=t("./core"),n=t("./tween"),s=t("./easing");e.prototype.tween=function(t,i){return this._tween||(this._tween=new n(this)),this._tween.tween(t,i)},n.prototype.ease=function(t){return this._next.easing=s(t),this},i.exports=e,i.exports.Tween=n,i.exports.Easing=s},{"./core":2,"./easing":3,"./tween":7}],6:[function(t,i){function e(){e.subscribe.apply(e,arguments)}"undefined"==typeof DEBUG&&(DEBUG=!0),e.CLICK="click",e.START="touchstart mousedown",e.MOVE="touchmove mousemove",e.END="touchend mouseup",e.CANCEL="touchcancel",e.subscribe=function(t,i){function n(n){e._xy(t,i,n,c),DEBUG&&console.log("Mouse Start: "+n.type+" "+c),n.preventDefault(),u(n.type,n),h()}function s(t){DEBUG&&console.log("Mouse End: "+t.type+" "+c),t.preventDefault(),u(t.type,t),l.length&&(DEBUG&&console.log("Mouse Click: "+l.length),a(t))}function r(t){DEBUG&&console.log("Mouse Cancel: "+t.type),t.preventDefault(),u(t.type,t)}function o(n){e._xy(t,i,n,c),t._flag(n.type)&&(n.preventDefault(),u(n.type,n))}function h(){for(;l.length;)l.pop();u("click",null,l)}function a(i){f.event=i,f.type="click",f.root=t,f.collect=!1;for(var e=!1;l.length;){var n=l.shift();e||(e=_.end(n,f)?!0:e)}}function u(i,e,n){p.x=c.x,p.y=c.y,f.event=e,f.type=i,f.root=t,f.collect=n,f.root.visit(_,f)}var _=null,f={},c=null,p=null,l=[];i=i||document,i.addEventListener("touchstart",n),i.addEventListener("touchend",s),i.addEventListener("touchmove",o),i.addEventListener("touchcancel",r),i.addEventListener("mousedown",n),i.addEventListener("mouseup",s),i.addEventListener("mousemove",o),_={reverse:!0,visible:!0,start:function(t,i){return!t._flag(i.type)},end:function(t,i){p.raw=i.event,p.type=i.type;var n=t.listeners(i.type);if(n&&(t.matrix().reverse().map(c,p),t===i.root||t.attr("spy")||e._isInside(t,p))){if(i.collect)return void i.collect.push(t);for(var s=!1,r=0;r<n.length;r++)s=n[r].call(t,p)?!0:s;return s}}},c={x:0,y:0,toString:function(){return(0|this.x)+"x"+(0|this.y)}},p={x:0,y:0,toString:function(){return c+" / "+(0|this.x)+"x"+(0|this.y)}}},e._isInside=function(t,i){return i.x>=0&&i.x<=t._pin._width&&i.y>=0&&i.y<=t._pin._height},e._xy=function(t,i,e,n){var s=!1;if(e.touches){if(!e.touches.length)return;s=!0,n.x=e.touches[0].pageX,n.y=e.touches[0].pageY}else n.x=e.clientX,n.y=e.clientY,document.body.scrollLeft||document.body.scrollTop||document.documentElement&&(n.x+=document.documentElement.scrollLeft,n.y+=document.documentElement.scrollTop);n.x-=i.clientLeft||0,n.y-=i.clientTop||0;for(var r=i;r;)n.x-=r.offsetLeft||0,n.y-=r.offsetTop||0,s||(n.x+=r.scrollLeft||0,n.y+=r.scrollTop||0),r=r.offsetParent;n.x*=t.viewport().ratio||1,n.y*=t.viewport().ratio||1},i.exports=e},{}],7:[function(t,i){function e(t){var i=this;this._owner=t,this._queue=[],this._next=null;var e=0;t.tick(function(n,s,r){if(i._queue.length){var o=e!=r;if(e=s,this.touch(),!o){var h=i._queue[0];if(h.time?h.time+=n:h.time=1,!(h.time<h.delay)){if(!h.start){h.start={},h.keys={};for(var a in h.end)"number"==typeof(start=t.pin(a))?(h.start[a]=start,h.keys[a]=a):"number"==typeof(startX=t.pin(a+"X"))&&"number"==typeof(startY=t.pin(a+"Y"))&&(h.start[a+"X"]=startX,h.keys[a+"X"]=a,h.start[a+"Y"]=startY,h.keys[a+"Y"]=a)}var u=(h.time-h.delay)/h.duration,_=u>=1;u=u>1?1:u,u="function"==typeof h.easing?h.easing(u):u;var f=1-u;for(var a in h.keys)t.pin(a,h.start[a]*f+h.end[h.keys[a]]*u);_&&(i._queue.shift(),h.then&&h.then.call(t))}}}},!0)}"undefined"==typeof DEBUG&&(DEBUG=!0),e.prototype.tween=function(t,i){return this._next={id:Cut._TS++,end:{},duration:t||400,delay:i||0},this},e.prototype.pin=function(t,i){this._next!==this._queue[this._queue.length-1]&&(this._owner.touch(),this._queue.push(this._next));var e=this._next.end;if("object"==typeof t)for(var n in t)e[n]=t[n];else"undefined"!=typeof i&&(e[t]=i);return this},e.prototype.clear=function(t){for(var i;i=this._queue.shift();)t&&this._owner.pin(i.end);return this},e.prototype.then=function(t){return this._next.then=t,this},e.prototype.ease=function(t){return this._next.easing=t,this},i.exports=e},{}]},{},[1])(1)});