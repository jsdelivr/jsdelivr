/**
* Copyright (c) 2015 NAVER corp.
* egjs projects are licensed under the MIT license
* https://naver.github.io/egjs/license.txt
*
* egjs JavaScript library
* http://naver.github.io/egjs
*
* @version 1.2.0
* @SHA-1 fd00a4e (1.2.0-rc)
*
* For custom build use egjs-cli
* https://github.com/naver/egjs-cli
*/
/**
* All-in-one packaged file for ease use of 'eg.infiniteGrid' with below dependencies.
* NOTE: This is not an official distribution file and is only for user convenience.
*
* bower_components/get-style-property/get-style-property.js
* bower_components/get-size/get-size.js
* bower_components/matches-selector/matches-selector.js
* bower_components/eventEmitter/EventEmitter.js
* bower_components/eventie/eventie.js
* bower_components/doc-ready/doc-ready.js
* bower_components/fizzy-ui-utils/utils.js
* bower_components/outlayer/item.js
* bower_components/outlayer/outlayer.js
* src/module.js
* src/eg.js
* src/class.js
* src/component.js
* src/customEvent/scrollEnd.js
* src/plugin/persist.js
* src/infiniteGrid.js
*/
!function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){}function d(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function e(c){function e(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||f("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=c("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var g=document.body||document.documentElement;g.appendChild(e);var h=j(e);l=200===b(h.width),g.removeChild(e)}}}function h(a){if(e(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var c=j(a);if("none"===c.display)return d();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var h=f.isBorderBox=!(!k||!c[k]||"border-box"!==c[k]),m=0,n=g.length;n>m;m++){var o=g[m],p=c[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=h&&l,y=b(c.width);y!==!1&&(f.width=y+(x?0:r+v));var z=b(c.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return h}var f="undefined"==typeof console?c:function(a){console.error(a)},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],e):"object"==typeof exports?module.exports=e(require("desandro-get-style-property")):a.getSize=e(a.getStyleProperty)}(window),function(a){function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+"MatchesSelector";if(a[f])return f}}();if(g){var h=document.createElement("div"),i=b(h,"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define(function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g,h=this.getListenersAsObject(a);for(f in h)if(h.hasOwnProperty(f))for(c=h[f].slice(0),e=c.length;e--;)d=c[e],d.once===!0&&this.removeListener(a,d.listener),g=d.listener.apply(this,b||[]),g===this._getOnceReturnValue()&&this.removeListener(a,d.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define(f):"object"==typeof exports?module.exports=f:a.eventie=f}(window),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define(["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(a,b){"function"==typeof define&&define.amd?define(["doc-ready/doc-ready","matches-selector/matches-selector"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("doc-ready"),require("desandro-matches-selector")):a.fizzyUIUtils=b(a,a.docReady,a.matchesSelector)}(window,function(a,b,c){var d={};d.extend=function(a,b){for(var c in b)a[c]=b[c];return a},d.modulo=function(a,b){return(a%b+b)%b};var e=Object.prototype.toString;d.isArray=function(a){return"[object Array]"==e.call(a)},d.makeArray=function(a){var b=[];if(d.isArray(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b},d.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},d.removeFrom=function(a,b){var c=d.indexOf(a,b);-1!=c&&a.splice(c,1)},d.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1==a.nodeType&&"string"==typeof a.nodeName},d.setText=function(){function a(a,c){b=b||(void 0!==document.documentElement.textContent?"textContent":"innerText"),a[b]=c}var b;return a}(),d.getParent=function(a,b){for(;a!=document.body;)if(a=a.parentNode,c(a,b))return a},d.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},d.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},d.filterFindElements=function(a,b){a=d.makeArray(a);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f];if(d.isElement(h))if(b){c(h,b)&&e.push(h);for(var i=h.querySelectorAll(b),j=0,k=i.length;k>j;j++)e.push(i[j])}else e.push(h)}return e},d.debounceMethod=function(a,b,c){var d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){var a=this[e];a&&clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c||100)}},d.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};var f=a.console;return d.htmlInit=function(c,e){b(function(){for(var b=d.toDashed(e),g=document.querySelectorAll(".js-"+b),h="data-"+b+"-options",i=0,j=g.length;j>i;i++){var k,l=g[i],m=l.getAttribute(h);try{k=m&&JSON.parse(m)}catch(n){f&&f.error("Error parsing "+h+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+n);continue}var o=new c(l,k),p=a.jQuery;p&&p.data(l,e,o)}})},d}),function(a,b){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(c,d,e,f){return b(a,c,d,e,f)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(a.Outlayer={},a.Outlayer.Item=b(a,a.EventEmitter,a.getSize,a.getStyleProperty,a.fizzyUIUtils))}(window,function(a,b,c,d,e){function f(a){for(var b in a)return!1;return b=null,!0}function g(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}function h(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}var i=a.getComputedStyle,j=i?function(a){return i(a,null)}:function(a){return a.currentStyle},k=d("transition"),l=d("transform"),m=k&&l,n=!!d("perspective"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[k],p=["transform","transition","transitionDuration","transitionProperty"],q=function(){for(var a={},b=0,c=p.length;c>b;b++){var e=p[b],f=d(e);f&&f!==e&&(a[e]=f)}return a}();e.extend(g.prototype,b.prototype),g.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.getSize=function(){this.size=c(this.element)},g.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=q[c]||c;b[d]=a[c]}},g.prototype.getPosition=function(){var a=j(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=a[c?"left":"right"],f=a[d?"top":"bottom"],g=this.layout.size,h=-1!=e.indexOf("%")?parseFloat(e)/100*g.width:parseInt(e,10),i=-1!=f.indexOf("%")?parseFloat(f)/100*g.height:parseInt(f,10);h=isNaN(h)?0:h,i=isNaN(i)?0:i,h-=c?g.paddingLeft:g.paddingRight,i-=d?g.paddingTop:g.paddingBottom,this.position.x=h,this.position.y=i},g.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={},d=b.isOriginLeft?"paddingLeft":"paddingRight",e=b.isOriginLeft?"left":"right",f=b.isOriginLeft?"right":"left",g=this.position.x+a[d];c[e]=this.getXValue(g),c[f]="";var h=b.isOriginTop?"paddingTop":"paddingBottom",i=b.isOriginTop?"top":"bottom",j=b.isOriginTop?"bottom":"top",k=this.position.y+a[h];c[i]=this.getYValue(k),c[j]="",this.css(c),this.emitEvent("layout",[this])},g.prototype.getXValue=function(a){var b=this.layout.options;return b.percentPosition&&!b.isHorizontal?a/this.layout.size.width*100+"%":a+"px"},g.prototype.getYValue=function(a){var b=this.layout.options;return b.percentPosition&&b.isHorizontal?a/this.layout.size.height*100+"%":a+"px"},g.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={};j.transform=this.getTranslate(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},g.prototype.getTranslate=function(a,b){var c=this.layout.options;return a=c.isOriginLeft?a:-a,b=c.isOriginTop?b:-b,n?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"},g.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},g.prototype.moveTo=m?g.prototype._transitionTo:g.prototype.goTo,g.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},g.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},g.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var r="opacity,"+h(q.transform||"transform");g.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:r,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(o,this,!1))},g.prototype.transition=g.prototype[k?"_transition":"_nonTransition"],g.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},g.prototype.onotransitionend=function(a){this.ontransitionend(a)};var s={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};g.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=s[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],f(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd){var d=b.onEnd[c];d.call(this),delete b.onEnd[c]}this.emitEvent("transitionEnd",[this])}},g.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},g.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var t={transitionProperty:"",transitionDuration:""};return g.prototype.removeTransitionStyles=function(){this.css(t)},g.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},g.prototype.remove=function(){if(!k||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.once("transitionEnd",function(){a.removeElem()}),this.hide()},g.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("visibleStyle");b[c]=this.onRevealTransitionEnd,this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},g.prototype.getHideRevealTransitionEndProperty=function(a){var b=this.layout.options[a];if(b.opacity)return"opacity";for(var c in b)return c},g.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("hiddenStyle");b[c]=this.onHideTransitionEnd,this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},g.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},g}),function(a,b){"function"==typeof define&&define.amd?define(["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):"object"==typeof exports?module.exports=b(a,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=b(a,a.eventie,a.EventEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(a,b,c,d,e,f){function g(a,b){var c=e.getQueryElement(a);if(!c)return void(h&&h.error("Bad element for "+this.constructor.namespace+": "+(c||a)));this.element=c,i&&(this.$element=i(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(b);var d=++k;this.element.outlayerGUID=d,l[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var h=a.console,i=a.jQuery,j=function(){},k=0,l={};return g.namespace="outlayer",g.Item=f,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e.extend(g.prototype,c.prototype),g.prototype.option=function(a){e.extend(this.options,a)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},g.prototype._filterFindItemElements=function(a){return e.filterFindElements(a,this.options.itemSelector)},g.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=d(this.element)},g.prototype._getMeasurement=function(a,b){var c,f=this.options[a];f?("string"==typeof f?c=this.element.querySelector(f):e.isElement(f)&&(c=f),this[a]=c?d(c)[b]:f):this[a]=0},g.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},g.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},g.prototype._layoutItems=function(a,b){if(this._emitCompleteOnItems("layout",a),a&&a.length){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b||f.isLayoutInstant,c.push(g)}this._processLayoutQueue(c)}},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},g.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},g.prototype._getContainerSize=j,g.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},g.prototype._emitCompleteOnItems=function(a,b){function c(){e.dispatchEvent(a+"Complete",null,[b])}function d(){g++,g===f&&c()}var e=this,f=b.length;if(!b||!f)return void c();for(var g=0,h=0,i=b.length;i>h;h++){var j=b[h];j.once(a,d)}},g.prototype.dispatchEvent=function(a,b,c){var d=b?[b].concat(c):c;if(this.emitEvent(a,d),i)if(this.$element=this.$element||i(this.element),b){var e=i.Event(b);e.type=a,this.$element.trigger(e,c)}else this.$element.trigger(a,c)},g.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},g.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},g.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},g.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e.removeFrom(this.stamps,d),this.unignore(d)}},g.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=e.makeArray(a)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},g.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},g.prototype._manageStamp=j,g.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,e=d(a),f={left:b.left-c.left-e.marginLeft,top:b.top-c.top-e.marginTop,right:c.right-b.right-e.marginRight,bottom:c.bottom-b.bottom-e.marginBottom};return f},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.bindResize=function(){this.isResizeBound||(b.bind(a,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&b.unbind(a,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},g.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},g.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},g.prototype.reveal=function(a){this._emitCompleteOnItems("reveal",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.reveal()}},g.prototype.hide=function(a){this._emitCompleteOnItems("hide",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.hide()}},g.prototype.revealItemElements=function(a){var b=this.getItems(a);this.reveal(b)},g.prototype.hideItemElements=function(a){var b=this.getItems(a);this.hide(b)},g.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},g.prototype.getItems=function(a){a=e.makeArray(a);for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c],g=this.getItem(f);g&&b.push(g)}return b},g.prototype.remove=function(a){var b=this.getItems(a);if(this._emitCompleteOnItems("remove",b),b&&b.length)for(var c=0,d=b.length;d>c;c++){var f=b[c];f.remove(),e.removeFrom(this.items,f)}},g.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete l[e],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},g.data=function(a){a=e.getQueryElement(a);var b=a&&a.outlayerGUID;return b&&l[b]},g.create=function(a,b){function c(){g.apply(this,arguments)}return Object.create?c.prototype=Object.create(g.prototype):e.extend(c.prototype,g.prototype),c.prototype.constructor=c,c.defaults=e.extend({},g.defaults),e.extend(c.defaults,b),c.prototype.settings={},c.namespace=a,c.data=g.data,c.Item=function(){f.apply(this,arguments)},c.Item.prototype=new f,e.htmlInit(c,a),i&&i.bridget&&i.bridget(a,c),c},g.Item=f,g}),function(a,b,c){function d(a){return a>2?a+1+"th":m[a]}function e(a,b){var c;for(c in b)a=a.replace(new RegExp("{{"+c+"}}","gi"),b[c]);return a}function f(a,b){for(var f,g,h,i,j,m,n,o,p=0,q=b.length,r=[],s=[],t=c.require;q>p;p++)g=b[p],h={index:d(p),name:g,componentName:a},i="string"==typeof b[p],j=void 0===b[p],m=i&&(f=k[b[p]]),n=i&&f&&!c[b[p]],o=n&&t&&t.specified&&t.specified(b[p]),i||j?o&&t.defined(b[p])?(g=t(b[p]),s.push(g)):!o||t.defined(b[p])?n&&t&&t.specified&&!t.specified(b[p])?(h.url=f.url,r.push(e(l[1],h))):!n||t?m&&c[b[p]]?(g=c[b[p]],s.push(g)):!i||f?void 0!==b[p]||r.push(e(l[4],h)):r.push(e(l[3],h)):(h.url=f.url,r.push(e(l[2],h))):(h.url=f.url,r.push(e(l[0],h))):s.push(g);return[s,r]}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a){var c,d,e,f=g(a);if(!i[f]||!i[f].prototype._events)return!1;if(j.fn[a])throw new Error("The name '"+f+"' has already been used and registered as plugin. Try with different one.");j.fn[a]=function(c){var d,e;return"string"==typeof c?(d=this.data(b+"-"+a),"instance"===c?d:(e=d[c].apply(d,Array.prototype.slice.call(arguments,1)),e===d?this:e)):((void 0===c||j.isPlainObject(c))&&this.data(b+"-"+a,new i[f](this,c||{},a+":")),this)},e={trigger:"trigger",add:"on",remove:"off"},c=i[f].prototype._events();for(var h in c){d=j.event.special[a+":"+c[h]]={},d.setup=function(){return!0};for(var k in e)d[k]=function(c){return function(d,e){return j(this).data(b+"-"+a)[c](d.type,"trigger"===c?e:d.handler),!1}}(e[k])}}var i;c[b]||(c[b]={}),i=c[b];var j=c[a],k={jQuery:{url:"http://jquery.com/"},Hammer:{url:"http://hammerjs.github.io/"},Outlayer:{url:"https://github.com/metafizzy/outlayer/"}},l=["[egjs] The {{name}} library must be loaded before {{componentName}}.",'[egjs] For AMD environment (like RequireJS), "{{name}}" must be declared, which is required by {{componentName}}.',"[egjs] The {{index}} argument of {{componentName}} is missing.\r\nDownload {{name}} from [{{url}}].","[egjs] The {{name}} parameter of {{componentName}} is not valid.\r\nPlease check and try again.","[egjs] The {{index}} argument of {{componentName}} is undefined.\r\nPlease check and try again."],m=["1st","2nd","3rd"],n=function(a){(n=c.console&&c.console.warn?function(a){c.console.warn(a)}:function(){})(a)};i.module||(i.module=function(a,b,d){var e=f(a,b);e[1].length?n(e[1].join("\r\n")):(d.apply(c,e[0]),h(a))})}("jQuery","eg",window),eg.module("eg",["jQuery",eg,window],function(a,b,c){function d(a,b,c,d){var e=a.hook[b];return e&&(d=e.apply(a,c)),a[b]=function(){var e=a.hook[b];return e?e.apply(a,c):d},d}var e=c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.msRequestAnimationFrame,f=c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.msCancelAnimationFrame;if(e&&!f){var g={},h=e;e=function(a){function b(){g[c]&&a()}var c=h(b);return g[c]=!0,c},f=function(a){delete g[a]}}else e&&f||(e=function(a){return c.setTimeout(a,16)},f=c.clearTimeout);b.VERSION="1.2.0",b.hook={};var i={browser:[{criteria:"PhantomJS",identity:"PhantomJS"},{criteria:/Edge/,identity:"Edge",versionSearch:"Edge"},{criteria:/MSIE|Trident|Windows Phone/,identity:"IE",versionSearch:"IEMobile|MSIE|rv"},{criteria:/SAMSUNG|SamsungBrowser/,identity:"SBrowser",versionSearch:"Chrome"},{criteria:/Chrome|CriOS/,identity:"Chrome"},{criteria:/Android/,identity:"default"},{criteria:/iPhone|iPad/,identity:"Safari",versionSearch:"Version"},{criteria:"Apple",identity:"Safari",versionSearch:"Version"},{criteria:"Firefox",identity:"Firefox"}],os:[{criteria:/Windows Phone|Windows NT/,identity:"Window",versionSearch:"Windows Phone|Windows NT"},{criteria:"Windows 2000",identity:"Window",versionAlias:"5.0"},{criteria:/iPhone|iPad/,identity:"iOS",versionSearch:"iPhone OS|CPU OS"},{criteria:"Mac",versionSearch:"OS X",identity:"MAC"},{criteria:/Android/,identity:"Android"}],webview:[{criteria:/iPhone|iPad/,browserVersionSearch:"Version",webviewBrowserVersion:/-1/},{criteria:/iPhone|iPad|Android/,webviewToken:/NAVER|DAUM|; wv/}],defaultString:{browser:{version:"-1",name:"default"},os:{version:"-1",name:"unknown"}}},j={getBrowserName:function(a){return this.getIdentityStringFromArray(a,i.defaultString.browser)},getBrowserVersion:function(a){var b,c;return a?(c=this.getBrowserRule(a).versionSearch||a,b=this.extractBrowserVersion(c,this.ua)):void 0},extractBrowserVersion:function(a,b){var c,d,e=i.defaultString.browser.version,f=new RegExp("("+a+")","i").exec(b);return f?(d=f.index,a=f[0],d>-1&&(c=d+a.length+1,e=b.substring(c).split(" ")[0].replace(/_/g,".").replace(/\;|\)/g,"")),e):e},getOSName:function(a){return this.getIdentityStringFromArray(a,i.defaultString.os)},getOSVersion:function(a){var b,c,d,e,f=this.ua,g=this.getOSRule(a)||{},h=i.defaultString.os.version;return a?g.versionAlias?g.versionAlias:(c=g.versionSearch||a,d=new RegExp("("+c+")\\s([\\d_\\.]+|\\d_0)","i"),e=d.exec(f),e&&(b=d.exec(f)[2].replace(/_/g,".").replace(/\;|\)/g,"")),b||h):void 0},getOSRule:function(a){return this.getRule(i.os,a)},getBrowserRule:function(a){return this.getRule(i.browser,a)},getRule:function(a,b){for(var c,d,e,f=0;e=a[f];f++)if(c=e.criteria,d=new RegExp(e.identity,"i").test(b),c?d&&this.isMatched(this.ua,c):d)return e},getIdentityStringFromArray:function(a,b){for(var c,d=0;c=a[d];d++)if(this.isMatched(this.ua,c.criteria))return c.identity||b.name;return b.name},isMatched:function(a,b){return b&&b.test?!!b.test(a):a.indexOf(b)>-1},isWebview:function(){for(var a,b,c=this.ua,d=i.webview,e=!1,f=0;b=d[f];f++)if(this.isMatched(c,b.criteria)&&(a=this.extractBrowserVersion(b.browserVersionSearch,c),this.isMatched(c,b.webviewToken)||this.isMatched(a,b.webviewBrowserVersion))){e=!0;break}return e}};j.create=function(a){j.ua=a;var b={os:{},browser:{}};return b.browser.name=j.getBrowserName(i.browser),b.browser.version=j.getBrowserVersion(b.browser.name),b.os.name=j.getOSName(i.os),b.os.version=j.getOSVersion(b.os.name),b.browser.webview=j.isWebview(),b.browser.name=b.browser.name.toLowerCase(),b.os.name=b.os.name.toLowerCase(),b},b.agent=function(){var a=j.create(c.navigator.userAgent);return d(this,"agent",[a],a)},b.translate=function(a,b,c){return c=c||!1,"translate"+(c?"3d(":"(")+a+","+b+(c?",0)":")")},b.isHWAccelerable=function(){var a,c=!1,e=b.agent(),f=e.os.version,g=e.browser.name,h=e.browser.version;return-1!==g.indexOf("chrome")?c=h>="25":/ie|edge|firefox|safari|inapp/.test(g)?c=!0:-1!==e.os.name.indexOf("android")&&(a=(j.ua.match(/\(.*\)/)||[null])[0],c=f>="4.1.0"&&!/EK-GN120|SM-G386F/.test(a)||f>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(a)&&!/SHW-M420|SHW-M200|GT-S7562/.test(a)),d(this,"isHWAccelerable",[c,e],c)},b.isTransitional=function(){var a=!1,c=b.agent(),e=c.browser.name;if(/chrome|firefox|sbrowser/.test(e))a=!0;else switch(c.os.name){
case"ios":a=/safari|inapp/.test(e)&&parseInt(c.os.version,10)<6;break;case"window":a=/safari/.test(e)||/ie/.test(e)&&parseInt(c.browser.nativeVersion,10)>=10;break;default:a=/safari/.test(e)}return d(this,"isTransitional",[a,c],a)},b._hasClickBug=function(){var a=b.agent(),c="safari"===a.browser.name;return d(this,"_hasClickBug",[c,a],c)},b.requestAnimationFrame=function(a){return e(a)},b.cancelAnimationFrame=function(a){f(a)},a.extend(a.easing,{easeOutCubic:function(a){return 1-Math.pow(1-a,3)}})}),eg.module("class",[eg],function(a){a.Class=function(a){var b=function(){"function"==typeof a.construct&&a.construct.apply(this,arguments)};return b.prototype=a,b.prototype.instance=function(){return this},b.prototype.constructor=b,b},a.Class.extend=function(a,b){var c=function(){a.apply(this,arguments),"function"==typeof b.construct&&b.construct.apply(this,arguments)},d=function(){};d.prototype=a.prototype;var e=new d;for(var f in b)e[f]=b[f];return e.constructor=c,c.prototype=e,c}}),eg.module("component",[eg],function(a){a.Component=a.Class({construct:function(){this.eventHandler={},this.options={}},option:function(a,b){if(arguments.length>=2)return this.options[a]=b,this;if("string"==typeof a)return this.options[a];if(0===arguments.length)return this.options;for(var c in a)this.options[c]=a[c];return this},trigger:function(a,b){b=b||{};var c=this.eventHandler[a]||[],d=c.length>0;if(!d)return!0;c=c.concat(),b.eventType=a;var e,f,g,h=!1,i=[b];for(b.stop=function(){h=!0},(f=arguments.length)>2&&(i=i.concat(Array.prototype.slice.call(arguments,2,f))),e=0;g=c[e];e++)g.apply(this,i);return!h},hasOn:function(a){return!!this.eventHandler[a]},on:function(a,b){if("object"==typeof a&&"undefined"==typeof b){var c,d=a;for(c in d)this.on(c,d[c]);return this}if("string"==typeof a&&"function"==typeof b){var e=this.eventHandler[a];"undefined"==typeof e&&(e=this.eventHandler[a]=[]),e.push(b)}return this},off:function(a,b){if(0===arguments.length)return this.eventHandler={},this;if("undefined"==typeof b){if("string"==typeof a)return this.eventHandler[a]=void 0,this;var c=a;for(var d in c)this.off(d,c[d]);return this}var e=this.eventHandler[a];if(e){var f,g;for(f=0,g;g=e[f];f++)if(g===b){e=e.splice(f,1);break}}return this}})}),eg.module("scrollEnd",["jQuery",eg,window],function(a,b,c){function d(){var a=n,c=b.agent(),d=c.os,e=parseInt(d.version,10),f=c.browser;return"ios"===d.name?f.webview===!0?a=n:7>=e&&(a=p):"android"===d.name&&"default"===f.name&&2.3>=e&&(a=p),a}function e(){a(c).on("scroll",g),a(c).on("orientationchange",f)}function f(){l=!0}function g(){if(l)return void(l=!1);switch(r){case p:h();break;case n:i()}}function h(){a(c).trigger("scrollend",{top:c.pageYOffset,left:c.pageXOffset})}function i(){clearTimeout(k),k=setTimeout(function(){return l?void(l=!1):void h()},q)}function j(){a(c).off("scroll",g),a(c).off("orientationchange",f)}var k,l=!1,m=3,n=2,o=1,p=0,q=250,r=d();return a.event.special.scrollend={setup:function(){e()},teardown:function(){j()}},{getDeviceType:d,CHROME:m,TIMERBASE:n,TOUCHBASE:o,SCROLLBASE:p}}),eg.module("persist",["jQuery",eg,window,document],function(a,b,c,d){function e(a){if(a){var b="__tmp__"+q;try{return a.setItem(b,q),a.getItem(b)===q}catch(c){return!1}}}function f(a){t=t||a.originalEvent&&a.originalEvent.persisted,!t&&u?s.trigger("persist"):g()}function g(){k(null)}function h(){var a,b=w?w.getItem(c.location.href+q):n.state;if(null===b)return{};var d,e="string"==typeof b&&b.length>0&&"null"!==b;try{if(a=p.parse(b),d=!("object"!==jQuery.type(a)||a instanceof Array),!e||!d)throw new Error}catch(f){i(),a={}}return a}function i(){console.warn("window.history or session/localStorage has no valid format data to be handled in persist.")}function j(a){var b=h()[a];return("null"===b||"undefined"==typeof b)&&(b=null),b}function k(a){if(w)a?w.setItem(c.location.href+q,p.stringify(a)):w.removeItem(c.location.href+q);else try{n.replaceState(null===a?null:p.stringify(a),d.title,c.location.href)}catch(b){console.warn(b.message)}a?s.attr(q,!0):s.attr(q,null)}function l(a,b){var c=h();c[a]=b,k(c)}var m=c.performance,n=c.history,o=c.navigator.userAgent,p=c.JSON,q="___persist___",r="KEY"+q,s=a(c),t=s.attr(q)===!0,u=m&&m.navigation&&m.navigation.type===(m.navigation.TYPE_BACK_FORWARD||2),v="replaceState"in n&&"state"in n,w=function(){return e(c.sessionStorage)?c.sessionStorage:e(c.localStorage)?c.localStorage:void 0}();return v||w?p?(a.persist=function(a){var b,c;return"string"==typeof a?(b=a,c=2===arguments.length?arguments[1]:null):(b=r,c=1===arguments.length?a:null),c&&l(b,c),j(b)},a.persist.isNeeded=function(){var c=b.agent(o).os,d=!0;return("ios"===c.name||"android"===c.name&&parseFloat(c.version)<4.4)&&(d=!1),a.persist.isNeeded=function(){return d},d},!u&&g(),a.event.special.persist={setup:function(){s.on("pageshow",f)},teardown:function(){s.off("pageshow",f)},trigger:function(a){a.state=j(r)}},{isBackForwardNavigated:u,onPageshow:f,reset:g,getState:h,setState:k,persist:a.persist,isNeeded:a.persist.isNeeded,GLOBALKEY:r}):void console.warn("The JSON object is not supported in your browser.\r\nFor work around use polyfill which can be found at:\r\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON#Polyfill"):void 0}),eg.module("infiniteGrid",["jQuery",eg,window,document,"Outlayer"],function(a,b,c,d,e){function f(b,c,d){var e;return a.each(d,function(d,f){e=c[f],f in c&&(b[f]=a.isArray(e)?a.merge([],e):a.isPlainObject(e)?a.extend(!0,{},e):e)}),b}if(!e)return void(b.InfiniteGrid=b.Class({}));var g=e.create("InfiniteGrid");a.extend(g.prototype,{_resetLayout:function(){this._isLayoutInited||this._registGroupKey(this.options.defaultGroupKey,this.items),this.element.style.width=null,this.getSize(),this._measureColumns()},_getContainerSize:function(){return{height:Math.max.apply(Math,this._appendCols),width:this.size.innerWidth}},_getItemLayoutPosition:function(b){this._equalItemSize?b.size=this._equalItemSize:b.getSize(),null==b.isAppend&&(b.isAppend=!0);var c,d=parseInt(b.size.outerHeight,10),e=b.isAppend,f=e?this._appendCols:this._prependCols,g=Math[e?"min":"max"].apply(Math,f);if(e)c=a.inArray(g,f);else for(var h=f.length;h-->=0;)if(f[h]===g){c=h;break}return f[c]=g+(e?d:-d),{x:this.columnWidth*c,y:e?g:g-d}},resetLayout:function(){this._resetLayout(),this._isLayoutInited=!0},updateCols:function(a){for(var b,c=a?this._appendCols:this._prependCols,d=this.getColItems(a),e=this._isFitted||a?0:this._getMinY(d),f=0,g=c.length;g>f;f++)c[f]=(b=d[f])?b.position.y+(a?b.size.outerHeight:-e):0;return e},_getMinY:function(b){return Math.min.apply(Math,a.map(b,function(a){return a?a.position.y:0}))},_measureColumns:function(){var a=this.size.innerWidth,b=this._getColumnWidth(),c=a/b,d=b-a%b;for(c=Math.max(Math[d&&1>=d?"round":"floor"](c),1),this._appendCols=[],this._prependCols=[];c--;)this._appendCols.push(0),this._prependCols.push(0)},_getColumnWidth:function(){var a,b=this.items[0]&&this.items[0].element;return a=b?getSize(b):{outerWidth:0,outerHeight:0},this.options.isEqualSize&&(this._equalItemSize=a),this.columnWidth=a.outerWidth||this.size.outerWidth,this.columnWidth},_getColIdx:function(a){return parseInt(a.position.x/parseInt(this.columnWidth,10),10)},getColItems:function(a){for(var b,c,d=this._appendCols.length,e=new Array(d),f=0,g=a?this.items.length-1:0;b=this.items[g];){if(c=this._getColIdx(b),!e[c]&&(e[c]=b,++f===d))return e;g+=a?-1:1}return e},clone:function(b,c){return f(b,c,["_isLayoutInited","_equalItemSize","_appendCols","_prependCols","columnWidth","size","options"]),b.items=b.items||[],b.items.length=c.items.length,a.each(c.items,function(a){b.items[a]=f(b.items[a]||{},c.items[a],["position","size","isAppend","groupKey"])}),b},itemize:function(a,b){var c=this._itemize(a);return this._registGroupKey(b,c),c},_registGroupKey:function(a,b){if(null!=a)for(var c,d=0;c=b[d++];)c.groupKey=a},destroy:function(){this.off(),e.prototype.destroy.apply(this)}});var h={layoutComplete:"layoutComplete",append:"append",prepend:"prepend"};return b.InfiniteGrid=b.Class.extend(b.Component,{_events:function(){return h},construct:function(d,e,f){this.options=a.extend({isEqualSize:!1,defaultGroupKey:null,count:30,threshold:300},e),this.options.transitionDuration=0,this.options.isInitLayout=!1,this.options.isResizeBound=!1,d instanceof a&&(d=d.get(0)),this._prefix=f||"",this.core=new g(d,this.options).on(h.layoutComplete,a.proxy(this._onlayoutComplete,this)),this.$view=a(c),this._reset(),this.core.$element.children().length>0&&this.layout(),this._onResize=a.proxy(this._onResize,this),this._onScroll=a.proxy(this._onScroll,this),this._isIos="ios"===b.agent().os.name,this._prevScrollTop=0,this._topElement=null,this._bottomElement=null,this._refreshViewport(),this.$view.on("resize",this._onResize),this.$view.on("scroll",this._onScroll)},_getScrollTop:function(){return d.body.scrollTop||d.documentElement.scrollTop},_onScroll:function(){if((!this.core||this.core._isLayoutInited)&&!this.isProcessing()){var a=this._getScrollTop(),b=this._prevScrollTop;if(!(this._isIos&&0===a||b===a)){var c,d;if(a>b)c=this._bottomElement||this.getBottomElement(),d=c.getBoundingClientRect(),d.top<=this._clientHeight+this.options.threshold&&this.trigger(this._prefix+h.append,{scrollTop:a});else if(this.isRecycling()&&this._removedContent>0&&(c=this._topElement||this.getTopElement())&&(d=c.getBoundingClientRect(),d.bottom>=-this.options.threshold)){var e=this.fit();e>0&&(a-=e,this.$view.scrollTop(a)),this.trigger(this._prefix+h.prepend,{scrollTop:a})}this._prevScrollTop=a}}},_onResize:function(){function a(){b._refreshViewport(),b.core&&(b.core.element.style.width=null,b.core.needsResizeLayout()&&b.layout()),delete b.resizeTimeout}if(this.resizeTimeout&&clearTimeout(this.resizeTimeout),!this.core||this.core._isLayoutInited){var b=this;this.resizeTimeout=setTimeout(a,100)}},_refreshViewport:function(){this._clientHeight=this.$view.height()},getStatus:function(){var a,b=[];for(a in this)this.hasOwnProperty(a)&&/^_/.test(a)&&b.push(a);return{core:this.core.clone({},this.core),data:f({},this,b),html:this.core.$element.html(),cssText:this.core.element.style.cssText}},setStatus:function(b){return b&&b.cssText&&b.html&&b.core&&b.data?(this.core.element.style.cssText=b.cssText,this.core.$element.html(b.html),this.core.items=this.core.itemize(this.core.$element.children().toArray()),this.core.clone(this.core,b.core),a.extend(this,b.data),this):this},isProcessing:function(){return this._isProcessing},isRecycling:function(){return this.core.options.count>0&&this._isRecycling},getGroupKeys:function(){var a=[];if(this.core._isLayoutInited)for(var b,c=0;b=this.core.items[c++];)a.push(b.groupKey);return a},layout:function(){this._isProcessing=!0,this._isAppendType=!0;for(var a,b=0;a=this.core.items[b++];)a.isAppend=!0;return this.core._isLayoutInited?this.core.layout():this._waitResource(this.core.$element,function(){this.core.layout()}),this},append:function(b,c){return this._isProcessing||0===b.length?void 0:(b=a(b),this._isProcessing=!0,this._isRecycling||(this._isRecycling=this.core.items.length+b.length>=this.core.options.count),this._insert(b,c,!0),b.length)},prepend:function(b,c){return this.isRecycling()&&0!==this._removedContent&&!this._isProcessing&&0!==b.length?(b=a(b),this._isProcessing=!0,this._fit(),b.length>this._removedContent&&(b=b.slice(0,this._removedContent)),this._insert(b,c,!1),b.length):void 0},clear:function(){return this.core.$element.empty(),this.core.items.length=0,this._reset(),this.layout(),this},_getTopItem:function(){var b=null,c=1/0;return a.each(this.core.getColItems(!1),function(a,d){d&&d.position.y<c&&(c=d.position.y,b=d)}),b},getTopElement:function(){var a=this._getTopItem();return a&&a.element},_getBottomItem:function(){var b=null,c=-(1/0);return a.each(this.core.getColItems(!0),function(a,d){d&&d.position.y+d.size.outerHeight>c&&(c=d.position.y+d.size.outerHeight,b=d)}),b},getBottomElement:function(){var a=this._getBottomItem();return a&&a.element},_onlayoutComplete:function(a){for(var b,c=0,d=this._isAppendType,e=0;b=a[e++];)"undefined"!=typeof b.oldVisibility&&(b.element.style.visibility=b.oldVisibility,delete b.oldVisibility);this._topElement=this.getTopElement(),this._bottomElement=this.getBottomElement(),d===!1&&(this._isFitted=!1,this._fit(!0),c=a.length>=this.core.items.length?0:this.core.items[a.length].position.y,c>0&&(this._prevScrollTop=this._getScrollTop()+c,this.$view.scrollTop(this._prevScrollTop))),this._reset(!0),this.trigger(this._prefix+h.layoutComplete,{target:a.concat(),isAppend:d,distance:c,croppedCount:this._removedContent})},_insert:function(b,c,d){if(0!==b.length){this._isAppendType=d;for(var e,f=b.toArray(),g=a(f),h=0,i=this.core.itemize(f,c);e=i[h++];)e.isAppend=d,e.oldVisibility=e.element.style.visibility,e.element.style.visibility="hidden";d?this.core.items=this.core.items.concat(i):(this.core.items=i.concat(this.core.items.slice(0)),i=i.reverse()),this.isRecycling()&&this._adjustRange(d,g);var j=0===this.core.$element.children().length;this.core.$element[d?"append":"prepend"](g),j&&this.core.resetLayout(),this._waitResource(g,function(){this.core.layoutItems(i,!0)})}},_waitResource:function(a,b){var c=this._checkImageLoaded(a);if(c.length>0)this._waitImageLoaded(c,b);else{var d=this;setTimeout(function(){b&&d.core&&b.apply(d)},0)}},_adjustRange:function(a,b){var c,d,e=this.core.items.length-this.core.options.count;if(!(0>=e||(d=this._getDelimiterIndex(a,e))<0)){a?(c=this.core.items.slice(0,d),this.core.items=this.core.items.slice(d),this._isFitted=!1):(c=this.core.items.slice(d),this.core.items=this.core.items.slice(0,d));for(var f,g,h=0;f=c[h++];)g=f.element,d=b.index(g),-1!==d?b.splice(d,1):g.parentNode.removeChild(g);this._removedContent+=a?c.length:-c.length}},_getDelimiterIndex:function(a,b){var c,d=this.core.items.length,e=0,f=a?b-1:d-b,g=f+(a?1:-1),h=this.core.items[f].groupKey;if(null!=h&&h===this.core.items[g].groupKey)if(a){for(c=f;c>0&&h===this.core.items[c].groupKey;c--);e=0===c?-1:c+1}else{for(c=f;d>c&&h===this.core.items[c].groupKey;c++);e=c===d?-1:c}else e=a?g:f;return e},_fit:function(b){if(this.core.options.count<=0)return this._fit=function(){return!1},this._isFitted=!0,!1;if(this._isFitted)return!1;for(var c,d,e=0,f=this.core.updateCols();c=this.core.items[e++];)c.position.y-=f,b&&a.style(c.element,"top",c.position.y+"px");return this.core.updateCols(!0),d=this.core._getContainerSize().height,b&&this.core._setContainerMeasure(d,!1),this._isFitted=!0,!0},fit:function(){var a=this._getTopItem(),b=a?a.position.y:0;return this._fit(!0),b},_reset:function(a){a||(this._isFitted=!0,this._isRecycling=!1,this._removedContent=0),this._isAppendType=null,this._isProcessing=!1},_checkImageLoaded:function(b){var c=[];return b.each(function(b,d){"IMG"===d.nodeName?!d.complete&&c.push(d):!d.nodeType||1!==d.nodeType&&9!==d.nodeType&&11!==d.nodeType||(c=c.concat(a(d).find("img").filter(function(a,b){return!b.complete}).toArray()))}),c},_waitImageLoaded:function(b,c){var d=this,e=b.length,f=function(b){e--,a(b.target).off("load error"),0>=e&&c&&d.core&&c.apply(d)};a.each(b,function(b,c){a(c).on("load error",f)})},destroy:function(){this.core&&(this.core.destroy(),this.core=null),this.$view.off("resize",this._onResize).off("scroll",this._onScroll),this.off()}}),{clone:f}});